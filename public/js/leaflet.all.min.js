!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.L={})}(this,function(t){"use strict";var e=Object.freeze;function l(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}Object.freeze=function(t){return t};var o=Object.create||function(t){return n.prototype=t,new n};function n(){}function M(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var r=0;function N(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function i(t,e,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(s,e),r=!0)}}function s(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function a(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return c(t).split(/\s+/)}function f(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?o(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var d=/\{ *([\w_-]+) *\}/g;function y(t,r){return t.replace(d,function(t,e){var n=r[e];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(r)),n})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function m(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var _=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-_));return _=e+n,window.setTimeout(t,n)}var S=window.requestAnimationFrame||b("RequestAnimationFrame")||w,x=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||S!==w)return S.call(window,M(t,e));t.call(e)}function O(t){t&&x.call(window,t)}var C=(Object.freeze||Object)({freeze:e,extend:l,create:o,bind:M,lastId:r,stamp:N,throttle:i,wrapNum:s,falseFn:a,formatNum:u,trim:c,splitWords:h,setOptions:f,getParamString:p,template:y,isArray:g,indexOf:m,emptyImageUrl:v,requestFn:S,cancelFn:x,requestAnimFrame:E,cancelAnimFrame:O});function P(){}P.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var n=e.__super__=this.prototype,r=o(n);for(var i in(r.constructor=e).prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(e[i]=this[i]);return t.statics&&(l(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),l.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=l(o(r.options),t.options)),l(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},P.include=function(t){return l(this.prototype,t),this},P.mergeOptions=function(t){return l(this.prototype.options,t),this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var T={on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var s=r[i];if(s.ctx===n&&s.fn===e)return s.fn=a,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=a;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var i=this._events[t];if(i){this._firingCount=this._firingCount+1||1;for(var o=0,s=i.length;o<s;o++){var a=i[o];a.fn.call(a.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var i=M(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[N(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[N(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var k=P.extend(T);function A(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var I=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof A?t:g(t)?new A(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new A(t.x,t.y):new A(t,e,n)}function j(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function D(t,e){return!t||t instanceof j?t:new j(t,e)}function F(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function B(t,e){return t instanceof F?t:new F(t,e)}function G(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function U(t,e,n){return t instanceof G?t:g(t)&&"object"!=typeof t[0]?3===t.length?new G(t[0],t[1],t[2]):2===t.length?new G(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new G(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new G(t,e,n)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new A(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new A(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},j.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new A(this.min.x,this.max.y)},getTopRight:function(){return new A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t=("number"==typeof t[0]||t instanceof A?R:D)(t))instanceof j?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=D(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,s=i.y>=e.y&&r.y<=n.y;return o&&s},overlaps:function(t){t=D(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,s=i.y>e.y&&r.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},F.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof G)n=e=t;else{if(!(t instanceof F))return t?this.extend(U(t)||B(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new G(e.lat,e.lng),this._northEast=new G(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new F(new G(e.lat-r,e.lng-i),new G(n.lat+r,n.lng+i))},getCenter:function(){return new G((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new G(this.getNorth(),this.getWest())},getSouthEast:function(){return new G(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof G||"lat"in t?U:B)(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof F?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=B(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,s=i.lng>=e.lng&&r.lng<=n.lng;return o&&s},overlaps:function(t){t=B(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,s=i.lng>e.lng&&r.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=B(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var z,q={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new j(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!(G.prototype={equals:function(t,e){return!!t&&(t=U(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,U(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return B([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new G(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new G(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0==r&&0==i)return t;var o=t.getSouthWest(),s=t.getNorthEast();return new F(new G(o.lat-r,o.lng-i),new G(s.lat-r,s.lng-i))}},V=l({},q,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(r)*Math.cos(i)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),H=6378137,W={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new A(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new G((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new j([-(z=H*Math.PI),-z],[z,z])};function J(t,e,n,r){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function Y(t,e,n,r){return new J(t,e,n,r)}J.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new A((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X,Z=l({},V,{code:"EPSG:3857",projection:W,transformation:Y(X=.5/(Math.PI*W.R),.5,-X,.5)}),Q=l({},Z,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var n,r,i,o,s,a,l="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(s=t[n]).length;r<o;r++)l+=(r?"L":"M")+(a=s[r]).x+" "+a.y;l+=e?Nt?"z":"x":""}return l||"M0 0"}var tt=document.documentElement.style,et="ActiveXObject"in window,nt=et&&!document.addEventListener,rt="msLaunchUri"in navigator&&!("documentMode"in document),it=At("webkit"),ot=At("android"),st=At("android 2")||At("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=ot&&At("Google")&&at<537&&!("AudioNode"in window),ut=!!window.opera,ct=At("chrome"),ht=At("gecko")&&!it&&!ut&&!et,ft=!ct&&At("safari"),pt=At("phantom"),dt="OTransition"in tt,yt=0===navigator.platform.indexOf("Win"),gt=et&&"transition"in tt,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,vt="MozPerspective"in tt,bt=!window.L_DISABLE_3D&&(gt||mt||vt)&&!dt&&!pt,_t="undefined"!=typeof orientation||At("mobile"),wt=_t&&it,St=_t&&mt,xt=!window.PointerEvent&&window.MSPointerEvent,Et=!(it||!window.PointerEvent&&!xt),Ot=!window.L_NO_TOUCH&&(Et||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ct=_t&&ut,Pt=_t&&ht,Tt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",a,e),window.removeEventListener("testPassiveEventSupport",a,e)}catch(t){}return t},Lt=!!document.createElement("canvas").getContext,Nt=!(!document.createElementNS||!K("svg").createSVGRect),kt=!Nt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function At(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var It=(Object.freeze||Object)({ie:et,ielt9:nt,edge:rt,webkit:it,android:ot,android23:st,androidStock:lt,opera:ut,chrome:ct,gecko:ht,safari:ft,phantom:pt,opera12:dt,win:yt,ie3d:gt,webkit3d:mt,gecko3d:vt,any3d:bt,mobile:_t,mobileWebkit:wt,mobileWebkit3d:St,msPointer:xt,pointer:Et,touch:Ot,mobileOpera:Ct,mobileGecko:Pt,retina:Tt,passiveEvents:Mt,canvas:Lt,svg:Nt,vml:kt}),Rt=xt?"MSPointerDown":"pointerdown",jt=xt?"MSPointerMove":"pointermove",Dt=xt?"MSPointerUp":"pointerup",Ft=xt?"MSPointerCancel":"pointercancel",Bt=["INPUT","SELECT","OPTION"],Gt={},Ut=!1,zt=0;function qt(t){Gt[t.pointerId]=t,zt++}function Vt(t){Gt[t.pointerId]&&(Gt[t.pointerId]=t)}function Ht(t){delete Gt[t.pointerId],zt--}function Wt(t,e){for(var n in t.touches=[],Gt)t.touches.push(Gt[n]);t.changedTouches=[t],e(t)}var Jt=xt?"MSPointerDown":Et?"pointerdown":"touchstart",Yt=xt?"MSPointerUp":Et?"pointerup":"touchend",Xt="_leaflet_";var Zt,Qt,Kt,$t,te,ee=me(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=me(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),re="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function se(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function le(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ue(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ye(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function fe(t,e){if(void 0!==t.classList)for(var n=h(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!he(t,e)){var o=ye(t);de(t,(o?o+" ":"")+e)}}function pe(t,e){void 0!==t.classList?t.classList.remove(e):de(t,c((" "+ye(t)+" ").replace(" "+e+" "," ")))}function de(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ye(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ge(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function me(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function ve(t,e,n){var r=e||new A(0,0);t.style[ee]=(gt?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function be(t,e){t._leaflet_pos=e,bt?ve(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function _e(t){return t._leaflet_pos||new A(0,0)}if("onselectstart"in document)Zt=function(){Me(window,"selectstart",De)},Qt=function(){Ne(window,"selectstart",De)};else{var we=me(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zt=function(){if(we){var t=document.documentElement.style;Kt=t[we],t[we]="none"}},Qt=function(){we&&(document.documentElement.style[we]=Kt,Kt=void 0)}}function Se(){Me(window,"dragstart",De)}function xe(){Ne(window,"dragstart",De)}function Ee(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Oe(),te=($t=t).style.outline,t.style.outline="none",Me(window,"keydown",Oe))}function Oe(){$t&&($t.style.outline=te,te=$t=void 0,Ne(window,"keydown",Oe))}function Ce(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Pe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Te=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:re,get:ie,getStyle:oe,create:se,remove:ae,empty:le,toFront:ue,toBack:ce,hasClass:he,addClass:fe,removeClass:pe,setClass:de,getClass:ye,setOpacity:ge,testProp:me,setTransform:ve,setPosition:be,getPosition:_e,disableTextSelection:Zt,enableTextSelection:Qt,disableImageDrag:Se,enableImageDrag:xe,preventOutline:Ee,restoreOutline:Oe,getSizedParentNode:Ce,getScale:Pe});function Me(t,e,n,r){if("object"==typeof e)for(var i in e)ke(t,i,e[i],n);else for(var o=0,s=(e=h(e)).length;o<s;o++)ke(t,e[o],n,r);return this}var Le="_leaflet_events";function Ne(t,e,n,r){if("object"==typeof e)for(var i in e)Ae(t,i,e[i],n);else if(e)for(var o=0,s=(e=h(e)).length;o<s;o++)Ae(t,e[o],n,r);else{for(var a in t[Le])Ae(t,a,t[Le][a]);delete t[Le]}return this}function ke(e,t,n,r){var i=t+N(n)+(r?"_"+N(r):"");if(e[Le]&&e[Le][i])return this;var o,s,a,l,u,c,h,f,p,d,y,g,m,v,b,_,w,S,x=function(t){return n.call(r||e,t||window.event)},E=x;function O(t){var e;if(Et){if(!rt||"mouse"===t.pointerType)return;e=zt}else e=t.touches.length;if(!(1<e)){var n=Date.now(),r=n-(l||n);u=t.touches?t.touches[0]:t,c=0<r&&r<=250,l=n}}function C(t){if(c&&!u.cancelBubble){if(Et){if(!rt||"mouse"===t.pointerType)return;var e,n,r={};for(n in u)e=u[n],r[n]=e&&e.bind?e.bind(u):e;u=r}u.type="dblclick",u.button=0,s(u),l=null}}function P(t){Wt(t,g)}function T(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Wt(t,v)}Et&&0===t.indexOf("touch")?(h=e,p=x,d=i,"touchstart"===(f=t)?(b=h,_=p,w=d,S=M(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Bt.indexOf(t.target.tagName)<0))return;De(t)}Wt(t,_)}),b["_leaflet_touchstart"+w]=S,b.addEventListener(Rt,S,!1),Ut||(document.documentElement.addEventListener(Rt,qt,!0),document.documentElement.addEventListener(jt,Vt,!0),document.documentElement.addEventListener(Dt,Ht,!0),document.documentElement.addEventListener(Ft,Ht,!0),Ut=!0)):"touchmove"===f?(v=p,(m=h)["_leaflet_touchmove"+d]=T,m.addEventListener(jt,T,!1)):"touchend"===f&&(g=p,(y=h)["_leaflet_touchend"+d]=P,y.addEventListener(Dt,P,!1),y.addEventListener(Ft,P,!1))):!Ot||"dblclick"!==t||Et&&ct?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",x,!!Mt&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(x=function(t){t=t||window.event,We(e,t)&&E(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",x,!1)):("click"===t&&ot&&(x=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=ze&&n-ze;if(r&&100<r&&r<500||t.target._simulatedClick&&!t._simulated)return Fe(t);ze=n,e(t)}(t,E)}),e.addEventListener(t,x,!1)):"attachEvent"in e&&e.attachEvent("on"+t,x):(s=x,c=!1,(o=e)[Xt+Jt+(a=i)]=O,o[Xt+Yt+a]=C,o[Xt+"dblclick"+a]=s,o.addEventListener(Jt,O,!!Mt&&{passive:!1}),o.addEventListener(Yt,C,!!Mt&&{passive:!1}),o.addEventListener("dblclick",s,!1)),e[Le]=e[Le]||{},e[Le][i]=x}function Ae(t,e,n,r){var i,o,s,a,l,u,c,h,f=e+N(n)+(r?"_"+N(r):""),p=t[Le]&&t[Le][f];if(!p)return this;Et&&0===e.indexOf("touch")?(h=(u=t)["_leaflet_"+(c=e)+f],"touchstart"===c?u.removeEventListener(Rt,h,!1):"touchmove"===c?u.removeEventListener(jt,h,!1):"touchend"===c&&(u.removeEventListener(Dt,h,!1),u.removeEventListener(Ft,h,!1))):!Ot||"dblclick"!==e||Et&&ct?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",p,!!Mt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,p,!1):"detachEvent"in t&&t.detachEvent("on"+e,p):(s=(i=t)[Xt+Jt+(o=f)],a=i[Xt+Yt+o],l=i[Xt+"dblclick"+o],i.removeEventListener(Jt,s,!!Mt&&{passive:!1}),i.removeEventListener(Yt,a,!!Mt&&{passive:!1}),rt||i.removeEventListener("dblclick",l,!1)),t[Le][f]=null}function Ie(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,He(t),this}function Re(t){return ke(t,"mousewheel",Ie),this}function je(t){return Me(t,"mousedown touchstart dblclick",Ie),ke(t,"click",Ve),this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Fe(t){return De(t),Ie(t),this}function Be(t,e){if(!e)return new A(t.clientX,t.clientY);var n=Pe(e),r=n.boundingClientRect;return new A((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var Ge=yt&&ct?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function Ue(t){return rt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ge:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var ze,qe={};function Ve(t){qe[t.type]=!0}function He(t){var e=qe[t.type];return qe[t.type]=!1,e}function We(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Je=(Object.freeze||Object)({on:Me,off:Ne,stopPropagation:Ie,disableScrollPropagation:Re,disableClickPropagation:je,preventDefault:De,stop:Fe,getMousePosition:Be,getWheelDelta:Ue,fakeStop:Ve,skipped:He,isExternalTarget:We,addListener:Me,removeListener:Ne}),Ye=k.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=_e(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),be(this._el,n),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Xe=k.extend({options:{crs:Z,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=M(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(U(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ne&&bt&&!Ct&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Me(this._proxy,re,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(U(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=l({animate:n.animate},n.zoom),n.pan=l({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?clearTimeout(this._sizeTimer):this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(bt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(bt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof A?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():B(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),i),a=this.project(t.getNorthEast(),i);return{center:this.unproject(s.add(a).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=B(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=R(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ye,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){fe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(a,l,t){if(!1===(t=t||{}).animate||!bt)return this.setView(a,l,t);this._stop();var u=this.project(this.getCenter()),c=this.project(a),e=this.getSize(),h=this._zoom;a=U(a),l=void 0===l?h:l;var f=Math.max(e.x,e.y),r=f*this.getZoomScale(h,l),p=c.distanceTo(u)||1,d=1.42,y=d*d;function n(t){var e=(r*r-f*f+(t?-1:1)*y*y*p*p)/(2*(t?r:f)*y*p),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function g(t){return(Math.exp(t)-Math.exp(-t))/2}function m(t){return(Math.exp(t)+Math.exp(-t))/2}var v=n(0);var b=Date.now(),_=(n(1)-v)/d,w=t.duration?1e3*t.duration:1e3*_*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e,n,r,i,o=(Date.now()-b)/w,s=(e=o,(1-Math.pow(1-e,1.5))*_);o<=1?(this._flyToFrame=E(t,this),this._move(this.unproject(u.add(c.subtract(u).multiplyBy((r=s,f*(m(v)*(g(i=v+d*r)/m(i))-g(v))/y/p))),h),this.getScaleZoom(f/(n=s,f*(m(v)/m(v+d*n))),h),{flyTo:!0})):this._move(a,l)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=B(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),s=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),u=D([a.min.add(n),a.max.subtract(r)]);if(!u.contains(s)){this._enforcingBounds=!0;var c=o.subtract(s),h=R(s.x+c.x,s.y+c.y);(s.x<u.min.x||s.x>u.max.x)&&(h.x=o.x-c.x,0<c.x?h.x+=l.x-n.x:h.x-=l.x-r.x),(s.y<u.min.y||s.y>u.max.y)&&(h.y=o.y-c.y,0<c.y?h.y+=l.y-n.y:h.y-=l.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),i=n.divideBy(2).round(),o=r.subtract(i);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(M(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=M(this._handleGeolocationResponse,this),n=M(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new G(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=se("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new F(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=B(t),n=R(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),u=D(this.project(a,r),this.project(s,r)).getSize(),c=bt?this.options.zoomSnap:1,h=l.x/u.x,f=l.y/u.y,p=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(p,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new j(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(U(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(U(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(U(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(B(t))},distance:function(t,e){return this.options.crs.distance(U(t),U(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(t)))},mouseEventToContainerPoint:function(t){return Be(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Me(e,"scroll",this._onScroll,this),this._containerId=N(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&bt,fe(t,"leaflet-container"+(Ot?" leaflet-touch":"")+(Tt?" leaflet-retina":"")+(nt?" leaflet-oldie":"")+(ft?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),be(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(t.markerPane,"leaflet-zoom-hide"),fe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){be(this._mapPane,new A(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){be(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Ne:Me;e((this._targets[N(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),bt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[N(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!We(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||s||i||!We(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!He(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ee(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var r=l({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var i=n[0];"contextmenu"===e&&i.listens(e,!0)&&De(t);var o={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=i.getLatLng&&(!i._radius||i._radius<=10);o.containerPoint=s?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?i.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var a=0;a<n.length;a++)if(n[a].fire(e,o,!0),o.originalEvent._stopped||!1===n[a].options.bubblingMouseEvents&&-1!==m(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return _e(this._mapPane)||new A(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return D([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new j(r.subtract(i),r.add(i)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(r.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new j(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=D(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new A(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=bt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){pe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ee,n=this._proxy.style[e];ve(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ve(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(E(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(M(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&pe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E(function(){this._moveEnd(!0)},this))}});function Ze(t){return new Qe(t)}var Qe=P.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return fe(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}});Xe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var r=this._controlCorners={},i="leaflet-",o=this._controlContainer=se("div",i+"control-container",this._container);function t(t,e){var n=i+t+" "+i+e;r[t+e]=se("div",n,o)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ke=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(N(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):pe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return pe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=se("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),je(e),Re(e);var r=this._section=se("section",t+"-list");n&&(this._map.on("click",this.collapse,this),ot||Me(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=se("a",t+"-toggle",e);i.href="#",i.title="Layers",Ot?(Me(i,"click",Fe),Me(i,"click",this.expand,this)):Me(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=se("div",t+"-base",r),this._separator=se("div",t+"-separator",r),this._overlaysList=se("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&N(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(M(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;le(this._baseLayersList),le(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<i,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(N(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+N(this),r),this._layerControlInputs.push(e),e.layerId=N(t.layer),Me(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;0<=o;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;0<=i;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),$e=Qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=se("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=se("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),je(o),Me(o,"click",Fe),Me(o,"click",i,this),Me(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";pe(this._zoomInButton,e),pe(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||fe(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||fe(this._zoomInButton,e)}});Xe.mergeOptions({zoomControl:!0}),Xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))});var tn=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=se("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=se("div",e,n)),t.imperial&&(this._iScale=se("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;5280<i?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),en=Qe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=se("div","leaflet-control-attribution"),je(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Xe.mergeOptions({attributionControl:!0}),Xe.addInitHook(function(){this.options.attributionControl&&(new en).addTo(this)}),Qe.Layers=Ke,Qe.Zoom=$e,Qe.Scale=tn,Qe.Attribution=en,Ze.layers=function(t,e,n){return new Ke(t,e,n)},Ze.zoom=function(t){return new $e(t)},Ze.scale=function(t){return new tn(t)},Ze.attribution=function(t){return new en(t)};var nn=P.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:T},sn=Ot?"touchstart mousedown":"mousedown",an={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ln={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},un=k.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Me(this._dragStartTarget,sn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(un._dragging===this&&this.finishDrag(),Ne(this._dragStartTarget,sn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(un._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((un._dragging=this)._preventOutline&&Ee(this._element),Se(),Zt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ce(this._element);this._startPoint=new A(e.clientX,e.clientY),this._parentScale=Pe(n),Me(document,ln[t.type],this._onMove,this),Me(document,an[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new A(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=_e(this._element).subtract(n),fe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,O(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),be(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in pe(document.body,"leaflet-dragging"),this._lastTarget&&(pe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ln)Ne(document,ln[t],this._onMove,this),Ne(document,an[t],this._onUp,this);xe(),Qt(),this._moved&&this._moving&&(O(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,un._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var s,a,l,u=0;for(a=i+1;a<=o-1;a++)u<(l=yn(e[a],e[i],e[o],!0))&&(s=a,u=l);r<u&&(n[s]=1,t(e,n,r,i,s),t(e,n,r,s,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)s=t[r],e<(l=(a=t[i]).x-s.x)*l+(u=a.y-s.y)*u&&(n.push(t[r]),i=r);var s,a,l,u;return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(yn(t,e,n,!0))}function fn(t,e,n,r,i){var o,s,a,l=r?rn:dn(t,n),u=dn(e,n);for(rn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=dn(s=pn(t,e,o=l||u,n,i),n),o===l?(t=s,l=a):(e=s,u=a)}}function pn(t,e,n,r,i){var o,s,a=e.x-t.x,l=e.y-t.y,u=r.min,c=r.max;return 8&n?(o=t.x+a*(c.y-t.y)/l,s=c.y):4&n?(o=t.x+a*(u.y-t.y)/l,s=u.y):2&n?(o=c.x,s=t.y+l*(c.x-t.x)/a):1&n&&(o=u.x,s=t.y+l*(u.x-t.x)/a),new A(o,s,i)}function dn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function yn(t,e,n,r){var i,o=e.x,s=e.y,a=n.x-o,l=n.y-s,u=a*a+l*l;return 0<u&&(1<(i=((t.x-o)*a+(t.y-s)*l)/u)?(o=n.x,s=n.y):0<i&&(o+=a*i,s+=l*i)),a=t.x-o,l=t.y-s,r?a*a+l*l:new A(o,s)}function gn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function mn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(t)}var vn=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return yn(t,e,n)},clipSegment:fn,_getEdgeIntersection:pn,_getBitCode:dn,_sqClosestPointOnSegment:yn,isFlat:gn,_flat:mn});function bn(t,e,n){var r,i,o,s,a,l,u,c,h,f=[1,4,2,8];for(i=0,u=t.length;i<u;i++)t[i]._code=dn(t[i],e);for(s=0;s<4;s++){for(c=f[s],r=[],i=0,o=(u=t.length)-1;i<u;o=i++)a=t[i],l=t[o],a._code&c?l._code&c||((h=pn(l,a,c,e,n))._code=dn(h,e),r.push(h)):(l._code&c&&((h=pn(l,a,c,e,n))._code=dn(h,e),r.push(h)),r.push(a));t=r}return t}var _n,wn=(Object.freeze||Object)({clipPolygon:bn}),Sn={project:function(t){return new A(t.lng,t.lat)},unproject:function(t){return new G(t.y,t.x)},bounds:new j([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752.314245179,bounds:new j([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),s=o*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-s)/(1+s),o/2);return r=-n*Math.log(Math.max(a,1e-10)),new A(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),s=Math.exp(-t.y/r),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&1e-7<Math.abs(u);l++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=u=Math.PI/2-2*Math.atan(s*e)-a;return new G(a*n,t.x*n/r)}},En=(Object.freeze||Object)({LonLat:Sn,Mercator:xn,SphericalMercator:W}),On=l({},V,{code:"EPSG:3395",projection:xn,transformation:Y(_n=.5/(Math.PI*xn.R),.5,-_n,.5)}),Cn=l({},V,{code:"EPSG:4326",projection:Sn,transformation:Y(1/180,1,-1/180,.5)}),Pn=l({},q,{projection:Sn,transformation:Y(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});q.Earth=V,q.EPSG3395=On,q.EPSG3857=Z,q.EPSG900913=Q,q.EPSG4326=Cn,q.Simple=Pn;var Tn=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[N(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[N(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Xe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=N(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=N(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&N(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[N(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=N(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mn=Tn.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return N(t)}}),Ln=Mn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Mn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Mn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Nn=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=R(r),o=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Tt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),kn=Nn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return kn.imagePath||(kn.imagePath=this._detectIconPath()),(this.options.imagePath||kn.imagePath)+Nn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=se("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),An=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new un(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&pe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=_e(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=D(s.min._subtract(a).add(i),s.max._subtract(a).subtract(i));if(!l.contains(o)){var u=R((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),be(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=_e(e._icon),i=e._map.layerPointToLatLng(r);n&&be(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),In=Tn.extend({options:{icon:new kn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=U(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),fe(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(fe(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&be(this._icon,t),this._shadow&&be(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),An)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new An(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Rn=Tn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),jn=Rn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=U(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=U(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Rn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new j(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Dn=jn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=l({},n,{radius:e})),f(this,e),this._latlng=U(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Rn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===V.distance){var i=Math.PI/180,o=this._mRadius/V.R/i,s=n.project([e+o,t]),a=n.project([e-o,t]),l=s.add(a).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(u*i))/(Math.cos(e*i)*Math.cos(u*i)))/i;!isNaN(c)&&0!==c||(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-s.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),Fn=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=yn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,c=l.length;u<c;u++){var h=o(t,e=l[u-1],n=l[u],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,s,a=this._rings[0],l=a.length;if(!l)return null;for(e=t=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(r=t=0;t<l-1;t++)if(i=a[t],o=a[t+1],e<(r+=n=i.distanceTo(o)))return s=(r-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-i.x),o.y-s*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=U(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=gn(t),r=0,i=t.length;r<i;r++)n?(e[r]=U(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new A(t,t);this._pxBounds=new j([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof G,s=t.length;if(o){for(i=[],r=0;r<s;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<s;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,s,a,l=this._parts;for(r=e=0,i=this._rings.length;e<i;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=fn(a[n],a[n+1],t,n,!0))&&(l[r]=l[r]||[],l[r].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[r].push(s[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(s=(a=this._parts[n]).length)-1;r<s;i=r++)if((e||0!==r)&&hn(t,a[i],a[r])<=l)return!0;return!1}});Fn._flat=mn;var Bn=Fn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,s,a,l,u=this._rings[0],c=u.length;if(!c)return null;for(o=s=a=0,t=0,e=c-1;t<c;e=t++)n=u[t],r=u[e],i=n.y*r.x-r.y*n.x,s+=(n.x+r.x)*i,a+=(n.y+r.y)*i,o+=3*i;return l=0===o?u[0]:[s/o,a/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=Fn.prototype._convertLatLngs.call(this,t),n=e.length;return 2<=n&&e[0]instanceof G&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Fn.prototype._setLatLngs.call(this,t),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new A(e,e);if(t=new j(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=bn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,s,a,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,a=this._parts.length;i<a;i++)for(o=0,s=(l=(e=this._parts[i]).length)-1;o<l;s=o++)n=e[o],r=e[s],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||Fn.prototype._containsPoint.call(this,t,!0)}}),Gn=Ln.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=g(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Un(t,o);return s?(s.feature=Yn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Un(t,e){var n,r,i,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||qn;if(!a&&!s)return null;switch(s.type){case"Point":return zn(u,t,n=c(a),e);case"MultiPoint":for(i=0,o=a.length;i<o;i++)n=c(a[i]),l.push(zn(u,t,n,e));return new Ln(l);case"LineString":case"MultiLineString":return r=Vn(a,"LineString"===s.type?0:1,c),new Fn(r,e);case"Polygon":case"MultiPolygon":return r=Vn(a,"Polygon"===s.type?1:2,c),new Bn(r,e);case"GeometryCollection":for(i=0,o=s.geometries.length;i<o;i++){var h=Un({geometry:s.geometries[i],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Ln(l);default:throw new Error("Invalid GeoJSON object.")}}function zn(t,e,n,r){return t?t(e,n):new In(n,r&&r.markersInheritOptions&&r)}function qn(t){return new G(t[1],t[0],t[2])}function Vn(t,e,n){for(var r,i=[],o=0,s=t.length;o<s;o++)r=e?Vn(t[o],e-1,n):(n||qn)(t[o]),i.push(r);return i}function Hn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Wn(t,e,n,r){for(var i=[],o=0,s=t.length;o<s;o++)i.push(e?Wn(t[o],e-1,n,r):Hn(t[o],r));return!e&&n&&i.push(i[0]),i}function Jn(t,e){return t.feature?l({},t.feature,{geometry:e}):Yn(e)}function Yn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Xn={toGeoJSON:function(t){return Jn(this,{type:"Point",coordinates:Hn(this.getLatLng(),t)})}};function Zn(t,e){return new Gn(t,e)}In.include(Xn),Dn.include(Xn),jn.include(Xn),Fn.include({toGeoJSON:function(t){var e=!gn(this._latlngs);return Jn(this,{type:(e?"Multi":"")+"LineString",coordinates:Wn(this._latlngs,e?1:0,!1,t)})}}),Bn.include({toGeoJSON:function(t){var e=!gn(this._latlngs),n=e&&!gn(this._latlngs[0]),r=Wn(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Jn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Mn.include({toMultiPoint:function(e){var n=[];return this.eachLayer(function(t){n.push(t.toGeoJSON(e).geometry.coordinates)}),Jn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(r){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(r);var i="GeometryCollection"===t,o=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(r);if(i)o.push(e.geometry);else{var n=Yn(e);"FeatureCollection"===n.type?o.push.apply(o,n.features):o.push(n)}}}),i?Jn(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var Qn=Zn,Kn=Tn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=B(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ue(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=B(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:se("img");fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=a,e.onmousemove=a,e.onload=M(this.fire,this,"load"),e.onerror=M(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ve(this._image,n,e)},_reset:function(){var t=this._image,e=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();be(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ge(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$n=Kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:se("video");if(fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=a,e.onmousemove=a,e.onloadeddata=M(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],i=0;i<n.length;i++)r.push(n[i].src);this._url=0<n.length?r:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var s=se("source");s.src=this._url[o],e.appendChild(s)}}}}),tr=Kn.extend({_initImage:function(){var t=this._image=this._url;fe(t,"leaflet-image-layer"),this._zoomAnimated&&fe(t,"leaflet-zoom-animated"),this.options.className&&fe(t,this.options.className),t.onselectstart=a,t.onmousemove=a}}),er=Tn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ge(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ge(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ge(this._container,0),this._removeTimeout=setTimeout(M(ae,void 0,this._container),200)):ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=U(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ue(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Tn||(n=e,e=t),e instanceof Ln)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?be(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),nr=er.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){er.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Ie))},onRemove:function(t){er.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Ie))},getEvents:function(){var t=er.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=se("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=se("div",t+"-content-wrapper",e);if(this._contentNode=se("div",t+"-content",n),je(n),Re(this._contentNode),Me(n,"contextmenu",Ie),this._tipContainer=se("div",t+"-tip-container",e),this._tip=se("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=se("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Me(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&i<r?(e.height=i+"px",fe(t,o)):pe(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();be(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new A(this._containerLeft,-n-this._containerBottom);i._add(_e(this._container));var o=t.layerPointToContainerPoint(i),s=R(this.options.autoPanPadding),a=R(this.options.autoPanPaddingTopLeft||s),l=R(this.options.autoPanPaddingBottomRight||s),u=t.getSize(),c=0,h=0;o.x+r+l.x>u.x&&(c=o.x+r-u.x+l.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+n+l.y>u.y&&(h=o.y+n-u.y+l.y),o.y-h-a.y<0&&(h=o.y-a.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),Fe(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Xe.mergeOptions({closePopupOnClick:!0}),Xe.include({openPopup:function(t,e,n){return t instanceof nr||(t=new nr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Tn.include({bindPopup:function(t,e){return t instanceof nr?(f(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new nr(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Fe(t),e instanceof Rn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var rr=er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){er.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){er.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=er.prototype.getEvents.call(this);return Ot&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=se("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,s=n.offsetWidth,a=n.offsetHeight,l=R(this.options.offset),u=this._getAnchor();t="top"===o?t.add(R(-s/2+l.x,-a+l.y+u.y,!0)):"bottom"===o?t.subtract(R(s/2-l.x,-l.y,!0)):"center"===o?t.subtract(R(s/2+l.x,a/2-u.y+l.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t.add(R(l.x+u.x,u.y-a/2+l.y,!0))):(o="left",t.subtract(R(s+u.x-l.x,a/2-u.y-l.y,!0))),pe(n,"leaflet-tooltip-right"),pe(n,"leaflet-tooltip-left"),pe(n,"leaflet-tooltip-top"),pe(n,"leaflet-tooltip-bottom"),fe(n,"leaflet-tooltip-"+o),be(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ge(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Xe.include({openTooltip:function(t,e,n){return t instanceof rr||(t=new rr(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Tn.include({bindTooltip:function(t,e){return t instanceof rr?(f(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new rr(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),Ot&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(pe(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var ir=Nn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(le(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=R(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Nn.Default=kn;var or=Tn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=i(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof A?t:new A(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!nt){ge(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);ge(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(O(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:a,_initContainer:function(){this._container||(this._container=se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=se("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r}},_onUpdateLevel:a,_onRemoveLevel:a,_onCreateLevel:a,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new A(+i,+o);a.z=+s;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),r<s&&this._retainParent(i,o,s,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var s=new A(i,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();bt?ve(t.el,i,r):be(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new j(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),s=[],a=this.options.keepBuffer,l=new j(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new A(c.x,c.y))||(this._tiles[u].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var p=new A(f,h);if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var y=document.createDocumentFragment();for(f=0;f<s.length;f++)this._addTile(s[f],y);this._level.el.appendChild(y)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new F(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new A(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){fe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=a,t.onmousemove=a,nt&&this.options.opacity<1&&ge(t,this.options.opacity),ot&&!st&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),i=this.createTile(this._wrapCoords(t),M(this._tileReady,this,t));this._initTile(i),this.createTile.length<2&&E(M(this._tileReady,this,t,null,i)),be(i,n),this._tiles[r]={el:i,coords:t,current:!0},e.appendChild(i),this.fire("tileloadstart",{tile:i,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(ge(n.el,0),O(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(fe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),nt||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(M(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new A(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new j(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),sr=or.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Tt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),ot||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Me(n,"load",M(this._tileOnLoad,this,e,n)),Me(n,"error",M(this._tileOnError,this,e,n)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Tt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return y(this._url,l(e,this.options))},_tileOnLoad:function(t,e){nt?setTimeout(M(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=a,e.onerror=a,e.complete||(e.src=v,ae(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return lt||e.el.setAttribute("src",v),or.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==v))return or.prototype._tileReady.call(this,t,e,n)}});function ar(t,e){return new sr(t,e)}var lr=sr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=l({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);var i=(e=f(this,e)).detectRetina&&Tt?2:1,o=this.getTileSize();n.width=o.x*i,n.height=o.y*i,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,sr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=D(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,s=(1.3<=this._wmsVersion&&this._crs===Cn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),a=sr.prototype.getTileUrl.call(this,t);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});sr.WMS=lr,ar.wms=function(t,e){return new lr(t,e)};var ur=Tn.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),N(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=_e(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e).subtract(o),a=i.multiplyBy(-n).add(r).add(i).subtract(s);bt?ve(this._container,a,n):be(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new j(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Me(t,"mousemove",this._onMouseMove,this),Me(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Me(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,ae(this._container),Ne(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=Tt?2:1;be(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Tt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[N(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[N(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,s=t._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(r=0,i=s[n].length;r<i;r++)o=s[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!=i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!=i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ve(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(pe(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(fe(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&((n.prev=r)?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&((r.next=n)?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function hr(t){return Lt?new cr(t):null}var fr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),pr={_initContainer:function(){this._container=se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ur.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=fr("shape");fe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=fr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[N(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[N(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e=e||(t._stroke=fr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=g(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n=n||(t._fill=fr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ue(t._container)},_bringToBack:function(t){ce(t._container)}},dr=kt?fr:K,yr=ur.extend({getEvents:function(){var t=ur.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=dr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=dr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Ne(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ur.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),be(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=dr("path");t.options.className&&fe(e,t.options.className),t.options.interactive&&fe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[N(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[N(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ue(t._path)},_bringToBack:function(t){ce(t._path)}});function gr(t){return Nt||kt?new yr(t):null}kt&&yr.include(pr),Xe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e=e||(this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&hr(t)||gr(t)}});var mr=Bn.extend({initialize:function(t,e){Bn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=B(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});yr.create=dr,yr.pointsToPath=$,Gn.geometryToLayer=Un,Gn.coordsToLatLng=qn,Gn.coordsToLatLngs=Vn,Gn.latLngToCoords=Hn,Gn.latLngsToCoords=Wn,Gn.getFeature=Jn,Gn.asFeature=Yn,Xe.mergeOptions({boxZoom:!0});var vr=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Zt(),Se(),this._startPoint=this._map.mouseEventToContainerPoint(t),Me(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=se("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new j(this._point,this._startPoint),n=e.getSize();be(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ae(this._box),pe(this._container,"leaflet-crosshair")),Qt(),xe(),Ne(document,{contextmenu:Fe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(M(this._resetState,this),0);var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Xe.addInitHook("addHandler","boxZoom",vr),Xe.mergeOptions({doubleClickZoom:!0});var br=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Xe.addInitHook("addHandler","doubleClickZoom",br),Xe.mergeOptions({dragging:!0,inertia:!st,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _r=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new un(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){pe(this._map._container,"leaflet-grab"),pe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=B(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,s=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=i.multiplyBy(s/o),l=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=a.multiplyBy(u/l),h=u/(n.inertiaDeceleration*s),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),E(function(){e.panBy(f,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Xe.addInitHook("addHandler","dragging",_r),Xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wr=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Me(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ne(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Fe(t)}}});Xe.addInitHook("addHandler","keyboard",wr),Xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Sr=nn.extend({addHooks:function(){Me(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ne(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ue(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(M(this._performZoom,this),r),Fe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,s=t._limitZoom(e+(0<this._delta?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Xe.addInitHook("addHandler","scrollWheelZoom",Sr),Xe.mergeOptions({tap:!0,tapTolerance:15});var xr=nn.extend({addHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(De(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new A(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._holdTimeout=setTimeout(M(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Me(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ne(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&pe(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new A(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});Ot&&!Et&&Xe.addInitHook("addHandler","tap",xr),Xe.mergeOptions({touchZoom:Ot&&!st,bounceAtZoomLimits:!0});var Er=nn.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){pe(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend",this._onTouchEnd,this),De(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&i<1||this._zoom>e.getMaxZoom()&&1<i)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==i)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1==i&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var s=M(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(s,this,!0),De(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,O(this._animRequest),Ne(document,"touchmove",this._onTouchMove),Ne(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Xe.addInitHook("addHandler","touchZoom",Er),Xe.BoxZoom=vr,Xe.DoubleClickZoom=br,Xe.Drag=_r,Xe.Keyboard=wr,Xe.ScrollWheelZoom=Sr,Xe.Tap=xr,Xe.TouchZoom=Er,Object.freeze=e,t.version="1.6.0+HEAD.0c81bdf",t.Control=Qe,t.control=Ze,t.Browser=It,t.Evented=k,t.Mixin=on,t.Util=C,t.Class=P,t.Handler=nn,t.extend=l,t.bind=M,t.stamp=N,t.setOptions=f,t.DomEvent=Je,t.DomUtil=Te,t.PosAnimation=Ye,t.Draggable=un,t.LineUtil=vn,t.PolyUtil=wn,t.Point=A,t.point=R,t.Bounds=j,t.bounds=D,t.Transformation=J,t.transformation=Y,t.Projection=En,t.LatLng=G,t.latLng=U,t.LatLngBounds=F,t.latLngBounds=B,t.CRS=q,t.GeoJSON=Gn,t.geoJSON=Zn,t.geoJson=Qn,t.Layer=Tn,t.LayerGroup=Mn,t.layerGroup=function(t,e){return new Mn(t,e)},t.FeatureGroup=Ln,t.featureGroup=function(t){return new Ln(t)},t.ImageOverlay=Kn,t.imageOverlay=function(t,e,n){return new Kn(t,e,n)},t.VideoOverlay=$n,t.videoOverlay=function(t,e,n){return new $n(t,e,n)},t.SVGOverlay=tr,t.svgOverlay=function(t,e,n){return new tr(t,e,n)},t.DivOverlay=er,t.Popup=nr,t.popup=function(t,e){return new nr(t,e)},t.Tooltip=rr,t.tooltip=function(t,e){return new rr(t,e)},t.Icon=Nn,t.icon=function(t){return new Nn(t)},t.DivIcon=ir,t.divIcon=function(t){return new ir(t)},t.Marker=In,t.marker=function(t,e){return new In(t,e)},t.TileLayer=sr,t.tileLayer=ar,t.GridLayer=or,t.gridLayer=function(t){return new or(t)},t.SVG=yr,t.svg=gr,t.Renderer=ur,t.Canvas=cr,t.canvas=hr,t.Path=Rn,t.CircleMarker=jn,t.circleMarker=function(t,e){return new jn(t,e)},t.Circle=Dn,t.circle=function(t,e,n){return new Dn(t,e,n)},t.Polyline=Fn,t.polyline=function(t,e){return new Fn(t,e)},t.Polygon=Bn,t.polygon=function(t,e){return new Bn(t,e)},t.Rectangle=mr,t.rectangle=function(t,e){return new mr(t,e)},t.Map=Xe,t.map=function(t,e){return new Xe(t,e)};var Or=window.L;t.noConflict=function(){return window.L=Or,this},window.L=t}),function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=14)}([function(t,e){t.exports=L},function(t,e){t.exports=function(){try{return echarts}catch(t){return{}}}()},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20),c="&&",h="||",i="and",s="or",a="=",l="~",u="!"+a,f="!"+l,p=">",d=">=",y="<",g="<=",m="*",v=",",b=".",_="(",w=")",S="where",x={pathway:[],groups:{}},E={},O={},C=console.log;function P(t){var e=L(t,S),n=e[0],r=e[1];x.pathway=L(n,v);for(var i=0,o=x.pathway.length;i<o;i++)x.pathway[i]=L(x.pathway[i],b),x.pathway[i][0]==m&&x.pathway[i].shift(),0===x.pathway[i].length&&x.pathway.splice(i,1);for(var s=-1,a=-1,l=0;l<r.length;){if(r[l]===_)s=l;else if(r[l]===w&&s<(a=l)&&-1!==s){var u="gr_"+(new Date).getTime();x.groups[u]=r.substring(s+1,a),r=r.replace(_+x.groups[u]+w,u),l=-1}l+=1}!function t(e,n){var r=M(n,c),i=M(n,h);if(r!==Number.MAX_VALUE||i!==Number.MAX_VALUE)if(r<i){e.and=e.and||[];var o=L(n,c);e.and.push(o[0]),t(e.and,o[1])}else{e.or=e.or||[];var o=L(n,h);e.or.push(o[0]),t(e.or,o[1])}else x.groups[n]?(n=x.groups[n],t(e,n)):(Array.isArray(e)?e.push(n):e.or=[n],T(E.or?E.or:E.and))}(E,r)}function T(t){for(var e in t)if(t.hasOwnProperty(e))if(Array.isArray(t[e]))T(t[e]);else if("string"==typeof t[e])if(N(t[e],u)){var n=L(t[e],u);t[e]={ne:[n[0],n[1]]}}else if(N(t[e],f)){n=L(t[e],f);t[e]={nreq:[n[0],n[1]]}}else if(N(t[e],l)){n=L(t[e],l);t[e]={req:[n[0],n[1]]}}else if(N(t[e],d)){n=L(t[e],d);t[e]={ge:[n[0],n[1]]}}else if(N(t[e],p)){n=L(t[e],p);t[e]={gt:[n[0],n[1]]}}else if(N(t[e],g)){n=L(t[e],g);t[e]={le:[n[0],n[1]]}}else if(N(t[e],y)){n=L(t[e],y);t[e]={lt:[n[0],n[1]]}}else if(N(t[e],a)){n=L(t[e],a);t[e]={eq:[n[0],n[1]]}}}function M(t,e){var n=t.indexOf(e);return-1===n?Number.MAX_VALUE:n}function L(t,e){return t.split(e).map(function(t){return t.trim()})}function N(t,e){return-1<t.indexOf(e)}function k(t,e){var n=L(e,b),r=t;for(var i in n){if(!r.hasOwnProperty(n[i]))return"";r=r[n[i]]}return r=o.isDate(r)?r.valueOf():o.isDateString(r)?o.parseDateFromString(r):r.toString()}function A(t,e){var n=!1;for(var r in t){if(n=n||(r===i?I:r===s?A:R)(t[r],e),O.trace&&C(x.step,"======((( or",t[r],n),n)return n}return n}function I(t,e){var n=!0;for(var r in t){if(n=n&&(r===i?I:r===s?A:R)(t[r],e),O.trace&&C(x.step,"======((( and",t[r],n),!n)return n}return n}function R(t,e){if(x.step+=1,t.or){var n=A(t.or,e);return O.trace&&C(x.step,"OR",t,n),n}if(t.and){n=I(t.and,e);return O.trace&&C(x.step,"AND",t,n),n}if("object"===r(t))return t.eq?k(e,t.eq[0])===t.eq[1]:t.ne?k(e,t.ne[0])!==t.ne[1]:t.req?N(k(e,t.req[0]),t.req[1]):t.nreq?!N(k(e,t.nreq[0]),t.nreq[1]):t.gt?k(e,t.gt[0])>t.gt[1]:t.ge?k(e,t.ge[0])>=t.ge[1]:t.lt?k(e,t.lt[0])<t.lt[1]:t.le?k(e,t.le[0])<=t.le[1]:R(t,e)}function j(t,e,n){return x={pathway:[],groups:{},step:0},E={},O=n=n||{trace:!1},P(e),(r=function(t){var e=[];for(var n in t)R(E,t[n])&&e.push(t[n]);return e}(t))&&0<x.pathway.length?r.map(function(t){for(var e={},n=0,r=x.pathway.length;n<r;n++){var i=x.pathway[n].join(b);e[i]=k(t,i)}return e}):r;var r}void 0!==t.exports&&(t.exports=j),"undefined"!=typeof window&&(window.Query=j)},function(t,e,n){var r,i,o;i=[e,t],void 0===(o="function"==typeof(r=function(t,e){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function h(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function f(e){try{delete window[e]}catch(t){window[e]=undefined}}function p(t){var e=document.getElementById(t);if(e){document.getElementsByTagName("head")[0].removeChild(e)}}function r(o){var s=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var a=o;var l=s.timeout||n.timeout;var u=s.jsonpCallback||n.jsonpCallback;var c=undefined;return new Promise(function(t,e){var n=s.jsonpCallbackFunction||h();var r=u+"_"+n;window[n]=function(e){t({ok:true,json:function t(){return Promise.resolve(e)}});if(c)clearTimeout(c);p(r);f(n)};a+=a.indexOf("?")===-1?"?":"&";var i=document.createElement("script");i.setAttribute("src",""+a+u+"="+n);if(s.charset){i.setAttribute("charset",s.charset)}i.id=r;document.getElementsByTagName("head")[0].appendChild(i);c=setTimeout(function(){e(new Error("JSONP request to "+o+" timed out"));f(n);p(r);window[n]=function(){f(n)}},l);i.onerror=function(){e(new Error("JSONP request to "+o+" failed"));f(n);p(r);if(c)clearTimeout(c)}})}e.exports=r})?r.apply(e,i):r)||(t.exports=o)},function(t,e){t.exports=function(){try{return XLSX}catch(t){return{}}}()},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e){t.exports=function(){try{return turf}catch(t){return{}}}()},function(t,e,n){"use strict";var r=n(9);function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){var e=null,n=t.readVarint()+t.pos;for(;t.pos<n;){var r=t.readVarint()>>3;e=1==r?t.readString():2==r?t.readFloat():3==r?t.readDouble():4==r?t.readVarint64():5==r?t.readVarint():6==r?t.readSVarint():7==r?t.readBoolean():null}return e}(n))}(t.exports=i).prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e,n){"use strict";var u=n(23);function p(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(o,this,e)}function o(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){var n=t.readVarint()+t.pos;for(;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function d(t){for(var e,n,r=0,i=0,o=t.length,s=o-1;i<o;s=i++)e=t[i],r+=((n=t[s]).x-e.x)*(e.y+n.y);return r}(t.exports=p).types=["Unknown","Point","LineString","Polygon"],p.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,s=0,a=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&a.push(e),e=[]),e.push(new u(o,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&a.push(e),a},p.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,s=1/0,a=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<s&&(s=i),a<i&&(a=i),(o+=t.readSVarint())<l&&(l=o),u<o&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,l,a,u]},p.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),s=this.extent*t,a=this.extent*e,l=this.loadGeometry(),u=p.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+a)/o;t[e]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var s=d(t[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}n&&i.push(n);return i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f}},function(t,e){t.exports=function(){try{return elasticsearch}catch(t){return{}}}()},function($,t,e){(function(t){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=9007199254740991,l="[object Arguments]",r="[object Function]",i="[object GeneratorFunction]",u="[object Map]",o="[object Promise]",c="[object Set]",s="[object WeakMap]",h="[object DataView]",f=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,e="object"==(void 0===t?"undefined":a(t))&&t&&t.Object===Object&&t,d="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,y=e||d||Function("return this")();function g(e,t){return function(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,function(t){return[t,e[t]]})}var m,v,b,_=Function.prototype,w=Object.prototype,S=y["__core-js_shared__"],x=(m=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",E=_.toString,O=w.hasOwnProperty,C=w.toString,P=RegExp("^"+E.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=w.propertyIsEnumerable,M=(v=Object.keys,b=Object,function(t){return v(b(t))}),L=q(y,"DataView"),N=q(y,"Map"),k=q(y,"Promise"),A=q(y,"Set"),I=q(y,"WeakMap"),R=W(L),j=W(N),D=W(k),F=W(A),B=W(I);function G(t,e){var n,r=J(t)||function(t){return function(t){return t&&"object"==a(t)}(t)&&Y(t)}(n=t)&&O.call(n,"callee")&&(!T.call(n,"callee")||C.call(n)==l)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],i=r.length,o=!!i;for(var s in t)!e&&!O.call(t,s)||o&&("length"==s||H(s,i))||r.push(s);return r}function U(t){var e;return Z(t)&&(e=t,!(x&&x in e))&&(X(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?P:f).test(W(t))}function z(t){if(n=(e=t)&&e.constructor,r="function"==typeof n&&n.prototype||w,e!==r)return M(t);var e,n,r,i=[];for(var o in Object(t))O.call(t,o)&&"constructor"!=o&&i.push(o);return i}function q(t,e){var n,r,i=(r=e,null==(n=t)?void 0:n[r]);return U(i)?i:void 0}var V=function(t){return C.call(t)};function H(t,e){return(e=null==e?n:e)&&("number"==typeof t||p.test(t))&&-1<t&&t%1==0&&t<e}function W(t){if(null!=t){try{return E.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(L&&V(new L(new ArrayBuffer(1)))!=h||N&&V(new N)!=u||k&&V(k.resolve())!=o||A&&V(new A)!=c||I&&V(new I)!=s)&&(V=function(t){var e=C.call(t),n="[object Object]"==e?t.constructor:void 0,r=n?W(n):void 0;if(r)switch(r){case R:return h;case j:return u;case D:return o;case F:return c;case B:return s}return e});var J=Array.isArray;function Y(t){return null!=t&&("number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=n)&&!X(t);var e}function X(t){var e=Z(t)?C.call(t):"";return e==r||e==i}function Z(t){var e=a(t);return t&&("object"==e||"function"==e)}var Q,K=(Q=function(t){return(Y(t)?G:z)(t)},function(t){var e,n,r,i,o,s,a=V(t);return a==u?(e=t,n=-1,r=Array(e.size),e.forEach(function(t,e){r[++n]=[e,t]}),r):a==c?(i=t,o=-1,s=Array(i.size),i.forEach(function(t){s[++o]=[t,t]}),s):g(t,Q(t))});$.exports=K}).call(this,e(2))},function(t,e,n){"use strict";t.exports=i;var r=n(21);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,s=1/o,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function u(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;t<=i;i--)n.buf[i+r]=n.buf[i]}function h(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function b(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function w(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function S(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=S(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=_(this.buf,this.pos)+_(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=_(this.buf,this.pos)+S(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return u(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return u(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return u(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return u(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return u(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return u(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t,e,n,r=this.readVarint()+this.pos,i=this.pos;return 12<=(this.pos=r)-i&&a?(t=this.buf,e=i,n=r,a.decode(t.subarray(e,n))):function(t,e,n){var r="",i=e;for(;i<n;){var o,s,a,l=t[i],u=null,c=239<l?4:223<l?3:191<l?2:1;if(n<i+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&((u=(15&l)<<12|(63&o)<<6|63&s)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,i,r)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=l(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;127<this.buf[this.pos++];);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),w(this.buf,-1&t,this.pos),w(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),w(this.buf,-1&t,this.pos),w(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var n,r;0<=t?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:r=r+1|(n=0));if(0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(n,e),function(t,e){var n=(7&t)<<4;if(e.buf[e.pos++]|=n|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;128<=n&&c(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;128<=r&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,n){t.exports.VectorTile=n(22),t.exports.VectorTileFeature=n(9),t.exports.VectorTileLayer=n(8)},function(t,e,n){n(24),t.exports=n(25)},function(r,i,o){(function(f,p){var t,e,n;function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n=function(){"use strict";function t(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}var e=setTimeout;function l(t){return Boolean(t&&void 0!==t.length)}function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function i(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void a(r.promise,t)}s(r.promise,e)}else(1===n._state?s:a)(r.promise,n._value)})):n._deferreds.push(r)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===d(t)||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){a(e,t)}var r,i}function a(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new c(t,e,n)),n},o.prototype.finally=t,o.all=function(e){return new o(function(r,i){if(!l(e))return i(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return r([]);var s=o.length;function a(e,t){try{if(t&&("object"===d(t)||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){a(e,t)},i)}o[e]=t,0==--s&&r(o)}catch(t){i(t)}}for(var t=0;t<o.length;t++)a(t,o[t])})},o.resolve=function(e){return e&&"object"===d(e)&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){if(!l(i))return e(new TypeError("Promise.race accepts an array"));for(var n=0,r=i.length;n<r;n++)o.resolve(i[n]).then(t,e)})},o._immediateFn="function"==typeof f?function(t){f(t)}:function(t){e(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==p)return p;throw new Error("unable to locate global object")}();"Promise"in n?n.Promise.prototype.finally||(n.Promise.prototype.finally=t):n.Promise=o},"object"===d(i)&&void 0!==r?n():void 0===(e="function"==typeof(t=n)?t.call(i,o,i,r):t)||(r.exports=e)}).call(this,o(16).setImmediate,o(2))},function(t,i,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(17),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(2))},function(t,e,n){(function(t,d){!function(n,r){"use strict";if(!n.setImmediate){var i,o,e,s,a=1,l={},u=!1,c=n.document,t=Object.getPrototypeOf&&Object.getPrototypeOf(n);t=t&&t.setTimeout?t:n,i="[object process]"==={}.toString.call(n.process)?function(t){d.nextTick(function(){f(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(s="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",p,!1):n.attachEvent("onmessage",p),function(t){n.postMessage(s+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){e.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(o=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):function(t){setTimeout(f,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return l[a]=r,i(a),a++},t.clearImmediate=h}function h(t){delete l[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{h(t),u=!1}}}}function p(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(2),n(18))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(g,t,e){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){u.prototype.append=function(t,e){t=a(t),e=l(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},u.prototype.delete=function(t){delete this.map[a(t)]},u.prototype.get=function(t){var e=this.map[a(t)];return e?e[0]:null},u.prototype.getAll=function(t){return this.map[a(t)]||[]},u.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},u.prototype.set=function(t,e){this.map[a(t)]=[l(e)]},u.prototype.forEach=function(n,r){Object.getOwnPropertyNames(this.map).forEach(function(e){this.map[e].forEach(function(t){n.call(r,t,e,this)},this)},this)};var i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),n="FormData"in t,r="ArrayBuffer"in t,o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];y.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=u,t.Request=p,t.Response=y,t.fetch=function(n,r){return new Promise(function(o,s){var t;t=p.prototype.isPrototypeOf(n)&&!r?n:new p(n,r);var a=new XMLHttpRequest;var l=!1;function e(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||599<t){if(l)return;return l=!0,void s(new TypeError("Network request failed"))}var e,i,n={status:t,statusText:a.statusText,headers:(e=a,i=new u,e.getAllResponseHeaders().trim().split("\n").forEach(function(t){var e=t.trim().split(":"),n=e.shift().trim(),r=e.join(":").trim();i.append(n,r)}),i),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;l||(l=!0,o(new y(r,n)))}}a.onreadystatechange=e,a.onload=e,a.onerror=function(){l||(l=!0,s(new TypeError("Network request failed")))},a.open(t.method,t.url,!0);try{"include"===t.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&i&&(a.responseType="blob"),t.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})},t.fetch.polyfill=!0,g.exports&&(g.exports=t.fetch)}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function u(e){this.map={},e instanceof u?e.forEach(function(t,e){this.append(e,t)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if("string"==typeof(this._bodyInit=t))this._bodyText=t;else if(i&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(n&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},i?(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(e)},this.text=function(){var t,e,n,r,i,o,s,a=c(this);if(a)return a;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,n=new FileReader,r=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(i)||r.match(i),s=[t],o&&s.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,s),h(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=c(this);return t||Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var n,r,i=(e=e||{}).body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<o.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function d(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function y(t,e){e=e||{},this._initBody(t,e),this.type="default",this.status=e.status,this.ok=200<=this.status&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof u?e.headers:new u(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},function(t,e){function n(t){return Object.prototype.toString.call(t)}function r(t){return"[object String]"===n(t)}t.exports={getObjectType:n,isDate:function(t){return"[object Date]"===n(t)},isString:r,isDateString:function(t){return r(t)&&!isNaN(Date.parse(t))},parseDateFromString:function(t){return Date.parse(t)},isNumber:function(t){return"number"==typeof t}}},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=a;0<c;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;0<c;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),2<=(e+=1<=s+h?f/l:f*Math.pow(2,1-h))*l&&(s++,l/=2),c<=s+h?(a=0,s=c):1<=s+h?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;t[n+p]=255&s,p+=d,s/=256,u-=8);t[n+p-d]|=128*y}},function(t,e,n){"use strict";var i=n(8);function r(t,e,n){if(3===t){var r=new i(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}t.exports=function(t,e){this.layers=t.readFields(r,{},e)}},function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}(t.exports=r).prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return!(t instanceof r)&&Array.isArray(t)?new r(t[0],t[1]):t}},function(t,e,n){"use strict";n.r(e);var b=window.SuperMap=window.SuperMap||{};b.Components=window.SuperMap.Components||{};var M=b.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},i=b.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},C=b.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN"},d=b.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},r=b.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},o=b.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},s=b.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},u=b.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},c=b.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},a=b.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},l=b.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},h=b.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},f=b.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},p=b.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},y=b.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},g=b.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},m=b.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},v=b.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},_=b.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},w=b.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},S=b.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},x=b.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},E=b.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},O=b.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},P=b.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},T=b.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},L=b.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},N=b.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},k=b.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},A=b.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},I=b.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},R=b.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},j=b.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},D=b.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},F=b.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},B=b.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},G=b.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},U=b.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},z=b.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},q=b.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},V=b.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},H=b.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},W=b.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},J=b.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},Y=b.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},X=b.Exponent={EXP1:"EXP1",EXP2:"EXP2"},Z=b.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},Q=b.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},K=b.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},$=b.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},tt=b.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},et=b.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},nt=b.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},rt=b.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},it=b.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},ot=b.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},st=b.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},at=b.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};b.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},b.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},b.OrderType={ASC:"ASC",DESC:"DESC"},b.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},b.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},b.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},b.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"};function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ut=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.w=t?parseFloat(t):0,this.h=t?parseFloat(e):0,this.CLASS_NAME="SuperMap.Size"}var t,e,r;return t=n,(e=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new n(this.w,this.h)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&lt(t.prototype,e),r&&lt(t,r),n}();function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Size=ut;var ht=function(){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.x=t?parseFloat(t):0,this.y=e?parseFloat(e):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel",b.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}var t,e,n;return t=r,(e=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new r(this.x,this.y,this.mode)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"add",value:function(t,e){if(null==t||null==e)throw new TypeError("Pixel.add cannot receive null values");return new r(this.x+t,this.y+e)}},{key:"offset",value:function(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&ct(t.prototype,e),n&&ct(t,n),r}();b.Pixel=ht,b.inherit=function(t,e){function n(){}var r,i,o;for(n.prototype=e.prototype,t.prototype=new n,r=2,i=arguments.length;r<i;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),b.Util.extend(t.prototype,o)},b.mixin=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];for(var n=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<r.length;n++)s(this,new r[n](e))},i=0;i<r.length;i++){var o=r[i];s(n,o),s(n.prototype,o.prototype),s(n.prototype,new o)}return n;function s(t,e){var n=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e)));for(var r=0;r<n.length;r++){var i=n[r];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var o=Object.getOwnPropertyDescriptor(e,i);window.ActiveXObject?Object.defineProperty(t,i,o||{}):Object.defineProperty(t,i,o)}}}};var ft=b.String={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),n=e[0],r=1,i=e.length;r<i;r++){var o=e[r];n+=o.charAt(0).toUpperCase()+o.substring(1)}return n},format:function(t,o,s){o=o||window;return t.replace(b.String.tokenRegEx,function(t,e){for(var n,r=e.split(/\.+/),i=0;i<r.length;i++)0==i&&(n=o),n=n[r[i]];return"function"==typeof n&&(n=s?n.apply(null,s):n()),void 0===n?"undefined":n})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return b.String.numberRegEx.test(t)},numericIf:function(t){return b.String.isNumeric(t)?parseFloat(t):t}},pt=b.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var n=0;return 0<e&&(n=parseFloat(t.toPrecision(e))),n},format:function(t,e,n,r){e=void 0!==e?e:0,n=void 0!==n?n:b.Number.thousandsSeparator,r=void 0!==r?r:b.Number.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var i=t.toString().split(".");1===i.length&&null==e&&(e=0);var o,s=i[0];if(n)for(var a=/(-?[0-9]+)([0-9]{3})/;a.test(s);)s=s.replace(a,"$1"+n+"$2");if(0==e)o=s;else{var l=1<i.length?i[1]:"0";null!=e&&(l+=new Array(e-l.length+1).join("0")),o=s+r+l}return o}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return pt.limitSigDigs(this,t)});var dt=b.Function={bind:function(e,n){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var t=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(n,t)}},bindAsEventListener:function(e,n){return function(t){return e.call(n,t||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};b.Array={filter:function(t,e,n){var r=[];if(Array.prototype.filter)r=t.filter(e,n);else{var i=t.length;if("function"!=typeof e)throw new TypeError;for(var o=0;o<i;o++)if(o in t){var s=t[o];e.call(n,s,o,t)&&r.push(s)}}return r}};function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var gt,mt,vt,bt,_t,wt,St,xt,Et=b.Util=b.Util||{};function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Util.extend=function(t,e){if(t=t||{},e){for(var n in e){var r=e[n];void 0!==r&&(t[n]=r)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},b.Util.copy=function(t,e){var n;if(t=t||{},e)for(var r in t)void 0!==(n=e[r])&&(t[r]=n)},b.Util.reset=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===yt(t[e])&&t[e]instanceof Array){for(var n in t[e])t[e][n].destroy&&t[e][n].destroy();t[e].length=0}else"object"===yt(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},b.Util.getElement=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var r=arguments[e];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;t.push(r)}return t},b.Util.isElement=function(t){return!(!t||1!==t.nodeType)},b.Util.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},b.Util.removeItem=function(t,e){for(var n=t.length-1;0<=n;n--)t[n]===e&&t.splice(n,1);return t},b.Util.indexOf=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},b.Util.modifyDOMElement=function(t,e,n,r,i,o,s,a){e&&(t.id=e),n&&(t.style.left=n.x+"px",t.style.top=n.y+"px"),r&&(t.style.width=r.w+"px",t.style.height=r.h+"px"),i&&(t.style.position=i),o&&(t.style.border=o),s&&(t.style.overflow=s),0<=parseFloat(a)&&parseFloat(a)<1?(t.style.filter="alpha(opacity="+100*a+")",t.style.opacity=a):1===parseFloat(a)&&(t.style.filter="",t.style.opacity="")},b.Util.applyDefaults=function(t,e){t=t||{};var n="function"==typeof window.Event&&e instanceof window.Event;for(var r in e)(void 0===t[r]||!n&&e.hasOwnProperty&&e.hasOwnProperty(r)&&!t.hasOwnProperty(r))&&(t[r]=e[r]);return!n&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},b.Util.getParameterString=function(t){var e=[];for(var n in t){var r,i=t[n];if(null!=i&&"function"!=typeof i)r=Array.isArray(i)||"[object Object]"===i.toString()?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),e.push(encodeURIComponent(n)+"="+r)}return e.join("&")},b.Util.urlAppend=function(t,e){var n=t;if(e){var r=(t+" ").split(/[?&]/);n+=" "===r.pop()?e:r.length?"&"+e:"?"+e}return n},b.Util.DEFAULT_PRECISION=14,b.Util.toFloat=function(t,e){return null==e&&(e=b.Util.DEFAULT_PRECISION),"number"!=typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},b.Util.rad=function(t){return t*Math.PI/180},b.Util.getParameters=function(t){t=null==t?window.location.href:t;var e="";if(b.String.contains(t,"?")){var n=t.indexOf("?")+1,r=b.String.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(n,r)}for(var i={},o=e.split(/[&;]/),s=0,a=o.length;s<a;++s){var l=o[s].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(t){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),i[u]=c}}return i},b.Util.lastSeqID=0,b.Util.createUniqueID=function(t){return null==t&&(t="id_"),b.Util.lastSeqID+=1,t+b.Util.lastSeqID},b.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},b.INCHES_PER_UNIT.in=b.INCHES_PER_UNIT.inches,b.INCHES_PER_UNIT.degrees=b.INCHES_PER_UNIT.dd,b.INCHES_PER_UNIT.nmi=1852*b.INCHES_PER_UNIT.m,b.METERS_PER_INCH=.0254000508001016,b.Util.extend(b.INCHES_PER_UNIT,{Inch:b.INCHES_PER_UNIT.inches,Meter:1/b.METERS_PER_INCH,Foot:.3048006096012192/b.METERS_PER_INCH,IFoot:.3048/b.METERS_PER_INCH,ClarkeFoot:.3047972651151/b.METERS_PER_INCH,SearsFoot:.30479947153867626/b.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/b.METERS_PER_INCH,IInch:.0254/b.METERS_PER_INCH,MicroInch:254e-7/b.METERS_PER_INCH,Mil:2.54e-8/b.METERS_PER_INCH,Centimeter:.01/b.METERS_PER_INCH,Kilometer:1e3/b.METERS_PER_INCH,Yard:.9144018288036576/b.METERS_PER_INCH,SearsYard:.914398414616029/b.METERS_PER_INCH,IndianYard:.9143985307444408/b.METERS_PER_INCH,IndianYd37:.91439523/b.METERS_PER_INCH,IndianYd62:.9143988/b.METERS_PER_INCH,IndianYd75:.9143985/b.METERS_PER_INCH,IndianFoot:.30479951/b.METERS_PER_INCH,IndianFt37:.30479841/b.METERS_PER_INCH,IndianFt62:.3047996/b.METERS_PER_INCH,IndianFt75:.3047995/b.METERS_PER_INCH,Mile:1609.3472186944373/b.METERS_PER_INCH,IYard:.9144/b.METERS_PER_INCH,IMile:1609.344/b.METERS_PER_INCH,NautM:1852/b.METERS_PER_INCH,"Lat-66":110943.31648893273/b.METERS_PER_INCH,"Lat-83":110946.25736872235/b.METERS_PER_INCH,Decimeter:.1/b.METERS_PER_INCH,Millimeter:.001/b.METERS_PER_INCH,Dekameter:10/b.METERS_PER_INCH,Decameter:10/b.METERS_PER_INCH,Hectometer:100/b.METERS_PER_INCH,GermanMeter:1.0000135965/b.METERS_PER_INCH,CaGrid:.999738/b.METERS_PER_INCH,ClarkeChain:20.1166194976/b.METERS_PER_INCH,GunterChain:20.11684023368047/b.METERS_PER_INCH,BenoitChain:20.116782494375872/b.METERS_PER_INCH,SearsChain:20.11676512155/b.METERS_PER_INCH,ClarkeLink:.201166194976/b.METERS_PER_INCH,GunterLink:.2011684023368047/b.METERS_PER_INCH,BenoitLink:.20116782494375873/b.METERS_PER_INCH,SearsLink:.2011676512155/b.METERS_PER_INCH,Rod:5.02921005842012/b.METERS_PER_INCH,IntnlChain:20.1168/b.METERS_PER_INCH,IntnlLink:.201168/b.METERS_PER_INCH,Perch:5.02921005842012/b.METERS_PER_INCH,Pole:5.02921005842012/b.METERS_PER_INCH,Furlong:201.1684023368046/b.METERS_PER_INCH,Rood:3.778266898/b.METERS_PER_INCH,CapeFoot:.3047972615/b.METERS_PER_INCH,Brealey:375/b.METERS_PER_INCH,ModAmFt:.304812252984506/b.METERS_PER_INCH,Fathom:1.8288/b.METERS_PER_INCH,"NautM-UK":1853.184/b.METERS_PER_INCH,"50kilometers":5e4/b.METERS_PER_INCH,"150kilometers":15e4/b.METERS_PER_INCH}),b.Util.extend(b.INCHES_PER_UNIT,{mm:b.INCHES_PER_UNIT.Meter/1e3,cm:b.INCHES_PER_UNIT.Meter/100,dm:100*b.INCHES_PER_UNIT.Meter,km:1e3*b.INCHES_PER_UNIT.Meter,kmi:b.INCHES_PER_UNIT.nmi,fath:b.INCHES_PER_UNIT.Fathom,ch:b.INCHES_PER_UNIT.IntnlChain,link:b.INCHES_PER_UNIT.IntnlLink,"us-in":b.INCHES_PER_UNIT.inches,"us-ft":b.INCHES_PER_UNIT.Foot,"us-yd":b.INCHES_PER_UNIT.Yard,"us-ch":b.INCHES_PER_UNIT.GunterChain,"us-mi":b.INCHES_PER_UNIT.Mile,"ind-yd":b.INCHES_PER_UNIT.IndianYd37,"ind-ft":b.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/b.METERS_PER_INCH}),b.DOTS_PER_INCH=96,b.Util.normalizeScale=function(t){return 1<t?1/t:t},b.Util.getResolutionFromScale=function(t,e){var n;t&&(null==e&&(e="degrees"),n=1/(b.Util.normalizeScale(t)*b.INCHES_PER_UNIT[e]*b.DOTS_PER_INCH));return n},b.Util.getScaleFromResolution=function(t,e){return null==e&&(e="degrees"),t*b.INCHES_PER_UNIT[e]*b.DOTS_PER_INCH},b.IS_GECKO=-1===(gt=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==gt.indexOf("gecko"),b.Browser=(bt=vt="",_t="pc",-1<(wt=navigator.userAgent.toLowerCase()).indexOf("msie")||-1<wt.indexOf("trident")&&-1<wt.indexOf("rv")?(vt="msie",mt=wt.match(/msie ([\d.]+)/)||wt.match(/rv:([\d.]+)/)):-1<wt.indexOf("chrome")?(vt="chrome",mt=wt.match(/chrome\/([\d.]+)/)):-1<wt.indexOf("firefox")?(vt="firefox",mt=wt.match(/firefox\/([\d.]+)/)):-1<wt.indexOf("opera")?(vt="opera",mt=wt.match(/version\/([\d.]+)/)):-1<wt.indexOf("safari")&&(vt="safari",mt=wt.match(/version\/([\d.]+)/)),bt=mt?mt[1]:"",-1<wt.indexOf("ipad")||-1<wt.indexOf("ipod")||-1<wt.indexOf("iphone")?_t="apple":-1<wt.indexOf("android")&&(bt=(mt=wt.match(/version\/([\d.]+)/))?mt[1]:"",_t="android"),{name:vt,version:bt,device:_t}),b.Util.getBrowser=function(){return b.Browser},b.Util.isSupportCanvas=(St=!0,xt=b.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===xt.name&&parseFloat(xt.version)<5&&(St=!1),"safari"===xt.name&&parseFloat(xt.version)<4&&(St=!1),"opera"===xt.name&&parseFloat(xt.version)<10&&(St=!1),"msie"===xt.name&&parseFloat(xt.version)<9&&(St=!1)):St=!1,St),b.Util.supportCanvas=function(){return b.Util.isSupportCanvas},b.INCHES_PER_UNIT.degree=b.INCHES_PER_UNIT.dd,b.INCHES_PER_UNIT.meter=b.INCHES_PER_UNIT.m,b.INCHES_PER_UNIT.foot=b.INCHES_PER_UNIT.ft,b.INCHES_PER_UNIT.inch=b.INCHES_PER_UNIT.inches,b.INCHES_PER_UNIT.mile=b.INCHES_PER_UNIT.mi,b.INCHES_PER_UNIT.kilometer=b.INCHES_PER_UNIT.km,b.INCHES_PER_UNIT.yard=b.INCHES_PER_UNIT.yd,b.Util.isInTheSameDomain=function(t){if(!t)return!0;var e=t.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===e)return!0;var i,o=i=t.substring(0,e),s=n.substring(r+2);r=s.indexOf("/");var a=s.indexOf(":"),l=s.substring(0,r),u=document.location.protocol;if(-1!==a||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==o.toLowerCase())return!1;var c=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var h,f=o.substring(0,e);return-1!==c?h=o.substring(0,c):(h=o.substring(0,e),f+=":"+("http:"===i.toLowerCase()?80:443)),h===document.domain&&f===l},b.Util.calculateDpi=function(t,e,n,r,i){if(t&&e&&n){var o,s=t.getWidth(),a=t.getHeight(),l=e.w,u=e.h;if(i=i||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var c=s/l,h=a/u;o=254/(h<c?c:h)/n/(2*Math.PI*i/360)/1e4}else{o=254/(s/l)/n/1e4}return o}},b.Util.toJSON=function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e=(e=(e=(e=(e=(e=(e='"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n=[],r=0,i=e.length;r<i;r++)n.push(b.Util.toJSON(e[r]));return"["+n.join(",")+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"!==yt(e))return e.toString();if(e.length){for(var o=[],s=0,a=e.length;s<a;s++)o.push(b.Util.toJSON(e[s]));return"["+o.join(",")+"]"}var l=[];for(var u in e)"function"!=typeof e[u]&&"CLASS_NAME"!==u&&"parent"!==u&&l.push("'"+u+"':"+b.Util.toJSON(e[u]));return 0<l.length?"{"+l.join(",")+"}":"{}"}},b.Util.getResolutionFromScaleDpi=function(t,e,n,r){return r=r||6378137,n=n||"",0<t&&0<e?(t=b.Util.normalizeScale(t),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/e/t/(2*Math.PI*r/360)/1e4:254/e/t/1e4):-1},b.Util.getScaleFromResolutionDpi=function(t,e,n,r){return r=r||6378137,n=n||"",0<t&&0<e?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/e/t/(2*Math.PI*r/360)/1e4:254/e/t/1e4:-1},b.Util.transformResult=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},b.Util.copyAttributes=function(t,e){if(t=t||{},e)for(var n in e){var r=e[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(t[n]=r)}return t},b.Util.copyAttributesWithClip=function(t,e,n){if(t=t||{},e)for(var r in e){var i=!1;if(n&&n.length)for(var o=0,s=n.length;o<s;o++)if(r===n[o]){i=!0;break}if(!0!==i){var a=e[r];void 0!==a&&"CLASS_NAME"!==r&&"function"!=typeof a&&(t[r]=a)}}return t},b.Util.cloneObject=function(t){if(null===t||"object"!==yt(t))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array)return t.slice(0);if(t instanceof Object){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=b.Util.cloneObject(t[r]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},b.Util.lineIntersection=function(t,e,n,r){var i,o,s=null,a=(r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x),l=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),u=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(0!=u)o=l/u,s=0<=(i=a/u)&&o<=1&&i<=1&&0<=o?new b.Geometry.Point(t.x+i*(e.x-t.x),t.y+i*(e.y-t.y)):"No Intersection";else if(0==a&&0==l){var c=Math.max(t.y,e.y),h=Math.min(t.y,e.y),f=Math.max(t.x,e.x),p=Math.min(t.x,e.x);s=(n.y>=h&&n.y<=c||r.y>=h&&r.y<=c)&&n.x>=p&&n.x<=f||r.x>=p&&r.x<=f?"Coincident":"Parallel"}else s="Parallel";return s},b.Util.getTextBounds=function(t,e,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",t.fontSize&&(n.style.fontSize=t.fontSize),t.fontFamily&&(n.style.fontFamily=t.fontFamily),t.fontWeight&&(n.style.fontWeight=t.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=e;var r=n.clientWidth,i=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:i}};var Ct=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Et.isArray(t)&&(e=t[1],t=t[0]),this.lon=t?Et.toFloat(t):0,this.lat=e?Et.toFloat(e):0,this.CLASS_NAME="SuperMap.LonLat"}var t,e,r;return t=n,r=[{key:"fromString",value:function(t){var e=t.split(",");return new n(e[0],e[1])}},{key:"fromArray",value:function(t){var e=Et.isArray(t);return new n(e&&t[0],e&&t[1])}}],(e=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new n(this.lon,this.lat)}},{key:"add",value:function(t,e){if(null==t||null==e)throw new TypeError("LonLat.add cannot receive null values");return new n(this.lon+Et.toFloat(t),this.lat+Et.toFloat(e))}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}},{key:"wrapDateLine",value:function(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&Ot(t.prototype,e),r&&Ot(t,r),n}();function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tt=function(){function i(t,e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Et.isArray(t)&&(r=t[3],n=t[2],e=t[1],t=t[0]),this.left=null!=t?Et.toFloat(t):this.left,this.bottom=null!=e?Et.toFloat(e):this.bottom,this.right=null!=n?Et.toFloat(n):this.right,this.top=null!=r?Et.toFloat(r):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,e,n;return t=i,n=[{key:"fromString",value:function(t,e){var n=t.split(",");return i.fromArray(n,e)}},{key:"fromArray",value:function(t,e){return!0===e?new i(t[1],t[0],t[3],t[2]):new i(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new i(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l"}}],(e=[{key:"clone",value:function(){return new i(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(t,e){null==t&&(t=6);var n=Math.pow(10,t),r=Math.round(this.left*n)/n,i=Math.round(this.bottom*n)/n,o=Math.round(this.right*n)/n,s=Math.round(this.top*n)/n;return!0===e?i+","+r+","+s+","+o:r+","+i+","+o+","+s}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new ut(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new ht((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new Ct((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,e){var n,r;return t=t||1,null==e&&(e=this.getCenterLonLat()),r="SuperMap.LonLat"===e.CLASS_NAME?(n=e.lon,e.lat):(n=e.x,e.y),new i((this.left-n)*t+n,(this.bottom-r)*t+r,(this.right-n)*t+n,(this.top-r)*t+r)}},{key:"add",value:function(t,e){if(null==t||null==e)throw new TypeError("Bounds.add cannot receive null values");return new i(this.left+t,this.bottom+e,this.right+t,this.top+e)}},{key:"extend",value:function(t){var e=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":e=new i(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":e=new i(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":e=t}e&&(((this.centerLonLat=null)==this.left||e.left<this.left)&&(this.left=e.left),(null==this.bottom||e.bottom<this.bottom)&&(this.bottom=e.bottom),(null==this.right||e.right>this.right)&&(this.right=e.right),(null==this.top||e.top>this.top)&&(this.top=e.top))}}},{key:"containsLonLat",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),e=e||{};var n=this.contains(t.lon,t.lat,e.inclusive),r=e.worldBounds;if(r&&!n){var i=r.getWidth(),o=(r.left+r.right)/2,s=Math.round((t.lon-o)/i);n=this.containsLonLat({lon:t.lon-s*i,lat:t.lat},{inclusive:e.inclusive})}return n}},{key:"containsPixel",value:function(t,e){return this.contains(t.x,t.y,e)}},{key:"contains",value:function(t,e,n){if(null==n&&(n=!0),null==t||null==e)return!1;var r=!1;return r=n?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,r}},{key:"intersectsBounds",value:function(t,e){if("boolean"==typeof e&&(e={inclusive:e}),(e=e||{}).worldBounds){var n=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else n=this;null==e.inclusive&&(e.inclusive=!0);var r=!1,i=n.left===t.right||n.right===t.left||n.top===t.bottom||n.bottom===t.top;if(e.inclusive||!i){var o=t.bottom>=n.bottom&&t.bottom<=n.top||n.bottom>=t.bottom&&n.bottom<=t.top,s=t.top>=n.bottom&&t.top<=n.top||n.top>t.bottom&&n.top<t.top,a=t.left>=n.left&&t.left<=n.right||n.left>=t.left&&n.left<=t.right,l=t.right>=n.left&&t.right<=n.right||n.right>=t.left&&n.right<=t.right;r=(o||s)&&(a||l)}if(e.worldBounds&&!r){var u=e.worldBounds,c=u.getWidth(),h=!u.containsBounds(n),f=!u.containsBounds(t);h&&!f?(t=t.add(-c,0),r=n.intersectsBounds(t,{inclusive:e.inclusive})):f&&!h&&(n=n.add(-c,0),r=t.intersectsBounds(n,{inclusive:e.inclusive}))}return r}},{key:"containsBounds",value:function(t,e,n){null==e&&(e=!1),null==n&&(n=!0);var r=this.contains(t.left,t.bottom,n),i=this.contains(t.right,t.bottom,n),o=this.contains(t.left,t.top,n),s=this.contains(t.right,t.top,n);return e?r||i||o||s:r&&i&&o&&s}},{key:"determineQuadrant",value:function(t){var e="",n=this.getCenterLonLat();return e+=t.lat<n.lat?"b":"t",e+=t.lon<n.lon?"l":"r"}},{key:"wrapDateLine",value:function(t,e){var n=(e=e||{}).leftTolerance||0,r=e.rightTolerance||0,i=this.clone();if(t){for(var o=t.getWidth();i.left<t.left&&i.right-r<=t.left;)i=i.add(o,0);for(;i.left+n>=t.right&&i.right>t.right;)i=i.add(-o,0);var s=i.left+n;s<t.right&&s>t.left&&i.right-r>t.right&&(i=i.add(-o,0))}return i}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Pt(t.prototype,e),n&&Pt(t,n),i}();function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Bounds=Tt;var Lt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Geometry",this.id=Et.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new t}},{key:"setBounds",value:function(t){t&&(this.bounds=t.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(t){this.getBounds()?this.bounds.extend(t):this.setBounds(t)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(){}},{key:"getArea",value:function(){return 0}}])&&Mt(e.prototype,n),r&&Mt(e,r),t}();function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function It(t,e,n){return(It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry=Lt;var Dt=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=At(this,Rt(r).call(this))).components=[],(e.componentTypes=null)!=t&&e.addComponents(t),e.CLASS_NAME="SuperMap.Geometry.Collection",e.geometryType="Collection",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(r,Lt),t=r,(e=[{key:"destroy",value:function(){this.components.length=0,this.components=null,It(Rt(r.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var t=new r,e=0,n=this.components.length;e<n;e++)t.addComponent(this.components[e].clone());return Et.applyDefaults(t,this),t}},{key:"getComponentsString",value:function(){for(var t=[],e=0,n=this.components.length;e<n;e++)t.push(this.components[e].toShortString());return t.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var t=new Tt,e=this.components;if(e)for(var n=0,r=e.length;n<r;n++)t.extend(e[n].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}},{key:"addComponents",value:function(t){Et.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.addComponent(t[e])}},{key:"addComponent",value:function(t,e){var n=!1;if(t&&(null==this.componentTypes||-1<Et.indexOf(this.componentTypes,t.CLASS_NAME))){if(null!=e&&e<this.components.length){var r=this.components.slice(0,e),i=this.components.slice(e,this.components.length);r.push(t),this.components=r.concat(i)}else this.components.push(t);(t.parent=this).clearBounds(),n=!0}return n}},{key:"removeComponents",value:function(t){var e=!1;Et.isArray(t)||(t=[t]);for(var n=t.length-1;0<=n;--n)e=this.removeComponent(t[n])||e;return e}},{key:"removeComponent",value:function(t){return Et.removeItem(this.components,t),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var t=0,e=0,n=this.components.length;e<n;e++)t+=this.components[e].getArea();return t}},{key:"equals",value:function(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(Et.isArray(t.components)&&t.components.length===this.components.length){for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(t.components[n])){e=!1;break}}else e=!1;else e=!1;return e}},{key:"getVertices",value:function(t){for(var e=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(e,this.components[n].getVertices(t));return e}}])&&kt(t.prototype,e),n&&kt(t,n),r}();function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(t,e){return!e||"object"!==Ft(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.Collection=Dt;var qt=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Gt(this,Ut(n).call(this,t))).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.MultiPoint",e.geometryType="MultiPoint",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(n,Dt),t=n,(e=[{key:"addPoint",value:function(t,e){this.addComponent(t,e)}},{key:"removePoint",value:function(t){this.removeComponent(t)}}])&&Bt(t.prototype,e),r&&Bt(t,r),n}();function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.MultiPoint=qt;var Yt=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Ht(this,Wt(n).call(this,t))).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],e.CLASS_NAME="SuperMap.Geometry.Curve",e.geometryType="Curve",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(n,qt),n}();function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qt(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Kt(t,e,n){return(Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.Curve=Yt;var ee=function(){function o(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(i=Qt(this,$t(o).call(this,t,e,n,r))).x=parseFloat(t),i.y=parseFloat(e),i.tag=r||0==r?parseFloat(r):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(o,Lt),t=o,(e=[{key:"clone",value:function(t){return null==t&&(t=new o(this.x,this.y)),Et.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Tt(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"move",value:function(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,Kt($t(o.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&Zt(t.prototype,e),n&&Zt(t,n),o}();function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e){return!e||"object"!==ne(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function oe(t,e,n){return(oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=se(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.Point=ee;var le=function(){function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=ie(this,se(l).call(this,t))).CLASS_NAME="SuperMap.Geometry.LineString",e.geometryType="LineString",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(l,Yt),t=l,n=[{key:"calculateCircle",value:function(t){if(t.length<3)return t;var e={},n=t[0],r=t[1],i=t[2],o=0,s=0,a=!0,l=0,u=0,c=0,h=[],f=(i.y-n.y)/(i.x-n.x),p=i.y-f*i.x;if(i.x!=n.x&&i.y!=n.y&&r.y==f*r.x+p||i.x==n.x&&r.x==n.x||i.y==n.y&&r.y==n.y||i.x==n.x&&i.y==n.y||i.x==r.x&&i.y==r.y||n.x==r.x&&n.y==r.y)h.push(n),h.push(r),h.push(i);else{var d=(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y))*(2*(i.y-n.y))-(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))*(2*(r.y-n.y)),y=2*(r.x-n.x)*(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))-2*(i.x-n.x)*(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y)),g=4*((r.x-n.x)*(i.y-n.y)-(i.x-n.x)*(r.y-n.y));e.x=d/g,e.y=y/g;var m=(2*(o=Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)))*o-((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y)))/(2*o*o);m=(m=1<=m?1:m)<=-1?-1:m,c=180*Math.acos(m)/Math.PI,s=(c=i.x==n.x?e.x>n.x&&r.x>n.x||e.x<n.x&&r.x<n.x?360-c:c:e.y>f*e.x+p&&r.y>f*r.x+p||e.y<f*e.x+p&&r.y<f*r.x+p?360-c:c)/72,i.y!=n.y?i.x==n.x?i.y>n.y?r.x<n.x&&(a=!1):r.x>n.x&&(a=!1):i.x<n.x?r.y<f*r.x+p&&(a=!1):r.y>f*r.x+p&&(a=!1):i.x>n.x?r.y>n.y&&(a=!1):r.y<n.y&&(a=!1);var v=(n.y-e.y)/(n.x-e.x),b=0<=v?180*Math.atan(v)/Math.PI:Math.abs(180*Math.atan(v)/Math.PI)+90,_=Math.abs(e.y);n.y==_&&_==i.y&&n.x<i.x&&(b+=180);var w=n.y-e.y;h.push(n);for(var S=1;S<72;S++){l=s*S,u=b,a?0<=w?0<=v?u+=l:u=180-(u-90)+l:u=0<v?u-180+l:90-u+l:0<=w?0<=v?u-=l:u=180-(u-90)-l:u=0<=v?u-180-l:90-u-l,u=u*Math.PI/180;var x=e.x+o*Math.cos(u),E=e.y+o*Math.sin(u);h.push(new ee(x,E))}h.push(i)}return h}},{key:"createLineEPS",value:function(t){var e=[],n=t.length;if(n<2)return t;for(var r=0;r<n;){if("LTypeArc"==t[r].type){var i=l.createLineArc(e,r,n,t);e=i[0],r=i[1]}else e.push(t[r]),r++}return e}},{key:"createLineArc",value:function(t,e,n,r){if(0==e){var i=l.addPointEPS(r,e,n,"LTypeArc");Array.prototype.push.apply(t,i[0]),e=i[1]+1}else if(e==n-1){var o=[r[e-1],r[e]],s=l.calculateCircle(o);Array.prototype.push.apply(t,s),e++}else{var a=l.addPointEPS(r,e,n,"LTypeArc");t.pop(),Array.prototype.push.apply(t,a[0]),e=a[1]+1}return[t,e]}},{key:"addPointEPS",value:function(t,e,n,r){var i,o=[],s=e+1;return 0==e?Array.prototype.push.apply(o,[t[e],t[e+1]]):e==n-1?Array.prototype.push.apply(o,[t[e-1],t[e]]):Array.prototype.push.apply(o,[t[e-1],t[e],t[e+1]]),"LTypeCurve"==r?i=l.calculatePointsFBZN(o):"LTypeArc"==r&&(i=l.calculateCircle(o)),[i,s]}}],(e=[{key:"removeComponent",value:function(t){var e=this.components&&2<this.components.length;return e&&oe(se(l.prototype),"removeComponent",this).apply(this,arguments),e}},{key:"getSortedSegments",value:function(){for(var t,e,n=this.components.length-1,r=new Array(n),i=0;i<n;++i)t=this.components[i],e=this.components[i+1],t.x<e.x?r[i]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:r[i]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};return r.sort(function(t,e){return t.x1-e.x1})}},{key:"getVertices",value:function(t){return!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&re(t.prototype,e),n&&re(t,n),l}();function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function he(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function fe(t,e,n){return(fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pe(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function de(t,e){return(de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.LineString=le;var ye=function(){function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=he(this,pe(i).call(this,t,e,n))).x=parseFloat(t),r.y=parseFloat(e),r.text=n.toString(),r.bsInfo={h:null,w:null},r.element=document.createElement("span"),r.CLASS_NAME="SuperMap.Geometry.GeoText",r.geometryType="GeoText",r}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}(i,Lt),t=i,(e=[{key:"destroy",value:function(){fe(pe(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new ee(this.x,this.y)}},{key:"clone",value:function(t){return null==t&&(t=new i(this.x,this.y,this.text)),Et.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Tt(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(t,e,n,r){var i,o,s,a,l=Et.cloneObject(t),u=(r.label||this.text).split("\n").length;if(e=parseFloat(e),n=parseFloat(n),1<u&&(n=parseFloat(n)*u),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":l.x+=e/2,l.y+=n/2;break;case"lm":l.x+=e/2;break;case"lb":l.x+=e/2,l.y-=n/2;break;case"ct":l.y+=n/2;break;case"cb":l.y-=n/2;break;case"rt":l.x-=e/2,l.y+=n/2;break;case"rm":l.x-=e/2;break;case"rb":l.x-=e/2,l.y-=n/2}return this.bsInfo.h=n,this.bsInfo.w=e,i=l.x-parseFloat(e)/2,o=l.y+parseFloat(n)/2,a=l.x+parseFloat(e)/2,s=l.y-parseFloat(n)/2,new Tt(i,o,a,s)}},{key:"getLabelPxBoundsByText",value:function(t,e){var n,r,i,o,s=this.getLabelPxSize(e),a=Et.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":a.x+=s.w/2,a.y+=s.h/2;break;case"lm":a.x+=s.w/2;break;case"lb":a.x+=s.w/2,a.y-=s.h/2;break;case"ct":a.y+=s.h/2;break;case"cb":a.y-=s.h/2;break;case"rt":a.x-=s.w/2,a.y+=s.h/2;break;case"rm":a.x-=s.w/2;break;case"rb":a.x-=s.w/2,a.y-=s.h/2}return this.bsInfo.h=s.h,this.bsInfo.w=s.w,n=a.x-s.w/2,r=a.y+s.h/2,o=e.fontStyle&&"italic"===e.fontStyle?a.x+s.w/2+parseInt(parseFloat(e.fontSize)/2):a.x+s.w/2,i=a.y-s.h/2,new Tt(n,r,o,i)}},{key:"getLabelPxSize",value:function(t){var e,n,r,i,o=parseFloat(t.strokeWidth);e=t.label||this.text,n=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var s=e.split("\n"),a=s.length;i=1<a?n*a+a+o+.2*n:n+o+.2*n+1,r=0,this.labelWTmp&&r<this.labelWTmp&&(r=this.labelWTmp);for(var l=0;l<a;l++){var u=this.getTextCount(s[l]),c=this.labelWTmp=Et.getTextBounds(t,s[l],this.element).textWidth+ +u.textC+o;r<c&&(r=c)}var h=new Object;return h.h=i,h.w=r,h}},{key:"getTextCount",value:function(t){for(var e={},n=0,r=0,i=0;i<t.length;i++)255<t.charCodeAt(i)?n++:r++;return e.cnC=n,e.enC=r,e.textC=t.length,e}}])&&ce(t.prototype,e),n&&ce(t,n),i}();function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function be(t,e,n){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_e(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _e(t){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){return(we=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.GeoText=ye;var Se=function(){function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=ve(this,_e(o).call(this,t))).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.LinearRing",e.geometryType="LinearRing",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&we(t,e)}(o,le),t=o,(e=[{key:"addComponent",value:function(t,e){var n=!1,r=this.components.pop();null==e&&t.equals(r)||(n=be(_e(o.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return be(_e(o.prototype),"addComponent",this).apply(this,[i]),n}},{key:"removeComponent",value:function(t){var e=this.components&&3<this.components.length;if(e){this.components.pop(),be(_e(o.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];be(_e(o.prototype),"addComponent",this).apply(this,[n])}return e}},{key:"getArea",value:function(){var t=0;if(this.components&&2<this.components.length){for(var e=0,n=0,r=this.components.length;n<r-1;n++){var i=this.components[n],o=this.components[n+1];e+=(i.x+o.x)*(o.y-i.y)}t=-e/2}return t}},{key:"getVertices",value:function(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}])&&me(t.prototype,e),n&&me(t,n),o}();function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return(Ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.LinearRing=Se;var Pe=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Ee(this,Oe(n).call(this,t))).componentTypes=["SuperMap.Geometry.LineString"],e.CLASS_NAME="SuperMap.Geometry.MultiLineString",e.geometryType="MultiLineString",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(n,Dt),n}();function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,e){return!e||"object"!==Te(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ne(t,e){return(Ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.MultiLineString=Pe;var ke=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Me(this,Le(n).call(this,t))).componentTypes=["SuperMap.Geometry.Polygon"],e.CLASS_NAME="SuperMap.Geometry.MultiPolygon",e.geometryType="MultiPolygon",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ne(t,e)}(n,Dt),n}();function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function je(t){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.MultiPolygon=ke;var Fe=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Re(this,je(n).call(this,t))).componentTypes=["SuperMap.Geometry.LinearRing"],e.CLASS_NAME="SuperMap.Geometry.Polygon",e.geometryType="Polygon",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(n,Dt),t=n,(e=[{key:"getArea",value:function(){var t=0;if(this.components&&0<this.components.length){t+=Math.abs(this.components[0].getArea());for(var e=1,n=this.components.length;e<n;e++)t-=Math.abs(this.components[e].getArea())}return t}}])&&Ie(t.prototype,e),r&&Ie(t,r),n}();function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e){return!e||"object"!==Be(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ze(t){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qe(t,e){return(qe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Geometry.Polygon=Fe;var Ve=function(){function o(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(i=Ue(this,ze(o).call(this,t,e,n,r))).x=t,i.y=e,i.width=n,i.height=r,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qe(t,e)}(o,Lt),t=o,(e=[{key:"calculateBounds",value:function(){this.bounds=new Tt(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Ge(t.prototype,e),n&&Ge(t,n),o}();function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Geometry.Rectangle=Ve;var We=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.value=t||"",this.name=e||"token",this.CLASS_NAME="SuperMap.Credential"}var t,e,r;return t=n,(e=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&He(t.prototype,e),r&&He(t,r),n}();We.CREDENTIAL=null,b.Credential=We;b.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};function e(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(t){var e,n=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(n&&(n[1]||n[7])){var r=parseInt(n[1],10)||0,i=parseInt(n[2],10)-1||0,o=parseInt(n[3],10)||1;e=new Date(Date.UTC(r,i,o));var s=n[7];if(s){var a=parseInt(n[4],10),l=parseInt(n[5],10),u=parseFloat(n[6]),c=0|u,h=Math.round(1e3*(u-c));if(e.setUTCHours(a,l,c,h),"Z"!==s){var f=-1e3*(60*parseInt(s,10)*60+60*(parseInt(n[8],10)||0));e=new Date(e.getTime()+f)}}}else e=new Date("invalid");return e}};var Je=b.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&1<t.touches.length},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){for(var n=b.Event.element(t);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=e.toUpperCase());)n=n.parentNode;return n},observe:function(t,e,n,r){var i=Et.getElement(t);if(r=r||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var o="eventCacheID_";i.id&&(o=i.id+"_"+o),i._eventCacheID=Et.createUniqueID(o)}var s=i._eventCacheID;this.observers[s]||(this.observers[s]=[]),this.observers[s].push({element:i,name:e,observer:n,useCapture:r}),i.addEventListener?"mousewheel"===e?i.addEventListener(e,n,{useCapture:r,passive:!1}):i.addEventListener(e,n,r):i.attachEvent&&i.attachEvent("on"+e,n)},stopObservingElement:function(t){var e=Et.getElement(t)._eventCacheID;this._removeElementObservers(b.Event.observers[e])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;0<=e;e--){var n=t[e],r=new Array(n.element,n.name,n.observer,n.useCapture);b.Event.stopObserving.apply(this,r)}},stopObserving:function(t,e,n,r){r=r||!1;var i=Et.getElement(t),o=i._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.detachEvent)&&(e="keydown");var s=!1,a=b.Event.observers[o];if(a)for(var l=0;!s&&l<a.length;){var u=a[l];if(u.name===e&&u.observer===n&&u.useCapture===r){a.splice(l,1),0==a.length&&delete b.Event.observers[o],s=!0;break}l++}return s&&(i.removeEventListener?i.removeEventListener(e,n,r):i&&i.detachEvent&&i.detachEvent("on"+e,n)),s},unloadCache:function(){if(b.Event&&b.Event.observers){for(var t in b.Event.observers){var e=b.Event.observers[t];b.Event._removeElementObservers.apply(this,[e])}b.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Event=Je,b.Event.observe(window,"unload",b.Event.unloadCache,!1);var Ze=function(){function a(t,e,n,r,i){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=r,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,Et.extend(this,i),null!=n)for(var o=0,s=n.length;o<s;o++)this.addEventType(n[o]);null!=e&&this.attachToElement(e),this.CLASS_NAME="SuperMap.Events"}var t,e,n;return t=a,(e=[{key:"destroy",value:function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(Je.stopObservingElement(this.element),this.element.hasScrollEvent&&Je.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}},{key:"attachToElement",value:function(t){this.element?Je.stopObservingElement(this.element):(this.eventHandler=dt.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=dt.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,n=this.BROWSER_EVENTS.length;e<n;e++){var r=this.BROWSER_EVENTS[e];this.addEventType(r),Je.observe(t,r,this.eventHandler)}Je.observe(t,"dragstart",Je.stop)}},{key:"on",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}},{key:"register",value:function(t,e,n,r){if(t in a&&!this.extensions[t]&&(this.extensions[t]=new a[t](this)),null!=n&&-1!==Et.indexOf(this.eventTypes,t)){null==e&&(e=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var o={obj:e,func:n};r?(i.splice(this.extensionCount[t],0,o),"object"===Ye(r)&&r.extension&&this.extensionCount[t]++):i.push(o)}}},{key:"registerPriority",value:function(t,e,n){this.register(t,e,n,!0)}},{key:"un",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}},{key:"unregister",value:function(t,e,n){null==e&&(e=this.object);var r=this.listeners[t];if(null!=r)for(var i=0,o=r.length;i<o;i++)if(r[i].obj===e&&r[i].func===n){r.splice(i,1);break}}},{key:"remove",value:function(t){null!=this.listeners[t]&&(this.listeners[t]=[])}},{key:"triggerEvent",value:function(t,e){var n=this.listeners[t];if(n&&0!=n.length){var r;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t);for(var i=0,o=(n=n.slice()).length;i<o;i++){var s=n[i];if(null!=(r=s.func.apply(s.obj,[e]))&&!1===r)break}return this.fallThrough||Je.stop(e,!0),r}}},{key:"handleBrowserEvent",value:function(t){var e=t.type,n=this.listeners[e];if(n&&0!=n.length){var r=t.touches;if(r&&r[0]){for(var i,o=0,s=0,a=r.length,l=0;l<a;++l)o+=(i=r[l]).clientX,s+=i.clientY;t.clientX=o/a,t.clientY=s/a}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(t){if(this.includeXY?this.element.hasScrollEvent||(Je.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=Et.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=Et.pagePosition(this.element)),new ht(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Xe(t.prototype,e),n&&Xe(t,n),a}();function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Events=Ze,b.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Ke=function(){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=Et.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=e,this.data=null!=n?n:{}}var t,e,n;return t=r,(e=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&Qe(t.prototype,e),n&&Qe(t,n),r}();function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t,e){return!e||"object"!==$e(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function nn(t,e,n){return(nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=Ke;var sn=function(){function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=en(this,rn(i).call(this,null,null,e))).fid=null,r.geometry=t||null,r.attributes={},e&&(r.attributes=Et.extend(r.attributes,e)),r.bounds=null,r.state=null,r.style=n||null,r.url=null,r.lonlat=null,r.CLASS_NAME="SuperMap.Feature.Vector",b.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},r}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&on(t,e)}(i,Ke),t=i,(e=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,nn(rn(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(t){if(t===b.State.UPDATE)switch(this.state){case b.State.UNKNOWN:case b.State.DELETE:this.state=t;break;case b.State.UPDATE:case b.State.INSERT:}else if(t===b.State.INSERT)switch(this.state){case b.State.UNKNOWN:break;default:this.state=t}else if(t===b.State.DELETE)switch(this.state){case b.State.INSERT:case b.State.DELETE:break;case b.State.UNKNOWN:case b.State.UPDATE:this.state=t}else t===b.State.UNKNOWN&&(this.state=t)}}])&&tn(t.prototype,e),n&&tn(t,n),i}();function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Feature.Vector=sn;var ln=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,Et.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"read",value:function(){}},{key:"write",value:function(){}}])&&an(t.prototype,n),r&&an(t,r),e}();function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Format=ln;var dn=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=hn(this,fn(n).call(this,t))).indent="    ",e.space=" ",e.newline="\n",e.level=0,e.pretty=!1,e.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),e.CLASS_NAME="SuperMap.Format.JSON",e.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,n,r,i=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(n=this.write.apply(this,[e,this.pretty]),r=this.write.apply(this,[t[e],this.pretty]),null!=n&&null!=r&&(o&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),o=!0));return--this.level,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(t){var e,n=["["];this.level+=1;for(var r=0,i=t.length;r<i;++r)null!=(e=this.write.apply(this,[t[r],this.pretty]))&&(0<r&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),e));return--this.level,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(t){var r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,e){var n=r[e];return n||(n=e.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(n,ln),t=n,(e=[{key:"read",value:function(t,e){var n;if(this.nativeJSON)try{n=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=n),n}},{key:"write",value:function(t,e){this.pretty=!!e;var n=null,r=un(t);if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[r].apply(this,[t])}catch(t){}return n}},{key:"writeIndent",value:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&cn(t.prototype,e),r&&cn(t,r),n}();function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Format.JSON=dn;var gn=function(){function o(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.red=t||0==t?t:255,this.green=e||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,e,n;return t=o,n=[{key:"fromJson",value:function(t){if(t){var e=new o,n=255;null!==t.red&&(n=Number(t.red)),e.red=n;var r=0;null!==t.green&&(r=Number(t.green)),e.green=r;var i=0;return null!==t.blue&&(i=Number(t.blue)),e.blue=i,e}}}],(e=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&yn(t.prototype,e),n&&yn(t,n),o}();function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ServerColor=gn;var vn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new gn(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new gn(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new gn(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:gn.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:gn.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:gn.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(n=[{key:"destroy",value:function(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var t={};return t=Et.copyAttributes(t,this)}}])&&mn(t.prototype,n),r&&mn(t,r),e}();function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ServerStyle=vn;var En=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=wn(i).call(this,t))||"object"!==bn(r)&&"function"!=typeof r?Sn(n):r).measure=null,t&&Et.extend(Sn(e),t),e.CLASS_NAME="SuperMap.PointWithMeasure",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,ee),t=i,n=[{key:"fromJson",value:function(t){if(t)return new i({x:t.x,y:t.y,measure:t.measure})}}],(e=[{key:"equals",value:function(t){var e=!1;if(null!=t){var n=this.x===t.x&&this.y===t.y&&this.measure===t.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),i=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=n||r&&i}return e}},{key:"toJson",value:function(){var t="{";return null!=this.measure&&null!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&_n(t.prototype,e),n&&_n(t,n),i}();function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.PointWithMeasure=En;var Ln=function(){function u(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),r=this,(n=!(i=Pn(u).call(this,t,e))||"object"!==On(i)&&"function"!=typeof i?Tn(r):i).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],e&&Et.extend(Tn(n),e),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(u,Dt),t=u,n=[{key:"fromJson",value:function(t){if(t){var e=t.parts||[],n=t.points||[],r=e.length,i=[];if(!(0<r))return null;for(var o=0,s=0,a=[];o<r;o++){for(var l=0;l<e[o];l++)a.push(En.fromJson(n[s+l]));s+=e[o],a[0].equals(a[e[o]-1])?i.push(new Se(a)):i.push(new le(a)),a=[]}return new u(i,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}],(e=[{key:"toJson",value:function(){var t="{";if(null!=this.id&&null!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&null!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&null!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&null!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&null!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&null!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&null!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&null!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&0<this.components.length){t+='"points":[';for(var n=0,r=this.components.length;n<r;n++)for(var i=0,o=this.components[n].components.length;i<o;i++)t+=this.components[n].components[i].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}"}},{key:"destroy",value:function(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}}])&&Cn(t.prototype,e),n&&Cn(t,n),u}();function Nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Route=Ln;var kn=function(){function O(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,O),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,e,n;return t=O,n=[{key:"fromJson",value:function(t){if(t)return new O({id:t.id,style:vn.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var e=0,n=[],r=[],i=null,o=t.components,s=t.CLASS_NAME,a={epsgCode:t.SRID};if(isNaN(t.id)||(e=t.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(t instanceof qt||t instanceof Pe)){for(var l=o.length,u=0;u<l;u++){var c=o[u].getVertices().length;n.push(c);for(var h=0;h<c;h++)r.push(new ee(o[u].getVertices()[h].x,o[u].getVertices()[h].y))}i="SuperMap.Geometry.MultiPoint"==s?C.POINT:C.LINE}else if(t instanceof ke){for(var f=o.length,p=0;p<f;p++)for(var d=o[p].components,y=d.length,g=0;g<y;g++){var m=d[g].getVertices().length+1;n.push(m);for(var v=0;v<m-1;v++)r.push(new ee(d[g].getVertices()[v].x,d[g].getVertices()[v].y));r.push(new ee(d[g].getVertices()[0].x,d[g].getVertices()[0].y))}i=C.REGION}else if(t instanceof Fe){for(var b=o.length,_=0;_<b;_++){var w=o[_].getVertices().length+1;n.push(w);for(var S=0;S<w-1;S++)r.push(new ee(o[_].getVertices()[S].x,o[_].getVertices()[S].y));r.push(new ee(o[_].getVertices()[0].x,o[_].getVertices()[0].y))}i=C.REGION}else{for(var x=t.getVertices().length,E=0;E<x;E++)r.push(new ee(t.getVertices()[E].x,t.getVertices()[E].y));t instanceof Se&&(r.push(new ee(t.getVertices()[0].x,t.getVertices()[0].y)),x++),n.push(x),i=t instanceof ee?C.POINT:C.LINE}return new O({id:e,style:null,parts:n,points:r,type:i,prjCoordSys:a})}}},{key:"IsClockWise",value:function(t){var e=t.length;if(e<3)return 0;var n=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var r=1;r<e;r++)n+=t[r].y*(t[r-1].x-t[r+1].x);return.5*n}},{key:"bubbleSort",value:function(t,e,n,r){for(var i=0;i<t.length;i++)for(var o=0;o<t.length;o++)if(t[i]>t[o]){var s=t[o];t[o]=t[i],t[i]=s;var a=e[o];if(e[o]=e[i],e[i]=a,n&&0<n.length){var l=n[o];n[o]=n[i],n[i]=l}if(r&&0<r.length){var u=r[o];r[o]=r[i],r[i]=u}}}}],(e=[{key:"destroy",value:function(){this.id=null,this.style=null,this.parts=null,this.partTopo=null,this.points=null,this.type=null,this.prjCoordSys=null}},{key:"toGeometry",value:function(){switch(this.type.toUpperCase()){case C.POINT:return this.toGeoPoint();case C.LINE:return this.toGeoLine();case C.LINEM:return this.toGeoLinem();case C.REGION:return this.toGeoRegion();case C.POINTEPS:return this.toGeoPoint();case C.LINEEPS:return this.toGeoLineEPS();case C.REGIONEPS:return this.toGeoRegionEPS()}}},{key:"toGeoPoint",value:function(){var t=this.parts||[],e=this.points||[],n=t.length;if(0<n){if(1===n)return new ee(e[0].x,e[0].y);for(var r=[],i=0;i<n;i++)r.push(new ee(e[i].x,e[i].y));return new qt(r)}return null}},{key:"toGeoLine",value:function(){var t=this.parts||[],e=this.points||[],n=t.length;if(0<n){if(1===n){for(var r=[],i=0;i<t[0];i++)r.push(new ee(e[i].x,e[i].y));return new(r[0].equals(r[t[0]-1])?Se:le)(r)}for(var o=[],s=0;s<n;s++){for(var a=[],l=0;l<t[s];l++)a.push(new ee(e[l].x,e[l].y));o.push(new le(a)),e.splice(0,t[s])}return new Pe(o)}return null}},{key:"toGeoLineEPS",value:function(){var t,e,n,r,i,o=this.parts||[],s=this.points||[],a=o.length;if(0<a){if(1===a){for(t=0,n=[];t<o[0];t++)n.push(new ee(s[t].x,s[t].y,s[t].type));return n[0].equals(n[o[0]-1])?(i=le.createLineEPS(n),new Se(i)):(i=le.createLineEPS(n),new le(i))}for(t=0,r=[];t<a;t++){for(e=0,n=[];e<o[t];e++)n.push(new ee(s[e].x,s[e].y));i=le.createLineEPS(n),r.push(new le(i)),s.splice(0,o[t])}return new Pe(r)}return null}},{key:"toGeoLinem",value:function(){return Ln.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],e=this.partTopo||[],n=this.points||[],r=t.length;if(r<=0)return null;var i=[],o=[];if(1==r){for(var s=0;s<n.length;s++)o.push(new ee(n[s].x,n[s].y));return i.push(new Fe([new Se(o)])),new ke(i)}for(var a=[],l=[],u=[],c=[],h=[],f=0,p=0;f<r;f++){for(var d=0;d<t[f];d++)o.push(new ee(n[p+d].x,n[p+d].y));p+=t[f];var y=new Fe([new Se(o)]);o=[],u.push(y),0===e.length&&c.push(y.getBounds()),h.push(1),l.push(y.getArea())}if(O.bubbleSort(l,u,e,c),0===e.length){for(var g=[],m=1;m<u.length;m++)for(var v=m-1;0<=v;v--)if(g[m]=-1,c[v].containsBounds(c[m])){h[m]=-1*h[v],h[m]<0&&(g[m]=v);break}for(var b=0;b<u.length;b++)0<h[b]?i.push(u[b]):(i[g[b]].components=i[g[b]].components.concat(u[b].components),i.push(""))}else{i=new Array;for(var _=0;_<u.length;_++)if(e[_]&&-1==e[_]?a=a.concat(u[_].components):(0<a.length&&0<i.length&&(i[i.length-1].components=i[i.length-1].components.concat(a),a=[]),i.push(u[_])),_==r-1){var w=i.length;if(w)i[w-1].components=i[w-1].components.concat(a);else for(var S=0,x=a.length;S<x;S++)i.push(new Fe(a))}}return new ke(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],e=this.partTopo||[],n=this.points||[],r=t.length;if(r<=0)return null;var i,o=[],s=[];if(1==r){for(var a=0;a<n.length;a++)s.push(new ee(n[a].x,n[a].y));return i=le.createLineEPS(s),o.push(new Fe([new Se(i)])),new ke(o)}for(var l=[],u=[],c=[],h=[],f=[],p=0,d=0;p<r;p++){for(var y=0;y<t[p];y++)s.push(new ee(n[d+y].x,n[d+y].y));d+=t[p],i=le.createLineEPS(s);var g=new Fe([new Se(i)]);s=[],c.push(g),0===e.length&&h.push(g.getBounds()),f.push(1),u.push(g.getArea())}if(O.bubbleSort(u,c,e,h),0===e.length){for(var m=[],v=1;v<c.length;v++)for(var b=v-1;0<=b;b--)if(m[v]=-1,h[b].containsBounds(h[v])){f[v]=-1*f[b],f[v]<0&&(m[v]=b);break}for(var _=0;_<c.length;_++)0<f[_]?o.push(c[_]):(o[m[_]].components=o[m[_]].components.concat(c[_].components),o.push(""))}else{o=new Array;for(var w=0;w<c.length;w++)if(e[w]&&-1==e[w]?l=l.concat(c[w].components):(0<l.length&&0<o.length&&(o[o.length-1].components=o[o.length-1].components.concat(l),l=[]),o.push(c[w])),w==r-1){var S=o.length;if(S)o[S-1].components=o[S-1].components.concat(l);else for(var x=0,E=l.length;x<E;x++)o.push(new Fe(l))}}return new ke(o)}}])&&Nn(t.prototype,e),n&&Nn(t,n),O}();function An(t){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rn(t,e){return!e||"object"!==An(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function jn(t,e,n){return(jn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fn(t,e){return(Fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ServerGeometry=kn;var Bn=function(){function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=Rn(this,Dn(l).call(this,t))).ignoreExtraDims=!0,e.CLASS_NAME="SuperMap.Format.GeoJSON",e.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new ee(t[0],t[1])},multipoint:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[t[r]])}catch(t){throw t}e.push(n)}return new qt(e)},linestring:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[t[r]])}catch(t){throw t}e.push(n)}return new le(e)},multilinestring:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords.linestring.apply(this,[t[r]])}catch(t){throw t}e.push(n)}return new Pe(e)},polygon:function(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i){try{n=this.parseCoords.linestring.apply(this,[t[i]])}catch(t){throw t}e=new Se(n.components),r.push(e)}return new Fe(r)},multipolygon:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=this.parseCoords.polygon.apply(this,[t[r]])}catch(t){throw t}e.push(n)}return new ke(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new Fe([new Se([new ee(t[0][0],t[0][1]),new ee(t[1][0],t[0][1]),new ee(t[1][0],t[1][1]),new ee(t[0][0],t[1][1]),new ee(t[0][0],t[0][1])])])}},e.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),n={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(n.properties.texts=t.geometry.texts,n.properties.textStyle=t.geometry.textStyle),t.fid&&(n.id=t.fid),t.ID&&(n.id=t.ID),n},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,n=new kn(t).toGeometry()||t,r=n.geometryType||n.type;return"LinearRing"===r&&(r="LineString"),"LINEM"===r&&(r="MultiLineString"),e=this.extract[r.toLowerCase()].apply(this,[n]),"Collection"===(r="TEXT"===r?"Point":r)?{type:"GeometryCollection",geometries:e}:{type:r,coordinates:e}},point:function(t){var e=[t.x,t.y];for(var n in t)"x"===n||"y"===n||null===t[n]||isNaN(t[n])||e.push(t[n]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.point.apply(this,[t.components[n]]));return e},linestring:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.point.apply(this,[t.components[n]]));return e},multilinestring:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.linestring.apply(this,[t.components[n]]));return e},polygon:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.linestring.apply(this,[t.components[n]]));return e},multipolygon:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.polygon.apply(this,[t.components[n]]));return e},collection:function(t){for(var e=t.components.length,n=new Array(e),r=0;r<e;++r)n[r]=this.extract.geometry.apply(this,[t.components[r]]);return n}},e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fn(t,e)}(l,dn),t=l,(e=[{key:"read",value:function(t,e,n){e=e||"FeatureCollection";var r=null,i=null;if(i="string"==typeof t?jn(Dn(l.prototype),"read",this).call(this,t,n):t){if("string"==typeof i.type&&this.isValidType(i,e))switch(e){case"Geometry":try{r=this.parseGeometry(i)}catch(t){}break;case"Feature":try{(r=this.parseFeature(i)).type="Feature"}catch(t){}break;case"FeatureCollection":switch(r=[],i.type){case"Feature":try{r.push(this.parseFeature(i))}catch(t){r=null}break;case"FeatureCollection":for(var o=0,s=i.features.length;o<s;++o)try{r.push(this.parseFeature(i.features[o]))}catch(t){r=null}break;default:try{var a=this.parseGeometry(i);r.push(new sn(a))}catch(t){r=null}}}}else;return r}},{key:"write",value:function(t,e){return jn(Dn(l.prototype),"write",this).call(this,this.toGeoJSON(t),e)}},{key:"fromGeoJSON",value:function(t,e,n){var r=this,i=this.read(t,e,n);return Et.isArray(i)?i.map(function(t){return r._toiSevrerFeature(t)}):this._toiSevrerFeature(i)}},{key:"toGeoJSON",value:function(t){var e={type:null};if(Et.isArray(t)){e.type="FeatureCollection";var n=t.length;e.features=new Array(n);for(var r=0;r<n;++r){var i=t[r];if(a(i)){var o={};o.geometry=i,e.features[r]=this.extract.feature.apply(this,[o])}else e.features[r]=this.extract.feature.apply(this,[i])}}else if(a(t)){var s={};s.geometry=t,e=this.extract.feature.apply(this,[s])}else e=this.extract.feature.apply(this,[t]);function a(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")}return e}},{key:"isValidType",value:function(t,e){var n=!1;switch(e){case"Geometry":-1==Et.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(n=!0);break;case"FeatureCollection":n=!0;break;default:t.type==e&&(n=!0)}return n}},{key:"parseFeature",value:function(t){var e,n,r,i;r=t.properties?t.properties:{},i=t.geometry&&t.geometry.bbox||t.bbox;try{n=this.parseGeometry(t.geometry)}catch(t){throw t}return e=new sn(n,r),i&&(e.bounds=Tt.fromArray(i)),t.id&&(e.fid=t.id),e}},{key:"parseGeometry",value:function(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!Et.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var n=t.geometries.length,r=new Array(n),i=0;i<n;++i)r[i]=this.parseGeometry.apply(this,[t.geometries[i]]);e=new Dt(r)}else{if(!Et.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(t){throw t}}return e}},{key:"createCRSObject",value:function(t){var e=t.layer.projection.toString(),n={};if(e.match(/epsg:/i)){var r=parseInt(e.substring(e.indexOf(":")+1));n=4326==r?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+r}}}return n}},{key:"_toiSevrerFeature",value:function(t){var e=t.attributes,n=[],r=[];for(var i in e)n.push(i),r.push(e[i]);var o={fieldNames:n,fieldValues:r,geometry:kn.fromGeometry(t.geometry)};return o.geometry.id=t.fid,o}},{key:"createAttributes",value:function(t){if(!t)return null;var e={};!function(t,e){if(!t.hasOwnProperty("fieldNames")||!t.hasOwnProperty("fieldValues"))return;var n=t.fieldNames,r=t.fieldValues;for(var i in n)e[n[i]]=r[i]}(t,e);var n=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in t)-1<n.indexOf(r)||(e[r]=t[r]);return e}}])&&In(t.prototype,e),n&&In(t,n),l}();function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zn(t,e){return!e||"object"!==Gn(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function qn(t){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Format.GeoJSON=Bn;var Hn=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=zn(this,qn(n).call(this,t))).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},e.CLASS_NAME="SuperMap.Format.WKT",e.extract={point:function(t){return t.x+" "+t.y},multipoint:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.point.apply(this,[t.components[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extract.point.apply(this,[t.components[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.linestring.apply(this,[t.components[n]])+")");return e.join(",")},polygon:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.linestring.apply(this,[t.components[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push("("+this.extract.polygon.apply(this,[t.components[n]])+")");return e.join(",")},collection:function(t){for(var e=[],n=0,r=t.components.length;n<r;++n)e.push(this.extractGeometry.apply(this,[t.components[n]]));return e.join(",")}},e.parse={point:function(t){var e=ft.trim(t).split(this.regExes.spaces);return new sn(new ee(e[0],e[1]))},multipoint:function(t){for(var e,n=ft.trim(t).split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[e]).geometry);return new sn(new qt(r))},linestring:function(t){for(var e=ft.trim(t).split(","),n=[],r=0,i=e.length;r<i;++r)n.push(this.parse.point.apply(this,[e[r]]).geometry);return new sn(new le(n))},multilinestring:function(t){for(var e,n=ft.trim(t).split(this.regExes.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[e]).geometry);return new sn(new Pe(r))},polygon:function(t){for(var e,n,r,i=ft.trim(t).split(this.regExes.parenComma),o=[],s=0,a=i.length;s<a;++s)e=i[s].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[e]).geometry,r=new Se(n.components),o.push(r);return new sn(new Fe(o))},multipolygon:function(t){for(var e,n=ft.trim(t).split(this.regExes.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[e]).geometry);return new sn(new ke(r))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=ft.trim(t).split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return n}},e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(n,ln),t=n,(e=[{key:"read",value:function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(t);return i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(e=this.parse[n].apply(this,[r]))),e}},{key:"write",value:function(t){var e,n,r,i=[];(r=t.constructor===Array?(e=t,!0):!(e=[t]))&&i.push("GEOMETRYCOLLECTION(");for(var o=0,s=e.length;o<s;++o)r&&0<o&&i.push(","),n=e[o].geometry,i.push(this.extractGeometry(n));return r&&i.push(")"),i.join("")}},{key:"extractGeometry",value:function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[e]?("collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase())+"("+this.extract[e].apply(this,[t])+")":null}}])&&Un(t.prototype,e),r&&Un(t,r),n}();b.Format.WKT=Hn;function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jn=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=this;t=t||{},this.speed=t.speed&&0<=t.speed?t.speed:1,this.frequency=t.speed&&0<=t.frequency?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=e.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],e.events=new Ze(this,null,this.EVENT_TYPES),e.speed=Number(e.speed),e.frequency=Number(e.frequency),e.startTime=Number(e.startTime),e.endTime=Number(e.endTime),e.startTime=Date.parse(new Date(e.startTime)),e.endTime=Date.parse(new Date(e.endTime)),e.currentTime=e.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,e,r;return t=n,(e=[{key:"updateOptions",value:function(t){var e=this;(t=t||{}).speed&&0<=t.speed&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&0<=t.frequency&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}},{key:"start",value:function(){this.running||(this.running=!0,this.tick(),this.events.triggerEvent("start",this.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){this.currentTime=this.startTime,this.running&&(this.running=!1),this.events.triggerEvent("stop",this.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(t){return 0<=t&&(this.speed=t,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(t){return 0<=t&&(this.frequency=t,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(t){return!((t=Date.parse(new Date(t)))>this.endTime)&&(this.startTime=t,this.currentTime<this.startTime&&(this.currentTime=this.startTime,this.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(t){return this.endTime=Date.parse(new Date(this.endTime)),!(t<this.startTime)&&(this.endTime=t,this.currentTime>=this.endTime&&(this.currentTime=this.startTime,this.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(t){return this.currentTime=Date.parse(new Date(this.currentTime)),t>=this.startTime&&t<=this.endTime&&(this.currentTime=t,this.startTime=this.currentTime,this.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(t){this.repeat=t}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(t){this.reverse=t}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){this.speed=null,this.frequency=null,this.startTime=null,this.endTime=null,this.currentTime=null,this.repeat=null,this.running=!1,this.reverse=null}},{key:"tick",value:function(){}}])&&Wn(t.prototype,e),r&&Wn(t,r),n}();function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qn(t,e,n){return(Qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $n(t,e){return($n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.TimeControlBase=Jn;var tr=function(){function s(t,e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),r=this,n=!(i=Kn(s).call(this,e))||"object"!==Yn(i)&&"function"!=typeof i?Zn(r):i;var o=Zn(n);return o.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return i.apply(this instanceof e&&t?this:t,r.concat(Array.prototype.slice.call(arguments)))}var r=Array.prototype.slice.call(arguments,1),i=this;return e.prototype=this.prototype,n.prototype=new e,n}),o.update=o.update.bind(o),o.oldTime=o.currentTime,o.CLASS_NAME="SuperMap.TimeFlowControl",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$n(t,e)}(s,Jn),t=s,(e=[{key:"updateOptions",value:function(t){t=t||{},Qn(Kn(s.prototype),"updateOptions",this).call(this,t)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}},{key:"stop",value:function(){Qn(Kn(s.prototype),"stop",this).call(this);this.oldTime=this.currentTime,this.running&&(this.running=!1),this.intervalId&&window.clearTimeout(this.intervalId)}},{key:"destroy",value:function(){Qn(Kn(s.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){this.intervalId&&window.clearInterval(this.intervalId),this.intervalId=null,this.update(),this.intervalId=window.setInterval(this.update,this.frequency)}},{key:"update",value:function(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}])&&Xn(t.prototype,e),n&&Xn(t,n),s}();b.TimeFlowControl=tr;n(15),n(19);var er=n(4),nr=n.n(er),rr=window.fetch,ir=(b.setCORS=function(t){b.CORS=t},b.isCORS=function(){return null!=b.CORS?b.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),or=(b.setRequestTimeout=function(t){return b.RequestTimeout=t},b.getRequestTimeout=function(){return b.RequestTimeout||45e3}),sr=b.FetchRequest={commit:function(t,e,n,r){switch(t=t?t.toUpperCase():t){case"GET":return this.get(e,n,r);case"POST":return this.post(e,n,r);case"PUT":return this.put(e,n,r);case"DELETE":return this.delete(e,n,r);default:return this.get(e,n,r)}},supportDirectRequest:function(t,e){return!!Et.isInTheSameDomain(t)||(null!=e.crossOrigin?e.crossOrigin:ir()||e.proxy)},get:function(t,e,n){n=n||{};if(t=Et.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,n),this.supportDirectRequest(t,n))return this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,n):this._fetch(t,e,n,"GET");var r={url:t=t.replace(".json",".jsonp"),data:e};return b.Util.RequestJSONPPromise.GET(r)},delete:function(t,e,n){n=n||{};if(t=Et.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,n),this.supportDirectRequest(t,n))return this.urlIsLong(t)?this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")-1),e,n):this._fetch(t,e,n,"DELETE");t=t.replace(".json",".jsonp");var r={url:t+="&_method=DELETE",data:e};return b.Util.RequestJSONPPromise.DELETE(r)},post:function(t,e,n){if(n=n||{},this.supportDirectRequest(t,n))return this._fetch(this._processUrl(t,n),e,n,"POST");t=t.replace(".json",".jsonp");var r={url:t+="&_method=POST",data:e};return b.Util.RequestJSONPPromise.POST(r)},put:function(t,e,n){if(n=n||{},t=this._processUrl(t,n),this.supportDirectRequest(t,n))return this._fetch(t,e,n,"PUT");t=t.replace(".json",".jsonp");var r={url:t+="&_method=PUT",data:e};return b.Util.RequestJSONPPromise.PUT(r)},urlIsLong:function(t){for(var e=0,n=null,r=0,i=t.length;r<i;r++)(n=t.charCodeAt(r))<127?e++:128<=n&&n<=2047?e+=2:2048<=n&&n<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,n,r){var i=-1<e.indexOf("?")?"&":"?";return e+=i+"_method="+t,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(e,n,r)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var n=t.split("?");2===n.length&&(t=n[0]+".json?"+n[1])}return e&&e.proxy&&(t="function"==typeof e.proxy?e.proxy(t):(t=decodeURIComponent(t),e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,rr(t,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?e:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:or()}).then(function(t){return t})):rr(t,{method:r,body:"PUT"===r||"POST"===r?e:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:or()}).then(function(t){return t})},_fetchJsonp:function(t,e){return e=e||{},nr()(t,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(n,r){return new Promise(function(t,e){setTimeout(function(){e(new Error("timeout"))},n),r.then(t,e)})},_getParameterString:function(t){var e=[];for(var n in t){var r,i=t[n];if(null!=i&&"function"!=typeof i)r=Array.isArray(i)||"[object Object]"===i.toString()?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),e.push(encodeURIComponent(n)+"="+r)}return e.join("&")},_isMVTRequest:function(t){return-1<t.indexOf(".mvt")||-1<t.indexOf(".pbf")}};function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){for(var e in t){this.queryKeys.push(e),"string"!=typeof t[e]&&(t[e]=b.Util.toJSON(t[e]));var n=encodeURIComponent(t[e]);this.queryValues.push(n)}},issue:function(t){for(var n=this,r=n.getUid(),e=t.url,i=[],o=new Promise(function(e){n.supermap_callbacks[r]=function(t){delete n.supermap_callbacks[r],e(t)}}),s=e,a=0,l=n.queryKeys?n.queryKeys.length:0,u=0;u<l;u++)if(s.length+n.queryKeys[u].length+2>=n.limitLength){if(0==a)return!1;i.push(s),s=e,a=0,u--}else if(s.length+n.queryKeys[u].length+2+n.queryValues[u].length>n.limitLength)for(var c=n.queryValues[u];0<c.length;){var h=n.limitLength-s.length-n.queryKeys[u].length-2;-1<s.indexOf("?")?s+="&":s+="?";var f=c.substring(0,h);"%"===f.substring(h-1,h)?(--h,f=c.substring(0,h)):"%"===f.substring(h-2,h-1)&&(h-=2,f=c.substring(0,h)),s+=n.queryKeys[u]+"="+f,c=c.substring(h),0<f.length&&(i.push(s),s=e,a=0)}else a++,-1<s.indexOf("?")?s+="&":s+="?",s+=n.queryKeys[u]+"="+n.queryValues[u];return i.push(s),n.send(i,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+r+"]",t&&t.proxy),o},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(t,e,n){var r=t.length;if(0<r)for(var i=(new Date).getTime(),o=0;o<r;o++){var s=t[o];-1<s.indexOf("?")?s+="&":s+="?",s+="sectionCount="+r,s+="&sectionIndex="+o,s+="&jsonpUserID="+i,n&&(s=decodeURIComponent(s),s=n+encodeURIComponent(s)),nr()(s,{jsonpCallbackFunction:e,timeout:3e4})}},GET:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(t.params),this.issue(t)},POST:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},PUT:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},DELETE:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)}};var lr=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}var t,e,n;return t=r,n=[{key:"generateToken",value:function(t,e){var n=this.servers[t];if(n)return sr.post(n.tokenServiceUrl,JSON.stringify(e.toJSON())).then(function(t){return t.text()})}},{key:"registerServers",value:function(t){this.servers=this.servers||{},Et.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];this.servers[n.server]=n}}},{key:"registerToken",value:function(t,e){if(this.tokens=this.tokens||{},t&&e){var n=this._getTokenStorageKey(t);this.tokens[n]=e}}},{key:"registerKey",value:function(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=Et.isArray(t)?t:[t];for(var n=0;n<t.length;n++){var r=this._getUrlRestString(t[0])||t[0];this.keys[r]=e}}}},{key:"getServerInfo",value:function(t){return this.servers=this.servers||{},this.servers[t]}},{key:"getToken",value:function(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}},{key:"getKey",value:function(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}},{key:"loginiServer",value:function(t,e,n,r){var i=t.substr(t.length-1,1);t+="/"===i?"services/security/login.json":"/services/security/login.json";var o={username:e&&e.toString(),password:n&&n.toString(),rememberme:r};o=JSON.stringify(o);return sr.post(t,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return t.json()})}},{key:"logoutiServer",value:function(t){var e=t.substr(t.length-1,1);t+="/"===e?"services/security/logout":"/services/security/logout";return sr.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,e){var n=r.SSO+"/login?service="+t;this._open(n,e)}},{key:"loginiPortal",value:function(t,e,n){var r=t.substr(t.length-1,1);t+="/"===r?"web/login.json":"/web/login.json";var i={username:e&&e.toString(),password:n&&n.toString()};i=JSON.stringify(i);return sr.post(t,i,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(t){return t.json()})}},{key:"logoutiPortal",value:function(t){var e=t.substr(t.length-1,1);t+="/"===e?"services/security/logout":"/services/security/logout";return sr.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(t,e,n){if(Et.isInTheSameDomain(t)){var r="/"===t.substr(t.length-1,1)?t+"icloud/security/tokens.json":t+"/icloud/security/tokens.json",i=e||{},o={username:i.userName&&i.userName.toString(),password:i.password&&i.password.toString()};o=JSON.stringify(o);var s=this;return sr.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(t){t.text().then(function(t){return s.imanagerToken=t})})}var a=!n||n.isNewTab;this._open(t,a)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}},{key:"destroyKey",value:function(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}},{key:"_open",value:function(t,e){e=null==e||e;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",i)}},{key:"_getTokenStorageKey",value:function(t){var e=t.match(/(.*?):\/\/([^\/]+)/i);return e?e[0]:t}},{key:"_getUrlRestString",value:function(t){if(!t)return t;var e=t.match(/(http|https):\/\/(.*\/rest)/i);return e?e[0]:t}}],(e=null)&&ar(t.prototype,e),n&&ar(t,n),r}();function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}lr.INNER_WINDOW_WIDTH=600,lr.INNER_WINDOW_HEIGHT=600,lr.SSO="https://sso.supermap.com",lr.ONLINE="https://www.supermapol.com",b.SecurityManager=lr;var cr=function(){function r(t,e){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=e||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,e,n;return t=r,(e=[{key:"request",value:function(t,e,n,r){(r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(r.withCredentials=!0),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers;var i=lr.imanagerToken;return i&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=i),n=n&&JSON.stringify(n),sr.commit(t,e,n,r).then(function(t){return t.json()})}}])&&ur(t.prototype,e),n&&ur(t,n),r}();b.iManagerServiceBase=cr;function hr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,hr),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",Et.extend(this,t)}function fr(t){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dr(t,e){return!e||"object"!==fr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gr(t,e){return(gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.iManagerCreateNodeParam=hr;var mr=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dr(this,yr(e).call(this,t))}var t,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gr(t,e)}(e,cr),t=e,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new hr(t))}},{key:"createIPortal",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new hr(t))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",t)}},{key:"stopNodes",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",t)}}])&&pr(t.prototype,n),r&&pr(t,r),e}();function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.iManager=mr;var br=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=e||{},this.serviceUrl=t,this.serverType=i.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=e.withCredentials||!1,this.crossOrigin=e.crossOrigin,this.headers=e.headers}var t,e,r;return t=n,(e=[{key:"request",value:function(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return e=this.createCredentialUrl(e),sr.commit(t,e,n,i).then(function(t){return t.json()})}},{key:"createCredentialUrl",value:function(t){var e=t,n=this.getCredential();if(n){var r=e.substring(e.length-1,e.length);-1<e.indexOf("?")&&"?"===r?e+=n.getUrlParameters():-1<e.indexOf("?")&&"?"!==r?e+="&"+n.getUrlParameters():e+="?"+n.getUrlParameters()}return e}},{key:"getCredential",value:function(){var t=lr.getToken(this.serviceUrl);return(t?new We(t,"token"):null)||((t=this.getKey())?new We(t,"key"):null)}},{key:"getKey",value:function(){}}])&&vr(t.prototype,e),r&&vr(t,r),n}();b.iPortalServiceBase=br;function _r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_r),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],Et.extend(this,t)}b.iPortalQueryParam=_r;function wr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,wr),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,Et.extend(this,t)}function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Or(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cr(t,e){return(Cr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.iPortalQueryResult=wr;var Pr=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,e=e||{},(n=!(i=Er(o).call(this,t))||"object"!==Sr(i)&&"function"!=typeof i?Or(r):i).authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},Et.extend(Or(n),e),n.resourceUrl=t+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=t+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cr(t,e)}(o,br),t=o,(e=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var t=this.resourceType.replace("_","").toLowerCase();"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var e=JSON.stringify(this.sourceJSON);if("service"===t){var n={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};e=JSON.stringify(n)}return this.request("PUT",this.resourceUrl,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&xr(t.prototype,e),n&&xr(t,n),o}();b.iPortalResource=Pr;function Tr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tr),t=t||{},this.ids=[],this.entities=[],this.resourceType="",Et.extend(this,t)}function Mr(t){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nr(t,e){return!e||"object"!==Mr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ar(t,e){return(Ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.iPortalShareParam=Tr;var Ir=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Nr(this,kr(r).call(this,t,e))).iportalUrl=t,e=e||{},n.withCredentials=e.withCredentials||!1,n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ar(t,e)}(r,br),t=r,(e=[{key:"load",value:function(){return sr.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(t){if(!(t instanceof _r))return new Promise(function(t){t("queryParams is not instanceof iPortalQueryParam !")});var r=this,e=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",e,t).then(function(t){var e=[];t.content.forEach(function(t){e.push(new Pr(r.iportalUrl,t))});var n=new wr;return n.content=e,n.total=t.total,n.currentPage=t.currentPage,n.pageSize=t.pageSize,n.aggregations=t.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(t){if(!(t instanceof Tr))return new Promise(function(t){t("shareParams is not instanceof iPortalShareParam !")});var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var n={ids:t.ids,entities:t.entities},r=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",r,JSON.stringify(n)).then(function(t){return t})}}])&&Lr(t.prototype,e),n&&Lr(t,n),r}();b.iPortal=Ir;function Rr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Rr),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,Et.extend(this,t)}b.iPortalShareEntity=Rr;function jr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,jr),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],Et.extend(this,t)}b.iPortalAddResourceParam=jr;function Dr(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Dr),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],Et.extend(this,t)}function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gr(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ur(t){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.iPortalRegisterServiceParam=Dr;var qr=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Gr(this,Ur(n).call(this,t))).iportalUrl=t,e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zr(t,e)}(n,br),t=n,(e=[{key:"deleteResources",value:function(t){var e=t.resourceType.replace("_","").toLowerCase(),n=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(n=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",n,JSON.stringify(t.ids))):this.request("DELETE",n)}},{key:"addMap",value:function(t){t instanceof jr||this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},n=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",n,JSON.stringify(e)).then(function(t){return t})}},{key:"addScene",value:function(t){t instanceof jr||this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},n=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",n,JSON.stringify(e)).then(function(t){return t})}},{key:"registerService",value:function(t){t instanceof Dr||this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},n=this.iportalUrl+"/web/services.json";return this.request("POST",n,JSON.stringify(e)).then(function(t){return t})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}}])&&Br(t.prototype,e),r&&Br(t,r),n}();function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.iPortalUser=qr;var Hr=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,Et.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),Et.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),n.serverType=n.serverType||i.ISERVER,e=e||{},this.crossOrigin=e.crossOrigin,this.headers=e.headers,Et.extend(this,e),n.isInTheSameDomain=Et.isInTheSameDomain(n.url),n.events=new Ze(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,e,n;return t=r,(e=[{key:"destroy",value:function(){var t=this;Et.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.proxy=t.proxy||e.proxy,t.withCredentials=null!=t.withCredentials?t.withCredentials:e.withCredentials,t.crossOrigin=null!=t.crossOrigin?t.crossOrigin:e.crossOrigin,t.headers=t.headers||e.headers,t.isInTheSameDomain=e.isInTheSameDomain;var n=this.getCredential(t.url);if(n){var r=t.url.substring(t.url.length-1,t.url.length);-1<t.url.indexOf("?")&&"?"===r?t.url+=n.getUrlParameters():-1<t.url.indexOf("?")&&"?"!==r?t.url+="&"+n.getUrlParameters():t.url+="?"+n.getUrlParameters()}e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getCredential",value:function(t){var e,n,r=t;switch(this.serverType){case i.IPORTAL:e=(e=(n=lr.getToken(r))?new We(n,"token"):null)||((n=lr.getKey(r))?new We(n,"key"):null);break;case i.ONLINE:e=(n=lr.getKey(r))?new We(n,"key"):null;break;default:e=(n=lr.getToken(r))?new We(n,"token"):null}return e}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){0<this.totalTimes?(this.totalTimes--,this.ajaxPolling()):this._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(n,n.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=Et.isInTheSameDomain(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(t){t=Et.transformResult(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=(t=Et.transformResult(t)).error||t;this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(n){"POST"!==n.method&&"PUT"!==n.method||(n.params&&(n.url=Et.urlAppend(n.url,Et.getParameterString(n.params||{}))),n.params=n.data),sr.commit(n.method,n.url,n.params,{headers:n.headers,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,timeout:n.async?0:null,proxy:n.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(t){var e=t;("string"==typeof t&&(e=(new dn).read(t)),(!e||e.error||300<=e.code&&304!==e.code)&&(e=e&&e.error?{error:e.error}:{error:e}),e.error)?(n.scope?dt.bind(n.failure,n.scope):n.failure)(e):(e.succeed=null==e.succeed||e.succeed,(n.scope?dt.bind(n.success,n.scope):n.success)(e))}).catch(function(t){(n.scope?dt.bind(n.failure,n.scope):n.failure)(t)})}}])&&Vr(t.prototype,e),n&&Vr(t,n),r}();function Wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.CommonServiceBase=Hr;var Jr=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,Et.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&Wr(t.prototype,n),r&&Wr(t,r),e}();function Yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.GeoCodingParameter=Jr;var Xr=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,Et.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&Yr(t.prototype,n),r&&Yr(t,r),e}();function Zr(t){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kr(t,e){return!e||"object"!==Zr(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $r(t,e,n){return($r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ti(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e){return(ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeoDecodingParameter=Xr;var ni=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Kr(this,ti(r).call(this,t,e))).options=e||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ei(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){$r(ti(r.prototype),"destroy",this).call(this)}},{key:"code",value:function(t,e){e instanceof Jr&&this.processAsync(t,e)}},{key:"decode",value:function(t,e){e instanceof Xr&&this.processAsync(t,e)}},{key:"processAsync",value:function(t,e){this.request({method:"GET",url:t,params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(t){t.succeed&&delete t.succeed,$r(ti(r.prototype),"serviceProcessCompleted",this).call(this,t)}},{key:"serviceProcessFailed",value:function(t){$r(ti(r.prototype),"serviceProcessFailed",this).call(this,t)}}])&&Qr(t.prototype,e),n&&Qr(t,n),r}();function ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.AddressMatchService=ni;var ii=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",Et.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.queryType=null}}])&&ri(t.prototype,n),r&&ri(t,r),e}();function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.AggQueryBuilderParameter=ii;var si=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",Et.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null,this.subAgg&&(this.subAgg=null)}}])&&oi(t.prototype,n),r&&oi(t,r),e}();function ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.AggregationParameter=si;var li=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){var n={};for(var r in t){if("dataset"!==r)"latitude"===r||"timeMode"===r||"dayStart"===r||("dayEnd"===r||"hourStart"===r||"hourEnd"===r)||("transmittance"===r||"hourInterval"===r||"dayInterval"===r)?n[r]=t[r]:e[r]=t[r]}e.parameter=n}}],(n=[{key:"destroy",value:function(){this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName=null,this.planCurvatureName=null,this.deleteExistResultDataset=!0}}])&&ai(t.prototype,n),r&&ai(t,r),e}();function ui(t){return(ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hi(t,e){return!e||"object"!==ui(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function fi(t,e,n){return(fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pi(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pi(t){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function di(t,e){return(di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.AreaSolarRadiationParameters=li;var yi=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=hi(this,pi(r).call(this,t,e))).format=M.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&di(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){fi(pi(r.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(t){var e;if((t=Et.transformResult(t))&&this.format===M.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(Et.isArray(t)){for(var n=0;n<t.length;n++)t[n]=this.toGeoJSONResult(t[n]);e=t}else e=this.toGeoJSONResult(t);e=e||t,this.events.triggerEvent("processCompleted",{result:e})}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new Bn;if(t.recordsets)for(var n=0,r=t.recordsets,i=r.length;n<i;n++)r[n].features&&(r[n].features=e.toGeoJSON(r[n].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}])&&ci(t.prototype,e),n&&ci(t,n),r}();function gi(t){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vi(t,e){return!e||"object"!==gi(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function bi(t,e,n){return(bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_i(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SpatialAnalystBase=yi;var Si=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=vi(this,_i(r).call(this,t,e))).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wi(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){bi(_i(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof li){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/");var e={};t instanceof li&&(this.url+="datasets/"+t.dataset+"/solarradiation"),li.toObject(t,e);var n=Et.toJSON(e);this.url+=".json?returnContent=true",this.request({method:"POST",data:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&mi(t.prototype,e),n&&mi(t,n),r}();function xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.AreaSolarRadiationService=Si;var Ei=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,Et.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&xi(t.prototype,n),r&&xi(t,r),e}();function Oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.BufferDistance=Ei;var Ci=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=N.FLAT,this.leftDistance=new Ei,this.rightDistance=new Ei,this.semicircleLineSegment=4,this.radiusUnit=a.METER,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.endType=null,this.leftDistance&&(this.leftDistance.destroy(),this.leftDistance=null),this.rightDistance&&(this.rightDistance.destroy(),this.rightDistance=null),this.semicircleLineSegment=null,this.radiusUnit=null}}])&&Oi(t.prototype,n),r&&Oi(t,r),e}();function Pi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.BufferSetting=Ci;var Ti=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new Ci,Et.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&Pi(t.prototype,n),r&&Pi(t,r),e}();function Mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.BufferAnalystParameters=Ti;var Li=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=j.RECORDSET_ONLY,this.deleteExistResultDataset=!0,Et.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&Mi(t.prototype,n),r&&Mi(t,r),e}();function Ni(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DataReturnOption=Li;var ki=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var t={};return t=Et.copyAttributes(t,this)}}])&&Ni(t.prototype,n),r&&Ni(t,r),e}();function Ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.JoinItem=ki;var Ii=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}])&&Ai(t.prototype,n),r&&Ai(t,r),e}();function Ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DatasourceConnectionInfo=Ii;var ji=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasourceConnectionInfo instanceof Ii&&(this.datasourceConnectionInfo.destroy(),this.datasourceConnectionInfo=null),this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null}}])&&Ri(t.prototype,n),r&&Ri(t,r),e}();function Di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.LinkItem=ji;var Fi=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(var e=0,n=t.joinItems,r=n.length;e<r;e++)n[e].destroy();t.joinItems=null}if(t.linkItems){for(var i=0,o=t.linkItems,s=o.length;i<s;i++)o[i].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}])&&Di(t.prototype,n),r&&Di(t,r),e}();function Bi(t){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ui(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zi(t,e,n){return(zi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qi(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function qi(t){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FilterParameter=Fi;var Hi=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=qi(i).call(this,t))||"object"!==Bi(r)&&"function"!=typeof r?Ui(n):r).dataset=null,e.filterQueryParameter=new Fi,e.resultSetting=new Li,e.isAttributeRetained=!0,e.isUnion=!1,Et.extend(Ui(e),t),e.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}(i,Ti),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)if("bufferSetting"===n)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===n)e.dataReturnOption=t.resultSetting;else{if("dataset"===n)continue;e[n]=t[n]}}}],(e=[{key:"destroy",value:function(){zi(qi(i.prototype),"destroy",this).call(this);this.dataset=null,this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null),this.resultSetting&&(this.resultSetting.destroy(),this.resultSetting=null),this.isAttributeRetained=null,this.isUnion=null}}])&&Gi(t.prototype,e),n&&Gi(t,n),i}();function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xi(t,e,n){return(Xi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zi(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.DatasetBufferAnalystParameters=Hi;var Ki=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Zi(i).call(this,t))||"object"!==Wi(r)&&"function"!=typeof r?Yi(n):r).sourceGeometry=null,e.sourceGeometrySRID=null,t&&Et.extend(Yi(e),t),e.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(i,Ti),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)if("bufferSetting"===n){var r={};for(var i in t.bufferSetting)r[i]=t.bufferSetting[i];e.analystParameter=r}else"sourceGeometry"===n?e.sourceGeometry=kn.fromGeometry(t.sourceGeometry):e[n]=t[n]}}],(e=[{key:"destroy",value:function(){Xi(Zi(i.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&Ji(t.prototype,e),n&&Ji(t,n),i}();function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function no(t,e,n){return(no="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ro(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeometryBufferAnalystParameters=Ki;var oo=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=ro(o).call(this,t,e))||"object"!==$i(i)&&"function"!=typeof i?eo(r):i).mode=null,e&&Et.extend(eo(n),e),n.CLASS_NAME="SuperMap.BufferAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(o,yi),t=o,(e=[{key:"destroy",value:function(){no(ro(o.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t){var e={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),t instanceof Hi?(n.mode="datasets",n.url+="datasets/"+t.dataset+"/buffer",Hi.toObject(t,e)):t instanceof Ki&&(n.mode="geometry",n.url+="geometry/buffer",Ki.toObject(t,e));var r=Et.toJSON(e);n.url+=".json?returnContent=true",n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&to(t.prototype,e),n&&to(t,n),o}();function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.BufferAnalystService=oo;var ao=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=A.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",Et.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type=null,this.datasetName=null,this.outputPath=null,this.datasourceInfo instanceof Ii&&(this.datasourceInfo.destroy(),this.datasourceInfo=null)}}])&&so(t.prototype,n),r&&so(t,r),e}();function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.OutputSetting=ao;var uo=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=g.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=v.YELLOW_RED,Et.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;if(t.items){if(0<t.items.length)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}])&&lo(t.prototype,n),r&&lo(t,r),e}();function co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.MappingParameters=uo;var ho=function(){function e(t){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=tt.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;Et.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e.analyst=e.analyst||{},"bounds"===n&&t[n]?e.analyst[n]=t[n].toBBOX():e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&co(t.prototype,n),r&&co(t,r),e}();function fo(t){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yo(t,e){return!e||"object"!==fo(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function go(t,e,n){return(go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mo(t){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vo(t,e){return(vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.BuffersAnalystJobsParameter=ho;var bo=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=e||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(n=yo(this,mo(r).call(this,t,e))).CLASS_NAME="SuperMap.ProcessingServiceBase",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){go(mo(r.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(t){var e=this;sr.get(e._processUrl(t),null,{proxy:e.proxy}).then(function(t){return t.json()}).then(function(t){e.events.triggerEvent("processCompleted",{result:t})}).catch(function(t){e.eventListeners.processFailed({error:t})})}},{key:"addJob",value:function(t,e,n,r){var i=this,o=null;e&&e instanceof n&&(o=new Object,n.toObject(e,o));var s=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},i.headers||{}),a={proxy:i.proxy,headers:s,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,isInTheSameDomain:i.isInTheSameDomain};sr.post(i._processUrl(t),JSON.stringify(o),a).then(function(t){return t.json()}).then(function(t){t.succeed?i.serviceProcessCompleted(t,r):i.serviceProcessFailed(t)}).catch(function(t){i.serviceProcessFailed({error:t})})}},{key:"serviceProcessCompleted",value:function(t,e){t=Et.transformResult(t),e=e||1e3;var n=this;if(t)var r=setInterval(function(){sr.get(n._processUrl(t.newResourceLocation),{_t:(new Date).getTime()}).then(function(t){return t.json()}).then(function(t){n.events.triggerEvent("processRunning",{id:t.id,state:t.state}),"LOST"!==t.state.runState&&"KILLED"!==t.state.runState&&"FAILED"!==t.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:t.state.errorMsg,state:t.state.runState})),"FINISHED"===t.state.runState&&t.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:t}))}).catch(function(t){clearInterval(r),n.events.triggerEvent("processFailed",{error:t})})},e)}},{key:"serviceProcessFailed",value:function(t){go(mo(r.prototype),"serviceProcessFailed",this).call(this,t)}},{key:"_processUrl",value:function(t){return-1===t.indexOf(".json")&&(t+=".json"),lr.getToken(t)&&(t+="?token="+lr.getToken(t)),t}}])&&po(t.prototype,e),n&&po(t,n),r}();function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function So(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function xo(t,e,n){return(xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Eo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oo(t,e){return(Oo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ProcessingServiceBase=bo;var Co=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=So(this,Eo(r).call(this,t,e))).url+="/spatialanalyst/buffers",n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oo(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){xo(Eo(r.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){xo(Eo(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(t){xo(Eo(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addBuffersJob",value:function(t,e){xo(Eo(r.prototype),"addJob",this).call(this,this.url,t,ho,e)}}])&&wo(t.prototype,e),n&&wo(t,n),r}();function Po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.BuffersAnalystJobsService=Co;var To=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&Po(t.prototype,n),r&&Po(t,r),e}();function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function No(t,e){return!e||"object"!==Mo(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ko(t,e,n){return(ko="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ao(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ao(t){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Io(t,e){return(Io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.BurstPipelineAnalystParameters=To;var Ro=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=No(this,Ao(r).call(this,t,e))).format=M.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Io(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){ko(Ao(r.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(t){var e;(t=Et.transformResult(t))&&this.format===M.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(e=this.toGeoJSONResult(t)),e=e||t,this.events.triggerEvent("processCompleted",{result:e})}},{key:"toGeoJSONResult",value:function(){return null}}])&&Lo(t.prototype,e),n&&Lo(t,n),r}();function jo(t){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fo(t,e){return!e||"object"!==jo(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Bo(t,e,n){return(Bo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Go(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Go(t){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uo(t,e){return(Uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.NetworkAnalystServiceBase=Ro;var zo=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Fo(this,Go(r).call(this,t,e))).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uo(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){Bo(Go(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(!(t instanceof To))return null;var e,n=this.url.substr(this.url.length-1,1);if(this.url=this.url+("/"===n?"burstAnalyse":"/burstAnalyse")+".json?",e={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==t.edgeID?e.edgeID=t.edgeID:e.nodeID=t.nodeID,this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&Do(t.prototype,e),n&&Do(t,n),r}();function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ho(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Wo(t,e,n){return(Wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Jo(t){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yo(t,e){return(Yo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.BurstPipelineAnalystService=zo;var Xo=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Ho(this,Jo(r).call(this,t,e))).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yo(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){Wo(Jo(r.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"processAsync",value:function(){var t=this,e=t.url.substr(t.url.length-1,1);t.isTempLayers?t.url+=".json?":(t.url+="/"===e?"":"/",t.url+="chartFeatureInfoSpecs.json?"),t.request({method:"GET",params:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&Vo(t.prototype,e),n&&Vo(t,n),r}();function Zo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ChartFeatureInfoSpecsService=Xo;var Qo=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter+'",'),t="{"+(t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Zo(t.prototype,n),r&&Zo(t,r),e}();function Ko(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ChartQueryFilterParameter=Qo;var $o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null}},{key:"getVariablesJson",value:function(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],n=this.chartLayerNames.length,r=0;r<n;r++)e.push('"'+this.chartLayerNames[r]+'"');t+='"chartLayerNames":'+("["+e.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var i=[],o=this.chartQueryFilterParameters.length,s=0;s<o;s++){var a=this.chartQueryFilterParameters[s];a instanceof Qo&&i.push(a.toJson())}var l="["+i.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",t+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return t="{"+t+"}"}}])&&Ko(t.prototype,n),r&&Ko(t,r),e}();function ts(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ChartQueryParameters=$o;var es=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=C.LINE,this.queryOption=d.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,n=t.queryParams,r=n.length;e<r;e++)n[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}])&&ts(t.prototype,n),r&&ts(t,r),e}();function ns(t){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function is(t,e){return!e||"object"!==ns(e)&&"function"!=typeof e?ss(t):e}function os(t){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ss(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function as(t,e){return(as=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryParameters=es;var ls=function(){function o(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=is(this,os(o).call(this,t,e)),e=e||{},n.returnContent=null,n.format=M.GEOJSON,Et.extend(ss(n),e);var r,i=ss(n);return e.format&&(i.format=e.format.toUpperCase()),i.url?(r=i.url.substr(i.url.length-1,1),i.url+="/"===r?"queryResults.json?":"/queryResults.json?",n.CLASS_NAME="SuperMap.ChartQueryService",n):is(n)}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&as(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Hr.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t){if(t instanceof $o){var e;this.returnContent=t.returnContent,e=t.getVariablesJson(),this.returnContent&&(this.url+="returnContent="+this.returnContent),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(t){if((t=Et.transformResult(t))&&t.recordsets&&this.format===M.GEOJSON)for(var e=0,n=t.recordsets,r=n.length;e<r;e++)if(n[e].features){var i=new Bn;n[e].features=i.toGeoJSON(n[e].features)}this.events.triggerEvent("processCompleted",{result:t})}},{key:"getQueryParameters",value:function(t){return new es({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}])&&rs(t.prototype,e),n&&rs(t,n),o}();function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ChartQueryService=ls;var cs=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=null,this.isExactClip=null}},{key:"toJSON",value:function(){return Et.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:kn.fromGeometry(this.clipRegion)})}}])&&us(t.prototype,n),r&&us(t,r),e}();function hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ClipParameter=cs;var fs=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},this.elevation=null,this.color=null,Et.extend(this,t);var e=this.color;e&&(this.color=new gn(e.red,e.green,e.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){Et.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return t=Et.copyAttributes(t,this)}}])&&hs(t.prototype,e),r&&hs(t,r),n}();function ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ColorDictionary=fs;var ds=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.returnEdgeFeatures=null,this.returnEdgeGeometry=null,this.returnEdgeIDs=null,this.returnNodeFeatures=null,this.returnNodeGeometry=null,this.returnNodeIDs=null,this.returnPathGuides=null,this.returnRoutes=null}}])&&ps(t.prototype,n),r&&ps(t,r),e}();function ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TransportationAnalystResultSetting=ds;var gs=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new ds,Et.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}])&&ys(t.prototype,n),r&&ys(t,r),e}();function ms(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TransportationAnalystParameter=gs;var vs=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new gs,Et.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isAnalyzeById=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}])&&ms(t.prototype,n),r&&ms(t,r),e}();function bs(t){return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ws(t,e){return!e||"object"!==bs(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ss(t,e,n){return(Ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Es(t,e){return(Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ComputeWeightMatrixParameters=vs;var Os=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=ws(this,xs(r).call(this,t,e))).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){Ss(xs(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof vs){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"weightmatrix":"/weightmatrix")+".json?",e={parameter:Et.toJSON(t.parameter),nodes:this.getJson(t.isAnalyzeById,t.nodes)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(t,e){var n="[",r=e?e.length:0;if(!1===t)for(var i=0;i<r;i++)0<i&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(var o=0;o<r;o++)0<o&&(n+=","),n+=e[o];return n+="]"}}])&&_s(t.prototype,e),n&&_s(t,n),r}();function Cs(t){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ms(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ls(t,e){return(Ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ComputeWeightMatrixService=Os;var Ns=function(){function s(t,e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=e||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],r=this,(n=!(i=Ts(s).call(this,t,e))||"object"!==Cs(i)&&"function"!=typeof i?Ms(r):i).geometry=null,n.prjCoordSys=null,n.excludeField=null;var o=Ms(n);return"/"!==o.url.substr(o.url.length-1,1)&&(o.url+="/"),Et.extend(o,e),n.CLASS_NAME="SuperMap.DataFlowService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ls(t,e)}(s,Hr),t=s,(e=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(e.url+"broadcast"),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket.isOpen=!1,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(this.url+"subscribe"),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Hr.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return Et.toJSON(t)}},{key:"_onMessage",value:function(t){if(t.data&&0<=t.data.indexOf("filterParam")){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var n=JSON.parse(t.data);t.featureResult=n,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}},{key:"_connect",value:function(t){return t=this._appendCredentials(t),"WebSocket"in window?new WebSocket(t):"MozWebSocket"in window?new window.MozWebSocket(t):(console.log("no WebSocket"),null)}},{key:"_appendCredentials",value:function(t){var e=lr.getToken(t);return e&&(t+="?token="+e),t}}])&&Ps(t.prototype,e),n&&Ps(t,n),s}();function ks(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DataFlowService=Ns;var As=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,Et.extend(this,t);var e=this.bounds;e&&(this.bounds=new Tt(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){Et.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&ks(t.prototype,e),r&&ks(t,r),n}();function Is(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DatasetInfo=As;var Rs=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=k.UNION,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.operation=null}}])&&Is(t.prototype,n),r&&Is(t,r),e}();function js(t){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ds(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bs(t,e,n){return(Bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Us(t,e){return(Us=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.OverlayAnalystParameters=Rs;var zs=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Gs(i).call(this,t))||"object"!==js(r)&&"function"!=typeof r?Fs(n):r).operateDataset=null,e.operateDatasetFields=[],e.operateDatasetFilter=new Fi,e.operateRegions=[],e.sourceDataset=null,e.sourceDatasetFields=[],e.sourceDatasetFilter=new Fi,e.tolerance=0,e.resultSetting=new Li,Et.extend(Fs(e),t),e.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Us(t,e)}(i,Rs),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)if("sourceDataset"!==n)if("operateRegions"===n){e.operateRegions=[];var r=t.operateRegions;for(var i in r)r.hasOwnProperty(i)&&(e.operateRegions[i]=kn.fromGeometry(r[i]))}else"resultSetting"===n?e.dataReturnOption=t.resultSetting:e[n]=t[n]}}],(e=[{key:"destroy",value:function(){Bs(Gs(i.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var e=0,n=t.operateRegions,r=n.length;e<r;e++)n[e].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}])&&Ds(t.prototype,e),n&&Ds(t,n),i}();function qs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DatasetOverlayAnalystParameters=zs;var Vs=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=I.BSPLINE,this.smoothness=0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.clipRegion&&(this.clipRegion.destroy(),this.clipRegion=null),this.datumValue=null,this.expectedZValues=null,this.interval=null,this.resampleTolerance=null,this.smoothMethod=null,this.smoothness=null}},{key:"toJSON",value:function(){var t="'datumValue':"+Et.toJSON(this.datumValue);if(t+=",'interval':"+Et.toJSON(this.interval),t+=",'resampleTolerance':"+Et.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+Et.toJSON(this.smoothMethod),t+=",'smoothness':"+Et.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+Et.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof Lt&&this.clipRegion.components&&(e=kn.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+Et.toJSON(e)}return"{"+t+"}"}}])&&qs(t.prototype,n),r&&qs(t,r),e}();function Hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SurfaceAnalystParametersSetting=Vs;var Ws=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new Vs,this.resultSetting=new Li,this.surfaceAnalystMethod=R.ISOLINE,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.resolution=null,this.extractParameter&&(this.extractParameter.destroy(),this.extractParameter=null),this.resultSetting&&(this.resultSetting.destroy(),this.resultSetting=null),this.surfaceAnalystMethod=null}}])&&Hs(t.prototype,n),r&&Hs(t,r),e}();function Js(t){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zs(t,e,n){return(Zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Qs(t){return(Qs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ks(t,e){return(Ks=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SurfaceAnalystParameters=Ws;var $s=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Qs(i).call(this,t))||"object"!==Js(r)&&"function"!=typeof r?Xs(n):r).dataset=null,e.filterQueryParameter=new Fi,e.zValueFieldName=null,t&&Et.extend(Xs(e),t),e.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ks(t,e)}(i,Ws),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)if("filterQueryParameter"===n&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===n)t.extractParameter.clipRegion instanceof Lt&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=kn.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===n)continue;if("surfaceAnalystMethod"===n)continue;e[n]=t[n]}}}],(e=[{key:"destroy",value:function(){Zs(Qs(i.prototype),"destroy",this).call(this);this.dataset=null,this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null),this.zValueFieldName=null}}])&&Ys(t.prototype,e),n&&Ys(t,n),i}();function ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DatasetSurfaceAnalystParameters=$s;var ea=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,Et.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.clipRegion&&(this.clipRegion.destroy(),this.clipRegion=null),this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=null}}])&&ta(t.prototype,n),r&&ta(t,r),e}();function na(t){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ra(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ia(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oa(t,e,n){return(oa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sa(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function sa(t){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aa(t,e){return(aa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThiessenAnalystParameters=ea;var la=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=sa(i).call(this,t))||"object"!==na(r)&&"function"!=typeof r?ia(n):r).filterQueryParameter=null,e.dataset=null,t&&Et.extend(ia(e),t),e.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aa(t,e)}(i,ea),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)"clipRegion"===n?e.clipRegion=kn.fromGeometry(t.clipRegion):e[n]=t[n]}}],(e=[{key:"destroy",value:function(){oa(sa(i.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&ra(t.prototype,e),n&&ra(t,n),i}();function ua(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DatasetThiessenAnalystParameters=la;var ca=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"dataset"!==n&&(e[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=null}}])&&ua(t.prototype,n),r&&ua(t,r),e}();function ha(t){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function da(t,e,n){return(da="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ya(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ya(t){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ga(t,e){return(ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.DensityKernelAnalystParameters=ca;var ma=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=ya(o).call(this,t,e))||"object"!==ha(i)&&"function"!=typeof i?pa(r):i).mode=null,e&&Et.extend(pa(n),e),n.CLASS_NAME="SuperMap.DensityAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ga(t,e)}(o,yi),t=o,(e=[{key:"destroy",value:function(){da(ya(o.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t){var e=this;"/"!==e.url.substr(e.url.length-1,1)&&(e.url+="/");var n=new Object;t instanceof ca&&(e.url+="datasets/"+t.dataset+"/densityanalyst/kernel",e.mode="kernel"),ca.toObject(t,n);var r=Et.toJSON(n);e.url+=".json?returnContent=true",e.request({method:"POST",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&fa(t.prototype,e),n&&fa(t,n),o}();function va(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.DensityAnalystService=ma;var ba=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=D.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,n,r;return t=e,r=[{key:"toJsonParameters",value:function(t){var e,n,r;if(t.editType===D.DELETE){if(null===t.IDs)return;r={ids:t.IDs}}else if(r=[],t.features){n=t.features.length;for(var i=0;i<n;i++)(e=t.features[i]).geometry=kn.fromGeometry(e.geometry),r.push(e)}return Et.toJSON(r)}}],(n=[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=null,this.IDs=null,this.returnContent=null}}])&&va(t.prototype,n),r&&va(t,r),e}();function _a(t){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xa(t,e,n){return(xa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ea(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ea(t){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oa(t,e){return(Oa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.EditFeaturesParameters=ba;var Ca=function(){function a(t,e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,(n=!(i=Ea(a).call(this,t,e))||"object"!==_a(i)&&"function"!=typeof i?Sa(r):i).returnContent=!1,n.isUseBatch=!1,e&&Et.extend(Sa(n),e);var o,s=Sa(n);return o=s.url.substr(s.url.length-1,1),s.url+="/"==o?"features.json?":"/features.json?",n.CLASS_NAME="SuperMap.EditFeaturesService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oa(t,e)}(a,Hr),t=a,(e=[{key:"destroy",value:function(){xa(Ea(a.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(t){if(t instanceof ba){var e=this,n="POST",r="",i=t.editType,o=null;e.returnContent=t.returnContent,e.isUseBatch=t.isUseBatch,o=ba.toJsonParameters(t),i===D.DELETE?(r=Et.toJSON(t.IDs),e.url+="ids="+r,n="DELETE",o=r):i===D.UPDATE?n="PUT":(e.isUseBatch&&(e.url+="isUseBatch="+e.isUseBatch,e.returnContent=!1),e.returnContent&&(e.url+="returnContent="+e.returnContent,n="POST")),e.request({method:n,data:o,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&wa(t.prototype,e),n&&wa(t,n),a}();function Pa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.EditFeaturesService=Ca;var Ta=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&Pa(t.prototype,n),r&&Pa(t,r),e}();function Ma(t){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function La(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Na(t,e){return!e||"object"!==Ma(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ka(t,e,n){return(ka="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Aa(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Aa(t){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ia(t,e){return(Ia=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalyst3DParameters=Ta;var Ra=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Na(this,Aa(n).call(this,t))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ia(t,e)}(n,Ta),t=n,(e=[{key:"destroy",value:function(){ka(Aa(n.prototype),"destroy",this).call(this)}}])&&La(t.prototype,e),r&&La(t,r),n}();function ja(t){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fa(t,e){return!e||"object"!==ja(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ba(t){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ga(t,e){return(Ga=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystSinks3DParameters=Ra;var Ua=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Fa(this,Ba(r).call(this,t,e))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ga(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){Hr.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(t){if(t instanceof Ra){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"sinks":"/sinks")+".json?",e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Da(t.prototype,e),n&&Da(t,n),r}();function za(t){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Va(t,e){return!e||"object"!==za(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ha(t,e,n){return(Ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wa(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wa(t){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ja(t,e){return(Ja=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystSinks3DService=Ua;var Ya=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Va(this,Wa(n).call(this,t))).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ja(t,e)}(n,Ta),t=n,(e=[{key:"destroy",value:function(){Ha(Wa(n.prototype),"destroy",this).call(this)}}])&&qa(t.prototype,e),r&&qa(t,r),n}();function Xa(t){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qa(t,e){return!e||"object"!==Xa(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ka(t,e,n){return(Ka="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$a(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $a(t){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tl(t,e){return(tl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystSources3DParameters=Ya;var el=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Qa(this,$a(r).call(this,t,e))).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tl(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){Ka($a(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Ya){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"sources":"/sources")+".json?",e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Za(t.prototype,e),n&&Za(t,n),r}();function nl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FacilityAnalystSources3DService=el;var rl=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null,this.type=null}}])&&nl(t.prototype,n),r&&nl(t,r),e}();function il(t){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ol(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sl(t,e){return!e||"object"!==il(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function al(t,e,n){return(al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ll(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ll(t){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ul(t,e){return(ul=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystStreamParameters=rl;var cl=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=sl(this,ll(r).call(this,t,e))).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ul(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){al(ll(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof rl){var e,n=this,r=n.url.substr(n.url.length-1,1);if(0===t.queryType)n.url=n.url+("/"===r?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?";else{if(1!==t.queryType)return;n.url=n.url+("/"===r?"downstreamcirticalfaclilities":"/downstreamcirticalfaclilities")+".json?"}e={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID||(null!==t.edgeID?e.edgeID=t.edgeID:e.nodeID=t.nodeID,n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed}))}}}])&&ol(t.prototype,e),n&&ol(t,n),r}();function hl(t){return(hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pl(t,e){return!e||"object"!==hl(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function dl(t,e,n){return(dl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yl(t){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gl(t,e){return(gl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystStreamService=cl;var ml=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=pl(this,yl(n).call(this,t))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gl(t,e)}(n,Ta),t=n,(e=[{key:"destroy",value:function(){dl(yl(n.prototype),"destroy",this).call(this)}}])&&fl(t.prototype,e),r&&fl(t,r),n}();function vl(t){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _l(t,e){return!e||"object"!==vl(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function wl(t,e,n){return(wl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Sl(t){return(Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xl(t,e){return(xl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystTracedown3DParameters=ml;var El=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=_l(this,Sl(r).call(this,t,e))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xl(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){wl(Sl(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof ml){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"tracedownresult":"/tracedownresult")+".json?",e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&bl(t.prototype,e),n&&bl(t,n),r}();function Ol(t){return(Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pl(t,e){return!e||"object"!==Ol(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Tl(t,e,n){return(Tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ml(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ml(t){return(Ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ll(t,e){return(Ll=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystTracedown3DService=El;var Nl=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Pl(this,Ml(n).call(this,t))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ll(t,e)}(n,Ta),t=n,(e=[{key:"destroy",value:function(){Tl(Ml(n.prototype),"destroy",this).call(this)}}])&&Cl(t.prototype,e),r&&Cl(t,r),n}();function kl(t){return(kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Al(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Il(t,e){return!e||"object"!==kl(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Rl(t,e,n){return(Rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function jl(t){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dl(t,e){return(Dl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystTraceup3DParameters=Nl;var Fl=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Il(this,jl(r).call(this,t,e))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dl(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){Rl(jl(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Nl){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"traceupresult":"/traceupresult")+".json?",e={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Al(t.prototype,e),n&&Al(t,n),r}();function Bl(t){return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ul(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zl(t,e,n){return(zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ql(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ql(t){return(ql=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vl(t,e){return(Vl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystTraceup3DService=Fl;var Hl=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,r=ql(i).call(this,t),t=t||{},(e=!r||"object"!==Bl(r)&&"function"!=typeof r?Ul(n):r).sourceNodeIDs=null,Et.extend(Ul(e),t),e.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vl(t,e)}(i,Ta),t=i,(e=[{key:"destroy",value:function(){zl(ql(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&Gl(t.prototype,e),n&&Gl(t,n),i}();function Wl(t){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yl(t,e){return!e||"object"!==Wl(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Xl(t,e,n){return(Xl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Zl(t){return(Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ql(t,e){return(Ql=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystUpstream3DParameters=Hl;var Kl=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Yl(this,Zl(r).call(this,t,e))).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ql(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){Xl(Zl(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Hl){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?",e={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Jl(t.prototype,e),n&&Jl(t,n),r}();function $l(t){return($l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nu(t,e,n){return(nu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ru(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ru(t){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iu(t,e){return(iu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FacilityAnalystUpstream3DService=Kl;var ou=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=ru(i).call(this,t))||"object"!==$l(r)&&"function"!=typeof r?eu(n):r).filterParam=null,e.aggType=it.FILTER,e.CLASS_NAME="SuperMap.FilterAggParameter",Et.extend(eu(e),t),e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iu(t,e)}(i,si),t=i,(e=[{key:"destroy",value:function(){nu(ru(i.prototype),"destroy",this).call(this);this.filterParam&&(this.filterParam=null)}}])&&tu(t.prototype,e),n&&tu(t,n),i}();function su(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FilterAggParameter=ou;var au=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&su(t.prototype,n),r&&su(t,r),e}();function lu(t){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cu(t){return(cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fu(t,e){return(fu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FieldParameters=au;var pu=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=cu(i).call(this,t))||"object"!==lu(r)&&"function"!=typeof r?hu(n):r).fieldName=null,e.statisticMode=null,t&&Et.extend(hu(e),t),e.CLASS_NAME="SuperMap.FieldStatisticsParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fu(t,e)}(i,au),t=i,(e=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&uu(t.prototype,e),n&&uu(t,n),i}();function du(t){return(du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mu(t,e,n){return(mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function vu(t){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bu(t,e){return(bu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FieldStatisticsParameters=pu;var _u=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=vu(o).call(this,t,e))||"object"!==du(i)&&"function"!=typeof i?gu(r):i).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,e&&Et.extend(gu(n),e),n.CLASS_NAME="SuperMap.FieldStatisticService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bu(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){mu(vu(o.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var t=this,e=t.url.substr(t.url.length-1,1),n="datasources/"+t.datasource+"/datasets/"+t.dataset+"/fields/"+t.field+"/"+t.statisticMode;t.url+="/"==e?n+".json?":"/"+n+".json?",t.request({method:"GET",data:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&yu(t.prototype,e),n&&yu(t,n),o}();function wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FieldStatisticService=_u;var Su=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new gs,Et.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.event=null,this.expectFacilityCount=null,this.facilities=null,this.fromEvent=null,this.isAnalyzeById=null,this.maxWeight=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}])&&wu(t.prototype,n),r&&wu(t,r),e}();function xu(t){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ou(t,e){return!e||"object"!==xu(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Cu(t,e,n){return(Cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Pu(t){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tu(t,e){return(Tu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FindClosestFacilitiesParameters=Su;var Mu=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Ou(this,Pu(r).call(this,t,e))).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tu(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){Cu(Pu(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Su){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"closestfacility":"/closestfacility")+".json?",e={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:Et.toJSON(t.parameter),event:Et.toJSON(t.event),facilities:this.getJson(t.isAnalyzeById,t.facilities)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(t,e){var n="[",r=e?e.length:0;if(!1===t)for(var i=0;i<r;i++)0<i&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(var o=0;o<r;o++)0<o&&(n+=","),n+=e[o];return n+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.facilityPathList)return t;var e=new Bn;return t.facilityPathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&Eu(t.prototype,e),n&&Eu(t,n),r}();function Lu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FindClosestFacilitiesService=Mu;var Nu=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){if(this.expectedSupplyCenterCount=null,this.isFromCenter=null,this.turnWeightField=null,this.weightName=null,this.supplyCenters){for(var t=0,e=this.supplyCenters,n=e.length;t<n;t++)e[t].destroy();this.supplyCenters=null}}}])&&Lu(t.prototype,n),r&&Lu(t,r),e}();function ku(t){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iu(t,e){return!e||"object"!==ku(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ru(t,e,n){return(Ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ju(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ju(t){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Du(t,e){return(Du=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FindLocationParameters=Nu;var Fu=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Iu(this,ju(r).call(this,t,e))).CLASS_NAME="SuperMap.FindLocationService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Du(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){Ru(ju(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Nu){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"location":"/location")+".json?",e={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:Et.toJSON(t.mapParameter),supplyCenters:this.getCentersJson(t.supplyCenters)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getCentersJson",value:function(t){for(var e="[",n=t?t.length:0,r=0;r<n;r++)0<r&&(e+=","),e+=Et.toJSON(t[r]);return e+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Bn;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}])&&Au(t.prototype,e),n&&Au(t,n),r}();function Bu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FindLocationService=Fu;var Gu=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new gs,Et.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.centers=null,this.hasLeastTotalCost=null,this.isAnalyzeById=null,this.nodes=null,this.maxWeight=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}])&&Bu(t.prototype,n),r&&Bu(t,r),e}();function Uu(t){return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qu(t,e){return!e||"object"!==Uu(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Vu(t,e,n){return(Vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Hu(t){return(Hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wu(t,e){return(Wu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FindMTSPPathsParameters=Gu;var Ju=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=qu(this,Hu(r).call(this,t,e))).CLASS_NAME="SuperMap.FindMTSPPathsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wu(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){Vu(Hu(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Gu){var e,n=this.getJson(t.isAnalyzeById,t.centers),r=this.getJson(t.isAnalyzeById,t.nodes);this.url=this.url+"/mtsppath.json?",e={centers:n,nodes:r,parameter:Et.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(t,e){var n="[",r=e?e.length:0;if(!1===t)for(var i=0;i<r;i++)0<i&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(var o=0;o<r;o++)0<o&&(n+=","),n+=e[o];return n+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList)return null;var e=new Bn;return t.pathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&zu(t.prototype,e),n&&zu(t,n),r}();function Yu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FindMTSPPathsService=Ju;var Xu=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new gs,Et.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isAnalyzeById=null,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}])&&Yu(t.prototype,n),r&&Yu(t,r),e}();function Zu(t){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ku(t,e){return!e||"object"!==Zu(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $u(t,e,n){return($u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function tc(t){return(tc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ec(t,e){return(ec=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FindPathParameters=Xu;var nc=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Ku(this,tc(r).call(this,t,e))).CLASS_NAME="SuperMap.FindPathService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ec(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){$u(tc(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Xu){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"path":"/path")+".json?",e={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:Et.toJSON(t.parameter),nodes:this.getJson(t.isAnalyzeById,t.nodes)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJson",value:function(t,e){var n="[",r=e?e.length:0;if(!1===t)for(var i=0;i<r;i++)0<i&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(var o=0;o<r;o++)0<o&&(n+=","),n+=e[o];return n+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new Bn;return t.pathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&Qu(t.prototype,e),n&&Qu(t,n),r}();function rc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FindPathService=nc;var ic=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new gs,Et.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isAnalyzeById=null,this.isCenterMutuallyExclusive=null,this.centers=null,this.isFromCenter=null,this.weights=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}])&&rc(t.prototype,n),r&&rc(t,r),e}();function oc(t){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ac(t,e){return!e||"object"!==oc(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function lc(t,e,n){return(lc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function uc(t){return(uc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cc(t,e){return(cc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FindServiceAreasParameters=ic;var hc=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=ac(this,uc(r).call(this,t,e))).CLASS_NAME="SuperMap.FindServiceAreasService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cc(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){lc(uc(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof ic){var e,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"servicearea":"/servicearea")+".json?",e={isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:Et.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(t,e){var n="[",r=e?e.length:0;if(!1===t)for(var i=0;i<r;i++)0<i&&(n+=","),n+='{"x":'+e[i].x+',"y":'+e[i].y+"}";else if(!0===t)for(var o=0;o<r;o++)0<o&&(n+=","),n+=e[o];return n+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.serviceAreaList)return t;var e=new Bn;return t.serviceAreaList.map(function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t}),t}}])&&sc(t.prototype,e),n&&sc(t,n),r}();function fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FindServiceAreasService=hc;var pc=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new gs,Et.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.endNodeAssigned=null,this.isAnalyzeById=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}])&&fc(t.prototype,n),r&&fc(t,r),e}();function dc(t){return(dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gc(t,e){return!e||"object"!==dc(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function mc(t,e,n){return(mc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function vc(t){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bc(t,e){return(bc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.FindTSPPathsParameters=pc;var _c=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=gc(this,vc(r).call(this,t,e))).CLASS_NAME="SuperMap.FindTSPPathsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bc(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){mc(vc(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof pc){var e,n=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===n?"tsppath":"/tsppath")+".json?",e={parameter:b.Util.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:this.getNodesJson(t)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getNodesJson",value:function(t){var e,n,r,i,o="";if(!1===t.isAnalyzeById){for(e="[",n=0,r=(i=t.nodes).length;n<r;n++)0<n&&(e+=","),e+='{"x":'+i[n].x+',"y":'+i[n].y+"}";o+=e+="]"}else if(!0===t.isAnalyzeById){for(var s="[",a=t.nodes,l=a.length,u=0;u<l;u++)0<u&&(s+=","),s+=a[u];o+=s+="]"}return o}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.tspPathList)return null;var e=new Bn;return t.tspPathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&yc(t.prototype,e),n&&yc(t,n),r}();function wc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.FindTSPPathsService=_c;var Sc=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}])&&wc(t.prototype,n),r&&wc(t,r),e}();function xc(t){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ec(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oc(t,e){return!e||"object"!==xc(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Cc(t,e,n){return(Cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Pc(t){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tc(t,e){return(Tc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GenerateSpatialDataParameters=Sc;var Mc=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Oc(this,Pc(r).call(this,t,e))).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tc(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){Cc(Pc(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Sc){var e;e=this.getJsonParameters(t),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(t){var e,n="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata";return e=this.url.substr(this.url.length-1,1),this.url+="/"===e?n+".json":"/"+n+".json",this.url+="?returnContent=true",Et.toJSON(t)}}])&&Ec(t.prototype,e),n&&Ec(t,n),r}();function Lc(t){return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ac(t,e,n){return(Ac="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ic(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ic(t){return(Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rc(t,e){return(Rc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GenerateSpatialDataService=Mc;var jc=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Ic(i).call(this,t))||"object"!==Lc(r)&&"function"!=typeof r?kc(n):r).bounds=null,e.queryType=ot.GEO_BOUNDING_BOX,e.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",Et.extend(kc(e),t),e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rc(t,e)}(i,ii),t=i,(e=[{key:"destroy",value:function(){Ac(Ic(i.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null}}])&&Nc(t.prototype,e),n&&Nc(t,n),i}();function Dc(t){return(Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gc(t,e,n){return(Gc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Uc(t){return(Uc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zc(t,e){return(zc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeoBoundingBoxQueryBuilderParameter=jc;var qc=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Uc(i).call(this,t))||"object"!==Dc(r)&&"function"!=typeof r?Bc(n):r).precision=5,e.aggType=it.GEOHASH_GRID,Et.extend(Bc(e),t),e.CLASS_NAME="SuperMap.GeoHashGridAggParameter",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zc(t,e)}(i,si),t=i,n=[{key:"toJsonParameters",value:function(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return t.subAgg&&(e.subAgg=t.subAgg),Et.toJson(e)}}],(e=[{key:"destroy",value:function(){Gc(Uc(i.prototype),"destroy",this).call(this),this.aggType=null}}])&&Fc(t.prototype,e),n&&Fc(t,n),i}();function Vc(t){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jc(t,e,n){return(Jc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Yc(t){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xc(t,e){return(Xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeoHashGridAggParameter=qc;var Zc=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,e=!(r=Yc(i).call(this,t))||"object"!==Vc(r)&&"function"!=typeof r?Wc(n):r,t&&t.operateGeometry&&(e.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(e.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(e.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(e.sourceGeometries=t.sourceGeometries),t&&Et.extend(Wc(e),t),e.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xc(t,e)}(i,Rs),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)if("sourceGeometry"===n)e.sourceGeometry=kn.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===n){for(var r=[],i=0;i<t.sourceGeometries.length;i++)r.push(kn.fromGeometry(t.sourceGeometries[i]));e.sourceGeometries=r}else if("operateGeometry"===n)e.operateGeometry=kn.fromGeometry(t.operateGeometry);else if("operateGeometries"===n){for(var o=[],s=0;s<t.operateGeometries.length;s++)o.push(kn.fromGeometry(t.operateGeometries[s]));e.operateGeometries=o}else e[n]=t[n]}}],(e=[{key:"destroy",value:function(){Jc(Yc(i.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}])&&Hc(t.prototype,e),n&&Hc(t,n),i}();function Qc(t){return(Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function th(t,e,n){return(th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function eh(t){return(eh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nh(t,e){return(nh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeometryOverlayAnalystParameters=Zc;var rh=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=eh(i).call(this,t))||"object"!==Qc(r)&&"function"!=typeof r?$c(n):r).points=null,e.zValues=null,t&&Et.extend($c(e),t),e.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nh(t,e)}(i,Ws),t=i,(e=[{key:"destroy",value:function(){th(eh(i.prototype),"destroy",this).call(this);if(this.points){for(var t=0,e=this.points,n=e.length;t<n;t++)e[t].destroy();this.points=null}this.zValues=null}}])&&Kc(t.prototype,e),n&&Kc(t,n),i}();function ih(t){return(ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ah(t,e,n){return(ah="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function lh(t){return(lh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uh(t,e){return(uh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeometrySurfaceAnalystParameters=rh;var ch=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=lh(i).call(this,t))||"object"!==ih(r)&&"function"!=typeof r?sh(n):r).points=null,t&&Et.extend(sh(e),t),e.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uh(t,e)}(i,ea),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)"clipRegion"===n?e.clipRegion=kn.fromGeometry(t.clipRegion):e[n]=t[n]}}],(e=[{key:"destroy",value:function(){ah(lh(i.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;0<=t;t--)this.points[t].destroy();this.points=null}}}])&&oh(t.prototype,e),n&&oh(t,n),i}();function hh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.GeometryThiessenAnalystParameters=ch;var fh=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}])&&hh(t.prototype,n),r&&hh(t,r),e}();function ph(t){return(ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yh(t,e){return!e||"object"!==ph(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function gh(t,e,n){return(gh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mh(t){return(mh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vh(t,e){return(vh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeoRelationAnalystParameters=fh;var bh=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=yh(this,mh(r).call(this,t,e))).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vh(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){gh(mh(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof fh){var e=this.url.substr(this.url.length-1,1);this.url+="/"===e?"datasets/"+t.dataset+"/georelation":"/datasets/"+t.dataset+"/georelation";var n=b.Util.toJSON(t);this.url+=".json?returnContent=true",this.request({method:"POST",data:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&dh(t.prototype,e),n&&dh(t,n),r}();function _h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.GeoRelationAnalystService=bh;var wh=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasetNames=null,this.returnContent=null,this.fromIndex=null,this.toIndex=null,this.maxFeatures=null,this.targetEpsgCode=null,this.targetPrj=null,this.aggregation&&(this.aggregation=null)}}])&&_h(t.prototype,n),r&&_h(t,r),e}();function Sh(t){return(Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Eh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oh(t,e,n){return(Oh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ch(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ch(t){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ph(t,e){return(Ph=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesParametersBase=wh;var Th=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Ch(i).call(this,t))||"object"!==Sh(r)&&"function"!=typeof r?Eh(n):r).getFeatureMode=i.getFeatureMode.BOUNDS,e.bounds=null,e.fields=null,e.attributeFilter=null,e.spatialQueryMode=o.CONTAIN,Et.extend(Eh(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ph(t,e)}(i,wh),t=i,n=[{key:"toJsonParameters",value:function(t){var e,n,r;return n={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},r={datasetNames:t.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new Fi).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),Et.toJSON(r)}}],(e=[{key:"destroy",value:function(){Oh(Ch(i.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;0<t.fields.length;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&xh(t.prototype,e),n&&xh(t,n),i}();function Mh(t){return(Mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kh(t,e,n){return(kh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ah(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ah(t){return(Ah=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ih(t,e){return(Ih=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Th.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},b.GetFeaturesByBoundsParameters=Th;var Rh=function(){function a(t,e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,i=Ah(a).call(this,t,e),e=e||{},(n=!i||"object"!==Mh(i)&&"function"!=typeof i?Nh(r):i).returnContent=!0,n.fromIndex=0,n.toIndex=19,n.maxFeatures=null,n.format=M.GEOJSON,Et.extend(Nh(n),e);var o,s=Nh(n);return e.format&&(s.format=e.format.toUpperCase()),o=s.url.substr(s.url.length-1,1),s.url+="/"==o?"featureResults.json?":"/featureResults.json?",n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ih(t,e)}(a,Hr),t=a,(e=[{key:"destroy",value:function(){kh(Ah(a.prototype),"destroy",this).call(this);this.returnContent=null,this.fromIndex=null,this.toIndex=null,this.maxFeatures=null,this.format=null}},{key:"processAsync",value:function(t){if(t){var e,n=this,r=!0;n.returnContent=t.returnContent,n.fromIndex=t.fromIndex,n.toIndex=t.toIndex,n.maxFeatures=t.maxFeatures,n.returnContent&&(n.url+="returnContent="+n.returnContent,r=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&0<=n.fromIndex&&0<=n.toIndex&&!r&&(n.url+="&fromIndex="+n.fromIndex+"&toIndex="+n.toIndex),t.returnCountOnly&&(n.url+="&returnCountOnly="+t.returnContent),e=n.getJsonParameters(t),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(t){if(t=Et.transformResult(t),this.format===M.GEOJSON&&t.features){var e=new Bn;t.features=e.toGeoJSON(t.features)}this.events.triggerEvent("processCompleted",{result:t})}}])&&Lh(t.prototype,e),n&&Lh(t,n),a}();function jh(t){return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fh(t,e){return!e||"object"!==jh(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Bh(t,e,n){return(Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Gh(t){return(Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uh(t,e){return(Uh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesServiceBase=Rh;var zh=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Fh(this,Gh(r).call(this,t,e))).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uh(t,e)}(r,Rh),t=r,(e=[{key:"destroy",value:function(){Bh(Gh(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Th.toJsonParameters(t)}}])&&Dh(t.prototype,e),n&&Dh(t,n),r}();function qh(t){return(qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wh(t,e,n){return(Wh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Jh(t){return(Jh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yh(t,e){return(Yh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByBoundsService=zh;var Xh=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Jh(i).call(this,t))||"object"!==qh(r)&&"function"!=typeof r?Hh(n):r).bufferDistance=null,e.attributeFilter=null,e.geometry=null,e.fields=null,Et.extend(Hh(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yh(t,e)}(i,wh),t=i,n=[{key:"toJsonParameters",value:function(t){var e,n,r;return r=kn.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:r},t.fields&&((e=new Fi).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),Et.toJSON(n)}}],(e=[{key:"destroy",value:function(){Wh(Jh(i.prototype),"destroy",this).call(this);if(this.bufferDistance=null,this.attributeFilter=null,this.fields){for(;0<this.fields.length;)this.fields.pop();this.fields=null}this.geometry&&(this.geometry.destroy(),this.geometry=null)}}])&&Vh(t.prototype,e),n&&Vh(t,n),i}();function Zh(t){return(Zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kh(t,e){return!e||"object"!==Zh(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $h(t,e,n){return($h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function tf(t){return(tf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ef(t,e){return(ef=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByBufferParameters=Xh;var nf=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Kh(this,tf(r).call(this,t,e))).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ef(t,e)}(r,Rh),t=r,(e=[{key:"destroy",value:function(){$h(tf(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof Xh)return b.GetFeaturesByBufferParameters.toJsonParameters(t)}}])&&Qh(t.prototype,e),n&&Qh(t,n),r}();function rf(t){return(rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function of(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function af(t,e,n){return(af="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function lf(t){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uf(t,e){return(uf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByBufferService=nf;var cf=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=lf(i).call(this,t))||"object"!==rf(r)&&"function"!=typeof r?sf(n):r).getFeatureMode="SPATIAL",e.geometry=null,e.fields=null,e.attributeFilter=null,e.spatialQueryMode=o.CONTAIN,Et.extend(sf(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uf(t,e)}(i,wh),t=i,n=[{key:"toJsonParameters",value:function(t){var e,n,r;return n=kn.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:n,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new Fi).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),Et.toJSON(r)}}],(e=[{key:"destroy",value:function(){af(lf(i.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;0<t.fields.length;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&of(t.prototype,e),n&&of(t,n),i}();function hf(t){return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ff(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pf(t,e){return!e||"object"!==hf(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function df(t,e,n){return(df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yf(t){return(yf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gf(t,e){return(gf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByGeometryParameters=cf;var mf=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=pf(this,yf(r).call(this,t,e))).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gf(t,e)}(r,Rh),t=r,(e=[{key:"destroy",value:function(){df(yf(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return cf.toJsonParameters(t)}}])&&ff(t.prototype,e),n&&ff(t,n),r}();function vf(t){return(vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wf(t,e,n){return(wf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Sf(t){return(Sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xf(t,e){return(xf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByGeometryService=mf;var Ef=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Sf(i).call(this,t))||"object"!==vf(r)&&"function"!=typeof r?_f(n):r).getFeatureMode="ID",e.IDs=null,e.fields=null,Et.extend(_f(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xf(t,e)}(i,wh),t=i,n=[{key:"toJsonParameters",value:function(t){var e,n;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&((n=new Fi).name=t.datasetNames,n.fields=t.fields,e.queryParameter=n),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),Et.toJSON(e)}}],(e=[{key:"destroy",value:function(){wf(Sf(i.prototype),"destroy",this).call(this);if(this.IDs=null,this.getFeatureMode=null,this.fields){for(;0<this.fields.length;)this.fields.pop();this.fields=null}}}])&&bf(t.prototype,e),n&&bf(t,n),i}();function Of(t){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pf(t,e){return!e||"object"!==Of(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Tf(t,e,n){return(Tf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Mf(t){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lf(t,e){return(Lf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByIDsParameters=Ef;var Nf=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Pf(this,Mf(r).call(this,t,e))).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lf(t,e)}(r,Rh),t=r,(e=[{key:"destroy",value:function(){Tf(Mf(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Ef.toJsonParameters(t)}}])&&Cf(t.prototype,e),n&&Cf(t,n),r}();function kf(t){return(kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Af(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function If(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rf(t,e,n){return(Rf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function jf(t){return(jf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Df(t,e){return(Df=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesByIDsService=Nf;var Ff=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=jf(i).call(this,t))||"object"!==kf(r)&&"function"!=typeof r?If(n):r).getFeatureMode="SQL",e.queryParameter=null,Et.extend(If(e),t),e.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Df(t,e)}(i,wh),t=i,n=[{key:"toJsonParameters",value:function(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),Et.toJSON(e)}}],(e=[{key:"destroy",value:function(){Rf(jf(i.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Af(t.prototype,e),n&&Af(t,n),i}();function Bf(t){return(Bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uf(t,e){return!e||"object"!==Bf(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function zf(t,e,n){return(zf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function qf(t){return(qf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vf(t,e){return(Vf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesBySQLParameters=Ff;var Hf=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Uf(this,qf(r).call(this,t,e))).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vf(t,e)}(r,Rh),t=r,(e=[{key:"destroy",value:function(){zf(qf(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Ff.toJsonParameters(t)}}])&&Gf(t.prototype,e),n&&Gf(t,n),r}();function Wf(t){return(Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xf(t,e,n){return(Xf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Zf(t){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qf(t,e){return(Qf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetFeaturesBySQLService=Hf;var Kf=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=Zf(o).call(this,t,e))||"object"!==Wf(i)&&"function"!=typeof i?Yf(r):i).datasource=null,n.dataset=null,e&&Et.extend(Yf(n),e),n.CLASS_NAME="SuperMap.GetFieldsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qf(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Xf(Zf(o.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var t=this.url.substr(this.url.length-1,1),e="datasources/"+this.datasource+"/datasets/"+this.dataset;this.url+="/"==t?e+"/fields.json?":"/"+e+"/fields.json?",this.request({method:"GET",data:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&Jf(t.prototype,e),n&&Jf(t,n),o}();function $f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.GetFieldsService=Kf;var tp=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&$f(t.prototype,n),r&&$f(t,r),e}();function ep(t){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function np(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ip(t,e,n){return(ip="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=op(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function op(t){return(op=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sp(t,e){return(sp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GetGridCellInfosParameters=tp;var ap=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=op(o).call(this,t,e))||"object"!==ep(i)&&"function"!=typeof i?rp(r):i).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,e&&Et.extend(rp(n),e),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sp(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){ip(op(o.prototype),"destroy",this).call(this);this.X=null,this.Y=null,this.datasetName=null,this.dataSourceName=null,this.datasetType=null}},{key:"processAsync",value:function(t){if(t instanceof tp){Et.extend(this,t);var e=this,n=e.url.substr(e.url.length-1,1);e.url+="/"==n?"datasources/"+e.dataSourceName+"/datasets/"+e.datasetName+".json":"/datasources/"+e.dataSourceName+"/datasets/"+e.datasetName+".json",e.queryRequest(e.getDatasetInfoCompleted,e.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(t,e){this.request({method:"GET",data:null,scope:this,success:t,failure:e})}},{key:"getDatasetInfoCompleted",value:function(t){t=Et.transformResult(t),this.datasetType=t.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var t=this,e=/\.json/.exec(t.url).index,n=t.url.substring(e),r=t.url.substring(0,t.url.length-n.length);"GRID"==t.datasetType?t.url=r+"/gridValue"+n:t.url=r+"/imageValue"+n,null!=t.X&&null!=t.Y&&(t.url+="?x="+t.X+"&y="+t.Y),t.queryRequest(t.serviceProcessCompleted,t.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(t){this.serviceProcessFailed(t)}}])&&np(t.prototype,e),n&&np(t,n),o}();function lp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.GetGridCellInfosService=ap;var up=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.srcData=t,this.targetData=e,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),n=0;n<e;n++)t+="'"+this.srcData[n]+"':'"+this.targetData[n]+"',";return 0<n&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}])&&lp(t.prototype,e),r&&lp(t,r),n}();function cp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeMemoryData=up;var hp=function(){function n(t,e){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),!t)return this;this.memoryData=null,this.type=t,e&&Et.extend(this,e),this.CLASS_NAME="SuperMap.Theme"}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&cp(t.prototype,e),r&&cp(t,r),n}();function fp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Theme=hp;var pp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.align=_.BASELINECENTER,this.backColor=new gn(255,255,255),this.foreColor=new gn(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){var e=new n(t);return Et.copy(e,t),e.backColor=gn.fromJson(t.backColor),e.foreColor=gn.fromJson(t.foreColor),e}}],(e=[{key:"destroy",value:function(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}}])&&fp(t.prototype,e),r&&fp(t,r),n}();function dp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ServerTextStyle=pp;var yp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new pp,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e}}}],(e=[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}}])&&dp(t.prototype,e),r&&dp(t,r),n}();function gp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeLabelItem=yp;var mp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.style=new vn,this.unique=null,this.visible=!0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){var e=new n;return Et.copy(e,t),e.style=vn.fromJson(t.style),e}}],(e=[{key:"destroy",value:function(){this.caption=null,this.unique=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&gp(t.prototype,e),r&&gp(t,r),n}();function vp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeUniqueItem=mp;var bp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new vn,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.leaderLineStyle=vn.fromJson(t.leaderLineStyle),e}}}],(e=[{key:"destroy",value:function(){this.flowEnabled=null,this.leaderLineDisplayed=null,this.leaderLineStyle&&(this.leaderLineStyle.destroy(),this.leaderLineStyle=null)}}])&&vp(t.prototype,e),r&&vp(t,r),n}();function _p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeFlow=bp;var wp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e}}}],(e=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&_p(t.prototype,e),r&&_p(t,r),n}();function Sp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeOffset=wp;var xp=function(){function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new pp,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,e,n;return t=o,n=[{key:"fromObj",value:function(t){if(t){var e=new o,n=t.styles;if(Et.copy(e,t),e.defaultStyle=new pp(t.defaultStyle),n){e.styles=[];for(var r=0,i=n.length;r<i;r++)e.styles.push(new pp(n[r]))}return e}}}],(e=[{key:"destroy",value:function(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,n=t.styles,r=n.length;e<r;e++)n[e].destroy();t.styles=null}}}])&&Sp(t.prototype,e),n&&Sp(t,n),o}();function Ep(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.LabelMixedTextStyle=xp;var Op=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new pp,this.uniformMixedStyle=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.uniformStyle=pp.fromObj(t.uniformStyle),e.uniformMixedStyle=xp.fromObj(t.uniformMixedStyle),e}}}],(e=[{key:"destroy",value:function(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}}])&&Ep(t.prototype,e),r&&Ep(t,r),n}();function Cp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeLabelText=Op;var Pp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.isAlongLine=!0,this.alongLineDirection=S.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e}}}],(e=[{key:"destroy",value:function(){this.isAlongLine=null,this.alongLineDirection=null,this.angleFixed=null,this.repeatedLabelAvoided=null,this.repeatIntervalFixed=null,this.labelRepeatInterval=null}}])&&Cp(t.prototype,e),r&&Cp(t,r),n}();function Tp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeLabelAlongLine=Pp;var Mp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.labelBackShape=x.NONE,this.backStyle=new vn,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return e.labelBackShape=t.labelBackShape,e.backStyle=vn.fromJson(t.backStyle),e}}}],(e=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&Tp(t.prototype,e),r&&Tp(t,r),n}();function Lp(t){return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Np(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ap(t,e,n){return(Ap="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ip(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ip(t){return(Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rp(t,e){return(Rp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeLabelBackground=Mp;var jp=function(){function h(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),n=this,(e=!(r=Ip(h).call(this,"LABEL",t))||"object"!==Lp(r)&&"function"!=typeof r?kp(n):r).alongLine=new Pp,e.background=new Mp,e.flow=new bp,e.items=null,e.uniqueItems=null,e.labelExpression=null,e.labelOverLengthMode=E.NONE,e.matrixCells=null,e.maxLabelLength=256,e.numericPrecision=0,e.offset=new wp,e.overlapAvoided=!0,e.rangeExpression=null,e.uniqueExpression=null,e.smallGeometryLabeled=!1,e.text=new Op,e.textSpace=0,t&&Et.extend(kp(e),t),e.CLASS_NAME="SuperMap.ThemeLabel",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rp(t,e)}(h,hp),t=h,n=[{key:"fromObj",value:function(t){if(t){var e=new h,n=t.items,r=t.uniqueItems,i=t.matrixCells;if(t.matrixCells=null,Et.copy(e,t),e.alongLine=Pp.fromObj(t),e.background=Mp.fromObj(t),e.flow=new bp({flowEnabled:t.flowEnabled,leaderLineDisplayed:t.leaderLineDisplayed,leaderLineStyle:t.leaderLineStyle}),n){e.items=[];for(var o=0,s=n.length;o<s;o++)e.items.push(yp.fromObj(n[o]))}if(r){e.uniqueItems=[];for(var a=0,l=r.length;a<l;a++)e.uniqueItems.push(mp.fromObj(r[a]))}if(i){e.matrixCells=[];for(var u=0,c=i.length;u<c;u++);}return e.offset=wp.fromObj(t),e.text=Op.fromObj(t),e}}}],(e=[{key:"destroy",value:function(){Ap(Ip(h.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.flow=null,t.items){for(var e=0,n=t.items,r=n.length;e<r;e++)n[e].destroy();t.items=null}if(t.uniqueItems){for(var i=0,o=t.uniqueItems,s=o.length;i<s;i++)o[i].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return Et.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.flow&&(t.flowEnabled=this.flow.flowEnabled,t.leaderLineDisplayed=this.flow.leaderLineDisplayed,t.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}}])&&Np(t.prototype,e),n&&Np(t,n),h}();function Dp(t){return(Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gp(t,e,n){return(Gp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Up(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Up(t){return(Up=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zp(t,e){return(zp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeLabel=jp;var qp=function(){function o(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(e=!(r=Up(o).call(this,"UNIQUE",t))||"object"!==Dp(r)&&"function"!=typeof r?Bp(n):r).defaultStyle=new vn,e.items=null,e.uniqueExpression=null,e.colorGradientType=v.YELLOW_RED,t&&Et.extend(Bp(e),t),e.CLASS_NAME="SuperMap.ThemeUnique",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zp(t,e)}(o,hp),t=o,n=[{key:"fromObj",value:function(t){var e=new o,n=t.items,r=n?n.length:0;Et.extend(e,t),e.items=[],e.defaultStyle=vn.fromJson(t.defaultStyle);for(var i=0;i<r;i++)e.items.push(mp.fromObj(n[i]));return e}}],(e=[{key:"destroy",value:function(){Gp(Up(o.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(0<t.items.length)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=Et.copyAttributes(t,this)).defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],n=t.items.length,r=0;r<n;r++)e.push(t.items[r].toServerJSONObject());t.items=e}return t}}])&&Fp(t.prototype,e),n&&Fp(t,n),o}();function Vp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeUnique=qp;var Hp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.axesColor=new gn(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new pp,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.axesColor=gn.fromJson(t.axesColor),e.axesTextStyle=pp.fromObj(t.axesTextStyle),e}}}],(e=[{key:"destroy",value:function(){this.axesColor&&(this.axesColor.destroy(),this.axesColor=null),this.axesDisplayed=null,this.axesGridDisplayed=null,this.axesTextDisplayed=null,this.axesTextStyle&&(this.axesTextStyle.destroy(),this.axesTextStyle=null)}}])&&Vp(t.prototype,e),r&&Vp(t,r),n}();function Wp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeGraphAxes=Hp;var Jp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.maxGraphSize=0,this.minGraphSize=0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){var e=new n;return Et.copy(e,t),e}}],(e=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Wp(t.prototype,e),r&&Wp(t,r),n}();function Yp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeGraphSize=Jp;var Xp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.graphTextDisplayed=!1,this.graphTextFormat=h.CAPTION,this.graphTextStyle=new pp,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){var e=new n;return Et.copy(e,t),e.graphTextStyle=pp.fromObj(t.graphTextStyle),e}}],(e=[{key:"destroy",value:function(){this.graphTextDisplayed=null,this.graphTextFormat=null,this.graphTextStyle&&(this.graphTextStyle.destroy(),this.graphTextStyle=null)}}])&&Yp(t.prototype,e),r&&Yp(t,r),n}();function Zp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeGraphText=Xp;var Qp=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new vn,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.uniformStyle=vn.fromJson(t.uniformStyle),e}}}],(e=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Zp(t.prototype,e),r&&Zp(t,r),n}();function Kp(t){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ed(t,e,n){return(ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nd(t){return(nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rd(t,e){return(rd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeGraphItem=Qp;var id=function(){function o(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(e=!(r=nd(o).call(this,"GRAPH",t))||"object"!==Kp(r)&&"function"!=typeof r?td(n):r).barWidth=0,e.flow=new bp,e.graduatedMode=y.CONSTANT,e.graphAxes=new Hp,e.graphSize=new Jp,e.graphSizeFixed=!1,e.graphText=new Xp,e.graphType=f.AREA,e.graphAxesTextDisplayMode=p.NONE,e.items=null,e.memoryKeys=null,e.negativeDisplayed=!1,e.offset=new wp,e.overlapAvoided=!0,e.roseAngle=0,e.startAngle=0,t&&Et.extend(td(e),t),e.CLASS_NAME="SuperMap.ThemeGraph",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rd(t,e)}(o,hp),t=o,n=[{key:"fromObj",value:function(t){var e=new o,n=t.items,r=n?n.length:0;Et.copy(e,t),e.items=[],e.flow=bp.fromObj(t),e.graphAxes=Hp.fromObj(t),e.graphSize=Jp.fromObj(t),e.graphText=Xp.fromObj(t),e.offset=wp.fromObj(t);for(var i=0;i<r;i++)e.items.push(Qp.fromObj(n[i]));return e}}],(e=[{key:"destroy",value:function(){ed(nd(o.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.flow&&(t.flow.destroy(),t.flow=null),t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var e=0,n=t.items,r=n.length;e<r;e++)n[e].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return Et.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(t.flowEnabled=this.flow.flowEnabled,t.leaderLineDisplayed=this.flow.leaderLineDisplayed,t.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}}])&&$p(t.prototype,e),n&&$p(t,n),o}();function od(t){return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ad(t){return(ad=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ld(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ud(t,e){return(ud=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeGraph=id;var cd=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=ad(i).call(this,"DOTDENSITY",t))||"object"!==od(r)&&"function"!=typeof r?ld(n):r).dotExpression=null,e.style=new vn,e.value=null,t&&Et.extend(ld(e),t),e.CLASS_NAME="SuperMap.ThemeDotDensity",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ud(t,e)}(i,hp),t=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;return Et.copy(e,t),e.style=vn.fromJson(t.style),e}}}],(e=[{key:"destroy",value:function(){this.dotExpression=null,this.value=null,this.style&&(this.style.destroy(),this.style=null)}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&sd(t.prototype,e),n&&sd(t,n),i}();function hd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeDotDensity=cd;var fd=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.negativeDisplayed=!1,this.negativeStyle=new vn,this.positiveStyle=new vn,this.zeroDisplayed=!1,this.zeroStyle=new vn,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.negativeStyle=vn.fromJson(t.negativeStyle),e.positiveStyle=vn.fromJson(t.positiveStyle),e.zeroStyle=vn.fromJson(t.zeroStyle),e}}}],(e=[{key:"destroy",value:function(){this.negativeDisplayed=null,this.negativeStyle=null,this.positiveStyle=null,this.zeroDisplayed=null,this.zeroStyle=null}}])&&hd(t.prototype,e),r&&hd(t,r),n}();function pd(t){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gd(t,e,n){return(gd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=md(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function md(t){return(md=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vd(t,e){return(vd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeGraduatedSymbolStyle=fd;var bd=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=md(i).call(this,"GRADUATEDSYMBOL",t))||"object"!==pd(r)&&"function"!=typeof r?yd(n):r).baseValue=0,e.expression=null,e.flow=new bp,e.graduatedMode=b.GraduatedMode.CONSTAN,e.offset=new wp,e.style=new fd,t&&Et.extend(yd(e),t),e.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vd(t,e)}(i,hp),t=i,n=[{key:"fromObj",value:function(t){if(t){var e=new b.ThemeGraduatedSymbol;return Et.copy(e,t),e.flow=bp.fromObj(t),e.offset=wp.fromObj(t),e.style=fd.fromObj(t),e}}}],(e=[{key:"destroy",value:function(){gd(md(i.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.flow&&(t.flow.destroy(),t.flow=null),t.graduatedMode=y.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return Et.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.flow&&(t.flowEnabled=this.flow.flowEnabled,t.leaderLineDisplayed=this.flow.leaderLineDisplayed,t.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}}])&&dd(t.prototype,e),n&&dd(t,n),i}();function _d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeGraduatedSymbol=bd;var wd=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.end=0,this.start=0,this.style=new vn,this.visible=!0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.style=vn.fromJson(t.style),e}}}],(e=[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&_d(t.prototype,e),r&&_d(t,r),n}();function Sd(t){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ed(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Od(t,e,n){return(Od="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Cd(t){return(Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pd(t,e){return(Pd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeRangeItem=wd;var Td=function(){function o(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(e=!(r=Cd(o).call(this,"RANGE",t))||"object"!==Sd(r)&&"function"!=typeof r?Ed(n):r).precision="1.0E-12",e.items=null,e.rangeExpression=null,e.rangeMode=g.EQUALINTERVAL,e.rangeParameter=0,e.colorGradientType=v.YELLOW_RED,t&&Et.extend(Ed(e),t),e.CLASS_NAME="SuperMap.ThemeRange",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pd(t,e)}(o,hp),t=o,n=[{key:"fromObj",value:function(t){if(t){var e=new o;Et.copy(e,t);var n=t.items,r=n?n.length:0;e.items=[];for(var i=0;i<r;i++)e.items.push(wd.fromObj(n[i]));return e}}}],(e=[{key:"destroy",value:function(){Od(Cd(o.prototype),"destroy",this).call(this);var t=this;if(t.items){if(0<t.items.length)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&xd(t.prototype,e),n&&xd(t,n),o}();function Md(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeRange=Td;var Ld=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){Et.reset(this)}},{key:"fromJson",value:function(t){t=t||{},Et.extend(this,t);var e=this.bounds;e&&(this.bounds=new Tt(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&Md(t.prototype,n),r&&Md(t,r),e}();function Nd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.UGCLayer=Ld;var kd=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,Et.extend(this,t),this.ugcLayer=new Ld(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){Et.reset(this)}},{key:"fromJson",value:function(t){this.ugcLayer.fromJson.apply(this,[t])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var n in t)t.hasOwnProperty(n)&&(e+="'"+n+"':"+t[n]+",");return e=e.substr(0,e.length-1),e+="}"}}])&&Nd(t.prototype,n),r&&Nd(t,r),e}();function Ad(t){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Id(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rd(t,e){return!e||"object"!==Ad(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function jd(t,e,n){return(jd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Dd(t){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fd(t,e){return(Fd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.OverlapDisplayedOptions=kd;var Bd=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},(e=Rd(this,Dd(n).call(this,t))).completeLineSymbolDisplayed=null,e.maxScale=null,e.minScale=null,e.minVisibleGeometrySize=null,e.opaqueRate=null,e.symbolScalable=null,e.symbolScale=null,e.overlapDisplayed=null,e.overlapDisplayedOptions=null,e.CLASS_NAME="SuperMap.UGCMapLayer",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fd(t,e)}(n,Ld),t=n,(e=[{key:"destroy",value:function(){jd(Dd(n.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"fromJson",value:function(t){jd(Dd(n.prototype),"fromJson",this).call(this,t)}},{key:"toServerJSONObject",value:function(){return jd(Dd(n.prototype),"toServerJSONObject",this).call(this)}}])&&Id(t.prototype,e),r&&Id(t,r),n}();function Gd(t){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ud(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zd(t,e){return!e||"object"!==Gd(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function qd(t,e,n){return(qd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Vd(t){return(Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hd(t,e){return(Hd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.UGCMapLayer=Bd;var Wd=function(){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t=t||{},(e=zd(this,Vd(r).call(this,t))).datasetInfo=null,e.displayFilter=null,e.joinItems=null,e.representationField=null,e.ugcLayerType=null,e.CLASS_NAME="SuperMap.UGCSubLayer",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hd(t,e)}(r,Bd),t=r,(e=[{key:"fromJson",value:function(t){if(qd(Vd(r.prototype),"fromJson",this).call(this,t),this.datasetInfo&&(this.datasetInfo=new As(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var e=[],n=0;n<this.joinItems.length;n++)e[n]=new ki(this.joinItems[n]);this.joinItems=e}}},{key:"destroy",value:function(){qd(Vd(r.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"toServerJSONObject",value:function(){var t=qd(Vd(r.prototype),"toServerJSONObject",this).call(this);if(t.joinItems){for(var e=[],n=0;n<t.joinItems.length;n++)t.joinItems[n].toServerJSONObject&&(e[n]=t.joinItems[n].toServerJSONObject());t.joinItems=e}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}])&&Ud(t.prototype,e),n&&Ud(t,n),r}();function Jd(t){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xd(t,e){return!e||"object"!==Jd(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Zd(t,e,n){return(Zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Qd(t){return(Qd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kd(t,e){return(Kd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.UGCSubLayer=Wd;var $d=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},(e=Xd(this,Qd(n).call(this,t))).theme=null,e.themeElementPosition=null,e.CLASS_NAME="SuperMap.ServerTheme",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kd(t,e)}(n,Wd),t=n,(e=[{key:"destroy",value:function(){Zd(Qd(n.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"fromJson",value:function(t){Zd(Qd(n.prototype),"fromJson",this).call(this,t);var e=this.theme;switch(e&&e.type){case"LABEL":this.theme=jp.fromObj(e);break;case"UNIQUE":this.theme=qp.fromObj(e);break;case"GRAPH":this.theme=id.fromObj(e);break;case"DOTDENSITY":this.theme=cd.fromObj(e);break;case"GRADUATEDSYMBOL":this.theme=bd.fromObj(e);break;case"RANGE":this.theme=Td.fromObj(e)}this.themeElementPosition&&(this.themeElementPosition=new Ct(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var t=Zd(Qd(n.prototype),"toServerJSONObject",this).call(this);return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}])&&Yd(t.prototype,e),r&&Yd(t,r),n}();function ty(t){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ey(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ny(t,e){return!e||"object"!==ty(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ry(t,e,n){return(ry="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function iy(t){return(iy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oy(t,e){return(oy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ServerTheme=$d;var sy=function(){function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),t=t||{},(e=ny(this,iy(a).call(this,t))).colorDictionarys=null,e.brightness=null,e.colorGradientType=null,e.colors=null,e.contrast=null,e.dashStyle=null,e.gridType=null,e.horizontalSpacing=null,e.sizeFixed=null,e.solidStyle=null,e.specialColor=null,e.specialValue=null,e.specialValueTransparent=null,e.verticalSpacing=null,e.CLASS_NAME="SuperMap.Grid",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oy(t,e)}(a,Wd),t=a,(e=[{key:"destroy",value:function(){ry(iy(a.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"fromJson",value:function(t){if(ry(iy(a.prototype),"fromJson",this).call(this,t),this.specialColor&&(this.specialColor=new gn(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var e,n=[];for(var r in this.colors)e=this.colors[r],n.push(new gn(e.red,e.green,e.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new vn(this.dashStyle)),this.solidStyle&&(this.solidStyle=new vn(this.solidStyle)),this.colorDictionary){var i,o=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],o.push(new fs({elevation:s,color:i}));this.colorDictionarys=o}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var t=ry(iy(a.prototype),"toServerJSONObject",this).call(this);return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}])&&ey(t.prototype,e),n&&ey(t,n),a}();function ay(t){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ly(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uy(t,e){return!e||"object"!==ay(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function cy(t,e,n){return(cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hy(t){return(hy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fy(t,e){return(fy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Grid=sy;var py=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},(e=uy(this,hy(n).call(this,t))).brightness=null,e.colorSpaceType=null,e.contrast=null,e.displayBandIndexes=null,e.transparent=null,e.transparentColor=null,e.transparentColorTolerance=null,e.CLASS_NAME="SuperMap.Image",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fy(t,e)}(n,Wd),t=n,(e=[{key:"destroy",value:function(){cy(hy(n.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"fromJson",value:function(t){cy(hy(n.prototype),"fromJson",this).call(this,t),this.transparentColor&&(this.transparentColor=new gn(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return cy(hy(n.prototype),"toServerJSONObject",this).call(this)}}])&&ly(t.prototype,e),r&&ly(t,r),n}();function dy(t){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gy(t,e){return!e||"object"!==dy(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function my(t,e,n){return(my="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function vy(t){return(vy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function by(t,e){return(by=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Image=py;var _y=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},(e=gy(this,vy(n).call(this,t))).style=null,e.CLASS_NAME="SuperMap.Vector",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&by(t,e)}(n,Wd),t=n,(e=[{key:"destroy",value:function(){my(vy(n.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"fromJson",value:function(t){my(vy(n.prototype),"fromJson",this).call(this,t);var e=this.style;e&&(this.style=new vn(e))}},{key:"toServerJSONObject",value:function(){var t=b.toServerJSONObject();return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&yy(t.prototype,e),r&&yy(t,r),n}();function wy(t){return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ey(t,e,n){return(Ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Oy(t){return(Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cy(t,e){return(Cy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Vector=_y;var Py=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=Oy(o).call(this,t,e))||"object"!==wy(i)&&"function"!=typeof i?xy(r):i).isTempLayers=!1,e&&Et.extend(xy(n),e),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cy(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Ey(Oy(o.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"processAsync",value:function(){var t=this,e=t.url.substr(t.url.length-1,1);t.isTempLayers?t.url+=".json?":(t.url+="/"===e?"":"/",t.url+="layers.json?"),t.request({method:"GET",params:null,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(t){var e,n;n=(e=!!(t=Et.transformResult(t))&&0<t.length?t[0].subLayers.layers:null)?e.length:0,this.handleLayers(n,e),this.events.triggerEvent("processCompleted",{result:t[0]})}},{key:"handleLayers",value:function(t,e){var n;if(t)for(var r=0;r<t;r++){if(e[r].subLayers&&e[r].subLayers.layers&&0<e[r].subLayers.layers.length)this.handleLayers(e[r].subLayers.layers.length,e[r].subLayers.layers);else switch(e[r].ugcLayerType){case"THEME":(n=new $d).fromJson(e[r]),e[r]=n;break;case"GRID":(n=new sy).fromJson(e[r]),e[r]=n;break;case"IMAGE":(n=new py).fromJson(e[r]),e[r]=n;break;case"VECTOR":(n=new _y).fromJson(e[r]),e[r]=n}}}}])&&Sy(t.prototype,e),n&&Sy(t,n),o}();function Ty(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.GetLayersInfoService=Py;var My=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)if("inputPoints"===n&&"geometry"===t.InterpolationAnalystType){for(var r=[],i=0;i<t.inputPoints.length;i++){var o=t.inputPoints[i],s={x:o.x,y:o.y,z:o.tag};r.push(s)}e[n]=r}else e[n]=t[n]}}],(n=[{key:"destroy",value:function(){this.bounds=null,this.searchRadius=null,this.zValueFieldName=null,this.zValueScale=null,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.pixelFormat=null}}])&&Ty(t.prototype,n),r&&Ty(t,r),e}();function Ly(t){return(Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ny(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ky(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ay(t,e,n){return(Ay="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Iy(t){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ry(t,e){return(Ry=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.InterpolationAnalystParameters=My;var jy=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Iy(i).call(this,t))||"object"!==Ly(r)&&"function"!=typeof r?ky(n):r).smooth=.1,e.tension=40,e.searchMode=null,e.expectedCount=12,e.maxPointCountForInterpolation=200,e.maxPointCountInNode=50,t&&Et.extend(ky(e),t),e.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ry(t,e)}(i,My),t=i,n=[{key:"toObject",value:function(t,e){for(var n in t)e[n]=t[n]}}],(e=[{key:"destroy",value:function(){Ay(Iy(i.prototype),"destroy",this).call(this);this.smooth=null,this.tension=null,this.searchMode=null,this.expectedCount=null,this.maxPointCountForInterpolation=null,this.maxPointCountInNode=null}}])&&Ny(t.prototype,e),n&&Ny(t,n),i}();function Dy(t){return(Dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function By(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gy(t,e,n){return(Gy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Uy(t){return(Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zy(t,e){return(zy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.InterpolationRBFAnalystParameters=jy;var qy=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,e=!(r=Uy(i).call(this,t))||"object"!==Dy(r)&&"function"!=typeof r?By(n):r,t&&Et.extend(By(e),t),e.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zy(t,e)}(i,My),t=i,(e=[{key:"destroy",value:function(){Gy(Uy(i.prototype),"destroy",this).call(this)}}])&&Fy(t.prototype,e),n&&Fy(t,n),i}();function Vy(t){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jy(t,e,n){return(Jy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Yy(t){return(Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xy(t,e){return(Xy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.InterpolationDensityAnalystParameters=qy;var Zy=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Yy(i).call(this,t))||"object"!==Vy(r)&&"function"!=typeof r?Wy(n):r).power=2,e.searchMode=null,e.expectedCount=12,t&&Et.extend(Wy(e),t),e.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xy(t,e)}(i,My),t=i,(e=[{key:"destroy",value:function(){Jy(Yy(i.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&Hy(t.prototype,e),n&&Hy(t,n),i}();function Qy(t){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tg(t,e,n){return(tg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function eg(t){return(eg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ng(t,e){return(ng=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.InterpolationIDWAnalystParameters=Zy;var rg=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=eg(i).call(this,t))||"object"!==Qy(r)&&"function"!=typeof r?$y(n):r).type=null,e.mean=null,e.angle=0,e.nugget=0,e.range=0,e.sill=0,e.variogramMode=Y.SPHERICAL,e.exponent=X.EXP1,e.searchMode=null,e.expectedCount=12,e.maxPointCountForInterpolation=200,e.maxPointCountInNode=50,t&&Et.extend($y(e),t),e.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ng(t,e)}(i,My),t=i,(e=[{key:"destroy",value:function(){tg(eg(i.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&Ky(t.prototype,e),n&&Ky(t,n),i}();function ig(t){return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function og(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ag(t,e,n){return(ag="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function lg(t){return(lg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ug(t,e){return(ug=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.InterpolationKrigingAnalystParameters=rg;var cg=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=lg(o).call(this,t,e))||"object"!==ig(i)&&"function"!=typeof i?sg(r):i).mode=null,e&&Et.extend(sg(n),e),n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ug(t,e)}(o,yi),t=o,(e=[{key:"destroy",value:function(){ag(lg(o.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(t){var e={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),t instanceof qy?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url+="geometry/interpolation/density":n.url+="datasets/"+t.dataset+"/interpolation/density"):t instanceof Zy?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url+="geometry/interpolation/idw":n.url+="datasets/"+t.dataset+"/interpolation/idw"):t instanceof jy?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url+="geometry/interpolation/rbf":n.url+="datasets/"+t.dataset+"/interpolation/rbf"):t instanceof rg&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url+="geometry/interpolation/kriging":n.url+="datasets/"+t.dataset+"/interpolation/kriging"),My.toObject(t,e);var r=Et.toJSON(e);n.url+=".json?returnContent=true",n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&og(t.prototype,e),n&&og(t,n),o}();function hg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.InterpolationAnalystService=cg;var fg=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=tt.METER,this.radiusUnit=tt.METER,this.areaUnit=$.SQUAREMILE,this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e.analyst=e.analyst||{},"query"===n&&t[n]?e.analyst[n]=t[n].toBBOX():e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&hg(t.prototype,n),r&&hg(t,r),e}();function pg(t){return(pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yg(t,e){return!e||"object"!==pg(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function gg(t,e,n){return(gg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mg(t){return(mg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vg(t,e){return(vg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.KernelDensityJobParameter=fg;var bg=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=yg(this,mg(r).call(this,t,e))).url+="/spatialanalyst/density",n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vg(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){gg(mg(r.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){gg(mg(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(t){gg(mg(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addKernelDensityJob",value:function(t,e){gg(mg(r.prototype),"addJob",this).call(this,this.url,t,fg,e)}}])&&dg(t.prototype,e),n&&dg(t,n),r}();b.KernelDensityJobsService=bg;function _g(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_g),this.CLASS_NAME="LabelMatrixCell"}function wg(t){return(wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xg(t){return(xg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Og(t,e){return(Og=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.LabelMatrixCell=_g;var Cg=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=xg(i).call(this,t))||"object"!==wg(r)&&"function"!=typeof r?Eg(n):r).height=0,e.pathField=null,e.rotation=0,e.width=0,e.sizeFixed=!1,e.type="IMAGE",t&&Et.extend(Eg(e),t),e.CLASS_NAME="SuperMap.LabelImageCell",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Og(t,e)}(i,_g),t=i,(e=[{key:"destroy",value:function(){this.height=null,this.pathField=null,this.rotation=null,this.width=null,this.sizeFixed=null}}])&&Sg(t.prototype,e),n&&Sg(t,n),i}();function Pg(t){return(Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mg(t){return(Mg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ng(t,e){return(Ng=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.LabelImageCell=Cg;var kg=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Mg(i).call(this,t))||"object"!==Pg(r)&&"function"!=typeof r?Lg(n):r).style=new vn,e.symbolIDField=null,e.type="SYMBOL",t&&Et.extend(Lg(e),t),e.CLASS_NAME="SuperMap.LabelSymbolCell",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ng(t,e)}(i,_g),t=i,(e=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&Tg(t.prototype,e),n&&Tg(t,n),i}();function Ag(t){return(Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ig(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rg(t){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dg(t,e){return(Dg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.LabelSymbolCell=kg;var Fg=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=Rg(i).call(this,t))||"object"!==Ag(r)&&"function"!=typeof r?jg(n):r).themeLabel=new jp,e.type="THEME",t&&Et.extend(jg(e),t),e.CLASS_NAME=" SuperMap.LabelThemeCell",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dg(t,e)}(i,_g),t=i,(e=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&Ig(t.prototype,e),n&&Ig(t,n),i}();function Bg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.LabelThemeCell=Fg;var Gg=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),!this.minScale&&0!=this.minScale||e.push('"minScale":'+this.minScale),!this.maxScale&&0!=this.maxScale||e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+Et.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}"}}])&&Bg(t.prototype,n),r&&Bg(t,r),e}();function Ug(t){return(Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vg(t,e,n){return(Vg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Hg(t){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wg(t,e){return(Wg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.LayerStatus=Gg;var Jg=function(){function a(t,e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,(n=!(i=Hg(a).call(this,t,e))||"object"!==Ug(i)&&"function"!=typeof i?qg(r):i).projection=null,n.CLASS_NAME="SuperMap.MapService",e&&Et.extend(qg(n),e);var o=qg(n);if(o.projection){var s=o.projection.split(":");s instanceof Array&&(2===s.length&&(o.url+='?prjCoordSys={"epsgCode":'+s[1]+"}"),1===s.length&&(o.url+='?prjCoordSys={"epsgCode":'+s[0]+"}"))}return n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wg(t,e)}(a,Hr),t=a,(e=[{key:"destroy",value:function(){Vg(Hg(a.prototype),"destroy",this).call(this);this.events&&(this.events.un(this.eventListeners),this.events.listeners=null,this.events.destroy(),this.events=null,this.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(t){var e=200<=(t=Et.transformResult(t)).code&&t.code<300||0==t.code||304===t.code,n=t.code&&e;!t.code||n?this.events&&this.events.triggerEvent("processCompleted",{result:t}):this.events.triggerEvent("processFailed",{error:t})}}])&&zg(t.prototype,e),n&&zg(t,n),a}();function Yg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.MapService=Jg;var Xg=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)if("dataset"!==n&&(e[n]=t[n]),"extractRegion"===n&&t[n]){for(var r=t[n].components[0].components,i={},o=[],s=r.length,a=0;a<s-1;a++){var l={};l.x=r[a].x,l.y=r[a].y,o.push(l)}i.points=o,i.type="REGION",e[n]=i}}}],(n=[{key:"destroy",value:function(){this.dataset=null,this.bounds=null,this.expression=null,this.isZip=!0,this.ignoreNoValue=!0,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=null}}])&&Yg(t.prototype,n),r&&Yg(t,r),e}();function Zg(t){return(Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kg(t,e){return!e||"object"!==Zg(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $g(t,e,n){return($g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function tm(t){return(tm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function em(t,e){return(em=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.MathExpressionAnalysisParameters=Xg;var nm=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Kg(this,tm(r).call(this,t,e))).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&em(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){$g(tm(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/");var e={};t instanceof Xg&&(this.url+="datasets/"+t.dataset+"/mathanalyst"),Xg.toObject(t,e);var n=Et.toJSON(e);this.url+=".json?returnContent=true",this.request({method:"POST",data:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&Qg(t.prototype,e),n&&Qg(t,n),r}();function rm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.MathExpressionAnalysisService=nm;var im=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t&&(this.geometry=t,this.unit=c.METER,this.prjCoordSys=null,this.distanceMode=null,e&&Et.extend(this,e),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&rm(t.prototype,e),r&&rm(t,r),n}();function om(t){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function am(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lm(t,e,n){return(lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=um(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function um(t){return(um=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cm(t,e){return(cm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.MeasureParameters=im;var hm=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=um(o).call(this,t,e))||"object"!==om(i)&&"function"!=typeof i?am(r):i).measureMode=u.DISTANCE,e&&Et.extend(am(n),e),n.CLASS_NAME="SuperMap.MeasureService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cm(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){lm(um(o.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(t){if(t instanceof im){var e,n,r,i=t.geometry;if(i){r=this.url.substr(this.url.length-1,1),this.measureMode===u.AREA?this.url+="/"===r?"area.json?":"/area.json?":this.url+="/"===r?"distance.json?":"/distance.json?";var o,s,a,l=kn.fromGeometry(i);if(l)e=l.parts[0],n=l.points.splice(0,e),a=t.prjCoordSys?("object"===om(t.prjCoordSys)?o='{"epsgCode"'+(s=t.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof t.prjCoordSys&&(o='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),{point2Ds:Et.toJSON(n),unit:t.unit,prjCoordSys:o}):{point2Ds:Et.toJSON(n),unit:t.unit},this.request({method:"GET",params:a,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}}])&&sm(t.prototype,e),n&&sm(t,n),o}();function fm(t){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ym(t,e,n){return(ym="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gm(t){return(gm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mm(t,e){return(mm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.MeasureService=hm;var vm=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=gm(o).call(this,t,e))||"object"!==fm(i)&&"function"!=typeof i?dm(r):i).mode=null,e&&Et.extend(dm(n),e),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mm(t,e)}(o,yi),t=o,(e=[{key:"destroy",value:function(){ym(gm(o.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t){var e={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),t instanceof zs?(n.mode="datasets",n.url+="datasets/"+t.sourceDataset+"/overlay.json?returnContent=true",zs.toObject(t,e)):t instanceof Zc&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?n.url+="geometry/overlay/batch.json?returnContent=true&ignoreAnalystParam=true":n.url+="geometry/overlay.json?returnContent=true",Zc.toObject(t,e));var r=Et.toJSON(e);n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&pm(t.prototype,e),n&&pm(t,n),o}();function bm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.OverlayAnalystService=vm;var _m=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!=n?"output"!==n?(e.analyst=e.analyst||{},e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&bm(t.prototype,n),r&&bm(t,r),e}();function wm(t){return(wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xm(t,e){return!e||"object"!==wm(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Em(t,e,n){return(Em="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Om(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Om(t){return(Om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cm(t,e){return(Cm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.OverlayGeoJobParameter=_m;var Pm=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=xm(this,Om(r).call(this,t,e))).url+="/spatialanalyst/overlay",n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cm(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){Em(Om(r.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){Em(Om(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(t){Em(Om(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addOverlayGeoJob",value:function(t,e){Em(Om(r.prototype),"addJob",this).call(this,this.url,t,_m,e)}}])&&Sm(t.prototype,e),n&&Sm(t,n),r}();function Tm(t){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lm(t,e){return!e||"object"!==Tm(e)&&"function"!=typeof e?Nm(t):e}function Nm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function km(t,e,n){return(km="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Am(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Am(t){return(Am=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Im(t,e){return(Im=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.OverlayGeoJobsService=Pm;var Rm=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t?((e=Lm(this,Am(n).call(this,t))).returnContent=!0,e.bounds=null,Et.extend(Nm(e),t),e.CLASS_NAME="SuperMap.QueryByBoundsParameters",e):Lm(e)}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Im(t,e)}(n,es),t=n,(e=[{key:"destroy",value:function(){km(Am(n.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&Mm(t.prototype,e),r&&Mm(t,r),n}();function jm(t){return(jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fm(t,e){return!e||"object"!==jm(e)&&"function"!=typeof e?Bm(t):e}function Bm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gm(t,e,n){return(Gm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Um(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Um(t){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zm(t,e){return(zm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryByBoundsParameters=Rm;var qm=function(){function o(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=Fm(this,Um(o).call(this,t,e))).returnContent=!1,n.format=M.GEOJSON,n.returnFeatureWithFieldCaption=!1,e&&Et.extend(Bm(n),e),n.CLASS_NAME="SuperMap.QueryService";var r,i=Bm(n);return i.url?(e&&e.format&&(i.format=e.format.toUpperCase()),r=i.url.substr(i.url.length-1,1),i.url+="/"===r?"queryResults.json?":"/queryResults.json?",n):Fm(n)}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zm(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Gm(Um(o.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t){if(t instanceof es){var e,n=this,r=null;n.returnContent=t.returnContent,e=n.getJsonParameters(t),n.returnContent?n.url+="returnContent="+n.returnContent:(r=t.returnCustomResult)&&(n.url+="returnCustomResult="+r),n.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(t){t=Et.transformResult(t);var e=new Bn;if(t&&t.recordsets)for(var n=0,r=t.recordsets,i=r.length;n<i;n++)r[n].features&&(!0===this.returnFeatureWithFieldCaption&&r[n].features.map(function(t){return t.fieldNames=r[n].fieldCaptions,t}),this.format===M.GEOJSON&&(r[n].features=e.toGeoJSON(r[n].features)));this.events.triggerEvent("processCompleted",{result:t})}},{key:"getQueryParameters",value:function(t){return new es({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}])&&Dm(t.prototype,e),n&&Dm(t,n),o}();function Vm(t){return(Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wm(t,e){return!e||"object"!==Vm(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Jm(t,e,n){return(Jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ym(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ym(t){return(Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xm(t,e){return(Xm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryService=qm;var Zm=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Wm(this,Ym(r).call(this,t,e))).CLASS_NAME="SuperMap.QueryByBoundsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xm(t,e)}(r,qm),t=r,(e=[{key:"destroy",value:function(){Jm(Ym(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(!(t instanceof Rm))return null;var e,n="",r=t.bounds;return e=this.getQueryParameters(t),n+="'queryMode':'BoundsQuery','queryParameters':",n+=Et.toJSON(e),n="{"+(n+=",'bounds': {'rightTop':{'y':"+r.top+",'x':"+r.right+"},'leftBottom':{'y':"+r.bottom+",'x':"+r.left+"}}")+"}"}}])&&Hm(t.prototype,e),n&&Hm(t,n),r}();function Qm(t){return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Km(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $m(t,e){return!e||"object"!==Qm(e)&&"function"!=typeof e?tv(t):e}function tv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ev(t,e,n){return(ev="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nv(t){return(nv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rv(t,e){return(rv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryByBoundsService=Zm;var iv=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t?((e=$m(this,nv(n).call(this,t))).distance=0,e.geometry=null,e.isNearest=null,e.returnContent=!0,Et.extend(tv(e),t),e.CLASS_NAME="SuperMap.QueryByDistanceParameters",e):$m(e)}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rv(t,e)}(n,es),t=n,(e=[{key:"destroy",value:function(){ev(nv(n.prototype),"destroy",this).call(this);this.returnContent=null,this.distance=null,this.isNearest=null,this.geometry&&(this.geometry.destroy(),this.geometry=null)}}])&&Km(t.prototype,e),r&&Km(t,r),n}();function ov(t){return(ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function av(t,e){return!e||"object"!==ov(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function lv(t,e,n){return(lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function uv(t){return(uv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cv(t,e){return(cv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryByDistanceParameters=iv;var hv=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=av(this,uv(r).call(this,t,e))).CLASS_NAME="SuperMap.QueryByDistanceService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cv(t,e)}(r,qm),t=r,(e=[{key:"destroy",value:function(){lv(uv(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof iv){var e="",n=this.getQueryParameters(t),r=kn.fromGeometry(t.geometry);return e+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",e+=Et.toJSON(n),e="{"+(e+=",'geometry':"+Et.toJSON(r)+",'distance':"+t.distance)+"}"}}}])&&sv(t.prototype,e),n&&sv(t,n),r}();function fv(t){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dv(t,e){return!e||"object"!==fv(e)&&"function"!=typeof e?yv(t):e}function yv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gv(t,e,n){return(gv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mv(t){return(mv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vv(t,e){return(vv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryByDistanceService=hv;var bv=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t?((e=dv(this,mv(n).call(this,t))).returnContent=!0,e.geometry=null,e.spatialQueryMode=o.INTERSECT,Et.extend(yv(e),t),e.CLASS_NAME="SuperMap.QueryByGeometryParameters",e):dv(e)}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vv(t,e)}(n,es),t=n,(e=[{key:"destroy",value:function(){gv(mv(n.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&pv(t.prototype,e),r&&pv(t,r),n}();function _v(t){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sv(t,e){return!e||"object"!==_v(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function xv(t,e,n){return(xv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ev(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ev(t){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ov(t,e){return(Ov=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryByGeometryParameters=bv;var Cv=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Sv(this,Ev(r).call(this,t,e))).CLASS_NAME="SuperMap.QueryByGeometryService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ov(t,e)}(r,qm),t=r,(e=[{key:"destroy",value:function(){xv(Ev(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof bv){var e,n="",r=t.geometry,i=kn.fromGeometry(r);return e=this.getQueryParameters(t),n+="'queryMode':'SpatialQuery','queryParameters':",n="{"+(n+=Et.toJSON(e)+",'geometry':"+Et.toJSON(i)+",'spatialQueryMode':"+Et.toJSON(t.spatialQueryMode))+"}"}}}])&&wv(t.prototype,e),n&&wv(t,n),r}();function Pv(t){return(Pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mv(t,e){return!e||"object"!==Pv(e)&&"function"!=typeof e?Lv(t):e}function Lv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nv(t,e,n){return(Nv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function kv(t){return(kv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Av(t,e){return(Av=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryByGeometryService=Cv;var Iv=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t?((e=Mv(this,kv(n).call(this,t))).returnContent=!0,Et.extend(Lv(e),t),e.CLASS_NAME="SuperMap.QueryBySQLParameters",e):Mv(e)}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Av(t,e)}(n,es),t=n,(e=[{key:"destroy",value:function(){Nv(kv(n.prototype),"destroy",this).call(this);this.returnContent=null}}])&&Tv(t.prototype,e),r&&Tv(t,r),n}();function Rv(t){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dv(t,e){return!e||"object"!==Rv(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Fv(t,e,n){return(Fv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bv(t){return(Bv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gv(t,e){return(Gv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.QueryBySQLParameters=Iv;var Uv=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Dv(this,Bv(r).call(this,t,e))).CLASS_NAME="SuperMap.QueryBySQLService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gv(t,e)}(r,qm),t=r,(e=[{key:"destroy",value:function(){Fv(Bv(r.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof Iv){var e,n="";return e=this.getQueryParameters(t),n+="'queryMode':'SqlQuery','queryParameters':",n="{"+(n+=Et.toJSON(e))+"}"}}}])&&jv(t.prototype,e),n&&jv(t,n),r}();function zv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.QueryBySQLService=Uv;var qv=function(){function e(t){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.sourceRoute=null,this.point=null,this.tolerance&&(this.tolerance=null),this.isIgnoreGap&&(this.isIgnoreGap=!1)}}])&&zv(t.prototype,n),r&&zv(t,r),e}();function Vv(t){return(Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wv(t,e){return!e||"object"!==Vv(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Jv(t,e,n){return(Jv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Yv(t){return(Yv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xv(t,e){return(Xv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.RouteCalculateMeasureParameters=qv;var Zv=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Wv(this,Yv(r).call(this,t,e))).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xv(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){Jv(Yv(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof qv){var e;e=this.getJsonParameters(t),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(t){var e,n="geometry/calculatemeasure";return e=this.url.substr(this.url.length-1,1),this.url+="/"===e?n+".json":"/"+n+".json",this.url+="?returnContent=true",Et.toJSON(t)}}])&&Hv(t.prototype,e),n&&Hv(t,n),r}();function Qv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.RouteCalculateMeasureService=Zv;var Kv=function(){function s(t){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var e=t.sourceRoute,n={};if(e&&e instanceof Lt&&e.components){n.type=e.type,n.parts=e.parts;for(var r=[],i=0,o=e.components.length;i<o;i++)r=r.concat(e.components[i].components);n.points=r,t.sourceRoute=n}Et.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,e,n;return t=s,(e=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}])&&Qv(t.prototype,e),n&&Qv(t,n),s}();function $v(t){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eb(t,e){return!e||"object"!==$v(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function nb(t,e,n){return(nb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rb(t){return(rb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ib(t,e){return(ib=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.RouteLocatorParameters=Kv;var ob=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=eb(this,rb(r).call(this,t,e))).CLASS_NAME="SuperMap.RouteLocatorService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ib(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){nb(rb(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Kv){var e;e=this.getJsonParameters(t),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(t){var e,n="geometry/routelocator";return e=this.url.substr(this.url.length-1,1),t.dataset&&(n="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),this.url+="/"===e?n+".json":"/"+n+".json",this.url+="?returnContent=true",Et.toJSON(t)}}])&&tb(t.prototype,e),n&&tb(t,n),r}();function sb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.RouteLocatorService=ob;var ab=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,e,r;return t=n,r=[{key:"fromJson",value:function(t){var e=null;if(t)return e=(e=t.geometry)&&kn.fromJson(e),new n({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:e})}}],(e=[{key:"destroy",value:function(){this.fieldNames=null,this.fieldValues=null,this.geometry&&(this.geometry.destroy(),this.geometry=null)}},{key:"toFeature",value:function(){var t,e,n,r,i={};for(var o in t=this.fieldNames,e=this.fieldValues,t)i[t[o]]=e[o];return this.geometry&&(n=this.geometry.toGeometry()),r=new sn(n,i),this.geometry&&this.geometry.id&&(r.fid=this.geometry.id),r}}])&&sb(t.prototype,e),r&&sb(t,r),n}();function lb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ServerFeature=ab;var ub=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&lb(t.prototype,n),r&&lb(t,r),e}();function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pb(t,e,n){return(pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=db(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function db(t){return(db=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yb(t,e){return(yb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SetLayerInfoParameters=ub;var gb=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,n=!(i=db(o).call(this,t,e))||"object"!==cb(i)&&"function"!=typeof i?fb(r):i,e&&Et.extend(fb(n),e),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yb(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){pb(db(o.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"processAsync",value:function(t){if(t){this.url+=".json";var e=Et.toJSON(t);this.request({method:"PUT",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&hb(t.prototype,e),n&&hb(t,n),o}();function mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SetLayerInfoService=gb;var vb=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&mb(t.prototype,n),r&&mb(t,r),e}();function bb(t){return(bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sb(t,e,n){return(Sb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xb(t){return(xb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eb(t,e){return(Eb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SetLayersInfoParameters=vb;var Ob=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=xb(o).call(this,t,e))||"object"!==bb(i)&&"function"!=typeof i?wb(r):i).resourceID=null,n.isTempLayers=!1,e&&b.Util.extend(wb(n),e),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eb(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Sb(xb(o.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"processAsync",value:function(t){if(t){var e,n,r=[],i=this,o="";n=i.url.substr(i.url.length-1,1),i.url+="/"===n?"":"/",o=i.isTempLayers?(i.url+="tempLayersSet/"+i.resourceID,"PUT"):(i.url+="tempLayersSet","POST"),i.url+=".json?",t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var s=t.subLayers.layers,a=s.length;for(var l in s){if("GRID"===s[l].ugcLayerType){var u={},c=s[l].colorDictionarys;for(var h in c){u[c[h].elevation]=c[h].color}}s[l].colorDictionary=u,delete s[l].colorDictionarys}for(var f=0;f<a;f++)s[f].toJsonObject?r.push(s[f].toJsonObject()):r.push(s[f]);(e=Et.extend(e,t)).subLayers={layers:r},e.object=null;var p=Et.toJSON([e]);i.request({method:o,data:p,scope:i,success:i.serviceProcessCompleted,failure:i.serviceProcessFailed})}}}])&&_b(t.prototype,e),n&&_b(t,n),o}();function Cb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SetLayersInfoService=Ob;var Pb=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&Et.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var t="{";t+='"layers":[';for(var e=[],n=0,r=this.layerStatusList.length;n<r;n++)e.push(this.layerStatusList[n].toJSON());return t+=e,t+="]",t+="}"}}])&&Cb(t.prototype,n),r&&Cb(t,r),e}();function Tb(t){return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nb(t,e,n){return(Nb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function kb(t){return(kb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ab(t,e){return(Ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SetLayerStatusParameters=Pb;var Ib=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=kb(o).call(this,t,e))||"object"!==Tb(i)&&"function"!=typeof i?Lb(r):i).lastparams=null,n.mapUrl=t,e&&Et.extend(Lb(n),e),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ab(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Nb(kb(o.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"processAsync",value:function(t){if(t instanceof Pb){var e=this;e.url=e.mapUrl;var n=e.url.substr(e.url.length-1,1);if(e.url+="/"===n?"":"/",null==t.resourceID)e.url+="tempLayersSet",e.url+=".json?",e.lastparams=t,e.request({method:"POST",scope:e,success:e.createTempLayerComplete,failure:e.serviceProcessFailed});else{e.url+="tempLayersSet/"+t.resourceID,e.url+=".json?",e.url+="elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString();var r="[{";r+='"type":"UGC",',null!=t.layerStatusList&&0<t.layerStatusList.length&&(r+='"subLayers":'+t.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",e.request({method:"PUT",data:r,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(t){(t=Et.transformResult(t)).succeed&&(this.lastparams.resourceID=t.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var n=e.lastIndexOf("/");return e.substring(n+1,e.length)}},{key:"serviceProcessCompleted",value:function(t){null!=(t=Et.transformResult(t))&&null!=this.lastparams&&(t.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:t})}}])&&Mb(t.prototype,e),n&&Mb(t,n),o}();function Rb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SetLayerStatusService=Ib;var jb=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=o.CONTAIN,this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e.analyst=e.analyst||{},e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Rb(t.prototype,n),r&&Rb(t,r),e}();function Db(t){return(Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bb(t,e){return!e||"object"!==Db(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Gb(t,e,n){return(Gb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ub(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ub(t){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zb(t,e){return(zb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SingleObjectQueryJobsParameter=jb;var qb=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Bb(this,Ub(r).call(this,t,e))).url+="/spatialanalyst/query",n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zb(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){Gb(Ub(r.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){Gb(Ub(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(t){Gb(Ub(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addQueryJob",value:function(t,e){Gb(Ub(r.prototype),"addJob",this).call(this,this.url,t,jb,e)}}])&&Fb(t.prototype,e),n&&Fb(t,n),r}();function Vb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SingleObjectQueryJobsService=qb;var Hb=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){Et.reset(this)}}])&&Vb(t.prototype,n),r&&Vb(t,r),e}();function Wb(t){return(Wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xb(t,e,n){return(Xb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Zb(t){return(Zb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qb(t,e){return(Qb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.StopQueryParameters=Hb;var Kb=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,n=!(i=Zb(o).call(this,t,e))||"object"!==Wb(i)&&"function"!=typeof i?Yb(r):i,e=e||{},Et.extend(Yb(n),e),n.CLASS_NAME="SuperMap.StopQueryService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qb(t,e)}(o,Hr),t=o,(e=[{key:"destroy",value:function(){Xb(Zb(o.prototype),"destroy",this).call(this),Et.reset(this)}},{key:"processAsync",value:function(t){if(t instanceof Hb){var e;e=this.url.substr(this.url.length-1,1),this.url+="/"===e?"":"/",this.url+="stops/keyword/"+t.keyWord,this.url+=".json?",this.request({method:"GET",params:{returnPosition:t.returnPosition},scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Jb(t.prototype,e),n&&Jb(t,n),o}();function $b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.StopQueryService=Kb;var t_=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e.analyst=e.analyst||{},e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&$b(t.prototype,n),r&&$b(t,r),e}();function e_(t){return(e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r_(t,e){return!e||"object"!==e_(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function i_(t,e,n){return(i_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function o_(t){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s_(t,e){return(s_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SummaryAttributesJobsParameter=t_;var a_=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=r_(this,o_(r).call(this,t,e))).url+="/spatialanalyst/summaryattributes",n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s_(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){i_(o_(r.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){i_(o_(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(t){i_(o_(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addSummaryAttributesJob",value:function(t,e){i_(o_(r.prototype),"addJob",this).call(this,this.url,t,t_,e)}}])&&n_(t.prototype,e),n&&n_(t,n),r}();function l_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SummaryAttributesJobsService=a_;var u_=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=et.AVERAGE,this.fields="",this.type=nt.SUMMARYMESH,this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===t.type&&"regionDataset"!==n||"SUMMARYREGION"===t.type&&!r(["meshType","resolution","query"],n))&&(e.analyst=e.analyst||{},"query"===n&&t[n]?e.analyst[n]=t[n].toBBOX():e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):e.type=t[n]:(e.input=e.input||{},e.input[n]=t[n]);function r(t,e){for(var n=t.length;n--;)if(t[n]===e)return 1}}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&l_(t.prototype,n),r&&l_(t,r),e}();function c_(t){return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f_(t,e){return!e||"object"!==c_(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function p_(t,e,n){return(p_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function d_(t){return(d_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y_(t,e){return(y_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SummaryMeshJobParameter=u_;var g_=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=f_(this,d_(r).call(this,t,e))).url+="/spatialanalyst/aggregatepoints",n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y_(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){p_(d_(r.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){p_(d_(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(t){p_(d_(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addSummaryMeshJob",value:function(t,e){p_(d_(r.prototype),"addJob",this).call(this,this.url,t,u_,e)}}])&&h_(t.prototype,e),n&&h_(t,n),r}();function m_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SummaryMeshJobsService=g_;var v_=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=tt.METER,this.type=nt.SUMMARYMESH,this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"type"!==n&&"type"!==n?"output"!==n?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==n)&&(e.analyst=e.analyst||{},"query"===n&&t[n]?e.analyst[n]=t[n].toBBOX():e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):e.type=t[n]:(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&m_(t.prototype,n),r&&m_(t,r),e}();function b_(t){return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function __(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w_(t,e){return!e||"object"!==b_(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function S_(t,e,n){return(S_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function x_(t){return(x_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E_(t,e){return(E_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SummaryRegionJobParameter=v_;var O_=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=w_(this,x_(r).call(this,t,e))).url+="/spatialanalyst/summaryregion",n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E_(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){S_(x_(r.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){S_(x_(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(t){S_(x_(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addSummaryRegionJob",value:function(t,e){S_(x_(r.prototype),"addJob",this).call(this,this.url,t,v_,e)}}])&&__(t.prototype,e),n&&__(t,n),r}();function C_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SummaryRegionJobsService=O_;var P_=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(n=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&C_(t.prototype,n),r&&C_(t,r),e}();function T_(t){return(T_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L_(t,e){return!e||"object"!==T_(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function N_(t,e,n){return(N_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function k_(t){return(k_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A_(t,e){return(A_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.SupplyCenter=P_;var I_=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=L_(this,k_(r).call(this,t,e))).CLASS_NAME="SuperMap.SurfaceAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A_(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){N_(k_(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Ws){var e;e=this.getJsonParameters(t),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(t){var e,n="",r={};if(t instanceof $s)e=this.url.substr(this.url.length-1,1),this.url+="/"===e?"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",$s.toObject(t,r),n=Et.toJSON(r);else{if(!(t instanceof rh))return;e=this.url.substr(this.url.length-1,1),this.url+="/"===e?"geometry/"+t.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/geometry/"+t.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",n=Et.toJSON(t)}return n}}])&&M_(t.prototype,e),n&&M_(t,n),r}();function R_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.SurfaceAnalystService=I_;var j_=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,Et.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"dataset"!==n&&(e[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName=null,this.planCurvatureName=null,this.deleteExistResultDataset=!0}}])&&R_(t.prototype,n),r&&R_(t,r),e}();function D_(t){return(D_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B_(t,e){return!e||"object"!==D_(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function G_(t,e,n){return(G_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function U_(t){return(U_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z_(t,e){return(z_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.TerrainCurvatureCalculationParameters=j_;var q_=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=B_(this,U_(r).call(this,t,e))).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z_(t,e)}(r,yi),t=r,(e=[{key:"destroy",value:function(){G_(U_(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/");var e={};t instanceof j_&&(this.url+="datasets/"+t.dataset+"/terraincalculation/curvature"),j_.toObject(t,e);var n=b.Util.toJSON(e);this.url+=".json?returnContent=true",this.request({method:"POST",data:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}])&&F_(t.prototype,e),n&&F_(t,n),r}();function V_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TerrainCurvatureCalculationService=q_;var H_=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.color=new gn,this.end=0,this.start=0,this.visible=!0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e.color=gn.fromJson(t.color),e}}}],(e=[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.color&&(this.color.destroy(),this.color=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&V_(t.prototype,e),r&&V_(t,r),n}();function W_(t){return(W_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X_(t,e,n){return(X_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Z_(t){return(Z_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q_(t,e){return(Q_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeGridRangeItem=H_;var K_=function(){function o(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(e=!(r=Z_(o).call(this,"GRIDRANGE",t))||"object"!==W_(r)&&"function"!=typeof r?Y_(n):r).items=null,e.rangeMode=g.EQUALINTERVAL,e.rangeParameter=0,e.colorGradientType=v.YELLOW_RED,e.reverseColor=!1,t&&Et.extend(Y_(e),t),e.CLASS_NAME="SuperMap.ThemeGridRange",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q_(t,e)}(o,hp),t=o,n=[{key:"fromObj",value:function(t){if(t){var e=new o;Et.copy(e,t);var n=t.items,r=n?n.length:0;e.items=[];for(var i=0;i<r;i++)e.items.push(H_.fromObj(n[i]));return e}}}],(e=[{key:"destroy",value:function(){X_(Z_(o.prototype),"destroy",this).call(this);var t=this;if(t.items){if(0<t.items.length)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&J_(t.prototype,e),n&&J_(t,n),o}();function $_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeGridRange=K_;var tw=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.color=new gn,this.unique=null,this.visible=!0,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){var e=new n;return Et.copy(e,t),e.color=gn.fromJson(t.color),e}}],(e=[{key:"destroy",value:function(){this.caption=null,this.unique=null,this.color&&(this.color.destroy(),this.color=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Et.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&$_(t.prototype,e),r&&$_(t,r),n}();function ew(t){return(ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iw(t,e,n){return(iw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ow(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ow(t){return(ow=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sw(t,e){return(sw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeGridUniqueItem=tw;var aw=function(){function o(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=this,(e=!(r=ow(o).call(this,"GRIDUNIQUE",t))||"object"!==ew(r)&&"function"!=typeof r?rw(n):r).defaultcolor=new gn,e.items=null,t&&Et.extend(rw(e),t),e.CLASS_NAME="SuperMap.ThemeGridUnique",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sw(t,e)}(o,hp),t=o,n=[{key:"fromObj",value:function(t){var e=new o,n=t.items,r=n?n.length:0;Et.extend(e,t),e.items=[],e.defaultcolor=gn.fromJson(t.defaultcolor);for(var i=0;i<r;i++)e.items.push(tw.fromObj(n[i]));return e}}],(e=[{key:"destroy",value:function(){iw(ow(o.prototype),"destroy",this).call(this);if(this.items){if(0<this.items.length)for(var t in this.items)this.items[t].destroy(),this.items[t]=null;this.items=null}this.defaultcolor&&(this.defaultcolor.destroy(),this.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=Et.copyAttributes(t,this)).defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],n=t.items.length,r=0;r<n;r++)e.push(t.items[r].toServerJSONObject());t.items=e}return t}}])&&nw(t.prototype,e),n&&nw(t,n),o}();function lw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeGridUnique=aw;var uw=function(){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new pp,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,e,r;return t=n,r=[{key:"fromObj",value:function(t){if(t){var e=new n;return Et.copy(e,t),e}}}],(e=[{key:"destroy",value:function(){this.unique=null,this.caption=null,this.offsetX=null,this.offsetY=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}}])&&lw(t.prototype,e),r&&lw(t,r),n}();function cw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeLabelUniqueItem=uw;var hw=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&Et.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){if(this.datasetNames=null,this.dataSourceNames=null,this.joinItems){for(var t=0,e=this.joinItems,n=e.length;t<n;t++)e[t].destroy();this.joinItems=null}if(this.themes){for(var r=0,i=this.themes,o=i.length;r<o;r++)i[r].destroy();this.themes=null}}}])&&cw(t.prototype,n),r&&cw(t,r),e}();function fw(t){return(fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yw(t,e,n){return(yw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gw(t){return(gw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mw(t,e){return(mw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeParameters=hw;var vw=function(){function a(t,e){var n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,n=!(i=gw(a).call(this,t,e))||"object"!==fw(i)&&"function"!=typeof i?dw(r):i,e&&b.Util.extend(dw(n),e);var o,s=dw(n);return o=s.url.substr(s.url.length-1,1),s.url+="/"===o?"tempLayersSet.json?":"/tempLayersSet.json?",n.CLASS_NAME="SuperMap.ThemeService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mw(t,e)}(a,Hr),t=a,(e=[{key:"destroy",value:function(){yw(gw(a.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof hw){var e;e=this.getJsonParameters(t),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(t){var e,n="",r=null,i=null,o=null;n+="[{'type': 'UGC','subLayers': {'layers': [";for(var s=0;s<t.themes.length;s++){r=t.themes[s];var a=Et.toJSON(r);if(n+="{'theme': "+(a=a.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(i=t.displayFilters)&&0<i.length&&(1===i.length?n+="'displayFilter':\""+i[0]+'",':n+="'displayFilter':\""+i[s]+'",'),(o=t.displayOrderBy)&&0<o.length&&(1===o.length?n+="'displayOrderBy':'"+o[0]+"',":n+="'displayOrderBy':'"+o[s]+"',"),(e=t.fieldValuesDisplayFilter)&&(n+="'fieldValuesDisplayFilter':"+Et.toJSON(e)+","),t.joinItems&&0<t.joinItems.length&&t.joinItems[s]&&(n+="'joinItems':["+Et.toJSON(t.joinItems[s])+"],"),t.datasetNames&&t.dataSourceNames){var l=t.datasetNames[s]?s:t.datasetNames.length-1,u=t.dataSourceNames[s]?s:t.dataSourceNames.length-1;n+="'datasetInfo': {'name': '"+t.datasetNames[l]+"','dataSourceName': '"+t.dataSourceNames[u]+"'}},"}else n+="},"}t.themes&&0<t.themes.length&&(n=n.substring(0,n.length-1)),n+="]},";var c=this.url.split("/");return n+="'name': '"+c[c.length-2]+"'}]"}}])&&pw(t.prototype,e),n&&pw(t,n),a}();function bw(t){return(bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ww(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sw(t,e,n){return(Sw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xw(t){return(xw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ew(t,e){return(Ew=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThemeService=vw;var Ow=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(n=!(i=xw(o).call(this,t,e))||"object"!==bw(i)&&"function"!=typeof i?ww(r):i).mode=null,e&&Et.extend(ww(n),e),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ew(t,e)}(o,yi),t=o,(e=[{key:"destroy",value:function(){Sw(xw(o.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t){var e={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),t instanceof la?(n.mode="datasets",n.url+="datasets/"+t.dataset+"/thiessenpolygon",la.toObject(t,e)):t instanceof ch&&(n.mode="geometry",n.url+="geometry/thiessenpolygon",ch.toObject(t,e));var r=Et.toJSON(e);n.url+=".json?returnContent=true",n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&_w(t.prototype,e),n&&_w(t,n),o}();function Cw(t){return(Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mw(t,e,n){return(Mw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Lw(t){return(Lw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nw(t,e){return(Nw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.ThiessenAnalystService=Ow;var kw=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,n=!(i=Lw(o).call(this,t,e))||"object"!==Cw(i)&&"function"!=typeof i?Tw(r):i,e&&Et.extend(Tw(n),e),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nw(t,e)}(o,yi),t=o,(e=[{key:"processAsync",value:function(t){"/"!==this.url.substr(this.url.length-1,1)&&(this.url+="/"),this.url+="geometry/batchanalyst.json?returnContent=true&ignoreAnalystParam=true";var e=this._processParams(t),n=Et.toJSON(e);this.request({method:"POST",data:n,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"_processParams",value:function(t){var e=this;if(Et.isArray(t)){var n=[];return t.map(function(t){return n.push(e._toJSON(t)),t}),n}}},{key:"_toJSON",value:function(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},Ki.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},Zc.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},My.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},My.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},My.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},My.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},ch.toObject(t.param,e.param)}return e}},{key:"destroy",value:function(){Mw(Lw(o.prototype),"destroy",this).call(this)}}])&&Pw(t.prototype,e),n&&Pw(t,n),o}();function Aw(t){return(Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rw(t,e){return!e||"object"!==Aw(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function jw(t,e,n){return(jw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Dw(t){return(Dw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fw(t,e){return(Fw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.GeometryBatchAnalystService=kw;var Bw=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Rw(this,Dw(r).call(this,t,e))).CLASS_NAME="SuperMap.TilesetsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fw(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){jw(Dw(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var t=this.url.substr(this.url.length-1,1);this.url=this.url+("/"===t?"tilesets":"/tilesets")+".json?",this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Iw(t.prototype,e),n&&Iw(t,n),r}();function Gw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TilesetsService=Bw;var Uw=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=rt.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e.analyst=e.analyst||{},e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Gw(t.prototype,n),r&&Gw(t,r),e}();function zw(t){return(zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vw(t,e){return!e||"object"!==zw(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Hw(t,e,n){return(Hw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ww(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ww(t){return(Ww=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jw(t,e){return(Jw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.TopologyValidatorJobsParameter=Uw;var Yw=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Vw(this,Ww(r).call(this,t,e))).url+="/spatialanalyst/topologyvalidator",n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jw(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){Hw(Ww(r.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){Hw(Ww(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(t){Hw(Ww(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addTopologyValidatorJob",value:function(t,e){Hw(Ww(r.prototype),"addJob",this).call(this,this.url,t,Uw,e)}}])&&qw(t.prototype,e),n&&qw(t,n),r}();function Xw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TopologyValidatorJobsService=Yw;var Zw=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(n=[{key:"destroy",value:function(){Et.reset(this)}}])&&Xw(t.prototype,n),r&&Xw(t,r),e}();function Qw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TransferLine=Zw;var Kw=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(t){if(t)return Et.toJSON(t)}}],(n=[{key:"destroy",value:function(){Et.reset(this)}}])&&Qw(t.prototype,n),r&&Qw(t,r),e}();function $w(t){return($w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eS(t,e){return!e||"object"!==$w(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function nS(t,e,n){return(nS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rS(t){return(rS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iS(t,e){return(iS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.TransferPathParameters=Kw;var oS=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=eS(this,rS(r).call(this,t,e))).CLASS_NAME="SuperMap.TransferPathService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iS(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){nS(rS(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof Kw){var e,n;n=this.url.substr(this.url.length-1,1),this.url+="/"===n?"":"/",this.url+="path.json?",e={points:Et.toJSON(t.points),transferLines:Et.toJSON(t.transferLines)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&tS(t.prototype,e),n&&tS(t,n),r}();function sS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TransferPathService=oS;var aS=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=B.NONE,this.transferTactic=F.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(t){if(t)return Et.toJSON(t)}}],(n=[{key:"destroy",value:function(){Et.reset(this)}}])&&sS(t.prototype,n),r&&sS(t,r),e}();function lS(t){return(lS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cS(t,e){return!e||"object"!==lS(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function hS(t,e,n){return(hS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function fS(t){return(fS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pS(t,e){return(pS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.TransferSolutionParameters=aS;var dS=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=cS(this,fS(r).call(this,t,e))).CLASS_NAME="SuperMap.TransferSolutionService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pS(t,e)}(r,Hr),t=r,(e=[{key:"destroy",value:function(){hS(fS(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof aS){var e,n;n=this.url.substr(this.url.length-1,1),this.url+="/"===n?"":"/",this.url+="solutions.json?",e={points:Et.toJSON(t.points),walkingRatio:t.walkingRatio,transferTactic:t.transferTactic,solutionCount:t.solutionCount,transferPreference:t.transferPreference},t.evadeLines&&(e.evadeLines=Et.toJSON(t.evadeLines)),t.evadeStops&&(e.evadeStops=Et.toJSON(t.evadeStops)),t.priorLines&&(e.priorLines=Et.toJSON(t.priorLines)),t.priorStops&&(e.priorStops=Et.toJSON(t.priorStops)),t.travelTime&&(e.travelTime=t.travelTime),this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&uS(t.prototype,e),n&&uS(t,n),r}();function yS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.TransferSolutionService=dS;var gS=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",Et.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&yS(t.prototype,n),r&&yS(t,r),e}();function mS(t){return(mS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bS(t,e){return!e||"object"!==mS(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function _S(t,e,n){return(_S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wS(t){return(wS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function SS(t,e){return(SS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.UpdateEdgeWeightParameters=gS;var xS=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=bS(this,wS(r).call(this,t,e))).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&SS(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){_S(wS(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof gS){var e=this,n=e.url.substr(e.url.length-1,1),r=e.parse(t);"/"===n&&e.url.splice(e.url.length-1,1),e.url=e.url+r+".json?";var i=t.edgeWeight?t.edgeWeight:null;e.request({method:"PUT",scope:e,data:i,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}},{key:"parse",value:function(t){if(t){var e="";for(var n in t)if(""!==t[n]&&"edgeWeight"!==t[n])switch(n){case"edgeId":e+="/edgeweight/"+t[n];break;case"fromNodeId":e+="/fromnode/"+t[n];break;case"toNodeId":e+="/tonode/"+t[n];break;case"weightField":e+="/weightfield/"+t[n]}return e}}}])&&vS(t.prototype,e),n&&vS(t,n),r}();function ES(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.UpdateEdgeWeightService=xS;var OS=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",Et.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&ES(t.prototype,n),r&&ES(t,r),e}();function CS(t){return(CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function TS(t,e){return!e||"object"!==CS(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function MS(t,e,n){return(MS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function LS(t){return(LS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NS(t,e){return(NS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.UpdateTurnNodeWeightParameters=OS;var kS=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=TS(this,LS(r).call(this,t,e))).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NS(t,e)}(r,Ro),t=r,(e=[{key:"destroy",value:function(){MS(LS(r.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(t instanceof OS){var e=this,n=e.url.substr(e.url.length-1,1),r=e.parse(t);"/"===n&&e.url.splice(e.url.length-1,1),e.url=e.url+r+".json?";var i=t.turnNodeWeight?t.turnNodeWeight:null;e.request({method:"PUT",scope:e,data:i,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}},{key:"parse",value:function(t){if(t){var e="";for(var n in t)if(""!==t[n]&&"turnNodeWeight"!==t[n])switch(n){case"nodeId":e+="/turnnodeweight/"+t[n];break;case"fromEdgeId":e+="/fromedge/"+t[n];break;case"toEdgeId":e+="/toedge/"+t[n];break;case"weightField":e+="/weightfield/"+t[n]}return e}}}])&&PS(t.prototype,e),n&&PS(t,n),r}();function AS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.UpdateTurnNodeWeightService=kS;var IS=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=K.CLIP,this.output=null,this.mappingParameters=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(t,e){for(var n in t)"datasetName"!==n?"output"!==n?(e.analyst=e.analyst||{},e.analyst[n]=t[n],"mappingParameters"===n&&(e.analyst[n]=e.analyst[n]||{},e.analyst.mappingParameters=t[n])):(e.output=e.output||{},e.output=t[n]):(e.input=e.input||{},e.input[n]=t[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof uo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&AS(t.prototype,n),r&&AS(t,r),e}();function RS(t){return(RS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function DS(t,e){return!e||"object"!==RS(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function FS(t,e,n){return(FS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function BS(t){return(BS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GS(t,e){return(GS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.VectorClipJobsParameter=IS;var US=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=DS(this,BS(r).call(this,t,e))).url+="/spatialanalyst/vectorclip",n.CLASS_NAME="SuperMap.VectorClipJobsService",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&GS(t,e)}(r,bo),t=r,(e=[{key:"destroy",value:function(){FS(BS(r.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){FS(BS(r.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(t){FS(BS(r.prototype),"getJobs",this).call(this,this.url+"/"+t)}},{key:"addVectorClipJob",value:function(t,e){FS(BS(r.prototype),"addJob",this).call(this,this.url,t,IS,e)}}])&&jS(t.prototype,e),n&&jS(t,n),r}();function zS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.VectorClipJobsService=US;var qS=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type=null}}])&&zS(t.prototype,n),r&&zS(t,r),e}();function VS(t){return(VS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function WS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JS(t,e,n){return(JS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function YS(t){return(YS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XS(t,e){return(XS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.RasterFunctionParameter=qS;var ZS=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=YS(i).call(this,t))||"object"!==VS(r)&&"function"!=typeof r?WS(n):r).redIndex=0,e.nirIndex=1,e.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",e.type=at.NDVI,Et.extend(WS(e),t),e.CLASS_NAME="SuperMap.NDVIParameter",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&XS(t,e)}(i,qS),t=i,(e=[{key:"destroy",value:function(){JS(YS(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&HS(t.prototype,e),n&&HS(t,n),i}();function QS(t){return(QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tx(t,e,n){return(tx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ex(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ex(t){return(ex=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nx(t,e){return(nx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.NDVIParameter=ZS;var rx=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,(e=!(r=ex(i).call(this,t))||"object"!==QS(r)&&"function"!=typeof r?$S(n):r).altitude=45,e.azimuth=315,e.zFactor=1,e.type=at.HILLSHADE,Et.extend($S(e),t),e.CLASS_NAME="SuperMap.HillshadeParameter",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nx(t,e)}(i,qS),t=i,(e=[{key:"destroy",value:function(){tx(ex(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&KS(t.prototype,e),n&&KS(t,n),i}();b.HillshadeParameter=rx;var ix=b.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},ox=b.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},sx=b.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},ax=b.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};function lx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ux=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},Et.extend(this,t),this.serverType=i.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:{};return e=this.createCredentialUrl(e),i.crossOrigin=this.options.crossOrigin,i.headers=this.options.headers,sr.commit(t,e,n,i).then(function(t){return t.json()})}},{key:"createCredentialUrl",value:function(t){var e=t,n=this.getCredential();if(n){var r="key="+n,i=e.substring(e.length-1,e.length);-1<e.indexOf("?")&&"?"===i?e+=r:-1<e.indexOf("?")&&"?"!==i?e+="&"+r:e+="?"+r}return e}},{key:"getCredential",value:function(){}}])&&lx(t.prototype,n),r&&lx(t,r),e}();function cx(t){return(cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fx(t){return(fx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function px(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dx(t,e){return(dx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.OnlineServiceBase=ux;var yx=function(){function o(t,e){var n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,e=e||{},(n=!(i=fx(o).call(this,t))||"object"!==cx(i)&&"function"!=typeof i?px(r):i).MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,Et.extend(px(n),e),n.id&&(n.serviceUrl=t+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dx(t,e)}(o,ux),t=o,(e=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){Et.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&hx(t.prototype,e),n&&hx(t,n),o}();function gx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.OnlineData=yx;var mx=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,n,r;return t=e,(n=[{key:"load",value:function(){return sr.get(this.rootUrl).then(function(t){return t})}},{key:"login",value:function(){lr.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(t){var a=this,e=a.mDatasUrl;return t=t&&t.toJSON(),sr.get(e,t).then(function(t){if(t&&t.content&&!(t.content.length<1)){for(var e=[],n=t.content,r=n.length,i=0;i<r;i++){var o=n[i],s=new yx(a.mDatasUrl,o);e.push(s)}return e}})}}])&&gx(t.prototype,n),r&&gx(t,r),e}();function vx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Online=mx;var bx=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){var t={types:this.types,fileName:this.fileName,serviceStatuses:this.serviceStatuses,serviceId:this.serviceId,ids:this.ids,keywords:this.keywords,orderBy:this.orderBy,tags:this.tags,filterFields:this.filterFields};for(var e in t)null==t[e]&&delete t[e];return t}}])&&vx(t.prototype,n),r&&vx(t,r),e}();function _x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.OnlineQueryDatasParameter=bx;var wx=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=Z.SERVER,this.limitation=null,Et.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&_x(t.prototype,n),r&&_x(t,r),e}();b.KeyServiceParameter=wx;function Sx(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Sx),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,Et.extend(this,e),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||i.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens.json";this.type===i.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=this.server+n),this.keyServiceUrl||(this.type===i.IPORTAL?this.keyServiceUrl=this.server+"/web/mycontent/keys/register.json":this.type===i.ONLINE&&(this.keyServiceUrl=this.server+"/web/mycontent/keys.json"))}function xx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ServerInfo=Sx;var Ex=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=Z.NONE,this.ip=null,this.referer=null,this.expiration=60,Et.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&xx(t.prototype,n),r&&xx(t,r),e}();b.TokenServiceParameter=Ex;var Ox=n(10),Cx=n.n(Ox);function Px(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tx=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=e||{},this.url=t,this.client=new Cx.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Ze(this,null,this.EVENT_TYPES),this.eventListeners=null,Et.extend(this,e),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,e,r;return t=n,(e=[{key:"setGeoFence",value:function(t){this.geoFence=t}},{key:"bulk",value:function(t,e){return this.client.bulk(t,e)}},{key:"clearScroll",value:function(t,e){return this.client.clearScroll(t,e)}},{key:"count",value:function(t,e){return this.client.count(t,e)}},{key:"create",value:function(t,e){return this.client.create(t,e)}},{key:"delete",value:function(t,e){return this.client.delete(t,e)}},{key:"deleteByQuery",value:function(t,e){return this.client.deleteByQuery(t,e)}},{key:"deleteScript",value:function(t,e){return this.client.deleteScript(t,e)}},{key:"deleteTemplate",value:function(t,e){return this.client.deleteTemplate(t,e)}},{key:"exists",value:function(t,e){return this.client.exists(t,e)}},{key:"existsSource",value:function(t,e){return this.client.existsSource(t,e)}},{key:"explain",value:function(t,e){return this.client.explain(t,e)}},{key:"fieldCaps",value:function(t,e){return this.client.fieldCaps(t,e)}},{key:"get",value:function(t,e){return this.client.get(t,e)}},{key:"getScript",value:function(t,e){return this.client.getScript(t,e)}},{key:"getSource",value:function(t,e){return this.client.getSource(t,e)}},{key:"getTemplate",value:function(t,e){return this.client.getTemplate(t,e)}},{key:"index",value:function(t,e){return this.client.index(t,e)}},{key:"info",value:function(t,e){return this.client.info(t,e)}},{key:"mget",value:function(t,e){return this.client.mget(t,e)}},{key:"msearch",value:function(t,e){var n=this;return n.client.msearch(t).then(function(t){return n._update(t.responses,e),t},function(t){return e(t),n.events.triggerEvent("error",{error:t}),t})}},{key:"msearchTemplate",value:function(t,e){return this.client.msearchTemplate(t,e)}},{key:"mtermvectors",value:function(t,e){return this.client.mtermvectors(t,e)}},{key:"ping",value:function(t,e){return this.client.ping(t,e)}},{key:"putScript",value:function(t,e){return this.client.putScript(t,e)}},{key:"putTemplate",value:function(t,e){return this.client.putTemplate(t,e)}},{key:"reindex",value:function(t,e){return this.client.reindex(t,e)}},{key:"reindexRessrottle",value:function(t,e){return this.client.reindexRessrottle(t,e)}},{key:"renderSearchTemplate",value:function(t,e){return this.client.renderSearchTemplate(t,e)}},{key:"scroll",value:function(t,e){return this.client.scroll(t,e)}},{key:"search",value:function(t,e){var n=this;return n.client.search(t).then(function(t){return n._update(t.responses,e),t},function(t){return e(t),n.events.triggerEvent("error",{error:t}),t})}},{key:"searchShards",value:function(t,e){return this.client.searchShards(t,e)}},{key:"searchTemplate",value:function(t,e){return this.client.searchTemplate(t,e)}},{key:"suggest",value:function(t,e){return this.client.suggest(t,e)}},{key:"termvectors",value:function(t,e){return this.client.termvectors(t,e)}},{key:"update",value:function(t,e){return this.client.update(t,e)}},{key:"updateByQuery",value:function(t,e){return this.client.updateByQuery(t,e)}},{key:"_update",value:function(t,e){t&&(this.data=t,this.openGeoFence&&this.geoFence&&this._validateDatas(t),this.events.triggerEvent("change",{data:this.data}),this.change?this.change&&this.change(t):e&&e(void 0,{responses:t}))}},{key:"_validateDatas",value:function(t){if(t){t instanceof Array||(t=[t]);var e,n=t.length;for(e=0;e<n;e++)this._validateData(t[e])}}},{key:"_validateData",value:function(l){var u=this;l.hits.hits.map(function(t){var e=t._source,n=u._getMeterPerMapUnit(u.geoFence.unit),r=u.geoFence.center[0]*n,i=u.geoFence.center[1]*n,o=e.x*n,s=e.y*n,a=u._distance(o,s,r,i);return u.geoFence.radius<a&&(u.outOfGeoFence&&u.outOfGeoFence(l),u.events.triggerEvent("outOfGeoFence",{data:l})),t})}},{key:"_distance",value:function(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}},{key:"_getMeterPerMapUnit",value:function(t){var e;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*6378137/360),e}}])&&Px(t.prototype,e),r&&Px(t,r),n}();function Mx(t){return(Mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ElasticSearch=Tx;var Nx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var e,n,r;return e=t,(n=[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"!=Mx(t)||null===t)return t;var n=t;if(t instanceof Array){n=[];for(var r=0,i=t.length;r<i;r++)n[r]=this.clone(t[r])}else if(!e[Object.prototype.toString.call(t)])for(var o in n={},t)t.hasOwnProperty(o)&&(n[o]=this.clone(t[o]));return n}},{key:"mergeItem",value:function(t,e,n,r){var i=this.BUILTIN_OBJECT;e.hasOwnProperty(n)&&("object"!=Mx(t[n])||i[Object.prototype.toString.call(t[n])]?!r&&n in t||(t[n]=e[n]):this.merge(t[n],e[n],r))}},{key:"merge",value:function(t,e,n){for(var r in e)this.mergeItem(t,e,r,n);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var n,r=this._canvas,i=this._pixelCtx,o=this._width,s=this._height,a=this._offsetX,l=this._offsetY;o<t+a&&(o=t+a+100,r.width=o,n=!0),s<e+l&&(s=e+l+100,r.height=s,n=!0),t<-a&&(o+=a=100*Math.ceil(-t/100),r.width=o,n=!0),e<-l&&(s+=l=100*Math.ceil(-e/100),r.height=s,n=!0),n&&i.translate(a,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}},{key:"inherits",value:function(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)t.prototype[i]=n[i];t.constructor=t}}])&&Lx(e.prototype,n),r&&Lx(e,r),t}();function kx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ax=function(){function h(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),this.util=new Nx,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,e,n;return t=h,(e=[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,n,r,i,o,s){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var l=this._ctx.createRadialGradient(t,e,n,r,i,o),u=0,c=s.length;u<c;u++)l.addColorStop(s[u][0],s[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(t,e,n,r,i){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var s=this._ctx.createLinearGradient(t,e,n,r),a=0,l=i.length;a<l;a++)s.addColorStop(i[a][0],i[a][1]);return s.__nonRecursion=!0,s}},{key:"getStepColors",value:function(t,e,n){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var r=[],i=((e=this.getData(e))[0]-t[0])/n,o=(e[1]-t[1])/n,s=(e[2]-t[2])/n,a=(e[3]-t[3])/n,l=0,u=t[0],c=t[1],h=t[2],f=t[3];l<n;l++)r[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),+f.toFixed(4)],"rgba"),u+=i,c+=o,h+=s,f+=a;return u=e[0],c=e[1],h=e[2],f=e[3],r[l]=this.toColor([u,c,h,f],"rgba"),r}},{key:"getGradientColors",value:function(t,e){var n=[],r=t.length;if(void 0===e&&(e=20),1===r)n=this.getStepColors(t[0],t[0],e);else if(1<r)for(var i=0,o=r-1;i<o;i++){var s=this.getStepColors(t[i],t[i+1],e);i<o-1&&s.pop(),n=n.concat(s)}return n}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return 1<t?Math.ceil(t):t}),-1<e.indexOf("hex"))return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(-1<e.indexOf("hs")){var n=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=n[0],t[2]=n[1]}return-1<e.indexOf("a")?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],n=0;return t.replace(/[\d.]+/g,function(t){n<3?t|=0:t=+t,e[n++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var n=this.getData(t),r=n[3];return void 0===r&&(r=1),-1<t.indexOf("hsb")?n=this._HSV_2_RGB(n):-1<t.indexOf("hsl")&&(n=this._HSL_2_RGB(n)),-1<e.indexOf("hsb")||-1<e.indexOf("hsv")?n=this._RGB_2_HSB(n):-1<e.indexOf("hsl")&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,n=(240&t)<<4,r=15&t;t="#"+((1<<24)+(e<<4)+e+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var n=0<e?1:-1;void 0===e&&(e=0),e=1<Math.abs(e)?1:Math.abs(e),t=this.toRGB(t);for(var r=this.getData(t),i=0;i<3;i++)r[i]=1==n?r[i]*(1-e)|0:(255-r[i])*e+r[i]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,n){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===n&&(n=.5);for(var r=2*(n=1-this.adjust(n,[0,1]))-1,i=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),s=i[3]-o[3],a=(1+(r*s==-1?r:(r+s)/(1+r*s)))/2,l=1-a,u=[],c=0;c<3;c++)u[c]=i[c]*a+o[c]*l;var h=i[3]*n+o[3]*(1-n);return h=Math.max(0,Math.min(1,h)),1===i[3]&&1===o[3]?this.toColor(u,"rgb"):(u[3]=h,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var e,n,r=(t=this.normalize(t)).match(this.colorRegExp);if(null===r)throw new Error("The color format error");var i,o=[];if(r[2])i=[(e=r[2].replace("#","").split(""))[0]+e[1],e[2]+e[3],e[4]+e[5]],o=this.map(i,function(t){return h.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(r[4]){var s=r[4].split(",");n=s[3],i=s.slice(0,3),o=this.map(i,function(t){return t=Math.floor(0<t.indexOf("%")?2.55*parseInt(t,0):t),h.prototype.adjust.call(this,t,[0,255])}),void 0!==n&&o.push(this.adjust(parseFloat(n),[0,1]))}else if(r[5]||r[6]){var a=(r[5]||r[6]).split(","),l=parseInt(a[0],0)/360,u=a[1],c=a[2];n=a[3],(o=this.map([u,c],function(t){return h.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(l),void 0!==n&&o.push(this.adjust(parseFloat(n),[0,1]))}return o}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var n=this.getData(this.toRGBA(t));return n[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(n,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var n=t?t.length:0,r=0;r<n;r++)t[r]=e(t[r]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,n,r,i=t[0],o=t[1],s=t[2];if(0===o)r=n=e=255*s;else{var a=6*i;6===a&&(a=0);var l=0|a,u=s*(1-o),c=s*(1-o*(a-l)),h=s*(1-o*(1-(a-l))),f=0,p=0,d=0;d=0==l?(f=s,p=h,u):1==l?(f=c,p=s,u):2==l?(f=u,p=s,h):3==l?(f=u,p=c,s):4==l?(f=h,p=u,s):(f=s,p=u,c),e=255*f,n=255*p,r=255*d}return[e,n,r]}},{key:"_HSL_2_RGB",value:function(t){var e,n,r,i=t[0],o=t[1],s=t[2];if(0===o)r=n=e=255*s;else{var a,l=2*s-(a=s<.5?s*(1+o):s+o-o*s);e=255*this._HUE_2_RGB(l,a,i+1/3),n=255*this._HUE_2_RGB(l,a,i),r=255*this._HUE_2_RGB(l,a,i-1/3)}return[e,n,r]}},{key:"_HUE_2_RGB",value:function(t,e,n){return n<0&&(n+=1),1<n&&--n,6*n<1?t+6*(e-t)*n:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),l=a-s,u=a;if(0==l)n=e=0;else{n=l/a;var c=((a-r)/6+l/2)/l,h=((a-i)/6+l/2)/l,f=((a-o)/6+l/2)/l;r===a?e=f-h:i===a?e=1/3+c-f:o===a&&(e=2/3+h-c),e<0&&(e+=1),1<e&&--e}return[e*=360,n*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),l=a-s,u=(a+s)/2;if(0==l)n=e=0;else{n=u<.5?l/(a+s):l/(2-a-s);var c=((a-r)/6+l/2)/l,h=((a-i)/6+l/2)/l,f=((a-o)/6+l/2)/l;r===a?e=f-h:i===a?e=1/3+c-f:o===a&&(e=2/3+h-c),e<0&&(e+=1),1<e&&--e}return[e*=360,n*=100,u*=100]}}])&&kx(t.prototype,e),n&&kx(t,n),h}();function Ix(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rx=new Ax,jx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return n.height=t,n.width=e,n.getContext("2d")}},{key:"getLinearGradient",value:function(t,e,n,r,i){this._ctx||(this._ctx=this.getContext());for(var o=this._ctx.createLinearGradient(t,e,n,r),s=i.length,a=1/(s-1),l=0,u=0;u<s;u++)o.addColorStop(l,i[u]),l+=a;return o.__nonRecursion=!0,o}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(t,e,n){t=Rx.toRGBA(t),e=Rx.toRGBA(e),t=Rx.getData(t);for(var r=[],i=((e=Rx.getData(e))[0]-t[0])/n,o=(e[1]-t[1])/n,s=(e[2]-t[2])/n,a=(e[3]-t[3])/n,l=0,u=t[0],c=t[1],h=t[2],f=t[3];l<n;l++)r[l]=Rx.toColor([Rx.adjust(Math.floor(u),[0,255]),Rx.adjust(Math.floor(c),[0,255]),Rx.adjust(Math.floor(h),[0,255]),+f.toFixed(4)],"hex"),u+=i,c+=o,h+=s,f+=a;return u=e[0],c=e[1],h=e[2],f=e[3],r[l]=Rx.toColor([u,c,h,f],"hex"),r}},{key:"getGradientColors",value:function(t,e,n){var r,i,o,s=[],a=t.length;if(void 0!==e){if(e<=a)if("RANGE"===n)for(i=0;i<e;i++)s.push(t[i]);else for(i=0;i<e;i++){var l=Math.floor(i/2);if(i%2==0)s.push(t[l]);else{var u=t.length-1-l;s.push(t[u])}}else{for(r=Math.ceil(e/(a-1)),i=0,o=a-1;i<o;i++){var c=this.getStepColors(t[i],t[i+1],r);i<o-1&&c.pop(),s=s.concat(c)}for(var h=s.length-e,f=0;f<h;f++)s.splice(2,1)}return s}}}],(n=null)&&Ix(e.prototype,n),r&&Ix(e,r),t}();function Dx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ColorsPickerUtil=jx;var Fx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(t){var e=this.newInstance();return e.setSerie(t),e}},{key:"getArrayStatistic",value:function(t,e){return t.length?"Sum"===e||"求和"===e?this.getSum(t):"Maximum"===e||"最大值"===e?this.getMax(t):"Minimum"===e||"最小值"===e?this.getMin(t):"Average"===e||"平均值"===e?this.getMean(t):"Median"===e||"中位数"===e?this.getMedian(t):"times"===e||"计数"===e?this.getTimes(t):void 0:0}},{key:"getArraySegments",value:function(t,e,n){return"offset"===e?this.getEqInterval(t,n):"jenks"===e?this.getJenks(t,n):"square"===e?0<=this.getMin(t)&&this.getSqrtInterval(t,n):"logarithm"===e?0<this.getMin(t)&&this.getGeometricProgression(t,n):void 0}},{key:"getSum",value:function(t){return this.getInstance(t).sum()}},{key:"getMax",value:function(t){return this.getInstance(t).max()}},{key:"getMin",value:function(t){return this.getInstance(t).min()}},{key:"getMean",value:function(t){return this.getInstance(t).mean()}},{key:"getMedian",value:function(t){return this.getInstance(t).median()}},{key:"getTimes",value:function(t){return t.length}},{key:"getEqInterval",value:function(t,e){return this.getInstance(t).getClassEqInterval(e)}},{key:"getJenks",value:function(t,e){return this.getInstance(t).getClassJenks(e)}},{key:"getSqrtInterval",value:function(t,e){return t=t.map(function(t){return Math.sqrt(t)}),this.getInstance(t).getClassEqInterval(e).map(function(t){return t*t})}},{key:"getGeometricProgression",value:function(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}],(n=null)&&Dx(e.prototype,n),r&&Dx(e,r),t}();b.ArrayStatistic=Fx;var Bx=n(11),Gx=n.n(Bx);function Ux(t){return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vx(t,e,n){return e&&qx(t.prototype,e),n&&qx(t,n),t}var Hx=function(){function e(t){zx(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return Vx(e,[{key:"getParser",value:function(o){var p,d,s,t,f,a,l,u,c,h=this;function i(){t=l[s],u=f=d}function y(){l[s]=t,u=d=f}function g(){u<d&&(l[s]=l[s].slice(d-u),u=d)}function m(t){var e,n,r,i;if(t instanceof Function)return t.call(c.parsers);if("string"==typeof t)e=p.charAt(d)===t?t:null,n=1,g();else{if(g(),!(e=t.exec(l[s])))return null;n=e[0].length}if(e){var o=d+=n;for(i=d+l[s].length-n;d<i&&(32===(r=p.charCodeAt(d))||10===r||9===r);)d++;return l[s]=l[s].slice(n+(d-o)),u=d,0===l[s].length&&s<l.length-1&&s++,"string"!=typeof e&&1===e.length?e[0]:e}}function v(t){var e,n={index:a,filename:o.filename,message:"Parse error.",line:0,column:-1};for(var r in n)0===t[r]&&(t[r]=n[r]);e=t.filename&&h.env.inputs&&h.env.inputs[t.filename]?h.env.inputs[t.filename]:p,t.line=(e.slice(0,t.index).match(/\n/g)||"").length+1;for(var i=t.index;0<=i&&"\n"!==e.charAt(i);i--)t.column++;return new Error([t.filename,t.line,t.column,t.message].join(";"))}return this.env=o=o||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(t){var e,f=null;if(d=s=u=a=0,l=[],p=t.replace(/\r\n/g,"\n"),o.filename&&(h.env.inputs[o.filename]=p),l=function(t){for(var e,n,r,i,o=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,a=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,u=0,c=t[0],h=0;h<p.length;)if(s.lastIndex=h,(e=s.exec(p))&&e.index===h&&(h+=e[0].length,c.push(e[0])),r=p.charAt(h),a.lastIndex=l.lastIndex=h,(e=l.exec(p))&&e.index===h)h+=e[0].length,c.push(e[0]);else if(n||"/"!==r||"/"!==(i=p.charAt(h+1))&&"*"!==i||!(e=a.exec(p))||e.index!==h){switch(r){case"{":if(!n){u++,c.push(r);break}case"}":if(!n){u--,c.push(r),t[++o]=c=[];break}case"(":if(!n){n=!0,c.push(r);break}case")":if(n){n=!1,c.push(r);break}default:c.push(r)}h++}else h+=e[0].length,c.push(e[0]);return 0!==u&&(f={index:h-1,type:"Parse",message:0<u?"missing closing `}`":"missing opening `{`"}),t.map(function(t){return t.join("")})}([[]]),f)throw v(f);function n(t,e){var n=t.specificity,r=e.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]}return(e=new b.CartoCSS.Tree.Ruleset([],m(this.parsers.primary))).root=!0,e.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+v(t).message:e.errors.message=v(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(n),t},e},parsers:{primary:function(){for(var t,e=[];(t=m(this.rule)||m(this.ruleset)||m(this.comment))||m(/^[\s\n]+/)||(t=m(this.invalid));)t&&e.push(t);return e},invalid:function(){var t=m(/^[^;\n]*[;\n]/);if(t)return new b.CartoCSS.Tree.Invalid(t,f)},comment:function(){var t;if("/"===p.charAt(d))return"/"===p.charAt(d+1)?new b.CartoCSS.Tree.Comment(m(/^\/\/.*/),!0):(t=m(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new b.CartoCSS.Tree.Comment(t):void 0},entities:{quoted:function(){if('"'===p.charAt(d)||"'"===p.charAt(d)){var t=m(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return t?new b.CartoCSS.Tree.Quoted(t[1]||t[2]):void 0}},field:function(){if(m("[")){var t=m(/(^[^\]]+)/);if(m("]"))return t?new b.CartoCSS.Tree.Field(t[1]):void 0}},comparison:function(){var t=m(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var t=m(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(t)return new b.CartoCSS.Tree.Keyword(t)},call:function(){var t,e;if(t=/^([\w\-]+|%)\(/.exec(l[s])){if("url"===(t=t[1]))return null;d+=t.length;if(m("("),e=m(this.entities.arguments),m(")"))return t?new b.CartoCSS.Tree.Call(t,e,d):void 0}},arguments:function(){for(var t,e=[];t=m(this.expression);){e.push(t);if(!m(","))break}return e},literal:function(){return m(this.entities.dimension)||m(this.entities.keywordcolor)||m(this.entities.hexcolor)||m(this.entities.quoted)},url:function(){var t;if("u"===p.charAt(d)&&m(/^url\(/)){t=m(this.entities.quoted)||m(this.entities.variable)||m(/^[\-\w%@$\/.&=:;#+?~]+/)||"";return m(")")?new b.CartoCSS.Tree.URL(void 0!==t.value||t instanceof b.CartoCSS.Tree.Variable?t:new b.CartoCSS.Tree.Quoted(t)):new b.CartoCSS.Tree.Invalid(t,f,"Missing closing ) in URL.")}},variable:function(){var t,e=d;if("@"===p.charAt(d)&&(t=m(/^@[\w-]+/)))return new b.CartoCSS.Tree.Variable(t,e,o.filename)},hexcolor:function(){var t;if("#"===p.charAt(d)&&(t=m(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new b.CartoCSS.Tree.Color(t[1])},keywordcolor:function(){var t=l[s].match(/^[a-z]+/);if(t&&t[0]in b.CartoCSS.Tree.Reference.data.colors)return new b.CartoCSS.Tree.Color(b.CartoCSS.Tree.Reference.data.colors[m(/^[a-z]+/)])},dimension:function(){var t=p.charCodeAt(d);if(!(57<t||t<45||47===t)){var e=m(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return e?new b.CartoCSS.Tree.Dimension(e[1],e[2],f):void 0}}},variable:function(){var t;if("@"===p.charAt(d)&&(t=m(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=m(this.entities.call)||m(this.entities.literal),e=m(this.entities.field)||m(this.entities.variable),n=m(this.entities.url)||m(this.entities.keyword);return t||e||n},end:function(){var t;return m(";")||("string"==typeof(t="}")?p.charAt(d)===t:!!t.test(l[s]))},element:function(){var t=m(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(t)return new b.CartoCSS.Tree.Element(t)},attachment:function(){var t=m(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){for(var t,e,n,r,i,o=[],s=new b.CartoCSS.Tree.Filterset,a=[],l=0,u=0;(n=m(this.element))||(i=m(this.zoom))||(r=m(this.filter))||(t=m(this.attachment));){if(l++,n)o.push(n);else if(i)a.push(i),u++;else if(r){var c=s.add(r);if(c)throw v({message:c,index:d-1});u++}else{if(e)throw v({message:"Encountered second attachment name.",index:d-1});e=t}var h=p.charAt(d);if("{"===h||"}"===h||";"===h||","===h)break}if(l)return new b.CartoCSS.Tree.Selector(s,a,o,e,u,f)},filter:function(){i();var t,e,n;if(m("[")&&(t=m(/^[a-zA-Z0-9\-_]+/)||m(this.entities.quoted)||m(this.entities.variable)||m(this.entities.keyword)||m(this.entities.field))&&(t instanceof b.CartoCSS.Tree.Quoted&&(t=new b.CartoCSS.Tree.Field(t.toString())),(e=m(this.entities.comparison))&&(n=m(this.entities.quoted)||m(this.entities.variable)||m(this.entities.dimension)||m(this.entities.keyword)||m(this.entities.field)))){if(!m("]"))throw v({message:"Missing closing ] of filter.",index:f-1});return t.is||(t=new b.CartoCSS.Tree.Field(t)),new b.CartoCSS.Tree.Filter(t,e,n,f,o.filename)}},zoom:function(){i();var t,e;if(m(/^\[\s*zoom/g)&&(t=m(this.entities.comparison))&&(e=m(this.entities.variable)||m(this.entities.dimension))&&m("]"))return new b.CartoCSS.Tree.Zoom(t,e,f);y()},block:function(){var t;if(m("{")&&(t=m(this.primary))&&m("}"))return t},ruleset:function(){var t,e,n=[];for(i();t=m(this.selector);){for(n.push(t);m(this.comment););if(!m(","))break;for(;m(this.comment););}if(t)for(;m(this.comment););if(0<n.length&&(e=m(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var r=new b.CartoCSS.Tree.Ruleset(n,e);return r.isMap=!0,r}return new b.CartoCSS.Tree.Ruleset(n,e)}y()},rule:function(){var t,e,n=p.charAt(d);if(i(),"."!==n&&"#"!==n&&(t=m(this.variable)||m(this.property))){if((e=m(this.value))&&m(this.end))return new b.CartoCSS.Tree.Rule(t,e,f,o.filename);a=d,y()}},font:function(){for(var t,e=[],n=[];t=m(this.entity);)n.push(t);if(e.push(new b.CartoCSS.Tree.Expression(n)),m(","))for(;(t=m(this.expression))&&(e.push(t),m(",")););return new b.CartoCSS.Tree.Value(e)},value:function(){for(var t,e=[];(t=m(this.expression))&&(e.push(t),m(",")););return 1<e.length?new b.CartoCSS.Tree.Value(e.map(function(t){return t.value[0]})):1===e.length?new b.CartoCSS.Tree.Value(e):void 0},sub:function(){var t;if(m("(")&&(t=m(this.expression))&&m(")"))return t},multiplication:function(){var t,e,n,r;if(t=m(this.operand)){for(;(n=m("/")||m("*")||m("%"))&&(e=m(this.operand));)r=new b.CartoCSS.Tree.Operation(n,[r||t,e],f);return r||t}},addition:function(){var t,e,n,r;if(t=m(this.multiplication)){for(;(n=m(/^[-+]\s+/)||" "!=p.charAt(d-1)&&(m("+")||m("-")))&&(e=m(this.multiplication));)r=new b.CartoCSS.Tree.Operation(n,[r||t,e],f);return r||t}},operand:function(){return m(this.sub)||m(this.entity)},expression:function(){for(var t,e=[];t=m(this.addition)||m(this.entity);)e.push(t);if(0<e.length)return new b.CartoCSS.Tree.Expression(e)},property:function(){var t=m(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}}}},{key:"parse",value:function(t){var e=this.parser;return this.ruleSet=e.parse(t)}},{key:"toShaders",value:function(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var n={},r=[];this._toShaders(n,r,e);for(var i=[],o={},s=0,a=e.length;s<a;++s){var l=e[s],u=l.attachment,c=n[r[s]],h=[];if(!o[u]){var f=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var d=(c[p].join("\n"),null);Object.defineProperty(h,"layerIndex",{configurable:!0,enumerable:!1,value:d})}else h[f++]=function(t,e){if(!Array.isArray(t))return t;var n=t.join("\n"),r='attributes["FEATUREID"]&&attributes["FEATUREID"]',i=n.indexOf(r);if(0<=i){if(!e.featureFilter){var o=i+r.length,s=n.indexOf(")",o+1),a="featureId&&(featureId"+n.substring(o,s)+")";Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:function(){return!!a}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+n+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+n+"; return _value; ")}}(c[p],h);Object.defineProperty(h,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(h,"elements",{configurable:!0,enumerable:!1,value:l.elements}),i.push(h),o[r[s]]=!0}Object.defineProperty(h,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return i}}return null}},{key:"_toShaders",value:function(t,e,n){for(var r=0,i=n.length;r<i;++r){for(var o=n[r],s=[],a=0,l=o.elements.length;a<l;a++)s.push(o.elements[a]);var u=o.filters.filters,c=[];for(var h in u)c.push(u[h].id);var f=s.join("/")+"::"+o.attachment+"_"+c.join("_");e.push(f);var p=t[f]=t[f]||{};p.zoom=b.CartoCSS.Tree.Zoom.all;var d=o.toJS(this.env);for(var y in d)(p[y]=p[y]||[]).push(d[y].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}();b._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},Hx.mapnik_reference={version:{latest:b._mapnik_reference_latest,"2.1.1":b._mapnik_reference_latest}},b.CartoCSS=Hx,b.CartoCSS.Tree={},b.CartoCSS.Tree.operate=function(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"%":return e%n;case"/":return e/n}},b.CartoCSS.Tree.functions={rgb:function(t,e,n){return this.rgba(t,e,n,1)},rgba:function(t,e,n,r){var i=this,o=[t,e,n].map(function(t){return i.number(t)});return r=i.number(r),o.some(isNaN)||isNaN(r)?null:new b.CartoCSS.Tree.Color(o,r)},stop:function(e,t,n){var r,i;return 1<arguments.length&&(r=t),2<arguments.length&&(i=n),{is:"tag",val:e,color:r,mode:i,toString:function(t){return'\n\t<stop value="'+e.ev(t)+'"'+(r?' color="'+r.ev(t)+'" ':"")+(i?' mode="'+i.ev(t)+'" ':"")+"/>"}}},hsl:function(t,e,n){return this.hsla(t,e,n,1)},hsla:function(t,e,n,r){if([t=this.number(t)%360/360,e=this.number(e),n=this.number(n),r=this.number(r)].some(isNaN))return null;var i=n<=.5?n*(e+1):n+e-n*e,o=2*n-i;return this.rgba(255*s(t+1/3),255*s(t),255*s(t-1/3),r);function s(t){return 6*(t=t<0?t+1:1<t?t-1:t)<1?o+(i-o)*t*6:2*t<1?i:3*t<2?o+(i-o)*(2/3-t)*6:o}},hue:function(t){return"toHSL"in t?new b.CartoCSS.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new b.CartoCSS.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new b.CartoCSS.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new b.CartoCSS.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.s+=e.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},desaturate:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.s-=e.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},lighten:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.l+=e.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},darken:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.l-=e.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},fadein:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.a+=e.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},fadeout:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL();return n.a-=e.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},spin:function(t,e){if(!("toHSL"in t))return null;var n=t.toHSL(),r=(n.h+e.value)%360;return n.h=r<0?360+r:r,this.hsla_simple(n)},replace:function(t,e,n){return"field"===t.is?t.toString+".replace("+e.toString()+", "+n.toString()+")":t.replace(e,n)},mix:function(t,e,n){var r=n.value/100,i=2*r-1,o=t.toHSL().a-e.toHSL().a,s=(1+(i*o==-1?i:(i+o)/(1+i*o)))/2,a=1-s,l=[t.rgb[0]*s+e.rgb[0]*a,t.rgb[1]*s+e.rgb[1]*a,t.rgb[2]*s+e.rgb[2]*a],u=t.alpha*r+e.alpha*(1-r);return new b.CartoCSS.Tree.Color(l,u)},greyscale:function(t){return this.desaturate(t,new b.CartoCSS.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),n=t.value,r=0;r<e.length;r++)n=n.replace(/%s/,e[r].value).replace(/%[da]/,e[r].toString());return n=n.replace(/%%/g,"%"),new b.CartoCSS.Tree.Quoted(n)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof b.CartoCSS.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"==typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},b.CartoCSS.Tree.Call=function(){function r(t,e,n){zx(this,r),this.is="call",this.name=t,this.args=e,this.index=n}return Vx(r,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),n=0;n<t.length;n++)if("undefined"===t[n].is)return{is:"undefined",value:"undefined"};if(this.name in b.CartoCSS.Tree.functions){if(b.CartoCSS.Tree.functions[this.name].length<=t.length){var r=b.CartoCSS.Tree.functions[this.name].apply(b.CartoCSS.Tree.functions,t);return null===r?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+b.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var i=b.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(void 0!==i)return i!==t.length&&-1!==i?(e.error({message:"function "+this.name+"() takes "+i+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this);var o=Gx()(b.CartoCSS.Tree.Reference.mapnikFunctions),s=this.name,a=o.map(function(t){return[t[0],b.CartoCSS.Tree.Reference.editDistance(s,t[0]),t[1]]}).sort(function(t,e){return t[1]-e[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+a[0][0]+"("+a[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}},{key:"toString",value:function(){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),r}(),b.CartoCSS.Tree.Color=function(){function n(t,e){zx(this,n),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=t.split("").map(function(t){return parseInt(t+t,16)}),"number"==typeof e?this.alpha=e:4===t.length?this.alpha=t[3]:this.alpha=1}return Vx(n,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(t,e,n){var r=[];n instanceof b.CartoCSS.Tree.Color||(n=n.toColor());for(var i=0;i<3;i++)r[i]=b.CartoCSS.Tree.operate(e,this.rgb[i],n.rgb[i]);return new b.CartoCSS.Tree.Color(r)}},{key:"toHSL",value:function(){var t,e,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,s=Math.max(n,r,i),a=Math.min(n,r,i),l=(s+a)/2,u=s-a;if(s===a)t=e=0;else{switch(e=.5<l?u/(2-s-a):u/(s+a),s){case n:t=(r-i)/u+(r<i?6:0);break;case r:t=(i-n)/u+2;break;case i:t=(n-r)/u+4}t/=6}return{h:360*t,s:e,l:l,a:o}}}]),n}(),b.CartoCSS.Tree.Comment=function(){function n(t,e){zx(this,n),this.value=t,this.silent=!!e}return Vx(n,[{key:"toString",value:function(){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),n}(),b.CartoCSS.Tree.Definition=function(){function r(t,e){zx(this,r),this.elements=t.elements,this.rules=e,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return Vx(r,[{key:"toString",value:function(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}},{key:"toJS",value:function(i){var o={},t=this.zoom,s=this.filters.toJS(i),e=[t];function n(t){if(t instanceof b.CartoCSS.Tree.Rule)o[t.name]=o[t.name]||[],s?o[t.name].push("if("+s+"){"+t.value.toJS(i)+"}"):o[t.name].push(t.value.toJS(i));else if(t instanceof b.CartoCSS.Tree.Ruleset){var e=t.toJS(i);for(var n in e)for(var r in o[n]=o[n]||[],e[n])o[n].push(e[n][r])}}for(var r in s&&e.push(s),s=e.join(" && "),this.rules)n(this.rules[r]);return o}}]),r}(),b.CartoCSS.Tree.Dimension=function(){function r(t,e,n){zx(this,r),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=e||null,this.index=n}return Vx(r,[{key:"ev",value:function(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&0<=this.physical_units.indexOf(this.unit)){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new b.CartoCSS.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(t,e,n){return"%"===this.unit&&"%"!==n.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===n.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new b.CartoCSS.Tree.Dimension(b.CartoCSS.Tree.operate(e,this.value,this.value*n.value*.01),this.unit):new b.CartoCSS.Tree.Dimension(b.CartoCSS.Tree.operate(e,this.value,n.value),this.unit||n.unit)}}]),r}(),b.CartoCSS.Tree.Element=function(){function e(t){zx(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return Vx(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),b.CartoCSS.Tree.Expression=function(){function e(t){zx(this,e),this.is="expression",this.value=t}return Vx(e,[{key:"ev",value:function(e){return 1<this.value.length?new b.CartoCSS.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),b.CartoCSS.Tree.Field=function(){function e(t){zx(this,e),this.is="field",this.value=t||""}return Vx(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),b.CartoCSS.Tree.Filter=function(){function o(t,e,n,r,i){zx(this,o),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=e,this.val=n,this.index=r,this.filename=i,this.id=this.key+this.op+this.val}return Vx(o,[{key:"ev",value:function(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),o}(),b.CartoCSS.Tree.Filterset=function(){function t(){zx(this,t),this.filters={}}return Vx(t,[{key:"toJS",value:function(){function t(t){var e=t.op;"="===e&&(e="==");var n=t.val;void 0!==t._val&&(n=t._val.toString(!0)),t.key&&"scale"===t.key.value?n=+n:"string"!=typeof n&&"object"!==Ux(n)||(n="'"+n+"'");var r="attributes";return r+"&&"+r+t.key+"&&"+r+t.key+" "+e+n}var e=[];for(var n in this.filters)e.push(t(this.filters[n]));return e.join(" && ")}},{key:"toString",value:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(t){for(var e in this.filters)this.filters[e].ev(t);return this}},{key:"clone",value:function(){var t=new b.CartoCSS.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(t){var e=[];for(var n in t.filters){var r=this.addable(t.filters[n]);if(!1===r)return!1;!0===r&&e.push(t.filters[n])}if(!e.length)return null;var i=new b.CartoCSS.Tree.Filterset;for(n in this.filters)i.filters[n]=this.filters[n];for(;n=e.shift();)i.add(n);return i}},{key:"addable",value:function(t){var e=t.key.toString(),n=t.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?$/)&&(n=parseFloat(n)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==n&&null:void 0===this.filters[e+"!="+n]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==n&&null:void 0===this.filters[e+"!="+n]&&!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=n)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=n)&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<n)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n)&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=n)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=n)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=n)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<n)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>n)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=n)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>n)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=n)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=n)||null))}}},{key:"conflict",value:function(t){var e=t.key.toString(),n=t.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===t.op&&void 0!==this.filters[e+"="]&&n!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&n==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&n===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(t){var e,n=t.key.toString(),r=t.op,i=this.conflict(t);if(i)return i;if("="===r){for(var o in this.filters)this.filters[o].key===n&&delete this.filters[o];this.filters[n+"="]=t}else if("!="===r)this.filters[n+"!="+t.val]=t;else if("=~"===r)this.filters[n+"=~"+t.val]=t;else if(">"===r){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[n+">"]=t}else if(">="===r){for(var a in this.filters)e=+this.filters[a].val.toString(),this.filters[a].key===n&&e<t.val&&delete this.filters[a];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op=">",this.filters[n+">"]=t):this.filters[n+">="]=t}else if("<"===r){for(var l in this.filters)e=+this.filters[l].val.toString(),this.filters[l].key===n&&e>=t.val&&delete this.filters[l];this.filters[n+"<"]=t}else if("<="===r){for(var u in this.filters)e=+this.filters[u].val.toString(),this.filters[u].key===n&&e>t.val&&delete this.filters[u];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op="<",this.filters[n+"<"]=t):this.filters[n+"<="]=t}}}]),t}(),b.CartoCSS.Tree.Fontset=function t(e,n){zx(this,t),this.fonts=n,this.name="fontset-"+e.effects.length},b.CartoCSS.Tree.Invalid=function(){function r(t,e,n){zx(this,r),this.is="invalid",this.chunk=t,this.index=e,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return Vx(r,[{key:"ev",value:function(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),r}(),b.CartoCSS.Tree.Keyword=function(){function n(t){zx(this,n),this.value=t;var e={transparent:"color",true:"boolean",false:"boolean"};this.is=e[t]?e[t]:"keyword"}return Vx(n,[{key:"ev",value:function(){return this}}]),Vx(n,[{key:"toString",value:function(){return this.value}}]),n}(),b.CartoCSS.Tree.Literal=function(){function e(t){zx(this,e),this.value=t||"",this.is="field"}return Vx(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),b.CartoCSS.Tree.Operation=function(){function r(t,e,n){zx(this,r),this.is="operation",this.op=t.trim(),this.operands=e,this.index=n}return Vx(r,[{key:"ev",value:function(t){var e,n=this.operands[0].ev(t),r=this.operands[1].ev(t);return"undefined"===n.is||"undefined"===r.is?{is:"undefined",value:"undefined"}:(n instanceof b.CartoCSS.Tree.Dimension&&r instanceof b.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(e=r,r=n,n=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof b.CartoCSS.Tree.Quoted&&r instanceof b.CartoCSS.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof b.CartoCSS.Tree.Field||r instanceof b.CartoCSS.Tree.Field||n instanceof b.CartoCSS.Tree.Literal||r instanceof b.CartoCSS.Tree.Literal?"color"===n.is||"color"===r.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new b.CartoCSS.Tree.Literal(n.ev(t).toString(!0)+this.op+r.ev(t).toString(!0)):void 0===n.operate?(t.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(t,this.op,r))}}]),r}(),b.CartoCSS.Tree.Quoted=function(){function e(t){zx(this,e),this.is="string",this.value=t||""}return Vx(e,[{key:"toString",value:function(t){var e=this.value.replace(/&/g,"&amp;"),n=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+n+"'":e}},{key:"ev",value:function(){return this}},{key:"operate",value:function(t,e,n){return new b.CartoCSS.Tree.Quoted(b.CartoCSS.Tree.operate(e,this.toString(),n.toString(this.contains_field)))}}]),e}(),b.CartoCSS.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){this.data=t,this.selector_cache=function(t){var e={};for(var n in t.symbolizers)for(var r in t.symbolizers[n])t.symbolizers[n][r].hasOwnProperty("css")&&(e[t.symbolizers[n][r].css]=[t.symbolizers[n][r],n,r]);return e}(t),this.mapnikFunctions=function(t){var e={};for(var n in t.symbolizers)for(var r in t.symbolizers[n])if("functions"===t.symbolizers[n][r].type)for(var i=0;i<t.symbolizers[n][r].functions.length;i++){var o=t.symbolizers[n][r].functions[i];e[o[0]]=o[1]}return e}(t),this.required_cache=function(t){var e={};for(var n in t.symbolizers)for(var r in e[n]=[],t.symbolizers[n])t.symbolizers[n][r].required&&e[n].push(t.symbolizers[n][r].css);return e}(t)},setVersion:function(t){return!!b.CartoCSS.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(b.CartoCSS.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var n=this.required_cache[t];for(var r in n)if(!(n[r]in e))return"Property "+n[r]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var n=[],r=0;r<=e.length;r++)n[r]=[r];for(var i=0;i<=t.length;i++)n[0][i]=i;for(r=1;r<=e.length;r++)for(i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]},validValue:function(t,e,n){var r;if(this.selector(e)){if("keyword"===n.value[0].is)return function(t,e){return"object"===Ux(this.selector(e).type)?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}(n,e);if("undefined"===n.value[0].is)return!0;if("numbers"===this.selector(e).type){for(r in n.value)if("float"!==n.value[r].is)return!1;return!0}if("tags"===this.selector(e).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(r=0;r<n.value[0].value.length;r++)if("tag"!==n.value[0].value[r].is)return!1;return!0}if("functions"==this.selector(e).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var n in e.value)for(var r in e.value[n].value){if("call"!==e.value[n].value[r].is)return!1;var i=find(this.selector(t).functions,function(t){return t[0]===e.value[n].value[r].name});if(!(i&&-1===i[1]||i&&i[1]===e.value[n].value[r].args.length))return!1}return!0}(n,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(this.selector(e).validate){for(r=0;r<n.value.length;r++)if(this.selector(e).type===n.value[r].is&&this._validateValue[this.selector(e).validate](t,n.value[r].value))return!0;return!1}return this.selector(e).type===n.value[0].is}return!1}},b.CartoCSS.Tree.Reference.setVersion("latest"),b.CartoCSS.Tree.Rule=function(){function o(t,e,n,r){zx(this,o),this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=e instanceof b.CartoCSS.Tree.Value?e:new b.CartoCSS.Tree.Value([e]),this.index=n,this.symbolizer=b.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=r,this.variable="@"===t.charAt(0)}return Vx(o,[{key:"clone",value:function(){var t=Object.create(b.CartoCSS.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+b.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(t){return new b.CartoCSS.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}}]),o}(),b.CartoCSS.Tree.Ruleset=function(){function n(t,e){zx(this,n),this.is="ruleset",this.selectors=t,this.rules=e,this._lookups={}}return Vx(n,[{key:"ev",value:function(t){var e,n,r=new b.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(r.root=this.root,t.frames.unshift(r),e=0;e<r.rules.length;e++)n=r.rules[e],r.rules[e]=n.ev?n.ev(t):n;return t.frames.shift(),r}},{key:"match",value:function(t){return!t||0===t.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,e){return e instanceof b.CartoCSS.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t},{})}},{key:"variable",value:function(t){return this.variables()[t]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof b.CartoCSS.Tree.Ruleset})}},{key:"find",value:function(n,r){r=r||this;var i=[],t=n.toString();return t in this._lookups?this._lookups[t]:(this.rulesets().forEach(function(t){if(t!==r)for(var e=0;e<t.selectors.length;e++)if(n.match(t.selectors[e])){1<n.elements.length?Array.prototype.push.apply(i,t.find(new b.CartoCSS.Tree.Selector(null,null,n.elements.slice(1)),r)):i.push(t);break}}),this._lookups[t]=i)}},{key:"evZooms",value:function(t){for(var e=0;e<this.selectors.length;e++){for(var n=b.CartoCSS.Tree.Zoom.all,r=0;r<this.selectors[e].zoom.length;r++)n=this.selectors[e].zoom[r].ev(t).zoom;this.selectors[e].zoom=n}}},{key:"flatten",value:function(t,e,n){var r,i,o=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),r=0;r<this.selectors.length;r++){var s=this.selectors[r];if(s.filters)if(e.length)for(i=0;i<e.length;i++){var a=e[i],l=a.filters.cloneWith(s.filters);if(null===l){if(a.zoom===s.zoom&&a.attachment===s.attachment&&a.elements.join()===s.elements.join()){o.push(a);continue}l=a.filters}else if(!l)continue;var u=Object.create(b.CartoCSS.Tree.Selector.prototype);u.filters=l,u.zoom=s.zoom,u.elements=a.elements.concat(s.elements),a.attachment&&s.attachment?u.attachment=a.attachment+"/"+s.attachment:u.attachment=s.attachment||a.attachment,u.conditions=a.conditions+s.conditions,u.index=s.index,o.push(u)}else o.push(s)}var c=[];for(r=0;r<this.rules.length;r++){var h=this.rules[r];h instanceof b.CartoCSS.Tree.Ruleset?h.flatten(t,o,n):h instanceof b.CartoCSS.Tree.Rule?c.push(h):h instanceof b.CartoCSS.Tree.Invalid&&n.error(h)}var f=!!c.length&&c[0].index;for(r=0;r<o.length;r++)!1!==f&&(o[r].index=f),t.push(new b.CartoCSS.Tree.Definition(o[r],c.slice()));return t}}]),n}(),b.CartoCSS.Tree.Selector=function(){function s(t,e,n,r,i,o){zx(this,s),this.elements=n||[],this.attachment=r,this.filters=t||{},this.zoom=void 0!==e?e:b.CartoCSS.Tree.Zoom.all,this.conditions=i,this.index=o}return Vx(s,[{key:"specificity",value:function(){return this.elements.reduce(function(t,e){var n=e.specificity();return t[0]+=n[0],t[1]+=n[1],t},[0,0,this.conditions,this.index])}}]),s}(),b.CartoCSS.Tree.URL=function(){function n(t,e){zx(this,n),this.is="uri",this.value=t,this.paths=e}return Vx(n,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(t){return new b.CartoCSS.Tree.URL(this.value.ev(t),this.paths)}}]),n}(),b.CartoCSS.Tree.Value=function(){function e(t){zx(this,e),this.is="value",this.value=t}return Vx(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new b.CartoCSS.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(t){var e=this.ev(t),n=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?n="'"+n+"'":"field"===e.is?n=n.replace(/\[(.*)\]/g,"attributes['$1']"):e.value&&"object"===Ux(e.value)&&(n="["+n+"]"),"_value = "+n+";"}},{key:"toString",value:function(e,t,n,r){return this.value.map(function(t){return t.toString(e,r)}).join(n||", ")}},{key:"clone",value:function(){var t=Object.create(b.CartoCSS.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}}]),e}(),b.CartoCSS.Tree.Variable=function(){function r(t,e,n){zx(this,r),this.is="variable",this.name=t,this.index=e,this.filename=n}return Vx(r,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),r}(),b.CartoCSS.Tree.Zoom=function(){function r(t,e,n){zx(this,r),this.op=t,this.value=e,this.index=n}return Vx(r,[{key:"setZoom",value:function(t){return this.zoom=t,this}},{key:"ev",value:function(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>b.CartoCSS.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+b.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e;break;default:return this}return this}},{key:"toString",value:function(){for(var t="",e=0;e<=b.CartoCSS.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}}]),r}(),b.CartoCSS.Tree.Zoom.all=23,b.CartoCSS.Tree.Zoom.maxZoom=22,b.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};function Wx(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Wx),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,Et.extend(this,t)}function Jx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.ThemeStyle=Wx;var Yx=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&Jx(e.prototype,n),r&&Jx(e,r),t}();function Xx(t){return(Xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qx(t,e){return!e||"object"!==Xx(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Kx(t,e,n){return(Kx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$x(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $x(t){return($x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tE(t,e){return(tE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters=Yx;var eE=function(){function r(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=Qx(this,$x(r).call(this,t,e))).x=isNaN(t)?0:t,n.y=isNaN(e)?0:e,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tE(t,e)}(r,Yx),t=r,(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Kx($x(r.prototype),"destroy",this).call(this)}}])&&Zx(t.prototype,e),n&&Zx(t,n),r}();function nE(t){return(nE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iE(t,e){return!e||"object"!==nE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function oE(t,e,n){return(oE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function sE(t){return(sE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aE(t,e){return(aE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Point=eE;var lE=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=iE(this,sE(n).call(this,t))).pointList=t,e.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aE(t,e)}(n,Yx),t=n,(e=[{key:"destroy",value:function(){this.pointList=null,oE(sE(n.prototype),"destroy",this).call(this)}}])&&rE(t.prototype,e),r&&rE(t,r),n}();function uE(t){return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hE(t,e){return!e||"object"!==uE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function fE(t,e,n){return(fE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pE(t){return(pE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dE(t,e){return(dE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Line=lE;var yE=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=hE(this,pE(n).call(this,t))).pointList=t,e.holePolygonPointLists=null,e.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dE(t,e)}(n,Yx),t=n,(e=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,fE(pE(n.prototype),"destroy",this).call(this)}}])&&cE(t.prototype,e),r&&cE(t,r),n}();function gE(t){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vE(t,e){return!e||"object"!==gE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function bE(t,e,n){return(bE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_E(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _E(t){return(_E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wE(t,e){return(wE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Polygon=yE;var SE=function(){function o(t,e,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(i=vE(this,_E(o).call(this,t,e,n,r))).x=isNaN(t)?0:t,i.y=isNaN(t)?0:e,i.width=isNaN(n)?0:n,i.height=isNaN(r)?0:r,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wE(t,e)}(o,Yx),t=o,(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,bE(_E(o.prototype),"destroy",this).call(this)}}])&&mE(t.prototype,e),n&&mE(t,n),o}();function xE(t){return(xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function OE(t,e){return!e||"object"!==xE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function CE(t,e,n){return(CE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function PE(t){return(PE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TE(t,e){return(TE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Rectangle=SE;var ME=function(){function l(t,e,n,r,i,o,s){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(a=OE(this,PE(l).call(this,t,e,n,r,i,o,s))).x=isNaN(t)?0:t,a.y=isNaN(e)?0:e,a.r=isNaN(n)?0:n,a.startAngle=isNaN(r)?0:r,a.endAngle=isNaN(i)?0:i,a.r0=isNaN(o)?0:o,a.clockWise=s,a.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",a}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&TE(t,e)}(l,Yx),t=l,(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,CE(PE(l.prototype),"destroy",this).call(this)}}])&&EE(t.prototype,e),n&&EE(t,n),l}();function LE(t){return(LE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kE(t,e){return!e||"object"!==LE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function AE(t,e,n){return(AE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function IE(t){return(IE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RE(t,e){return(RE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Sector=ME;var jE=function(){function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=kE(this,IE(i).call(this,t,e,n))).x=t,r.y=e,r.text=n,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",r}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RE(t,e)}(i,Yx),t=i,(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,AE(IE(i.prototype),"destroy",this).call(this)}}])&&NE(t.prototype,e),n&&NE(t,n),i}();function DE(t){return(DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function BE(t,e){return!e||"object"!==DE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function GE(t,e,n){return(GE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=UE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function UE(t){return(UE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zE(t,e){return(zE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Label=jE;var qE=function(){function c(t,e,n,r,i,o,s,a,l){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(u=BE(this,UE(c).call(this,t,e,n,r,i,o,s,a,l))).x=t,u.y=e,u.image=n,u.width=r,u.height=i,u.sx=o,u.sy=s,u.sWidth=a,u.sHeight=l,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",u}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zE(t,e)}(c,Yx),t=c,(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,GE(UE(c.prototype),"destroy",this).call(this)}}])&&FE(t.prototype,e),n&&FE(t,n),c}();function VE(t){return(VE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function WE(t,e){return!e||"object"!==VE(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function JE(t,e,n){return(JE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function YE(t){return(YE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XE(t,e){return(XE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Image=qE;var ZE=function(){function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=WE(this,YE(i).call(this,t,e,n))).x=isNaN(t)?0:t,r.y=isNaN(e)?0:e,r.r=isNaN(n)?0:n,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",r}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&XE(t,e)}(i,Yx),t=i,(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,JE(YE(i.prototype),"destroy",this).call(this)}}])&&HE(t.prototype,e),n&&HE(t,n),i}();function QE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Feature=b.Feature||{},b.Feature.ShapeParameters.Circle=ZE;var KE=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,n){var r=this._handlers;return e&&t&&(r[t]||(r[t]=[]),r[t].push({h:e,one:!0,ctx:n||this})),this}},{key:"bind",value:function(t,e,n){var r=this._handlers;return e&&t&&(r[t]||(r[t]=[]),r[t].push({h:e,one:!1,ctx:n||this})),this}},{key:"unbind",value:function(t,e){var n=this._handlers;if(!t)return this._handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i].h!=e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,n=e.length;3<n&&(e=Array.prototype.slice.call(e,1));for(var r=this._handlers[t],i=r.length,o=0;o<i;){switch(n){case 1:r[o].h.call(r[o].ctx);break;case 2:r[o].h.call(r[o].ctx,e[1]);break;case 3:r[o].h.call(r[o].ctx,e[1],e[2]);break;default:r[o].h.apply(r[o].ctx,e)}r[o].one?(r.splice(o,1),i--):o++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,n=e.length;4<n&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var r=e[e.length-1],i=this._handlers[t],o=i.length,s=0;s<o;){switch(n){case 1:i[s].h.call(r);break;case 2:i[s].h.call(r,e[1]);break;case 3:i[s].h.call(r,e[1],e[2]);break;default:i[s].h.apply(r,e)}i[s].one?(i.splice(s,1),o--):s++}}return this}}])&&QE(e.prototype,n),r&&QE(e,r),t}();function $E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var e,n,r;return e=t,(n=[{key:"create",value:function(t,e){var n=new this.ArrayCtor(2);return n[0]=t||0,n[1]=e||0,n}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"add",value:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},{key:"scaleAndAdd",value:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},{key:"sub",value:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},{key:"div",value:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},{key:"normalize",value:function(t,e){var n=this.len(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}},{key:"min",value:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},{key:"max",value:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}])&&$E(e.prototype,n),r&&$E(e,r),t}();function eO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new tO,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var e,n,r;return e=t,(n=[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}},{key:"cubicDerivativeAt",value:function(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}},{key:"cubicRootAt",value:function(t,e,n,r,i,o){var s=r+3*(e-n)-t,a=3*(n-2*e+t),l=3*(e-t),u=t-i,c=a*a-3*s*l,h=a*l-9*s*u,f=l*l-3*a*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(a))o[0]=0;else{var d=-l/a;0<=d&&d<=1&&(o[p++]=d)}else{var y=h*h-4*c*f;if(this.isAroundZero(y)){var g=h/c,m=-a/s+g,v=-g/2;0<=m&&m<=1&&(o[p++]=m),0<=v&&v<=1&&(o[p++]=v)}else if(0<y){var b=Math.sqrt(y),_=c*a+1.5*s*(-h+b),w=c*a+1.5*s*(-h-b),S=(-a-((_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))+(w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))))/(3*s);0<=S&&S<=1&&(o[p++]=S)}else{var x=(2*c*a-3*s*h)/(2*Math.sqrt(c*c*c)),E=Math.acos(x)/3,O=Math.sqrt(c),C=Math.cos(E),P=(-a-2*O*C)/(3*s),T=(-a+O*(C+this.THREE_SQRT*Math.sin(E)))/(3*s),M=(-a+O*(C-this.THREE_SQRT*Math.sin(E)))/(3*s);0<=P&&P<=1&&(o[p++]=P),0<=T&&T<=1&&(o[p++]=T),0<=M&&M<=1&&(o[p++]=M)}}return p}},{key:"cubicExtrema",value:function(t,e,n,r,i){var o=6*n-12*e+6*t,s=9*e+3*r-3*t-9*n,a=3*e-3*t,l=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(o)){var u=-a/o;0<=u&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*s*a;if(this.isAroundZero(c))i[0]=-o/(2*s);else if(0<c){var h=Math.sqrt(c),f=(-o+h)/(2*s),p=(-o-h)/(2*s);0<=f&&f<=1&&(i[l++]=f),0<=p&&p<=1&&(i[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(t,e,n,r,i,o){var s=(e-t)*i+t,a=(n-e)*i+e,l=(r-n)*i+n,u=(a-s)*i+s,c=(l-a)*i+a,h=(c-u)*i+u;o[0]=t,o[1]=s,o[2]=u,o[3]=h,o[4]=h,o[5]=c,o[6]=l,o[7]=r}},{key:"cubicProjectPoint",value:function(t,e,n,r,i,o,s,a,l,u,c){var h,f=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,g=1/0;f[0]=l,f[1]=u;for(var m=0;m<1;m+=.05){p[0]=this.cubicAt(t,n,i,s,m),p[1]=this.cubicAt(e,r,o,a,m);var v=this.vector.distSquare(f,p);v<g&&(h=m,g=v)}g=1/0;for(var b=0;b<32&&!(y<this.EPSILON);b++){var _=h-y,w=h+y;p[0]=this.cubicAt(t,n,i,s,_),p[1]=this.cubicAt(e,r,o,a,_);var S=this.vector.distSquare(p,f);if(0<=_&&S<g)h=_,g=S;else{d[0]=this.cubicAt(t,n,i,s,w),d[1]=this.cubicAt(e,r,o,a,w);var x=this.vector.distSquare(d,f);w<=1&&x<g?(h=w,g=x):y*=.5}}return c&&(c[0]=this.cubicAt(t,n,i,s,h),c[1]=this.cubicAt(e,r,o,a,h)),Math.sqrt(g)}},{key:"quadraticAt",value:function(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}},{key:"quadraticDerivativeAt",value:function(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}},{key:"quadraticRootAt",value:function(t,e,n,r,i){var o=t-2*e+n,s=2*(e-t),a=t-r,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(s)){var u=-a/s;0<=u&&u<=1&&(i[l++]=u)}}else{var c=s*s-4*o*a;if(this.isAroundZero(c)){var h=-s/(2*o);0<=h&&h<=1&&(i[l++]=h)}else if(0<c){var f=Math.sqrt(c),p=(-s+f)/(2*o),d=(-s-f)/(2*o);0<=p&&p<=1&&(i[l++]=p),0<=d&&d<=1&&(i[l++]=d)}}return l}},{key:"quadraticExtremum",value:function(t,e,n){var r=t+n-2*e;return 0==r?.5:(t-e)/r}},{key:"quadraticProjectPoint",value:function(t,e,n,r,i,o,s,a,l){var u,c=this.vector.create(),h=this.vector.create(),f=this.vector.create(),p=.005,d=1/0;c[0]=s,c[1]=a;for(var y=0;y<1;y+=.05){h[0]=this.quadraticAt(t,n,i,y),h[1]=this.quadraticAt(e,r,o,y);var g=this.vector.distSquare(c,h);g<d&&(u=y,d=g)}d=1/0;for(var m=0;m<32&&!(p<this.EPSILON);m++){var v=u-p,b=u+p;h[0]=this.quadraticAt(t,n,i,v),h[1]=this.quadraticAt(e,r,o,v);var _=this.vector.distSquare(h,c);if(0<=v&&_<d)u=v,d=_;else{f[0]=this.quadraticAt(t,n,i,b),f[1]=this.quadraticAt(e,r,o,b);var w=this.vector.distSquare(f,c);b<=1&&w<d?(u=b,d=w):p*=.5}}return l&&(l[0]=this.quadraticAt(t,n,i,u),l[1]=this.quadraticAt(e,r,o,u)),Math.sqrt(d)}}])&&eO(e.prototype,n),r&&eO(e,r),t}();function rO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var iO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new Nx,this.curve=new nO,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var e,n,r;return e=t,(n=[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,n,r){if(!e||!t)return!1;var i=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,n,r);if(void 0!==o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,n,r);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var s="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,n,r,s);case"rose":return this.isInsideCircle(e,n,r,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,n,r){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,n,r):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,n,r);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,n,r);case"smicbroken-line":var i=n,o=r;return t.refOriginalPosition&&(i=n-t.refOriginalPosition[0],o=r-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,i,o);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,n,r);case"smicring":var s=e.x,a=e.y;return t.refOriginalPosition&&(s=e.x+t.refOriginalPosition[0],a=e.y+t.refOriginalPosition[1]),this.isInsideRing(s,a,e.r0,e.r,n,r);case"circle":return this.isInsideCircle(e.x,e.y,e.r,n,r);case"smicpoint":var l=n,u=r;return t.refOriginalPosition&&(l=n-t.refOriginalPosition[0],u=r-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,l,u);case"sector":var c=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,h=-h),this.isInsideSector(e.x,e.y,e.r0,e.r,c,h,!e.clockWise,n,r);case"smicsector":var f=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(f=-f,p=-p);var d=e.x,y=e.y;return t.refOriginalPosition&&(d=e.x+t.refOriginalPosition[0],y=e.y+t.refOriginalPosition[1]),this.isInsideSector(d,y,e.r0,e.r,f,p,!e.clockWise,n,r);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,n,r);case"smicpolygon":var g=n,m=r;if(t.refOriginalPosition&&(g=n-t.refOriginalPosition[0],m=r-t.refOriginalPosition[1]),t.holePolygonPointLists&&0<t.holePolygonPointLists.length){for(var v=this.isInsidePolygon(e.pointList,g,m),b=t.holePolygonPointLists,_=!1,w=0,S=b.length;w<S;w++){var x=b[w];!0===this.isInsidePolygon(x,g,m)&&(_=!0)}return!0===v&&!1===_}return this.isInsidePolygon(e.pointList,g,m);case"text":var E=e.__rect||t.getRect(e);return this.isInsideRect(E.x,E.y,E.width,E.height,n,r);case"smictext":var O=t.getTextBackground(e);return this.isInsidePolygon(O,n,r);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,n,r);case"smicimage":var C=e.x,P=e.y;return t.refOriginalPosition&&(C=e.x+t.refOriginalPosition[0],P=e.y+t.refOriginalPosition[1]),this.isInsideRect(C,P,e.width,e.height,n,r)}}},{key:"_buildPathMethod",value:function(t,e,n,r,i){return e.beginPath(),t.buildPath(e,n),e.closePath(),e.isPointInPath(r,i)}},{key:"isOutside",value:function(t,e,n,r){return!this.isInside(t,e,n,r)}},{key:"isInsideLine",value:function(t,e,n,r,i,o,s){if(0===i)return!1;var a=Math.max(i,5),l=0;if(e+a<s&&r+a<s||s<e-a&&s<r-a||t+a<o&&n+a<o||o<t-a&&o<n-a)return!1;if(t===n)return Math.abs(o-t)<=a/2;var u=(l=(e-r)/(t-n))*o-s+(t*r-n*e)/(t-n);return u*u/(l*l+1)<=a/2*a/2}},{key:"isInsideCubicStroke",value:function(t,e,n,r,i,o,s,a,l,u,c){if(0===l)return!1;var h=Math.max(l,5);return!(e+h<c&&r+h<c&&o+h<c&&a+h<c||c<e-h&&c<r-h&&c<o-h&&c<a-h||t+h<u&&n+h<u&&i+h<u&&s+h<u||u<t-h&&u<n-h&&u<i-h&&u<s-h)&&this.curve.cubicProjectPoint(t,e,n,r,i,o,s,a,u,c,null)<=h/2}},{key:"isInsideQuadraticStroke",value:function(t,e,n,r,i,o,s,a,l){if(0===s)return!1;var u=Math.max(s,5);return!(e+u<l&&r+u<l&&o+u<l||l<e-u&&l<r-u&&l<o-u||t+u<a&&n+u<a&&i+u<a||a<t-u&&a<n-u&&a<i-u)&&this.curve.quadraticProjectPoint(t,e,n,r,i,o,a,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(t,e,n,r,i,o,s,a,l){var u=this.PI2;if(0===s)return!1;var c=Math.max(s,5);a-=t,l-=e;var h=Math.sqrt(a*a+l*l);if(n<h-c||h+c<n)return!1;if(Math.abs(r-i)>=u)return!0;if(o){var f=r;r=this.normalizeRadian(i),i=this.normalizeRadian(f)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);i<r&&(i+=u);var p=Math.atan2(l,a);return p<0&&(p+=u),r<=p&&p<=i||r<=p+u&&p+u<=i}},{key:"isInsideBrokenLine",value:function(t,e,n,r){for(var i=Math.max(e,10),o=0,s=t.length-1;o<s;o++){var a=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(this.isInsideLine(a,l,u,c,i,n,r))return!0}return!1}},{key:"isInsideRing",value:function(t,e,n,r,i,o){var s=(i-t)*(i-t)+(o-e)*(o-e);return s<r*r&&n*n<s}},{key:"isInsideRect",value:function(t,e,n,r,i,o){return t<=i&&i<=t+n&&e<=o&&o<=e+r}},{key:"isInsideCircle",value:function(t,e,n,r,i){return(r-t)*(r-t)+(i-e)*(i-e)<n*n}},{key:"isInsideSector",value:function(t,e,n,r,i,o,s,a,l){return this.isInsideArcStroke(t,e,(n+r)/2,i,o,s,r-n,a,l)}},{key:"isInsidePolygon",value:function(t,e,n){for(var r=t.length,i=0,o=0,s=r-1;o<r;o++){var a=t[s][0],l=t[s][1],u=t[o][0],c=t[o][1];i+=this.windingLine(a,l,u,c,e,n),s=o}return 0!==i}},{key:"windingLine",value:function(t,e,n,r,i,o){return!(e<o&&r<o||o<e&&o<r)&&r!=e&&i<(o-e)/(r-e)*(n-t)+t?r<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,n,r,i,o,s,a,l,u){var c=this.curve,h=this.roots,f=this.extrema;if(e<u&&r<u&&o<u&&a<u||u<e&&u<r&&u<o&&u<a)return 0;var p=c.cubicRootAt(e,r,o,a,u,h);if(0===p)return 0;for(var d,y,g=0,m=-1,v=0;v<p;v++){var b=h[v];c.cubicAt(t,n,i,s,b)<l||(m<0&&(m=c.cubicExtrema(e,r,o,a,f),f[1]<f[0]&&1<m&&this.swapExtrema(),d=c.cubicAt(e,r,o,a,f[0]),1<m&&(y=c.cubicAt(e,r,o,a,f[1]))),2==m?b<f[0]?g+=d<e?1:-1:b<f[1]?g+=y<d?1:-1:g+=a<y?1:-1:b<f[0]?g+=d<e?1:-1:g+=a<d?1:-1)}return g}},{key:"windingQuadratic",value:function(t,e,n,r,i,o,s,a){var l=this.curve,u=this.roots;if(e<a&&r<a&&o<a||a<e&&a<r&&a<o)return 0;var c=l.quadraticRootAt(e,r,o,a,u);if(0===c)return 0;var h=l.quadraticExtremum(e,r,o);if(0<=h&&h<=1){for(var f=0,p=l.quadraticAt(e,r,o,h),d=0;d<c;d++){s<l.quadraticAt(t,n,i,u[d])||(u[d]<h?f+=p<e?1:-1:f+=o<p?1:-1)}return f}return s<l.quadraticAt(t,n,i,u[0])?0:o<e?1:-1}},{key:"windingArc",value:function(t,e,n,r,i,o,s,a){var l=this.roots,u=this.PI2;if(n<(a-=e)||a<-n)return 0;var c=Math.sqrt(n*n-a*a);if(l[0]=-c,l[1]=c,Math.abs(r-i)>=u){i=u;var h=o?1:-1;return s>=l[r=0]+t&&s<=l[1]+t?h:0}if(o){var f=r;r=this.normalizeRadian(i),i=this.normalizeRadian(f)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);i<r&&(i+=u);for(var p=0,d=0;d<2;d++){var y=l[d];if(s<y+t){var g=Math.atan2(a,y),m=o?1:-1;g<0&&(g=u+g),(r<=g&&g<=i||r<=g+u&&g+u<=i)&&(g>Math.PI/2&&g<1.5*Math.PI&&(m=-m),p+=m)}}return p}},{key:"isInsidePath",value:function(t,e,n,r,i){for(var o=0,s=0,a=0,l=0,u=0,c=!0,h=!0,f="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,d=0;d<t.length;d++){var y=t[d],g=y.points;if(c||"M"===y.command){if(0<d&&(p&&(o+=this.windingLine(s,a,l,u,r,i)),0!==o))return!0;l=g[g.length-2],u=g[g.length-1],c=!1,h&&"A"!==y.command&&(h=!1,s=l,a=u)}switch(y.command){case"M":s=g[0],a=g[1];break;case"L":if(f&&this.isInsideLine(s,a,g[0],g[1],e,r,i))return!0;p&&(o+=this.windingLine(s,a,g[0],g[1],r,i)),s=g[0],a=g[1];break;case"C":if(f&&this.isInsideCubicStroke(s,a,g[0],g[1],g[2],g[3],g[4],g[5],e,r,i))return!0;p&&(o+=this.windingCubic(s,a,g[0],g[1],g[2],g[3],g[4],g[5],r,i)),s=g[4],a=g[5];break;case"Q":if(f&&this.isInsideQuadraticStroke(s,a,g[0],g[1],g[2],g[3],e,r,i))return!0;p&&(o+=this.windingQuadratic(s,a,g[0],g[1],g[2],g[3],r,i)),s=g[2],a=g[3];break;case"A":var m=g[0],v=g[1],b=g[2],_=g[3],w=g[4],S=g[5],x=Math.cos(w)*b+m,E=Math.sin(w)*_+v;h?(h=!1,l=x,u=E):o+=this.windingLine(s,a,x,E);var O=(r-m)*_/b+m;if(f&&this.isInsideArcStroke(m,v,_,w,w+S,1-g[7],e,O,i))return!0;p&&(o+=this.windingArc(m,v,_,w,w+S,1-g[7],O,i)),s=Math.cos(w+S)*b+m,a=Math.sin(w+S)*_+v;break;case"z":if(f&&this.isInsideLine(s,a,l,u,e,r,i))return!0;c=!0}}return p&&(o+=this.windingLine(s,a,l,u,r,i)),0!==o}},{key:"getTextWidth",value:function(t,e){var n=t+":"+e;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var r=0,i=0,o=(t=(t+"").split("\n")).length;i<o;i++)r=Math.max(this._ctx.measureText(t[i]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(t,e){var n=t+":"+e;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[n]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}])&&rO(e.prototype,n),r&&rO(e,r),t}();function oO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var e,n,r;return e=t,(n=[{key:"computeBoundingBox",value:function(t,e,n){if(0!==t.length){for(var r=t[0][0],i=t[0][0],o=t[0][1],s=t[0][1],a=1;a<t.length;a++){var l=t[a];l[0]<r&&(r=l[0]),l[0]>i&&(i=l[0]),l[1]<o&&(o=l[1]),l[1]>s&&(s=l[1])}e[0]=r,e[1]=o,n[0]=i,n[1]=s}}},{key:"cubeBezier",value:function(t,e,n,r,i,o){var s=new nO,a=[];s.cubicExtrema(t[0],e[0],n[0],r[0],a);for(var l=0;l<a.length;l++)a[l]=s.cubicAt(t[0],e[0],n[0],r[0],a[l]);var u=[];s.cubicExtrema(t[1],e[1],n[1],r[1],u);for(var c=0;c<u.length;c++)u[c]=s.cubicAt(t[1],e[1],n[1],r[1],u[c]);a.push(t[0],r[0]),u.push(t[1],r[1]);var h=Math.min.apply(null,a),f=Math.max.apply(null,a),p=Math.min.apply(null,u),d=Math.max.apply(null,u);i[0]=h,i[1]=p,o[0]=f,o[1]=d}},{key:"quadraticBezier",value:function(t,e,n,r,i){var o=new nO,s=o.quadraticExtremum(t[0],e[0],n[0]),a=o.quadraticExtremum(t[1],e[1],n[1]),l=1-(s=Math.max(Math.min(s,1),0)),u=1-(a=Math.max(Math.min(a,1),0)),c=l*l*t[0]+2*l*s*e[0]+s*s*n[0],h=l*l*t[1]+2*l*s*e[1]+s*s*n[1],f=u*u*t[0]+2*u*a*e[0]+a*a*n[0],p=u*u*t[1]+2*u*a*e[1]+a*a*n[1];r[0]=Math.min(t[0],n[0],c,f),r[1]=Math.min(t[1],n[1],h,p),i[0]=Math.max(t[0],n[0],c,f),i[1]=Math.max(t[1],n[1],h,p)}},{key:"arc",value:function(t,e,n,r,i,o,s,a){var l=new tO,u=l.create(),c=l.create(),h=l.create();if(u[0]=Math.cos(r)*n+t,u[1]=Math.sin(r)*n+e,c[0]=Math.cos(i)*n+t,c[1]=Math.sin(i)*n+e,l.min(s,u,c),l.max(a,u,c),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(i%=2*Math.PI)<0&&(i+=2*Math.PI),i<r&&!o?i+=2*Math.PI:r<i&&o&&(r+=2*Math.PI),o){var f=i;i=r,r=f}for(var p=0;p<i;p+=Math.PI/2)r<p&&(h[0]=Math.cos(p)*n+t,h[1]=Math.sin(p)*n+e,l.min(s,h,s),l.max(a,h,a))}}])&&oO(e.prototype,n),r&&oO(e,r),t}();function aO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var lO=function(){function S(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,e,n,r,i,o,s,a,l,u,c,h,f,p,d,y,g,m,v,b,_,w=this;return t=navigator.userAgent,e=w.os={},n=w.browser={},r=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=l&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),f=t.match(/(BlackBerry).*Version\/([\d.]+)/),p=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),v=t.match(/MSIE ([\d.]+)/),b=r&&t.match(/Mobile\//)&&!g,_=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,(n.webkit=!!r)&&(n.version=r[1]),i&&(e.android=!0,e.version=i[2]),a&&!s&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.ios=e.ipod=!0,e.version=s[3]?s[3].replace(/_/g,"."):null),l&&(e.webos=!0,e.version=l[2]),u&&(e.touchpad=!0),f&&(e.blackberry=!0,e.version=f[2]),p&&(e.bb10=!0,e.version=p[2]),d&&(e.rimtabletos=!0,e.version=d[2]),y&&(n.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),h&&(n.silk=!0,n.version=h[1]),!h&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),m&&(n.firefox=!0,n.version=m[1]),v&&(n.ie=!0,n.version=v[1]),b&&(t.match(/Safari/)||e.ios)&&(n.safari=!0),_&&(n.webview=!0),v&&(n.ie=!0,n.version=v[1]),e.tablet=!!(o||y||i&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||v&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(i||a||l||f||p||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||v&&t.match(/Touch/))),{browser:n,os:e,canvasSupported:!!document.createElement("canvas").getContext}}var t,e,n;return t=S,(e=[{key:"destory",value:function(){return!0}}])&&aO(t.prototype,e),n&&aO(t,n),S}();function uO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var e,n,r;return e=t,(n=[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}])&&uO(e.prototype,n),r&&uO(e,r),t}();function hO(t){return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var e,n,r;return e=t,(n=[{key:"get",value:function(t,e,n){if("object"===hO(t)){var r=t;t=r.url,e=r.onsuccess,n=r.onerror}var i=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&(200<=i.status&&i.status<300||304===i.status?e&&e(i.responseText):n&&n(),i.onreadystatechange=new Function,i=null)},i.send(null)}}])&&fO(e.prototype,n),r&&fO(e,r),t}();function dO(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,dO)}function yO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}dO.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},dO.catchBrushException=!1,dO.debugMode=0;var gO=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==dO.debugMode)if(1==dO.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(1<dO.debugMode)for(var e in arguments)console.log(arguments[e])}}var e,n,r;return e=t,(n=[{key:"destory",value:function(){return!0}}])&&yO(e.prototype,n),r&&yO(e,r),t}();function mO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vO=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var e,n,r;return e=t,(n=[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}])&&mO(e.prototype,n),r&&mO(e,r),t}();function bO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var e,n,r;return e=t,(n=[{key:"create",value:function(){var t=new this.ArrayCtor(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,n){return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=e[1]*n[0]+e[3]*n[1],t[2]=e[0]*n[2]+e[2]*n[3],t[3]=e[1]*n[2]+e[3]*n[3],t[4]=e[0]*n[4]+e[2]*n[5]+e[4],t[5]=e[1]*n[4]+e[3]*n[5]+e[5],t}},{key:"translate",value:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}},{key:"rotate",value:function(t,e,n){var r=e[0],i=e[2],o=e[4],s=e[1],a=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=r*c+s*u,t[1]=-r*u+s*c,t[2]=i*c+a*u,t[3]=-i*u+c*a,t[4]=c*o+u*l,t[5]=c*l-u*o,t}},{key:"scale",value:function(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}},{key:"invert",value:function(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],s=e[3],a=e[5],l=n*s-o*r;return l?(l=1/l,t[0]=s*l,t[1]=-o*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*a-s*i)*l,t[5]=(o*i-n*a)*l,t):null}},{key:"mulVector",value:function(t,e,n){var r=e[0],i=e[2],o=e[4],s=e[1],a=e[3],l=e[5];return t[0]=n[0]*r+n[1]*i+o,t[1]=n[0]*s+n[1]*a+l,t}}])&&bO(e.prototype,n),r&&bO(e,r),t}();function wO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var SO=function(){function O(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,O)}var t,e,n;return t=O,n=[{key:"SUtil_smoothBezier",value:function(t,e,n,r,i){i&&2===i||(i=[0,0]);var o,s,a=i,l=[],u=[],c=[],h=[],f=!!r;if(f){o=[1/0,1/0],s=[-1/0,-1/0];for(var p=t.length,d=0;d<p;d++)O.Util_vector.min(o,o,[t[d][0]+a[0],t[d][1]+a[1]]),O.Util_vector.max(s,s,[t[d][0]+a[0],t[d][1]+a[1]]);O.Util_vector.min(o,o,r[0]),O.Util_vector.max(s,s,r[1])}for(var y=t.length,g=0;g<y;g++){var m=[t[g][0]+a[0],t[g][1]+a[1]],v=void 0,b=void 0;if(n)v=[t[g?g-1:y-1][0]+a[0],t[g?g-1:y-1][1]+a[1]],b=[t[(g+1)%y][0]+a[0],t[(g+1)%y][1]+a[1]];else{if(0===g||g===y-1){l.push([t[g][0]+a[0],t[g][1]+a[1]]);continue}v=[t[g-1][0]+a[0],t[g-1][1]+a[1]],b=[t[g+1][0]+a[0],t[g+1][1]+a[1]]}O.Util_vector.sub(u,b,v),O.Util_vector.scale(u,u,e);var _=O.Util_vector.distance(m,v),w=O.Util_vector.distance(m,b),S=_+w;0!==S&&(_/=S,w/=S),O.Util_vector.scale(c,u,-_),O.Util_vector.scale(h,u,w);var x=O.Util_vector.add([],m,c),E=O.Util_vector.add([],m,h);f&&(O.Util_vector.max(x,x,o),O.Util_vector.min(x,x,s),O.Util_vector.max(E,E,o),O.Util_vector.min(E,E,s)),l.push(x),l.push(E)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(t,e,n,r){r&&2===r||(r=[0,0]);for(var i=r,o=t.length,s=[],a=0,l=1;l<o;l++)a+=O.Util_vector.distance([t[l-1][0]+i[0],t[l-1][1]+i[1]],[t[l][0]+i[0],t[l][1]+i[1]]);var u=a/5;u=u<o?o:u;for(var c=0;c<u;c++){var h=c/(u-1)*(e?o:o-1),f=Math.floor(h),p=h-f,d=void 0,y=[t[f%o][0]+i[0],t[f%o][1]+i[1]],g=void 0,m=void 0;m=e?(d=[t[(f-1+o)%o][0]+i[0],t[(f-1+o)%o][1]+i[1]],g=[t[(f+1)%o][0]+i[0],t[(f+1)%o][1]+i[1]],[t[(f+2)%o][0]+i[0],t[(f+2)%o][1]+i[1]]):(d=[t[0===f?f:f-1][0]+i[0],t[0===f?f:f-1][1]+i[1]],g=[t[o-2<f?o-1:f+1][0]+i[0],t[o-2<f?o-1:f+1][1]+i[1]],[t[o-3<f?o-1:f+2][0]+i[0],t[o-3<f?o-1:f+2][1]+i[1]]);var v=p*p,b=p*v;s.push([_(d[0],y[0],g[0],m[0],p,v,b),_(d[1],y[1],g[1],m[1],p,v,b)])}return s;function _(t,e,n,r,i,o,s){var a=.5*(n-t),l=.5*(r-e);return(2*(e-n)+a+l)*s+(-3*(e-n)-2*a-l)*o+a*i+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,n,r,i,o,s){var a=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return a[0]=o,a[1]=o,s&&s instanceof Array?t.setLineDash(s):t.setLineDash(a),t.moveTo(e,n),void t.lineTo(r,i);var l=r-e,u=i-n,c=Math.floor(Math.sqrt(l*l+u*u)/o);l/=c,u/=c;for(var h=!0,f=0;f<c;++f)h?t.moveTo(e,n):t.lineTo(e,n),h=!h,e+=l,n+=u;t.lineTo(r,i)}}],(e=null)&&wO(t.prototype,e),n&&wO(t,n),O}();function xO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}SO.Util_area=new iO,SO.Util_color=new Ax,SO.Util_computeBoundingBox=new sO,SO.Util_curve=new nO,SO.Util_env=new lO,SO.Util_event=new cO,SO.Util_http=new pO,SO.Util_log=new gO,SO.Util_math=new vO,SO.Util_matrix=new _O,SO.Util=new Nx,SO.Util_vector=new tO;var EO=function(){function t(){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(r=SO.Util_vector.create(),function(t){this.transform||(this.transform=SO.Util_matrix.create());var e=this.transform;function n(t){return-5e-5<t&&t<5e-5}SO.Util_vector.sub(r,t,this.position),n(r[0])&&n(r[1])||(SO.Util_vector.normalize(r,r),e[2]=r[0]*this.scale[1],e[3]=r[1]*this.scale[1],e[0]=r[1]*this.scale[0],e[1]=-r[0]*this.scale[0],e[4]=this.position[0],e[5]=this.position[1],this.decomposeTransform())})}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return 5e-5<t||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||SO.Util_matrix.create();if(SO.Util_matrix.identity(e),this.needLocalTransform){if(i(this.scale[0])||i(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var n=i(t[0])||i(t[1]);n&&SO.Util_matrix.translate(e,e,t),SO.Util_matrix.scale(e,e,this.scale),n&&(t[0]=-t[0],t[1]=-t[1],SO.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var r=i(t[0])||i(t[1]);r&&SO.Util_matrix.translate(e,e,t),SO.Util_matrix.rotate(e,e,this.rotation[0]),r&&(t[0]=-t[0],t[1]=-t[1],SO.Util_matrix.translate(e,e,t))}}else 0!==this.rotation&&SO.Util_matrix.rotate(e,e,this.rotation);(i(this.position[0])||i(this.position[1]))&&SO.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?SO.Util_matrix.mul(this.transform,this.parent.transform,this.transform):SO.Util_matrix.copy(this.transform,this.parent.transform))}function i(t){return 5e-5<t||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],n=this.position,r=this.scale,i=this.rotation;s(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];s(o-1)&&(o=Math.sqrt(o)),n[0]=t[4],n[1]=t[5],r[0]=e,r[1]=o,r[2]=r[3]=0,i[0]=Math.atan2(-t[1]/o,t[0]/e),i[1]=i[2]=0}function s(t){return 5e-5<t||t<-5e-5}}}])&&xO(e.prototype,n),r&&xO(e,r),t}();function OO(t){return(OO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function PO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TO(t,e,n){return(TO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=MO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function MO(t){return(MO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LO(t,e){return(LO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var NO=function(){function v(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),n=this,r=MO(v).call(this,t),t=t||{},(e=!r||"object"!==OO(r)&&"function"!=typeof r?PO(n):r).id=null,e.style={},e.highlightStyle=null,e.parent=null,e.__dirty=!0,e.__clipShapes=[],e.invisible=!1,e.ignore=!1,e.zlevel=0,e.draggable=!1,e.clickable=!1,e.hoverable=!0,e.z=0,e.refOriginalPosition=[0,0],e.refDataID=null,e.isHoverByRefDataID=!1,e.refDataHoverGroup=null,e.dataInfo=null,Et.extend(PO(e),t),e.id=e.id||Et.createUniqueID("smShape_"),e.CLASS_NAME="SuperMap.LevelRenderer.Shape",e.getTansform=(i=[],function(t,e){var n=[t,e];return this.needTransform&&this.transform&&(SO.Util_matrix.invert(i,this.transform),SO.Util_matrix.mulVector(n,i,[t,e,1]),t==n[0]&&e==n[1]&&this.updateNeedTransform()),n}),e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LO(t,e)}(v,b.mixin(KE,EO)),t=v,n=[{key:"_fillText",value:function(t,e,n,r,i,o,s){i&&(t.font=i),t.textAlign=o,t.textBaseline=s;var a=v._getTextRect(e,n,r,i,o,s);e=(e+"").split("\n");var l=SO.Util_area.getTextHeight("ZH",i);switch(s){case"top":r=a.y;break;case"bottom":r=a.y+l;break;default:r=a.y+l/2}for(var u=0,c=e.length;u<c;u++)t.fillText(e[u],n,r),r+=l}},{key:"_getTextRect",value:function(t,e,n,r,i,o){var s=SO.Util_area.getTextWidth(t,r),a=SO.Util_area.getTextHeight("ZH",r);switch(t=(t+"").split("\n"),i){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(o){case"top":break;case"bottom":n-=a*t.length;break;default:n-=a*t.length/2}return{x:e,y:n,width:s,height:a*t.length}}}],(e=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,TO(MO(v.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n),n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n),t.fill(),0<n.lineWidth&&(this.setCtxGlobalAlpha(t,"stroke",n),t.stroke()),this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),0<n.lineWidth&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)}this.drawText(t,n,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),e&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,i=n.length;r<i;r++){var o=e[n[r][0]],s=n[r][1];void 0!==o&&(t[s]=o)}}},{key:"doClip",value:function(t){var e=SO.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r=this.__clipShapes[n];if(r.needTransform){var i=r.transform;SO.Util_matrix.invert(e,i),t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}if(t.beginPath(),r.buildPath(t,r.style),t.clip(),r.needTransform){t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}}},{key:"getHighlightStyle",value:function(t,e,n){var r={};for(var i in t)r[i]=t[i];var o=SO.Util_color.getHighlightColor();for(var s in"stroke"!=t.brushType?(r.strokeColor=o,r.lineWidth=t.lineWidth||1,r.brushType="both"):"stroke"!=n?(r.strokeColor=o,r.lineWidth=t.lineWidth||1):r.strokeColor=e.strokeColor||SO.Util_color.mix(t.strokeColor,SO.Util_color.toRGB(o)),e)void 0!==e[s]&&(r[s]=e[s]);return r}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(){SO.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(){SO.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(t,e){var n=this.getTansform(t,e);t=n[0],e=n[1];var r=this.style.__rect;return t>=(r=r||(this.style.__rect=this.getRect(this.style))).x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height&&SO.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,e,n){if(void 0!==e.text&&!1!==e.text){var r=e.textColor||e.color||e.strokeColor;t.fillStyle=r;var i,o,s,a,l=10,u=e.textPosition||this.textPosition||"top",c=[];switch(c=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],u){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(n||e).__rect||this.getRect(n||e);switch(u){case"inside":s=h.x+h.width/2,a=h.y+h.height/2,i="center",o="middle","stroke"!=e.brushType&&r==e.color&&(t.fillStyle="#fff");break;case"left":s=h.x-l,a=h.y+h.height/2,i="end",o="middle";break;case"right":s=h.x+h.width+l,a=h.y+h.height/2,i="start",o="middle";break;case"top":s=h.x+h.width/2,a=h.y-l,i="center",o="bottom";break;case"bottom":s=h.x+h.width/2,a=h.y+h.height+l,i="center",o="top"}}break;case"start":case"end":var f=0,p=0,d=0,y=0;if(void 0!==e.pointList){var g=e.pointList;if(g.length<2)return;var m=g.length;switch(u){case"start":f=g[0][0]+c[0],p=g[1][0]+c[0],d=g[0][1]+c[1],y=g[1][1]+c[1];break;case"end":f=g[m-2][0]+c[0],p=g[m-1][0]+c[0],d=g[m-2][1]+c[1],y=g[m-1][1]+c[1]}}else f=e.xStart+c[0]||0,p=e.xEnd+c[0]||0,d=e.yStart+c[1]||0,y=e.yEnd+c[1]||0;switch(u){case"start":i=f<p?"end":"start",o=d<y?"bottom":"top",s=f,a=d;break;case"end":i=f<p?"start":"end",o=d<y?"top":"bottom",s=p,a=y}l-=4,f&&p&&f!=p?s-="end"==i?l:-l:i="center",d!=y?a-="bottom"==o?l:-l:o="middle";break;case"specific":s=e.textX||0,a=e.textY||0,i="start",o="middle"}e.labelXOffset&&!isNaN(e.labelXOffset)&&(s+=e.labelXOffset),e.labelYOffset&&!isNaN(e.labelYOffset)&&(a+=e.labelYOffset),null!=s&&null!=a&&v._fillText(t,e.text,s,a,e.textFont,e.textAlign||i,e.textBaseline||o)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,n){t.globalAlpha="fill"===e?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"!==e||void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity}}])&&CO(t.prototype,e),n&&CO(t,n),v}();function kO(t){return(kO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function IO(t,e){return!e||"object"!==kO(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function RO(t,e,n){return(RO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function jO(t){return(jO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DO(t,e){return(DO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var FO=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=IO(this,jO(n).call(this,t))).type="smicpoint",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DO(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.type=null,RO(jO(n.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.arc(e.x+n[0],e.y+n[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect||(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e}),t.__rect}}])&&AO(t.prototype,e),r&&AO(t,r),n}();function BO(t){return(BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function UO(t,e){return!e||"object"!==BO(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function zO(t,e,n){return(zO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function qO(t){return(qO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function VO(t,e){return(VO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var HO=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=UO(this,qO(n).call(this,t))).type="smictext",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&VO(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.type=null,zO(qO(n.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r.textFont&&(t.font=r.textFont),t.textAlign=r.textAlign||"start",t.textBaseline=r.textBaseline||"middle";var i,o=(r.text+"").split("\n"),s=SO.Util_area.getTextHeight("ZH",r.textFont),a=this.getRectNoRotation(r),l=r.x+n[0];i="top"==r.textBaseline?a.y:"bottom"==r.textBaseline?a.y+s:a.y+s/2;for(var u=r.x+n[0],c=r.y+n[1],h=0,f=o.length;h<f;h++){switch(r.labelRect&&(t.fillRect(a.x-2,a.y,a.width+4,a.height),t.fillStyle=r.strokeColor,t.strokeRect(a.x-2,a.y,a.width+4,a.height),t.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?t.strokeText(o[h],0,s*h,r.maxWidth):t.strokeText(o[h],0,s*h):"bottom"==r.textBaseline?r.maxWidth?t.strokeText(o[h],0,s*(h+1)-a.height,r.maxWidth):t.strokeText(o[h],0,s*(h+1)-a.height):r.maxWidth?t.strokeText(o[h],0,s*(h+1)-a.height/2-s/2,r.maxWidth):t.strokeText(o[h],0,s*(h+1)-a.height/2-s/2),t.restore()):r.maxWidth?t.strokeText(o[h],l,i,r.maxWidth):t.strokeText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,s*h,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,s*h,r.maxWidth)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,s*h),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,s*h)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,s*(h+1)-a.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,s*(h+1)-a.height,r.maxWidth)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,s*(h+1)-a.height),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,s*(h+1)-a.height)):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,s*(h+1)-a.height/2-s/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,s*(h+1)-a.height/2-s/2,r.maxWidth)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],0,s*(h+1)-a.height/2-s/2),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],0,s*(h+1)-a.height/2-s/2)),this.setCtxGlobalAlpha(t,"reset",r),t.restore()):(r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],l,i,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],l,i,r.maxWidth)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[h],l,i)),this.setCtxGlobalAlpha(t,"reset",r));break;default:this.setCtxGlobalAlpha(t,"fill",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?t.fillText(o[h],0,s*h,r.maxWidth):t.fillText(o[h],0,s*h):"bottom"==r.textBaseline?r.maxWidth?t.fillText(o[h],0,s*(h+1)-a.height,r.maxWidth):t.fillText(o[h],0,s*(h+1)-a.height):r.maxWidth?t.fillText(o[h],0,s*(h+1)-a.height/2-s/2,r.maxWidth):t.fillText(o[h],0,s*(h+1)-a.height/2-s/2),t.restore()):r.maxWidth?t.fillText(o[h],l,i,r.maxWidth):t.fillText(o[h],l,i),this.setCtxGlobalAlpha(t,"reset",r)}i+=s}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,n,r,i,o=this.getTextBackground(t,!0),s=0,a=o.length;s<a;s++){var l=o[s];0==s?(e=l[0],r=l[0],n=l[1],i=l[1]):(l[0]<e&&(e=l[0]),l[0]>r&&(r=l[0]),l[1]<n&&(n=l[1]),l[1]>i&&(i=l[1]))}return t.__rect={x:e,y:n,width:r-e,height:i-n},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,r=SO.Util_area.getTextHeight("ZH",t.textFont),i=SO.Util_area.getTextWidth(t.text,t.textFont),o=SO.Util_area.getTextHeight(t.text,t.textFont),s=t.x+n[0];"end"==t.textAlign||"right"==t.textAlign?s-=i:"center"==t.textAlign&&(s-=i/2),e="top"==t.textBaseline?t.y+n[1]:"bottom"==t.textBaseline?t.y+n[1]-o:t.y+n[1]-o/2;var a,l=!1;if(t.maxWidth){var u=parseInt(t.maxWidth);u<i&&(a=i,l=!0,i=u),s=t.x+n[0],"end"==t.textAlign||"right"==t.textAlign?s-=i:"center"==t.textAlign&&(s-=i/2)}t.textFont&&-1<t.textFont.toLowerCase().indexOf("italic")&&(i+=!0===l?r/3*(i/a):r/3);return{x:s,y:e,width:i,height:o}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var r=this.getRectNoRotation(t),i=t.x+n[0],o=t.y+n[1],s=[];if(t.textRotation&&0!==t.textRotation){var a=t.textRotation,l=this.getRotatedLocation(r.x,r.y,i,o,a),u=this.getRotatedLocation(r.x+r.width,r.y,i,o,a),c=this.getRotatedLocation(r.x+r.width,r.y+r.height,i,o,a),h=this.getRotatedLocation(r.x,r.y+r.height,i,o,a);s.push(l),s.push(u),s.push(c),s.push(h)}else{var f=[r.x,r.y],p=[r.x+r.width,r.y],d=[r.x+r.width,r.y+r.height],y=[r.x,r.y+r.height];s.push(f),s.push(p),s.push(d),s.push(y)}return t.__textBackground=s,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,n,r,i){var o,s,a=new Array;return e=-e,r=-r,i=-i,o=(t-n)*Math.cos(i/180*Math.PI)-(e-r)*Math.sin(i/180*Math.PI)+n,s=(t-n)*Math.sin(i/180*Math.PI)+(e-r)*Math.cos(i/180*Math.PI)+r,a[0]=o,a[1]=-s,a}}])&&GO(t.prototype,e),r&&GO(t,r),n}();function WO(t){return(WO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function YO(t,e){return!e||"object"!==WO(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function XO(t,e,n){return(XO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ZO(t){return(ZO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function QO(t,e){return(QO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var KO=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=YO(this,ZO(n).call(this,t))).type="smiccircle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QO(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.type=null,XO(ZO(n.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1];return t.moveTo(r+e.r,i),t.arc(r,i,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1],o=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(r-o-e/2),y:Math.round(i-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}])&&JO(t.prototype,e),r&&JO(t,r),n}();function $O(t){return($O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eC(t,e){return!e||"object"!==$O(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function nC(t,e,n){return(nC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rC(t){return(rC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iC(t,e){return(iC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oC=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=eC(this,rC(n).call(this,t))).type="smicpolygon",e.holePolygonPointLists=null,e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iC(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,nC(rC(n.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),t.save(),this.setContext(t,n),this.setTransform(t);var r=!1;"fill"!=n.brushType&&"both"!=n.brushType&&void 0!==n.brushType||(t.beginPath(),"dashed"==n.lineType||"dotted"==n.lineType||"dot"==n.lineType||"dash"==n.lineType||"dashdot"==n.lineType||"longdash"==n.lineType||"longdashdot"==n.lineType?this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(t,n),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)),0<n.lineWidth&&("stroke"==n.brushType||"both"==n.brushType)&&(r||(t.beginPath(),this.buildPath(t,n)),this.setCtxGlobalAlpha(t,"stroke",n),t.stroke(),this.setCtxGlobalAlpha(t,"reset",n)),this.drawText(t,n,this.style);var i=Et.cloneObject(n);if(i.pointList&&this.holePolygonPointLists&&0<this.holePolygonPointLists.length)for(var o=this.holePolygonPointLists,s=o.length,a=0;a<s;a++){var l=o[a];i.pointList=l,r=!(t.globalCompositeOperation="destination-out"),"fill"!=i.brushType&&"both"!=i.brushType&&void 0!==i.brushType||(t.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashdot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(t,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(t,i),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)),0<i.lineWidth&&("stroke"==i.brushType||"both"==i.brushType)?(r||(t.beginPath(),this.buildPath(t,i)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",i),t.stroke(),this.setCtxGlobalAlpha(t,"reset",i)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.pointList;if(!(r.length<2))if(e.smooth&&"spline"!==e.smooth){var i,o,s,a=SO.SUtil_smoothBezier(r,e.smooth,!0,e.smoothConstraint,n);t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=r.length,u=0;u<l;u++)i=a[2*u],o=a[2*u+1],s=[r[(u+1)%l][0]+n[0],r[(u+1)%l][1]+n[1]],t.bezierCurveTo(i[0],i[1],o[0],o[1],s[0],s[1])}else if("spline"===e.smooth&&(r=SO.SUtil_smoothSpline(r,!0,null,n)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var h=e.lineWidth||1,f=h,p=h;"dashed"===e.lineType&&(f*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=h),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=h)),"dash"===e.lineType&&(f*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),"longdash"===e.lineType&&(f*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var d=1;d<r.length;d++)SO.SUtil_dashedLineTo(t,r[d-1][0]+n[0],r[d-1][1]+n[1],r[d][0]+n[0],r[d][1]+n[1],h,[f,p]);SO.SUtil_dashedLineTo(t,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],h,[f,p])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var y=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=y;var g=e.lineWidth||1,m=g,v=g,b=g,_=g;"dashdot"===e.lineType&&(m*=4,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=g,v+=g,b=1,_+=g)),"longdashdot"===e.lineType&&(m*=8,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=g,v+=g,b=1,_+=g)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<r.length;w++)SO.SUtil_dashedLineTo(t,r[w-1][0]+n[0],r[w-1][1]+n[1],r[w][0]+n[0],r[w][1]+n[1],g,[m,v,b,_]);SO.SUtil_dashedLineTo(t,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],g,[m,v,b,_])}}else{t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var S=1;S<r.length;S++)t.lineTo(r[S][0]+n[0],r[S][1]+n[1]);t.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}},{key:"getRect",value:function(t,e){var n;if(n=e||(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.refOriginalPosition),t.__rect)return t.__rect;for(var r,i=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,l=t.pointList,u=0,c=l.length;u<c;u++)l[u][0]+n[0]<i&&(i=l[u][0]+n[0]),l[u][0]+n[0]>o&&(o=l[u][0]+n[0]),l[u][1]+n[1]<s&&(s=l[u][1]+n[1]),l[u][1]+n[1]>a&&(a=l[u][1]+n[1]);return r="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(i-r/2),y:Math.round(s-r/2),width:o-i+r,height:a-s+r},t.__rect}}])&&tC(t.prototype,e),r&&tC(t,r),n}();function sC(t){return(sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lC(t,e){return!e||"object"!==sC(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function uC(t,e,n){return(uC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cC(t){return(cC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hC(t,e){return(hC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fC=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=lC(this,cC(n).call(this,t))).brushTypeOnly="stroke",e.textPosition="end",e.type="smicbroken-line",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hC(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,uC(cC(n.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.pointList;if(!(r.length<2)){var i=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,s,a,l=SO.SUtil_smoothBezier(r,e.smooth,!1,e.smoothConstraint,n);t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var u=0;u<i-1;u++)o=l[2*u],s=l[2*u+1],a=[r[u+1][0]+n[0],r[u+1][1]+n[1]],t.bezierCurveTo(o[0],o[1],s[0],s[1],a[0],a[1])}else if("spline"===e.smooth&&(i=(r=SO.SUtil_smoothSpline(r,null,null,n)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,h=c,f=c;"dashed"===e.lineType&&(h*=5,f*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,f+=c),"dot"===e.lineType&&(f*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,f+=c)),"dash"===e.lineType&&(h*=4,f*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),"longdash"===e.lineType&&(h*=8,f*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var p=1;p<i;p++)SO.SUtil_dashedLineTo(t,r[p-1][0]+n[0],r[p-1][1]+n[1],r[p][0]+n[0],r[p][1]+n[1],c,[h,f])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var d=e.lineWidth||1,y=d,g=d,m=d,v=d;"dashdot"===e.lineType&&(y*=4,g*=4,v*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=d,g+=d,m=1,v+=d)),"longdashdot"===e.lineType&&(y*=8,g*=4,v*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=d,g+=d,m=1,v+=d)),d=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var b=1;b<i;b++)SO.SUtil_dashedLineTo(t,r[b-1][0]+n[0],r[b-1][1]+n[1],r[b][0]+n[0],r[b][1]+n[1],d,[y,g,m,v])}}else{t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var _=1;_<i;_++)t.lineTo(r[_][0]+n[0],r[_][1]+n[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return oC.prototype.getRect.apply(this,[t,e])}}])&&aC(t.prototype,e),r&&aC(t,r),n}();function pC(t){return(pC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yC(t,e){return!e||"object"!==pC(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function gC(t,e,n){return(gC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mC(t){return(mC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vC(t,e){return(vC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bC=function(){function v(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(e=yC(this,mC(v).call(this,t))).type="smicimage",e._imageCache={},e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vC(t,e)}(v,NO),t=v,(e=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,gC(mC(v.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=this.style||{};e&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var o=i.image,s=this;if("string"==typeof o){var a=o;this._imageCache[a]?o=this._imageCache[a]:((o=new Image).onload=function(){o.onload=null,clearTimeout(v._refreshTimeout),v._needsRefresh.push(s),v._refreshTimeout=setTimeout(function(){n&&n(v._needsRefresh),v._needsRefresh=[]},10)},o.src=a,this._imageCache[a]=o)}if(o){if("IMG"==o.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=o.readyState)return}else if(!o.complete)return;var l=i.width||o.width,u=i.height||o.height,c=i.x+r[0],h=i.y+r[1];if(!o.width||!o.height)return;if(t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.sWidth&&i.sHeight){var f=i.sx+r[0]||0,p=i.sy+r[1]||0;t.drawImage(o,f,p,i.sWidth,i.sHeight,c,h,l,u)}else if(i.sx&&i.sy){var d=i.sx+r[0],y=i.sy+r[1],g=l-d,m=u-y;t.drawImage(o,d,y,g,m,c,h,l,u)}else t.drawImage(o,c,h,l,u);i.width||(i.width=l),i.height||(i.height=u),this.style.width||(this.style.width=l),this.style.height||(this.style.height=u),this.drawText(t,i,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&dC(t.prototype,e),n&&dC(t,n),v}();function _C(t){return(_C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function SC(t,e){return!e||"object"!==_C(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function xC(t,e,n){return(xC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function EC(t){return(EC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OC(t,e){return(OC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}bC._needsRefresh=[],bC._refreshTimeout=null;var CC=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=SC(this,EC(n).call(this,t))).type="smicrectangle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OC(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.type=null,xC(EC(n.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,i,o,s,a=this.refOriginalPosition,l=e.x+a[0],u=e.y+a[1],c=e.width,h=e.height,f=e.radius;"number"==typeof f?n=r=i=o=f:f instanceof Array?1===f.length?n=r=i=o=f[0]:2===f.length?(n=i=f[0],r=o=f[1]):3===f.length?(n=f[0],r=o=f[1],i=f[2]):(n=f[0],r=f[1],i=f[2],o=f[3]):n=r=i=o=0,c<n+r&&(n*=c/(s=n+r),r*=c/s),c<i+o&&(i*=c/(s=i+o),o*=c/s),h<r+i&&(r*=h/(s=r+i),i*=h/s),h<n+o&&(n*=h/(s=n+o),o*=h/s),t.moveTo(l+n,u),t.lineTo(l+c-r,u),0!==r&&t.quadraticCurveTo(l+c,u,l+c,u+r),t.lineTo(l+c,u+h-i),0!==i&&t.quadraticCurveTo(l+c,u+h,l+c-i,u+h),t.lineTo(l+o,u+h),0!==o&&t.quadraticCurveTo(l,u+h,l,u+h-o),t.lineTo(l,u+n),0!==n&&t.quadraticCurveTo(l,u,l+n,u)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+n[0],e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect||(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-e/2),y:Math.round(t.y+n[1]-e/2),width:t.width+e,height:t.height+e}),t.__rect}}])&&wC(t.prototype,e),r&&wC(t,r),n}();function PC(t){return(PC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function MC(t,e){return!e||"object"!==PC(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function LC(t,e,n){return(LC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function NC(t){return(NC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kC(t,e){return(kC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var AC=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=MC(this,NC(n).call(this,t))).type="smicsector",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kC(t,e)}(n,NO),t=n,(e=[{key:"destroy",value:function(){this.type=null,LC(NC(n.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1],o=e.r0||0,s=e.r,a=e.startAngle,l=e.endAngle,u=e.clockWise||!1;a=SO.Util_math.degreeToRadian(a),l=SO.Util_math.degreeToRadian(l),u||(a=-a,l=-l);var c=SO.Util_math.cos(a),h=SO.Util_math.sin(a);t.moveTo(c*o+r,h*o+i),t.lineTo(c*s+r,h*s+i),t.arc(r,i,s,a,l,!u),t.lineTo(SO.Util_math.cos(l)*o+r,SO.Util_math.sin(l)*o+i),0!==o&&t.arc(r,i,o,l,a,u),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,n=SO.Util_vector.create(),r=SO.Util_vector.create(),i=SO.Util_vector.create(),o=SO.Util_vector.create(),s=t.x+e[0],a=t.y+e[1],l=t.r0||0,u=t.r,c=SO.Util_math.degreeToRadian(t.startAngle),h=SO.Util_math.degreeToRadian(t.endAngle),f=t.clockWise;return f||(c=-c,h=-h),1<l?SO.Util_computeBoundingBox.arc(s,a,l,c,h,!f,n,i):(n[0]=i[0]=s,n[1]=i[1]=a),SO.Util_computeBoundingBox.arc(s,a,u,c,h,!f,r,o),SO.Util_vector.min(n,n,r),SO.Util_vector.max(i,i,o),t.__rect={x:n[0],y:n[1],width:i[0]-n[0],height:i[1]-n[1]},t.__rect}}])&&TC(t.prototype,e),r&&TC(t,r),n}();function IC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var RC=function(){function v(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,e,n;return t=v,n=[{key:"transformStyle",value:function(t){var e={},n=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var i in t)switch(i){case"fill":r[0]=t[i];break;case"fillColor":e.color=t[i];break;case"stroke":r[1]=t[i];break;case"strokeWidth":e.lineWidth=t[i];break;case"strokeLinecap":e.lineCap=t[i];break;case"strokeLineJoin":e.lineJoin=t[i];break;case"strokeDashstyle":e.lineType=t[i];break;case"pointRadius":e.r=t[i];break;case"label":e.text=t[i];break;case"labelRect":e.labelRect=t[i];break;case"fontColor":e.textColor=t[i];break;case"fontStyle":n[0]=t[i];break;case"fontVariant":n[1]=t[i];break;case"fontWeight":n[2]=t[i];break;case"fontSize":var o="";t[i]&&t[i].toString().indexOf("px")<0&&(o="px"),n[3]=t[i]+o;break;case"fontFamily":n[4]=t[i];break;case"fontOpacity":e.opacity=t[i];break;case"labelPosition":e.textPosition=t[i];break;case"labelAlign":e.textAlign=t[i];break;case"labelBaseline":e.textBaseline=t[i];break;case"labelRotation":e.textRotation=t[i];break;default:e[i]=t[i]}return e.textFont=n.join(" "),!0===r[0]&&!1===r[1]?e.brushType="fill":!1===r[0]&&!0===r[1]?e.brushType="stroke":!0===r[0]&&!0===r[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,n){var r=n||{},i=new SE(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return i.style={fillColor:"#f3f3f3"},r.backgroundStyle&&Et.copyAttributesWithClip(i.style,r.backgroundStyle),r.backgroundRadius&&(i.style.radius=r.backgroundRadius),i.clickable=!1,i.hoverable=!1,t.createShape(i)}},{key:"GraphAxis",value:function(t,e,n,r){var i=e,o=n||{},s=[],a=[],l=!!o.useXReferenceLine&&o.useXReferenceLine,u=o.axisYTick&&!isNaN(o.axisYTick)?o.axisYTick:0,c=[],h=[];if(0==u){if(h.push([i[0],i[3]-5]),h.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&15<=o.axis3DParameter){var f=parseInt(o.axis3DParameter),p=[i[0]-f,i[1]+f];o.axisUseArrow&&(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5])),h.push([p[0],p[1]]),h.push([i[0],i[1]])}h.push([i[2]+5,i[1]])}else{var d=Math.abs(i[1]-i[3])/u,y=i[3];h.push([i[0],y-5]);for(var g=0;g<u;g++){if(h.push([i[0],y]),h.push([i[0]-5,y]),h.push([i[0],y]),l){var m=new lE([[i[0],y],[i[2],y]]);m.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},m.clickable=!1,m.hoverable=!1,o.xReferenceLineStyle&&Et.copyAttributesWithClip(m.style,o.xReferenceLineStyle),s.push(t.createShape(m))}y+=d}if(h.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&15<=o.axis3DParameter){var v=parseInt(o.axis3DParameter),b=[i[0]-v,i[1]+v];o.axisUseArrow&&(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5])),h.push([b[0],b[1]]),h.push([i[0],i[1]])}h.push([i[2]+5,i[1]])}if(o.axisUseArrow){var _=[[i[2]+5,i[1]+4],[i[2]+13,i[1]],[i[2]+5,i[1]-4]],w=[[i[0]-4,i[3]-5],[i[0],i[3]-13],[i[0]+4,i[3]-5]],S=new yE(_);S.style={fillColor:"#008acd"},Et.copyAttributesWithClip(S.style,o.axisStyle),a.push(t.createShape(S));var x=new yE(w);if(x.style={fillColor:"#008acd"},Et.copyAttributesWithClip(x.style,o.axisStyle),a.push(t.createShape(x)),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&15<=o.axis3DParameter){var E=new yE(c);E.style={fillColor:"#008acd"},Et.copyAttributesWithClip(E.style,o.axisStyle),a.push(t.createShape(E))}}var O=new lE(h);O.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},o.axisStyle&&Et.copyAttributesWithClip(O.style,o.axisStyle),O.clickable=!1,O.hoverable=!1;var C=[t.createShape(O)],P=[];if(o.axisYLabels&&o.axisYLabels.length&&0<o.axisYLabels.length){var T=o.axisYLabels,M=T.length,L=[0,0];if(o.axisYLabelsOffset&&o.axisYLabelsOffset.length&&(L=o.axisYLabelsOffset),1==M){var N=new jE(i[0]-5+L[0],i[3]+L[1],T[0]);N.style={labelAlign:"right"},o.axisYLabelsStyle&&Et.copyAttributesWithClip(N.style,o.axisYLabelsStyle),N.clickable=!1,N.hoverable=!1,P.push(t.createShape(N))}else for(var k=i[3],A=Math.abs(i[1]-i[3])/(M-1),I=0;I<M;I++){var R=new jE(i[0]-5+L[0],k+L[1],T[I]);R.style={labelAlign:"right"},o.axisYLabelsStyle&&Et.copyAttributesWithClip(R.style,o.axisYLabelsStyle),R.clickable=!1,R.hoverable=!1,P.push(t.createShape(R)),k+=A}}var j=[];if(o.axisXLabels&&o.axisXLabels.length&&0<o.axisXLabels.length){var D=o.axisXLabels,F=D.length,B=[0,0];if(o.axisXLabelsOffset&&o.axisXLabelsOffset.length&&(B=o.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==F)for(var G=r.xPositions,U=0;U<F;U++){var z=new jE(G[U]+B[0],i[1]+B[1],D[U]);z.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Et.copyAttributesWithClip(z.style,o.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,j.push(t.createShape(z))}else if(1==F){var q=new jE(i[0]-5+B[0],i[1]+B[0],D[0]);q.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Et.copyAttributesWithClip(q.style,o.axisXLabelsStyle),q.clickable=!1,q.hoverable=!1,j.push(t.createShape(q))}else for(var V=i[0],H=Math.abs(i[2]-i[0])/(F-1),W=0;W<F;W++){var J=new jE(V+B[0],i[1]+B[1],D[W]);J.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&Et.copyAttributesWithClip(J.style,o.axisXLabelsStyle),J.clickable=!1,J.hoverable=!1,j.push(t.createShape(J)),V+=H}}return s.concat(C).concat(P).concat(j).concat(a)}},{key:"ShapeStyleTool",value:function(t,e,n,r,i,o){var s=t||{};if(e&&Et.copyAttributesWithClip(s,e),n&&n.length&&void 0!==i&&!isNaN(i)&&0<=i&&n[i]&&Et.copyAttributesWithClip(s,n[i]),r&&r.length&&void 0!==o)for(var a=r,l=a.length,u=parseFloat(o),c=0;c<l;c++)if(a[c].start<=u&&u<a[c].end){Et.copyAttributesWithClip(s,a[c].style);break}return s}}],(e=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var e=this.shapeParameters;if(e instanceof eE){var n=new Object;n.x=e.x,n.y=e.y,n.r=e.r,n=Et.copyAttributesWithClip(n,e.style,["x","y"]);var r=new FO;return r.style=v.transformStyle(n),r.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(r,e,["x","y","style","highlightStyle"]),r}if(e instanceof lE){if(!e.pointList)return null;var i=new Object;i.pointList=e.pointList,i=Et.copyAttributesWithClip(i,e.style,["pointList"]);var o=new fC;return o.style=v.transformStyle(i),o.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(o,e,["pointList","style","highlightStyle"]),o}if(e instanceof yE){if(!e.pointList)return null;var s=new Object;s.pointList=e.pointList,s=Et.copyAttributesWithClip(s,e.style,["pointList"]);var a=new oC;return a.style=v.transformStyle(s),a.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(a,e,["pointList","style","highlightStyle"]),a}if(e instanceof SE){if(!e.x&&!e.y&!e.width&!e.height)return null;var l=new Object;l.x=e.x,l.y=e.y,l.width=e.width,l.height=e.height,l=Et.copyAttributesWithClip(l,e.style,["x","y","width","height"]);var u=new CC;return u.style=v.transformStyle(l),u.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(u,e,["x","y","width","height","style","highlightStyle"]),u}if(e instanceof ME){var c=new Object;c.x=e.x,c.y=e.y,c.r=e.r,c.startAngle=e.startAngle,c.endAngle=e.endAngle,e.r0&&(c.r0=e.r0),e.clockWise&&(c.clockWise=e.clockWise),c=Et.copyAttributesWithClip(c,e.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new AC;return h.style=v.transformStyle(c),h.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(h,e,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(e instanceof jE){var f=new Object;f.x=e.x,f.y=e.y,f.text=e.text,f=Et.copyAttributesWithClip(f,e.style,["x","y","text"]);var p=new HO;return p.style=v.transformStyle(f),p.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(p,e,["x","y","text","style","highlightStyle"]),p}if(e instanceof qE){var d=new Object;d.x=e.x,d.y=e.y,e.image&&(d.image=e.image),e.width&&(d.width=e.width),e.height&&(d.height=e.height),e.sx&&(d.sx=e.sx),e.sy&&(d.sy=e.sy),e.sWidth&&(d.sWidth=e.sWidth),e.sHeight&&(d.sHeight=e.sHeight),d=Et.copyAttributesWithClip(d,e.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var y=new bC;return y.style=v.transformStyle(d),y.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(y,e,["x","y","image","width","height","style","highlightStyle"]),y}if(e instanceof ZE){var g=new Object;g.x=e.x,g.r=e.r,g.y=e.y,g=Et.copyAttributesWithClip(g,e.style,["x","y","r"]);var m=new KO;return m.style=v.transformStyle(g),m.highlightStyle=v.transformStyle(e.highlightStyle),Et.copyAttributesWithClip(m,e,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&IC(t.prototype,e),n&&IC(t,n),v}();function jC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Feature=b.Feature||{},b.Feature.ShapeFactory=RC;var DC=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t&&e&&e.map&&e.renderer&&(this.id=Et.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=e,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(t){var e=this.layer.map.getResolution(),n=this.layer.map.getExtent();return t instanceof ee||t instanceof ye?[t.x/e+-n.left/e,n.top/e-t.y/e]:t instanceof Ct?[t.lon/e+-n.left/e,n.top/e-t.lat/e]:null}}])&&jC(t.prototype,e),r&&jC(t,r),n}();function FC(t){return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function GC(t,e){return!e||"object"!==FC(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function UC(t,e,n){return(UC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zC(t){return(zC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qC(t,e){return(qC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature=b.Feature||{},b.Feature.Theme=DC;var VC=function(){function a(t,e,n,r,i,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(s=GC(this,zC(a).call(this,t,e,n,r,i,o))).shapeFactory=new RC,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),r&&r.width&&r.height&&r.codomain&&(s.setting=r),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qC(t,e)}(a,DC),t=a,(e=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,UC(zC(a.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,n=DC.getDataValues(this.data,this.fields,e);this.dataValues=n||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,i=this.height,o=this.location;this.origonPoint=[o[0]-r/2,o[1]-i/2];var s=this.origonPoint;this.chartBox=[s[0],s[1]+i,s[0]+r,s[1]];var a=this.chartBox,l=this.DVBParameter;this.dataViewBox=[a[0]+l[0],a[1]-l[1],a[2]-l[2],a[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-s[0],this.DVBOrigonPoint[1]-s[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var n=this.width,r=this.height,i=this.location;return this.chartBounds=new Tt(i[0]-n/2,i[1]+r/2,i[0]+n/2,i[1]-r/2),this.resetLinearGradient(),i}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,n=0,r=t.length;n<r;n++){t[n].refOriginalPosition=e;var i=t[n].style;for(var o in i)switch(o){case"pointList":for(var s=i[o],a=0,l=s.length;a<l;a++)s[a][0]-=e[0],s[a][1]-=e[1];break;case"x":i[o]-=e[0];break;case"y":i[o]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&BC(t.prototype,e),n&&BC(t,n),a}();function HC(t){return(HC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function JC(t,e){return!e||"object"!==HC(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function YC(t,e,n){return(YC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XC(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function XC(t){return(XC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZC(t,e){return(ZC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}DC.getDataValues=function(t,e,n){if(!t.attributes)return!1;for(var r=[],i=t.attributes,o=0;o<e.length;o++)for(var s in i)if(s===e[o])try{!isNaN(n)&&0<=n?r.push(parseFloat(i[s].toString()).toFixed(n)):r.push(parseFloat(i[s].toString()))}catch(t){throw new Error("not a number")}return r.length===e.length&&r},b.Feature.Theme.Graph=VC;var QC=function(){function s(t,e,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=JC(this,XC(s).call(this,t,e,n,r,i))).CLASS_NAME="SuperMap.Feature.Theme.Bar",o}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ZC(t,e)}(s,VC),t=s,(e=[{key:"destroy",value:function(){YC(XC(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var o=0,s=i.length;o<s;o++)if(i[o]<n[0]||i[o]>n[1])return;var a=this.calculateXShapeInfo();if(a){var l=a.xPositions,u=a.width;void 0!==e.useBackground&&!e.useBackground||this.shapes.push(RC.Background(this.shapeFactory,this.chartBox,e)),void 0!==e.useAxis&&!e.useAxis||(this.shapes=this.shapes.concat(RC.GraphAxis(this.shapeFactory,r,e,a)));for(var c=0;c<i.length;c++){var h=r[1]-(i[c]-n[0])/this.DVBUnitValue,f=[[l[c]-u/2,r[1]-1],[l[c]+u/2,r[1]-1],[l[c]+u/2,h],[l[c]-u/2,h]],p=new yE(f);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var d=e.barShadowStyle;d.shadowBlur&&(t.shadowBlur=d.shadowBlur),d.shadowColor&&(t.shadowColor=d.shadowColor),d.shadowOffsetX&&(t.shadowOffsetX=d.shadowOffsetX),d.shadowOffsetY&&(t.shadowOffsetY=d.shadowOffsetY)}p.style={},Et.copyAttributesWithClip(p.style,t)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:i[c]},void 0!==e.barHoverAble&&(p.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(p.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,s=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var a=s-((t=n.xShapeBlank)[0]+t[2]+(r-1)*t[1]);if(a<=r)return null;o=a/r}else t=[o=s/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0==u?l=t[0]+o/2:l+=o+t[1],i.push(e[0]+l);return{xPositions:i,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,n=-1,r=0;r<t;r++){var i=this.shapes[r];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var o=i.style,s=this.location[0]+o.pointList[0][0],a=this.location[0]+o.pointList[1][0];++n>=e.length&&(n%=e.length);var l=e[n][0],u=e[n][1],c=(new Ax).getLinearGradient(s,0,a,0,[[0,l],[1,u]]);i.style.color=c}}}}])&&WC(t.prototype,e),n&&WC(t,n),s}();function KC(t){return(KC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tP(t,e){return!e||"object"!==KC(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function eP(t,e,n){return(eP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nP(t){return(nP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rP(t,e){return(rP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Bar=QC;var iP=function(){function s(t,e,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=tP(this,nP(s).call(this,t,e,n,r,i))).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",o}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rP(t,e)}(s,VC),t=s,(e=[{key:"destroy",value:function(){eP(nP(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var i=0,o=r.length;i<o;i++)if(r[i]<e[0]||r[i]>e[1])return;var s=this.calculateXShapeInfo();if(s){var a=s.xPositions,l=s.width;void 0!==t.useBackground&&!t.useBackground||this.shapes.push(RC.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),void 0!==t.useAxis&&!t.useAxis||(this.shapes=this.shapes.concat(RC.GraphAxis(this.shapeFactory,n,t,s)));for(var u=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,c=0;c<r.length;c++){var h=n[1]-(r[c]-e[0])/this.DVBUnitValue,f=a[c]-l/2,p=a[c]+l/2,d=[[f,h],[p,h],[p-u,h+u],[f-u,h+u]],y=[[p,h],[p-u,h+u],[p-u,n[1]+u],[p,n[1]]],g=[[f-u,n[1]+u],[p-u,n[1]+u],[p-u,h+u],[f-u,h+u]];u<=0&&(g=[[f,n[1]],[p,n[1]],[p,h],[f,h]]);var m=new yE(d),v=new yE(y),b=new yE(g);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,b.style=RC.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,r[c]),v.style=RC.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,r[c]),m.style=RC.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,r[c]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,b.highlightStyle=RC.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),v.highlightStyle=RC.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),m.highlightStyle=RC.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),m.refDataID=v.refDataID=b.refDataID=this.data.id,m.isHoverByRefDataID=v.isHoverByRefDataID=b.isHoverByRefDataID=!0,m.refDataHoverGroup=v.refDataHoverGroup=b.refDataHoverGroup=Et.createUniqueID("lr_shg"),m.dataInfo=v.dataInfo=b.dataInfo={field:this.fields[c],value:r[c]},void 0!==t.barHoverAble&&(m.hoverable=v.hoverable=b.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(m.clickable=v.clickable=b.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,s=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var a=s-((t=n.xShapeBlank)[0]+t[2]+(r-1)*t[1]);if(a<=r)return null;o=a/r}else t=[o=s/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0==u?l=t[0]+o/2:l+=o+t[1],i.push(e[0]+l);return{xPositions:i,width:o}}}])&&$C(t.prototype,e),n&&$C(t,n),s}();function oP(t){return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aP(t,e){return!e||"object"!==oP(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function lP(t,e,n){return(lP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function uP(t){return(uP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cP(t,e){return(cP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Bar3D=iP;var hP=function(){function a(t,e,n,r,i,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(s=aP(this,uP(a).call(this,t,e,n,r,i,o))).setting=null,r&&r.codomain&&(s.setting=r,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cP(t,e)}(a,VC),t=a,(e=[{key:"destroy",value:function(){this.setting=null,lP(uP(a.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,n=this.height,r=this.location;this.origonPoint=[r[0]-e/2,r[1]-n/2];var i=this.origonPoint;this.chartBox=[i[0],i[1]+n,i[0]+e,i[1]];var o=this.chartBox,s=this.DVBParameter;this.dataViewBox=[o[0]+s[0],o[1]-s[1],o[2]-s[2],o[3]+s[3]];var a=this.dataViewBox;return!(a[0]>=a[2]||a[1]<=a[3])&&(this.DVBOrigonPoint=[a[0],a[3]],this.DVBWidth=Math.abs(a[2]-a[0]),this.DVBHeight=Math.abs(a[1]-a[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-i[0],this.DVBOrigonPoint[1]-i[1]],!0)}}])&&sP(t.prototype,e),n&&sP(t,n),a}();function fP(t){return(fP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dP(t,e){return!e||"object"!==fP(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function yP(t,e,n){return(yP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gP(t){return(gP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mP(t,e){return(mP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.RankSymbol=hP;var vP=function(){function s(t,e,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=dP(this,gP(s).call(this,t,e,n,r,i))).CLASS_NAME="SuperMap.Feature.Theme.Circle",o}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mP(t,e)}(s,hP),t=s,(e=[{key:"destroy",value:function(){yP(gP(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,n=DC.getDataValues(this.data,this.fields,e);this.dataValues=n||[];var r=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var i=this.DVBCodomain;i&&0<i[1]-i[0]?this.DVBUnitValue=t.maxR/(i[1]-i[0]):this.DVBUnitValue=t.maxR;var o=this.DVBUnitValue,s=r[0]*o+t.minR;if(this.width=2*s,this.height=2*s,this.initBaseParameter()&&(!i||!(r[0]<i[0]||r[0]>i[1]))){var a=this.DVBCenterPoint,l=new ZE(a[0],a[1],s);l.style=RC.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?l.style.fillColor=t.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=RC.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(l.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(l.clickable=t.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:s,value:r[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&pP(t.prototype,e),n&&pP(t,n),s}();function bP(t){return(bP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wP(t,e){return!e||"object"!==bP(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function SP(t,e,n){return(SP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xP(t){return(xP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EP(t,e){return(EP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Circle=vP;var OP=function(){function a(t,e,n,r,i,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(s=wP(this,xP(a).call(this,t,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Line",s}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&EP(t,e)}(a,VC),t=a,(e=[{key:"destroy",value:function(){SP(xP(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var o=this.calculateXShapeInfo();if(o){var s,a,l=o.xPositions;void 0!==t.useBackground&&!t.useBackground||this.shapes.push(RC.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(RC.GraphAxis(this.shapeFactory,e,t,o));for(var u=[],c=[],h=0,f=i.length;h<f;h++){if(i[h]<n[0]||i[h]>n[1])return null;s=l[h],a=e[1]-(i[h]-n[0])/r;var p=new eE(s,a);p.style=RC.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,h,i[h]),p.highlightStyle=RC.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[h],value:i[h]},c.push(this.shapeFactory.createShape(p));var d=[s,a];u.push(d)}var y=new lE(u);y.style=RC.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),y.clickable=!1,y.hoverable=!1;var g=this.shapeFactory.createShape(y);this.shapes.push(g),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var a=o-((t=n.xShapeBlank)[0]+t[1]);if(a<=r)return null;s=a/(r-1)}else t=[s=o/(r+1),s,s];for(var l=0,u=0;u<r;u++)0==u?l=t[0]:l+=s,i.push(e[0]+l);return{xPositions:i,width:0}}}])&&_P(t.prototype,e),n&&_P(t,n),a}();function CP(t){return(CP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function TP(t,e){return!e||"object"!==CP(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function MP(t,e,n){return(MP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function LP(t){return(LP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NP(t,e){return(NP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Line=OP;var kP=function(){function s(t,e,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=TP(this,LP(s).call(this,t,e,n,r,i))).CLASS_NAME="SuperMap.Feature.Theme.Pie",o}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NP(t,e)}(s,VC),t=s,(e=[{key:"destroy",value:function(){MP(LP(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(RC.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var o=0,s=0;s<n.length;s++)o+=Math.abs(n[s]);this.DVBUnitValue=360/o;for(var a=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,h=u,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<n.length;p++){var d=Math.abs(n[p]);360<=(c=0!==p&&p===d.length-1?h:u+d*a)-u&&(c=359.9999999);var y=new ME(l[0],l[1],f,u,c);if(void 0===t.sectorStyleByFields){var g=p%e.length;y.style=RC.ShapeStyleTool(null,t.sectorStyle,e,null,g)}else y.style=RC.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,p,n[p]);y.highlightStyle=RC.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(y.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(y.clickable=t.sectorClickAble),y.refDataID=this.data.id,y.dataInfo={field:this.fields[p],value:n[p]},this.shapes.push(this.shapeFactory.createShape(y)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&PP(t.prototype,e),n&&PP(t,n),s}();function AP(t){return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function RP(t,e){return!e||"object"!==AP(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function jP(t,e,n){return(jP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function DP(t){return(DP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FP(t,e){return(FP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Pie=kP;var BP=function(){function a(t,e,n,r,i,o){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(s=RP(this,DP(a).call(this,t,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Point",s}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FP(t,e)}(a,VC),t=a,(e=[{key:"destroy",value:function(){jP(DP(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues,o=this.calculateXShapeInfo();if(o){var s,a,l=o.xPositions;void 0!==t.useBackground&&!t.useBackground||this.shapes.push(RC.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(RC.GraphAxis(this.shapeFactory,e,t,o));for(var u=0,c=i.length;u<c;u++){if(i[u]<n[0]||i[u]>n[1])return null;s=l[u],a=e[1]-(i[u]-n[0])/r;var h=new eE(s,a);h.style=RC.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,u,i[u]),h.highlightStyle=RC.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(h.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(h.clickable=t.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[u],value:i[u]},this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var a=o-((t=n.xShapeBlank)[0]+t[1]);if(a<=r)return null;s=a/(r-1)}else t=[s=o/(r+1),s,s];for(var l=0,u=0;u<r;u++)0==u?l=t[0]:l+=s,i.push(e[0]+l);return{xPositions:i,width:0}}}])&&IP(t.prototype,e),n&&IP(t,n),a}();function GP(t){return(GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zP(t,e){return!e||"object"!==GP(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function qP(t,e,n){return(qP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function VP(t){return(VP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function HP(t,e){return(HP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Point=BP;var WP=function(){function s(t,e,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=zP(this,VP(s).call(this,t,e,n,r,i))).CLASS_NAME="SuperMap.Feature.Theme.Ring",o}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&HP(t,e)}(s,VC),t=s,(e=[{key:"destroy",value:function(){qP(VP(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(RC.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var o=0,s=0;s<n.length;s++)o+=Math.abs(n[s]);this.DVBUnitValue=360/o;for(var a=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,h=u,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0<=e.innerRingRadius&&e.innerRingRadius<f,d=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&p?e.innerRingRadius:0,y=0;y<n.length;y++){var g=Math.abs(n[y]);c=0!==y&&y===g.length-1?h:u+g*a;var m=new ME(l[0],l[1],f,u,c,d);if(void 0===e.sectorStyleByFields){var v=y%t.length;m.style=RC.ShapeStyleTool(null,e.sectorStyle,t,null,v)}else m.style=RC.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,y,n[y]);m.highlightStyle=RC.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(m.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(m.clickable=e.sectorClickAble),m.refDataID=this.data.id,m.dataInfo={field:this.fields[y],value:n[y]},this.shapes.push(this.shapeFactory.createShape(m)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&UP(t.prototype,e),n&&UP(t,n),s}();function JP(t){return(JP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function XP(t,e){return!e||"object"!==JP(e)&&"function"!=typeof e?ZP(t):e}function ZP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QP(t,e,n){return(QP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function KP(t){return(KP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $P(t,e){return($P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.Ring=WP;var tT=function(){function a(t,e,n,r,i){var o;if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),o=XP(this,KP(a).call(this,t,e)),!t.geometry)return XP(o);if(!(t.geometry instanceof Lt))return XP(o);o.dataBounds=t.geometry.getBounds(),o.nodesClipPixel=2,o.isHoverAble=!0,o.isMultiHover=!0,o.isClickAble=!0,o.highlightStyle=null,o.shapeOptions={},o.style=n||{},o.CLASS_NAME="SuperMap.Feature.Theme.Vector",o.style=n||{},r&&Et.copyAttributesWithClip(ZP(o),r,["shapeOptions","dataBounds"]),i&&Et.copyAttributesWithClip(o.shapeOptions,i);var s=t.geometry;return o.lonlat=o.dataBounds.getCenterLonLat(),o.location=o.getLocalXY(o.lonlat),s instanceof Se||s instanceof le?o.lineToTF(s):s instanceof Yt||(s instanceof qt?o.multiPointToTF(s):s instanceof Pe?o.multiLineStringToTF(s):s instanceof ke?o.multiPolygonToTF(s):s instanceof Fe?o.polygonToTF(s):s instanceof Dt||(s instanceof ee?o.pointToTF(s):s instanceof Ve?o.rectangleToTF(s):s instanceof ye&&o.geoTextToTF(s))),o}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$P(t,e)}(a,DC),t=a,(e=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,QP(KP(a.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(t){for(var e=t.components,n=[],r=[],i=this.location,o=[],s=this.nodesClipPixel,a=0;a<e.length;a++){var l=e[a];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],0<o.length){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=s&&Math.abs(u[1]-r[1])<=s)continue}o.push(r)}if(o.length<2)return null;var c=new Object;(c=Et.copyAttributesWithClip(c,this.style,["pointList"])).pointList=o;var h=new fC({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=this.location,h.refDataID=this.data.id,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Et.copyAttributesWithClip(h,this.shapeOptions),this.shapes.push(h)}},{key:"multiPointToTF",value:function(t){for(var e=t.components,n=[],r=[],i=this.location,o=[],s=this.nodesClipPixel,a=0;a<e.length;a++){var l=e[a];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],0<o.length){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=s&&Math.abs(u[1]-r[1])<=s)continue}o.push(r);var c=new Object;c.r=6,(c=Et.copyAttributesWithClip(c,this.style)).x=r[0],c.y=r[1];var h=new FO({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=i,h.refDataID=this.data.id,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Et.copyAttributesWithClip(h,this.shapeOptions),this.shapes.push(h)}}},{key:"multiLineStringToTF",value:function(t){for(var e=t.components,n=0;n<e.length;n++){var r=e[n];this.lineToTF(r)}}},{key:"multiPolygonToTF",value:function(t){for(var e=t.components,n=0;n<e.length;n++){var r=e[n];this.polygonToTF(r)}}},{key:"pointToTF",value:function(t){var e=this.location,n=this.getLocalXY(t),r=new Object;r.r=6,(r=Et.copyAttributesWithClip(r,this.style)).x=n[0]-e[0],r.y=n[1]-e[1];var i=new FO({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=e,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Et.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"polygonToTF",value:function(t){for(var e=t.components,n=[],r=[],i=this.location,o=[],s=[],a=[],l=this.nodesClipPixel,u=0;u<e.length;u++){var c=e[u].components;if(0===u){o=[];for(var h=0;h<c.length;h++){if(r=[],n=this.getLocalXY(c[h]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],0<o.length){var f=o[o.length-1];if(Math.abs(f[0]-r[0])<=l&&Math.abs(f[1]-r[1])<=l)continue}o.push(r)}}else{s=[];for(var p=0;p<c.length;p++){if(r=[],n=this.getLocalXY(c[p]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],0<s.length){var d=s[s.length-1];if(Math.abs(d[0]-r[0])<=l&&Math.abs(d[1]-r[1])<=l)continue}s.push(r)}}s.length<2||a.push(s)}if(!(o.length<2)){var y={};(y=Et.copyAttributesWithClip(y,this.style,["pointList"])).pointList=o;var g=new oC({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(g.highlightStyle=this.highlightStyle),g.refOriginalPosition=this.location,g.refDataID=this.data.id,g.isHoverByRefDataID=this.isMultiHover,0<a.length&&(g.holePolygonPointLists=a),this.shapeOptions&&Et.copyAttributesWithClip(g,this.shapeOptions),this.shapes.push(g)}}},{key:"rectangleToTF",value:function(t){var e=this.location,n=new Ct(t.x,t.y),r=this.layer.map.getResolution(),i=this.getLocalXY(n),o=new Object;o.r=6,(o=Et.copyAttributesWithClip(o,this.style)).x=i[0]-e[0],o.y=i[1]-e[1]-2*t.width/r,o.width=t.width/r,o.height=t.height/r;var s=new CC({style:o,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(s.highlightStyle=this.highlightStyle),s.refOriginalPosition=e,s.refDataID=this.data.id,s.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Et.copyAttributesWithClip(s,this.shapeOptions),this.shapes.push(s)}},{key:"geoTextToTF",value:function(t){var e=this.location,n=this.getLocalXY(t),r=new Object;r.r=6,(r=Et.copyAttributesWithClip(r,this.style,["x","y","text"])).x=n[0]-e[0],r.y=n[1]-e[1],r.text=t.text;var i=new HO({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=e,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Et.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var i=this.shapes[n];i.refOriginalPosition=t,e.addShape(i)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&YP(t.prototype,e),n&&YP(t,n),a}();function eT(t){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iT(t,e,n){return(iT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oT(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function oT(t){return(oT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sT(t,e){return(sT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Feature.Theme.ThemeVector=tT;var aT=function(){function i(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),n=this,r=oT(i).call(this,t),t=t||{},(e=!r||"object"!==eT(r)&&"function"!=typeof r?rT(n):r).id=null,e.type="group",e.clipShape=null,e._children=[],e._storage=null,e.__dirty=!0,e.ignore=!1,Et.extend(rT(e),t),e.id=e.id||Et.createUniqueID("smShapeGroup_"),e.CLASS_NAME="SuperMap.LevelRenderer.Group",e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sT(t,e)}(i,b.mixin(KE,EO)),t=i,(e=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,iT(oT(i.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),(t.parent=this)._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof i&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var e=Et.indexOf(this._children,t);this._children.splice(e,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof i&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var n=!!e,r=0;r<this._children.length;r++){var i=this._children[r];n?t.call(e,i):t(i)}}},{key:"traverse",value:function(t,e){for(var n=!!e,r=0;r<this._children.length;r++){var i=this._children[r];n?t.call(e,i):t(i),"group"===i.type&&i.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToMap(n),"group"===n.type&&n.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&nT(t.prototype,e),n&&nT(t,n),i}();function lT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var uT=function(){function c(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,e,n;return t=c,n=[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}],(e=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var n=0,r=this._hoverElements.length;n<r;n++){var i=this._hoverElements[n];if(i.updateTransform(),t(i))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var o=this._shapeList.length;o--;)if(t(this._shapeList[o]))return this;break;default:for(var s=0,a=this._shapeList.length;s<a;s++)if(t(this._shapeList[s]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var e=[],n=this._hoverElements.length,r=0;r<n;r++){e.push(this._hoverElements[r]);var i=this._hoverElements[r].hoverConnect;if(i)for(var o,s=0,a=(i=i instanceof Array?i:[i]).length;s<a;s++)(o=i[s].id?i[s]:this.get(i[s]))&&e.push(o)}if(e.sort(c.shapeCompareFunc),t)for(var l=0,u=e.length;l<u;l++)e[l].updateTransform();return e}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,e=0;e<t;e++){var n=this._roots[e];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var r=this._shapeList.length,i=0;i<r;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(c.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&((t.clipShape.parent=t).clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var n=0;n<t._children.length;n++){var r=t._children[n];r.__dirty=t.__dirty||r.__dirty,this._updateAndAddShape(r,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var n=this._elements[t];if(n&&(n.modSelf(),e))if(e.parent||e._storage||e.__startClip){var r={};for(var i in e)"parent"!=i&&"_storage"!=i&&"__startClip"!=i&&e.hasOwnProperty(i)&&(r[i]=e[i]);(new Nx).merge(n,r,!0)}else(new Nx).merge(n,e,!0);return this}},{key:"drift",value:function(t,e,n){var r=this._elements[t];return r&&(r.needTransform=!0,"horizontal"===r.draggable?n=0:"vertical"===r.draggable&&(e=0),r.ondrift&&(!r.ondrift||r.ondrift(e,n))||r.drift(e,n)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return 0<this._hoverElements.length}},{key:"addRoot",value:function(t){t instanceof aT&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof aT&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var r=t.length,i=0;i<r;i++)this.delRoot(t[i]);else{var o;o="string"==typeof t?this._elements[t]:t;var s=(new Nx).indexOf(this._roots,o);0<=s&&(this.delFromMap(o.id),this._roots.splice(s,1),o instanceof aT&&o.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof aT&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof aT&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&lT(t.prototype,e),n&&lT(t,n),c}();function cT(t){return(cT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hT(t,e){return!e||"object"!==cT(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function fT(t){return(fT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pT(t,e){return(pT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gT(t,e,n){return e&&yT(t.prototype,e),n&&yT(t,n),t}var mT=function(){function a(t,e){dT(this,a),this.root=t,this.storage=e,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,a.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");(this._domRoot=n).style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=a.createDom(Et.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=o,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var r=new vT(Et.createUniqueID("_highLightLayer_"),this);this._layers.hover=r,n.appendChild(r.dom),r.initContext(),r.dom.onselectstart=o,r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none";var i=this;function o(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}return gT(a,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var n=this.storage.getShapeList(!0);return this._paintList(n,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var n,r,i;for(var o in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var s=[],a=0,l=t.length;a<l;a++){var u=t[a];if(r!==u.zlevel&&(n&&n.needTransform&&i.restore(),i=(n=this.getLayer(u.zlevel)).ctx,r=u.zlevel,n.unusedCount=0,(n.dirty||e)&&n.clear(),n.needTransform&&(i.save(),n.setTransform(i))),i&&u.__startClip){var c=u.__startClip;if(i.save(),c.needTransform){var h=c.transform;SO.Util_matrix.invert(s,h),i.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(i.beginPath(),c.buildPath(i,c.style),i.clip(),c.needTransform){i.transform(s[0],s[1],s[2],s[3],s[4],s[5])}}if((n&&n.dirty||e)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(i,!1)))if(dO.catchBrushException)try{u.brush(i,!1,this.updatePainter)}catch(t){SO.Util_log(t,"brush error of "+u.type,u)}else u.brush(i,!1,this.updatePainter);i&&u.__stopClip&&i.restore(),u.__dirty=!1}for(var f in i&&n&&n.needTransform&&i.restore(),this._layers)if("hover"!==f){var p=this._layers[f];p.dirty=!1,1==p.unusedCount&&p.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var n=this._zlevelList.length,r=null,i=-1;if(0<n&&t>this._zlevelList[0]){for(i=0;i<n-1&&!(this._zlevelList[i]<t&&this._zlevelList[i+1]>t);i++);r=this._layers[this._zlevelList[i]]}this._zlevelList.splice(i+1,0,t),e=new vT(Et.createUniqueID("_levelLayer_"+t),this);var o=r?r.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(e.dom,o.nextSibling):o.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new Nx).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,n={};for(var r in e)"hover"!==r&&(n[r]=e[r].elCount,e[r].elCount=0);for(var i=0;i<t.length;i++){var o=t[i],s=e[o.zlevel];if(s){if(s.elCount++,s.dirty)continue;s.dirty=o.__dirty}}for(var a in e)"hover"!==a&&n[a]!==e[a].elCount&&(e[a].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];this.storage.mod(i.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new Nx).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var n=this._layers[t];n&&(new Nx).merge(n,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new Nx).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,n=t.length;e<n;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),n=this._getHeight();if(t.style.display="",this._width!=e||n!=this._height){for(var r in this._width=e,this._height=n,t.style.width=e+"px",t.style.height=n+"px",this._layers)this._layers[r].resize(e,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,e,n){var r=a.createDom(Et.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(r);var i=r.getContext("2d");1!=a.devicePixelRatio&&i.scale(a.devicePixelRatio,a.devicePixelRatio),i.fillStyle=e||"#fff",i.rect(0,0,this._width*a.devicePixelRatio,this._height*a.devicePixelRatio),i.fill();var o=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(dO.catchBrushException)try{e.brush(i,!1,o.updatePainter)}catch(t){SO.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,o.updatePainter)},{normal:"up",update:!0});var s=r.toDataURL(t,n);return i=null,this._bgDom.removeChild(r),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return+((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return+((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var n=this.getLayer(e.zlevel);if(n.needTransform&&(t.save(),n.setTransform(t)),dO.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){SO.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);n.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(t,e,n,r,i){var o=document.createElement("canvas"),s=o.getContext("2d"),a=i||window.devicePixelRatio||1;o.style.width=n+"px",o.style.height=r+"px",o.setAttribute("width",n*a),o.setAttribute("height",r*a),s.clearRect(0,0,n*a,r*a);var l={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(s,!1);var u=new bC({id:t,style:{x:0,y:0,image:o}});return null!=l.position&&(u.position=e.position=l.position),null!=l.rotation&&(u.rotation=e.rotation=l.rotation),null!=l.scale&&(u.scale=e.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var i=this;return function(t,e,n,r){return i._shapeToImage(t,e,n,r,a.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(t,e,n){var r=document.createElement(e),i=n._width,o=n._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=i+"px",r.style.height=o+"px",r.setAttribute("width",i*a.devicePixelRatio),r.setAttribute("height",o*a.devicePixelRatio),r.setAttribute("id",t),r}}]),a}(),vT=function(){function r(t,e){var n;return dT(this,r),(n=hT(this,fT(r).call(this,t,e))).dom=null,n.domBack=null,n.ctxBack=null,n.painter=e,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=mT.createDom(Et.createUniqueID("SuperMap.Theme"+t),"canvas",e),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pT(t,e)}(r,EO),gT(r,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,EO.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=mT.devicePixelRatio&&this.ctx.scale(mT.devicePixelRatio,mT.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=mT.createDom(Et.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=mT.devicePixelRatio&&this.ctxBack.scale(mT.devicePixelRatio,mT.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*mT.devicePixelRatio),this.dom.setAttribute("height",e*mT.devicePixelRatio),1!=mT.devicePixelRatio&&this.ctx.scale(mT.devicePixelRatio,mT.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*mT.devicePixelRatio),this.domBack.setAttribute("height",e*mT.devicePixelRatio),1!=mT.devicePixelRatio&&this.ctxBack.scale(mT.devicePixelRatio,mT.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,n=t.width,r=t.height,i=this.clearColor,o=this.motionBlur,s=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,n/mT.devicePixelRatio,r/mT.devicePixelRatio)),i?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,n/mT.devicePixelRatio,r/mT.devicePixelRatio),e.restore()):e.clearRect(0,0,n/mT.devicePixelRatio,r/mT.devicePixelRatio),o){var a=this.domBack;e.save(),e.globalAlpha=s,e.drawImage(a,0,0,n/mT.devicePixelRatio,r/mT.devicePixelRatio),e.restore()}}}]),r}();function bT(t){return(bT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wT(t){return(wT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ST(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xT(t,e){return(xT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ET=function(){function c(t,e,n){var r,i,o,s,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),i=this,(r=!(o=wT(c).call(this,t,e,n))||"object"!==bT(o)&&"function"!=typeof o?ST(i):o).root=t,r.storage=e,r.painter=n,r._lastX=0,r._lastY=0,r._mouseX=0,r._mouseY=0,r._findHover=null,r._domHover=null,r._findHover=(s=function(t,e,n){var r=this;if(r._draggingTarget&&r._draggingTarget.id==t.id||t.isSilent())return!1;var i=r._event;if(t.isCover(e,n)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,s=null;t.refDataHoverGroup&&(s=t.refDataHoverGroup);for(var a=r.storage._shapeList,l=0,u=a.length;l<u;l++){var c=a[l];c.refDataID&&o===c.refDataID&&(!s||c.refDataHoverGroup&&s===c.refDataHoverGroup)&&r.storage.addHover(c)}}}else r.storage.addHover(t);for(var h=t.parent;h;){if(h.clipShape&&!h.clipShape.isCover(r._mouseX,r._mouseY))return!1;h=h.parent}return r._lastHover!=t&&(r._processOutShape(i),r._processDragLeave(i),r._lastHover=t,r._processDragEnter(i)),r._processOverShape(i),r._processDragOver(i),r._hasfound=1,!0}return!1},a=ST(r),function(t,e,n){return s.call(a,t,e,n)}),r._domHover=n.getDomHover(),r.CLASS_NAME="SuperMap.LevelRenderer.Handler";var l={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(dO.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,dO.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,dO.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=0<((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)?1.1:1/1.1,n=this.painter.getLayers(),r=!1;for(var i in n)if("hover"!==i){var o=n[i],s=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var a=o.__zoom;a*=e,e=(a=Math.max(Math.min(o.maxZoom,a),o.minZoom))/o.__zoom,o.__zoom=a,s[0]-=(this._mouseX-s[0])*(e-1),s[1]-=(this._mouseY-s[1])*(e-1),o.scale[0]*=e,o.scale[1]*=e,r=o.dirty=!0}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,dO.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=SO.Util_event.getX(t),this._mouseY=SO.Util_event.getY(t);var e=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),o=!1;for(var s in i)if("hover"!==s){var a=i[s];a.panable&&(r="move",a.position[0]+=e,a.position[1]+=n,o=!0,a.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,dO.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(dO.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,dO.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,dO.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&SO.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<dO.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<dO.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&SO.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(e,n){return function(t){return e.call(n,t)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=e.length;for(;n--;){var r=e[n];t["_"+r+"Handler"]=u(l[r],t)}}(ST(r)),window.addEventListener?(window.addEventListener("resize",r._resizeHandler),SO.Util_env.os.tablet||SO.Util_env.os.phone?(t.addEventListener("touchstart",r._touchstartHandler),t.addEventListener("touchmove",r._touchmoveHandler),t.addEventListener("touchend",r._touchendHandler)):(t.addEventListener("click",r._clickHandler),t.addEventListener("dblclick",r._dblclickHandler),t.addEventListener("mousewheel",r._mousewheelHandler),t.addEventListener("mousemove",r._mousemoveHandler),t.addEventListener("mousedown",r._mousedownHandler),t.addEventListener("mouseup",r._mouseupHandler)),t.addEventListener("DOMMouseScroll",r._mousewheelHandler),t.addEventListener("mouseout",r._mouseoutHandler)):(window.attachEvent("onresize",r._resizeHandler),t.attachEvent("onclick",r._clickHandler),t.ondblclick=r._dblclickHandler,t.attachEvent("onmousewheel",r._mousewheelHandler),t.attachEvent("onmousemove",r._mousemoveHandler),t.attachEvent("onmouseout",r._mouseoutHandler),t.attachEvent("onmousedown",r._mousedownHandler),t.attachEvent("onmouseup",r._mouseupHandler)),r}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xT(t,e)}(c,KE),t=c,(e=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,KE.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var n=dO.EVENT;switch(t){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),SO.Util_env.os.tablet||SO.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var n=e;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,dO.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,dO.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,dO.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,dO.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,dO.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,dO.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,dO.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,dO.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,n,r){var i="on"+e,o={type:e,event:n,target:t,cancelBubble:!1},s=t;for(r&&(o.dragged=r);s&&(s[i]&&(o.cancelBubble=s[i](o)),s.dispatch(e,o),s=s.parent,!o.cancelBubble););t?o.cancelBubble||this.dispatch(e,o):r||this.dispatch(e,{type:e,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=SO.Util_matrix.create(),n=this.storage.getShapeList(),r=[0,0],i=n.length-1;0<=i;i--){var o=n[i];if(void 0!==o.zlevel&&(t=this.painter.getLayer(o.zlevel,t),r[0]=this._mouseX,r[1]=this._mouseY,t.needTransform&&(SO.Util_matrix.invert(e,t.transform),SO.Util_vector.applyTransform(r,r,e))),this._findHover(o,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<e.length;n++){var r=e[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var n="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(n){var r=this.root.getBoundingClientRect();t.zrenderX=n.clientX-r.left,t.zrenderY=n.clientY-r.top}}else{var i=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;i&&i!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+i.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+i.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&_T(t.prototype,e),n&&_T(t,n),c}();function OT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var CT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)))}},{key:"ElasticOut",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(e=n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*--t)*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){return t*t*(2.70158*t-1.70158)}},{key:"BackOut",value:function(t){return--t*t*(2.70158*t+1.70158)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}])&&OT(e.prototype,n),r&&OT(e,r),t}();function PT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var TT=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new CT,n=(t-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r="string"==typeof this.easing?e[this.easing]:this.easing,i="function"==typeof r?r(n):n;return this.fire("frame",i),1==n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+t]&&this["on"+t](this._targetPool[n],e)}}])&&PT(t.prototype,n),r&&PT(t,r),e}();function MT(t){return(MT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kT(t,e,n){return e&&NT(t.prototype,e),n&&NT(t,n),t}function AT(t){return(AT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RT(t,e){return(RT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jT=function(){function d(t){var e,n,r;return LT(this,d),n=this,r=AT(d).call(this,t),t=t||{},(e=!r||"object"!==MT(r)&&"function"!=typeof r?IT(n):r).stage={},e.onframe=function(){},e._clips=[],e._running=!1,e._time=0,Et.extend(IT(e),t),e.CLASS_NAME="SuperMap.LevelRenderer.Animation",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&RT(t,e)}(d,KE),kT(d,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new Nx).indexOf(this._clips,t);0<=e&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,n=this._clips,r=n.length,i=[],o=[],s=0;s<r;s++){var a=n[s],l=a.step(t);l&&(i.push(l),o.push(a))}this.stage.update&&this.stage.update();for(var u=0;u<r;)n[u]._needsRemove?(n[u]=n[r-1],n.pop(),r--):u++;r=i.length;for(var c=0;c<r;c++)o[c].fire(i[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},n=this;this._running=!0,this._time=(new Date).getTime(),e(function t(){n._running&&(n._update(),e(t))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var n=new DT(t,(e=e||{}).loop,e.getter,e.setter);return n.animation=this,n}}],[{key:"_interpolateNumber",value:function(t,e,n){return(e-t)*n+t}},{key:"_interpolateArray",value:function(t,e,n,r,i){var o=t.length;if(1==i)for(var s=0;s<o;s++)r[s]=d._interpolateNumber(t[s],e[s],n);else for(var a=t[0].length,l=0;l<o;l++)for(var u=0;u<a;u++)r[l][u]=d._interpolateNumber(t[l][u],e[l][u],n)}},{key:"_isArrayLike",value:function(t){switch(MT(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,e,n,r,i,o,s,a,l){var u=t.length;if(1==l)for(var c=0;c<u;c++)a[c]=d._catmullRomInterpolate(t[c],e[c],n[c],r[c],i,o,s);else for(var h=t[0].length,f=0;f<u;f++)for(var p=0;p<h;p++)a[f][p]=d._catmullRomInterpolate(t[f][p],e[f][p],n[f][p],r[f][p],i,o,s)}},{key:"_catmullRomInterpolate",value:function(t,e,n,r,i,o,s){var a=.5*(n-t),l=.5*(r-e);return(2*(e-n)+a+l)*s+(-3*(e-n)-2*a-l)*o+a*i+e}},{key:"_cloneValue",value:function(t){var e=Array.prototype.slice;if(d._isArrayLike(t)){var n=t.length;if(d._isArrayLike(t[0])){for(var r=[],i=0;i<n;i++)r.push(e.call(t[i]));return r}return e.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),d}(),DT=function(){function i(t,e,n,r){LT(this,i),this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||function(t,e){return t[e]},this._setter=r||function(t,e,n){t[e]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return kT(i,[{key:"when",value:function(t,e){for(var n in e)this._tracks[n]||(this._tracks[n]=[],0!==t&&this._tracks[n].push({time:0,value:jT._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(t,10),value:e[n]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(x){function E(){if(O._clipCount--,0===O._clipCount){O._tracks={};for(var t=O._doneList.length,e=0;e<t;e++)O._doneList[e].call(O)}}function t(t,o){var s=t.length;if(s){var e=t[0].value,a=jT._isArrayLike(e),l=!1,u=a&&jT._isArrayLike(e[0])?2:1;t.sort(function(t,e){return t.time-e.time});for(var n=t[s-1].time,c=[],h=[],r=0;r<s;r++){c.push(t[r].time/n);var i=t[r].value;"string"==typeof i&&(0===(i=SO.Util_color.toArray(i)).length&&(i[0]=i[1]=i[2]=0,i[3]=1),l=!0),h.push(i)}var f,p,d,y,g,m,v,b=0,_=0;if(l)var w=[0,0,0,0];var S=new TT({target:O._target,life:n,loop:O._loop,delay:O._delay,onframe:function(t,e){if(e<_){for(f=Math.min(b+1,s-1),p=f;0<=p&&!(c[p]<=e);p--);p=Math.min(p,s-2)}else{for(p=b;p<s&&!(c[p]>e);p++);p=Math.min(p-1,s-2)}_=e;var n=c[(b=p)+1]-c[p];if(0!=n){var r,i;if(d=(e-c[p])/n,M)if(g=h[p],y=h[0===p?p:p-1],m=h[s-2<p?s-1:p+1],v=h[s-3<p?s-1:p+2],a)jT._catmullRomInterpolateArray(y,g,m,v,d,d*d,d*d*d,P(t,o),u);else r=l?jT.rgba2String(w):jT._catmullRomInterpolate(y,g,m,v,d,d*d,d*d*d),C(t,o,r);else if(a)jT._interpolateArray(h[p],h[p+1],d,P(t,o),u);else i=l?(jT._interpolateArray(h[p],h[p+1],d,w,1),jT.rgba2String(w)):jT._interpolateNumber(h[p],h[p+1],d),C(t,o,i);for(p=0;p<T;p++)O._onframeList[p](t,e)}},ondestroy:E});x&&"spline"!==x&&(S.easing=x),O._clipList.push(S),O._clipCount++,O.animation.add(S)}}var O=this,C=this._setter,P=this._getter,T=O._onframeList.length,M="spline"===x;for(var e in this._tracks)t(this._tracks[e],e);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),i}();function FT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var BT=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=t,this.storage=new uT,this.painter=new mT(e,this.storage),this.handler=new ET(e,this.storage,this.painter),this.animatingElements=[],this.animation=new jT({stage:{update:n.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,e,r;return t=n,r=[{key:"getFrameCallback",value:function(r){return function(){var t=r.animatingElements;if(t instanceof Array){for(var e=0,n=t.length;e<n;e++)r.storage.mod(t[e].id);(t.length||r._needsRefreshNextFrame)&&r.refresh()}}}}],(e=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,n){if("string"==typeof e&&(e=this.storage.get(e)),e){var r;if(t){for(var i=t.split("."),o=e,s=0,a=i.length;s<a;s++)o=o&&o[i[s]];o&&(r=o)}else r=e;if(!r)return void SO.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(r,{loop:n}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new Nx).indexOf(l,e);l.splice(t,1)}})}SO.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,n){return this.painter.toDataURL(t,e,n)}},{key:"shapeToImage",value:function(t,e,n){var r=Et.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,t,e,n)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&FT(t.prototype,e),r&&FT(t,r),n}();function GT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var UT=function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),n._instances={},n.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,e,r;return t=n,(e=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var e=new BT(Et.createUniqueID("LRenderer_"),t);return n._instances[e.id]=e}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var e in n._instances)n._instances[e].dispose();n._instances={}}return this}},{key:"getInstance",value:function(t){return n._instances[t]}},{key:"delInstance",value:function(t){return delete n._instances[t],this}}])&&GT(t.prototype,e),r&&GT(t,r),n}();b.LevelRenderer=UT;var zT={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},qT={fileMaxSize:10485760};function VT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var HT=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.FileTypes=zT,this.FileConfig=qT,this.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[]}var t,n,r;return t=e,(n=[{key:"set",value:function(t,e){this[t]=e}},{key:"get",value:function(t){return this[t]}}])&&VT(t.prototype,n),r&&VT(t,r),e}();function WT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var JT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initView()}var e,n,r;return e=t,(n=[{key:"_initView",value:function(){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);var n=document.createElement("div");n.setAttribute("class","component-messagebox"),n.innerHTML="",t.appendChild(n),this.messageBox=n;var r=document.createElement("div");r.setAttribute("class","component-messagebox__cancelbtncontainer");var i=document.createElement("button");i.setAttribute("class","component-messagebox__cancelBtn"),i.innerHTML="x",i.onclick=this.closeView.bind(this),r.appendChild(i),t.appendChild(r),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:"warring";"success"===n?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===n?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===n&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}])&&WT(e.prototype,n),r&&WT(e,r),t}();b.Components.MessageBox=JT;var YT=n(1),XT=n.n(YT),ZT={code:null,defaultCode:"en-US",getCode:function(){return b.Lang.code||b.Lang.setCode(),b.Lang.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=b.Lang.defaultCode,0===(t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US")),b.Lang.code=t},getLanguageFromCookie:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){for(var n=t[e];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf("language="))return n.substring("language=".length,n.length)}return""},i18n:function(t){var e=b.Lang[b.Lang.getCode()],n=e&&e[t];return n=n||t}};b.Lang=ZT,b.i18n=b.Lang.i18n;var QT=n(5),KT=n.n(QT),$T={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,n,r,i){zT.JSON===t||zT.GEOJSON===t?this.readTextFile(e,n,r,i):zT.EXCEL!==t&&zT.CSV!==t||this.readXLSXFile(e,n,r,i)},readTextFile:function(t,e,n,r){var i=new FileReader;i.onloadend=function(t){e&&e.call(r,t.target.result)},i.onerror=function(t){n&&n.call(r,t)},this.rAT?i.readAsText(t.file,"utf-8"):i.readAsBinaryString(t.file)},readXLSXFile:function(t,o,s,a){var e=new FileReader;e.onloadend=function(t){var e=new Uint8Array(t.target.result),n=KT.a.read(e,{type:"array"});try{if(n&&n.SheetNames&&0<n.SheetNames.length){var r=n.SheetNames[0],i=KT.a.utils.sheet_to_csv(n.Sheets[r]);o&&o.call(a,i)}}catch(t){s&&s.call(a,t)}},e.onerror=function(t){s&&s.call(a,t)},this.rABF&&e.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,n,r,i){var o=null;if("EXCEL"===t||"CSV"===t)o=this.processExcelDataToGeoJson(e),n&&n.call(i,o);else if("JSON"===t||"GEOJSON"===t){var s=e;"string"==typeof s&&(s=JSON.parse(s)),"ISERVER"===s.type?o=s.data.recordsets[0].features:"FeatureCollection"===s.type?o=s:r&&r.call(i,ZT.i18n("msg_dataInWrongGeoJSONFormat")),n&&n.call(i,o)}else r&&r.call(i,ZT.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),n=e.colTitles,r=-1,i=-1,o=0,s=n.length;o<s;o++)this.isXField(n[o])&&(r=o),this.isYField(n[o])&&(i=o);for(var a=[],l=0,u=e.rows.length;l<u;l++){var c=e.rows[l],h=Number(c[r]),f=Number(c[i]),p={};for(var d in e.colTitles){p[e.colTitles[d]]=e.rows[l][d]}var y={type:"Feature",geometry:{type:"Point",coordinates:[h,f]},properties:p};a.push(y)}return a},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"经度"===e||"东经"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"x坐标"===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"纬度"===e||"北纬"===e||"latitude"===e||"lat"===e||"y坐标"===e},string2Csv:function(t,e){var n=t.split("\n"),r={};r.colTitles=e?[]:n[0].split(","),r.rows=[];for(var i=e?0:1;i<n.length;i++)n[i]&&r.rows.push(n[i].split(","));return r}};function tM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Components.FileReaderUtil=$T;var eM=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Ze(this,null,this.EVENT_TYPES)}var t,n,r;return t=e,(n=[{key:"getDatasetInfo",value:function(n){var t=this.datasets.url,r=this;sr.get(t).then(function(t){return t.json()}).then(function(t){if(t.datasetInfo){var e=t.datasetInfo;r.datasetsInfo={dataSourceName:e.dataSourceName,datasetName:e.name,mapName:t.name},n({result:r.datasetsInfo})}}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDataFeatures",value:function(t,e){var n,r,i=t.result,o={name:i.datasetName+"@"+i.dataSourceName};Object.assign(o,this.datasets.queryInfo),n=new b.FilterParameter(o),r=new b.GetFeaturesBySQLParameters({queryParameter:n,datasetNames:[i.dataSourceName+":"+i.datasetName],fromIndex:0,toIndex:1e5}),new b.GetFeaturesBySQLService(i.dataUrl,{eventListeners:{processCompleted:e,processFailed:function(){}}}).processAsync(r)}},{key:"getLayerFeatures",value:function(t,e){var n,r,i=t.result,o={name:i.mapName};Object.assign(o,this.datasets.queryInfo),n=new b.FilterParameter(o),r=new b.QueryBySQLParameters({queryParams:[n],expectCount:1e5}),new b.QueryBySQLService(i.dataUrl,{eventListeners:{processCompleted:e,processFailed:function(){}}}).processAsync(r)}},{key:"getDataInfoByIptl",value:function(t){this.getServiceInfo(this.datasets.url,t)}},{key:"getServiceInfo",value:function(n,r){var i=this;sr.get(n,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){var e;!1!==t.succeed?t.dataItemServices&&0<t.dataItemServices.length?(t.dataItemServices.forEach(function(t){if("RESTDATA"===t.serviceType&&"PUBLISHED"===t.serviceStatus)e=t;else{if("RESTMAP"!==t.serviceType||"PUBLISHED"!==t.serviceStatus)return void i.getDatafromContent(n,r);e=t}}),e&&i.getDatafromRest(e.serviceType,e.address,r)):i.getDatafromContent(n,r):i._fireFailedEvent(t)}).catch(function(t){console.log(t),i._fireFailedEvent(t)})}},{key:"getDatafromContent",value:function(t,r){var i=this,o={result:{}},s=this;t+="/content.json?pageSize=9999999&currentPage=1",sr.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(ZT.i18n("msg_jsonResolveFiled"));var e=i._formatGeoJSON(t.content);o.result.features={type:t.content.type,features:e}}else if("EXCEL"===t.type||"CSV"===t.type){var n=i._excelData2Feature(t.content);o.result.features={type:"FeatureCollection",features:n}}r(o,"content")}}else s._fireFailedEvent(t)},this).catch(function(t){console.log(t),s._fireFailedEvent(t)})}},{key:"getDatafromRest",value:function(t,e,n){var r=this,i=this.datasets.withCredentials;if("RESTDATA"===t){var o,s,a="".concat(e,"/data/datasources");sr.get(a,null,{withCredentials:i}).then(function(t){return t.json()}).then(function(t){o=t.datasourceNames[0],a="".concat(e,"/data/datasources/").concat(o,"/datasets"),sr.get(a,null,{withCredentials:i}).then(function(t){return t.json()}).then(function(t){return s=t.datasetNames[0],r.getDatafromRestData("".concat(e,"/data"),[o+":"+s],n),[o+":"+s]}).catch(function(t){r._fireFailedEvent(t)})}).catch(function(t){r._fireFailedEvent(t)})}else{var l,u,c,h="".concat(e,"/maps");sr.get(h,null,{withCredentials:i}).then(function(t){return t.json()}).then(function(t){l=t[0].name,c=t[0].path,h="".concat(e,"/maps/").concat(l,"/layers"),sr.get(h,null,{withCredentials:i}).then(function(t){return t.json()}).then(function(t){return u=t[0].subLayers.layers[0].caption,r.getDatafromRestMap(u,c,n),u}).catch(function(t){r._fireFailedEvent(t)})}).catch(function(t){r._fireFailedEvent(t)})}}},{key:"getDatafromRestData",value:function(t,e,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,function(t){n(t,"RESTDATA")},function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDatafromRestMap",value:function(t,e,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,function(t){n(t,"RESTMAP")},function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"_getFeatureBySQL",value:function(t,e,n,r,i){var o,s,a={name:e.join().replace(":","@")};Object.assign(a,n),o=new Fi(a),s=new Ff({queryParameter:o,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new Hf(t,{eventListeners:{processCompleted:function(t){r&&r(t)},processFailed:function(t){i&&i(t)}}}).processAsync(s)}},{key:"_queryFeatureBySQL",value:function(t,e,n,r,i,o,s,a,l,u){var c,h,f={name:e};Object.assign(f,n),c=new Fi(f),r&&(c.fields=r);var p={queryParams:[c]};u&&(p.queryOption=d.ATTRIBUTE),a&&(p.startRecord=a),l&&(p.expectCount=l),i&&(p.prjCoordSys={epsgCode:i}),h=new Iv(p),this._queryBySQL(t,h,function(t){("processCompleted"===t.type?o:s)(t)})}},{key:"_queryBySQL",value:function(t,e,n,r){new Uv(t,{eventListeners:{scope:this,processCompleted:n,processFailed:n},format:this._processFormat(r)}).processAsync(e)}},{key:"_processFormat",value:function(t){return t||M.GEOJSON}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,n=-1,r=-1,i=0,o=e.length;i<o;i++)$T.isXField(e[i])&&(n=i),$T.isYField(e[i])&&(r=i);for(var s=[],a=0,l=t.rows.length;a<l;a++){var u=t.rows[a],c=Number(u[n]),h=Number(u[r]),f={};for(var p in t.colTitles){f[t.colTitles[p]]=t.rows[a][p]}f.index=a+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,h]},properties:f};s.push(d)}return s}},{key:"_fireFailedEvent",value:function(t){var e=t?{error:t,message:ZT.i18n("msg_getdatafailed")}:{message:ZT.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}])&&tM(t.prototype,n),r&&tM(t,r),e}();function nM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rM=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Ze(this,null,this.EVENT_TYPES)}var t,n,r;return t=e,(n=[{key:"_initXYField",value:function(t){var e=this;t&&0<t.length&&t.forEach(function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})})}},{key:"getDatasetInfo",value:function(t){var e=this;this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new eM(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(t){e.events.triggerEvent("getdatafailed",t)}}))}},{key:"_getDatasetInfoSuccess",value:function(t){var e=this.datasets.url,n=e.indexOf("rest");if(0<n){var r=e.indexOf("/",n+5),i=e.substring(n+5,r),o=e.substring(0,n+4)+"/data";if("maps"===i){var s=e.indexOf("/",r+1),a=e.substring(r+1,s);o=e.substring(0,n+4)+"/maps/"+a,t.result.dataUrl=o,this._getLayerFeatures(t)}else"data"===i&&(t.result.dataUrl=o,this._getDataFeatures(t))}}},{key:"_getDataInfoSuccess",value:function(t,e){"RESTMAP"===e?this._getChartDatasFromLayer(t):this._getChartDatas(t)}},{key:"_getDataFeatures",value:function(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(t){if(t){this.features=t.result.features;var e=this.features.features,n={};if(e.length){var r=e[0],i=[],o=[];for(var s in r.properties)i.push(s),o.push(this._getDataType(r.properties[s]));for(var a in n={features:e,fieldCaptions:i,fieldTypes:o,fieldValues:[]},o){var l=[];for(var u in e){var c=e[u],h=n.fieldCaptions[a],f=c.properties[h];l.push(f)}n.fieldValues.push(l)}this.createChart(n)}}}},{key:"_getChartDatasFromLayer",value:function(t){if(t.result.recordsets){var e=t.result.recordsets[0],n=e.features.features;this.features=e.features;var r={};if(n.length){for(var i in(r={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var o=[];for(var s in n){var a=n[s],l=r.fieldCaptions[i],u=a.properties[l];o.push(u)}r.fieldValues.push(o)}this.createChart(r)}}}},{key:"_createChartOptions",value:function(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(t,e,n){this.updateChart=n,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(t){var e=this._createChartOptions(t);this.updateChart(e)}},{key:"updateChartOptions",value:function(t,e){if(this.calculatedData){var n=this.grid,r=this._createChartSeries(this.calculatedData,t),i=[];for(var o in this.calculatedData.XData)i.push({value:this.calculatedData.XData[o].fieldsData});var s={type:"category",name:this.xField[0].name||"X",data:i,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},a={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return e&&(e.grid&&(n=e.grid),e.tooltip&&(l=e.tooltip),e.backgroundColor&&(u=e.backgroundColor)),{backgroundColor:u,grid:n,series:r,xAxis:s,yAxis:a,tooltip:l}}}},{key:"_createChartDatas",value:function(r){var n=0,i=[],e=r.fieldCaptions,o=this;e.forEach(function(t,e){o.xField[0]&&t===o.xField[0].field&&(n=e)}),this.yFieldName="",this.yField.forEach(function(n,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+n.name,e.forEach(function(t,e){t===n.field&&i.push(e)})});var t=this._getAttrData(r,n),s=[];if(0<i.length)i.forEach(function(t){var e=[];for(var n in r.fieldValues[t])e.push({value:r.fieldValues[t][n]});s.push(e)});else{for(var a=[],l=[],u=t.length,c=0;c<u;c++){for(var h=!1,f=0,p=l.length;f<p;f++)if(t[c].fieldsData===l[f].fieldsData){a[f].value++,l[f].recordIndexs.push(c),h=!0;break}h||t[c].fieldsData&&(l.push({fieldsData:t[c].fieldsData,recordIndexs:[c]}),a.push({value:1}))}t=l,s=[a]}return{XData:t,YData:s}}},{key:"_getAttrData",value:function(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);for(var n=[],r=0,i=t.fieldValues[e].length;r<i;r++){var o=t.fieldValues[e][r];n.push({recordIndexs:r,fieldsData:o})}return n}},{key:"_createChartSeries",value:function(t,u){var c=[];return t.YData.forEach(function(t){var e=0,n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){e=s.value.value,n.push({value:e})}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var l={type:u,data:n,name:"y"};c.push(l)}),c}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(t){if(null!=t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(t){return this.updateChartOptions(this.chartType,t)}}])&&nM(t.prototype,n),r&&nM(t,r),e}();function iM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Components.ChartViewModel=rM;var oM=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.domID=t,this.chartType=e.type||"bar",e.datasets.type=e.datasets.type||"iServer",e.datasets.withCredentials=e.datasets.withCredentials||!1,this.viewModel=new rM(e),this._fillDataToView()}var t,e,r;return t=n,(e=[{key:"onAdd",value:function(t){this.addChart=t}},{key:"_fillDataToView",value:function(){var e=new JT;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(t){var e=this.viewModel.setStyle(t);this._updateChart(e)}},{key:"changeType",value:function(t){if(this.chartType!==t){this.chartType=t;var e=this.viewModel.changeType(t);this._updateChart(e)}}},{key:"updateData",value:function(t,e){var n=this;this.viewModel.updateData(t,e,function(t){n._updateChart(t),n.addChart&&n.addChart()})}},{key:"_createChart",value:function(t){this.echart=XT.a.init(document.getElementById(this.domID),null,{renderer:"canvas"});var e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}])&&iM(t.prototype,e),r&&iM(t,r),n}();function sM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}b.Components.Chart=oM;var aM=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,n,r;return t=e,(n=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&sM(t.prototype,n),r&&sM(t,r),e}();function lM(t){return(lM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cM(t,e){return!e||"object"!==lM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function hM(t){return(hM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fM(t,e){return(fM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.TemplateBase=aM;var pM=function(){function r(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=cM(this,hM(r).call(this,t));var n=t.title?t.title:"";return e._initView(n),e}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fM(t,e)}(r,aM),t=r,(e=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-container");var n=document.createElement("div");n.setAttribute("class","component-title");var r=document.createElement("div");r.innerHTML=t,n.appendChild(r),e.appendChild(n);var i=document.createElement("div");return i.setAttribute("class","component-content"),e.appendChild(i),this.content=i,this.rootContainer=e}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&uM(t.prototype,e),n&&uM(t,n),r}();function dM(t){return(dM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gM(t,e){return!e||"object"!==dM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function mM(t){return(mM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vM(t,e){return(vM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.CommonContainer=pM;var bM=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=gM(this,mM(n).call(this,t)))._initView(t),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vM(t,e)}(n,aM),t=n,(e=[{key:"_initView",value:function(t){var e=this._createElement("div","component-selecttool");t.labelName&&(this._createElement("label","component-selecttool__lable--describe",e).innerHTML=t.labelName);var n=this._createElement("div","component-selecttool--chart",e);n.setAttribute("tabindex","1");var r=this._createElement("div","component-selecttool__name",n);r.title=t.optionsArr[0],r.innerHTML=t.optionsArr[0];var i=this._createElement("div","component-selecttool__trianglebtn--chart",n),o=this._createElement("div","component-triangle-down-img",i),s=this._createElement("div","component-selecttool__content",n),a=this._createElement("div","component-selecttool__content--chart",s),l=this._createElement("div","component-selecttool__scrollarea__content",a);l.setAttribute("tabindex","1"),this.createOptions(l,t.optionsArr),this.optionClickEvent(l,r,t.optionsClickCb),this._selectClickEvent(n,s,o),this.rootContainer=e}},{key:"createOptions",value:function(t,e){for(var n in e){var r=this._createElement("div","component-selecttool__option",t);r.title=e[n],r.innerHTML=e[n]}}},{key:"_selectClickEvent",value:function(t,e,n){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",n.className="component-triangle-down-img"):(e.style.display="block",n.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,n){var r=document.createElement(t||"div");return e&&(r.className=e),n&&n.appendChild(r),r}},{key:"optionClickEvent",value:function(n,r,i){for(var t=function(t){var e=n.children[t];e.onclick=function(){r.innerHTML=e.innerHTML,r.title=e.title,e.getAttribute("data-value")&&r.setAttribute("data-value",e.getAttribute("data-value")),i&&i(e)}},e=0;e<n.children.length;e++)t(e)}}])&&yM(t.prototype,e),r&&yM(t,r),n}();function _M(t){return(_M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function SM(t,e){return!e||"object"!==_M(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function xM(t){return(xM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EM(t,e){return(EM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.Select=bM;var OM=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=SM(this,xM(n).call(this,t)))._initView(t),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&EM(t,e)}(n,aM),t=n,(e=[{key:"_initView",value:function(t){var e=document.createElement("div");e.className="component-dropdownbox--container";var n=document.createElement("div");n.setAttribute("tabindex","1"),n.className="component-dropdownbox",e.appendChild(n);var r=document.createElement("div");n.appendChild(r),this._createDropDownOption(t[0],r);var i=document.createElement("div");i.className="component-dropdownbox__triangle-btn",n.appendChild(i);var o=document.createElement("div");o.className="component-triangle-down-img",i.appendChild(o);var s={parentEle:n,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:o,dropDownTopContainer:r};this._createDropDownBox(s),this.rootContainer=e}},{key:"_createDropDownBox",value:function(t){var e=t.parentEle,n=t.dropDownTopContainer,r=document.createElement("div");r.className=t.dropDownContent[0],e.appendChild(r);var i=document.createElement("div");i.className=t.scrollareaContent,r.appendChild(i);for(var o=t.optionsArr,s=0;s<o.length;s++)this._createDropDownOption(o[s],i);var a=t.triangleBtn;this._dropDownClickEvent(e,r,a),this._eleOnblur(e,r,a);for(var l=i.children,u=function(t){l[t].onclick=function(){n.innerHTML=l[t].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(t,e){var n=document.createElement("div");n.className="component-dropdownbox__item";var r=t;r.dataValue&&n.setAttribute("data-value",r.dataValue),e.appendChild(n);var i=document.createElement("div");i.className="component-dropdownbox__item__img",n.appendChild(i);var o=document.createElement("div");r.icon.className&&(o.className=r.icon.className),r.icon.background&&(o.style.background=r.icon.background),i.appendChild(o);var s=document.createElement("div");s.className="component-dropdownbox__item__title",s.title=r.title,s.innerHTML=r.title,n.appendChild(s);var a=document.createElement("div");a.className="component-dropdownbox__item__remark",a.title=r.remark,a.innerHTML=r.remark,n.appendChild(a)}},{key:"_dropDownClickEvent",value:function(t,e,n){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",n.className="component-triangle-down-img"):(e.style.display="block",n.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}},{key:"_eleOnblur",value:function(t,e,n){t.onblur=function(){e.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,n){var r=document.createElement(t||"div");return e&&(r.className=e),n&&n.appendChild(r),r}}])&&wM(t.prototype,e),r&&wM(t,r),n}();function CM(t){return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function TM(t,e){return!e||"object"!==CM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function MM(t){return(MM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LM(t,e){return(LM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.DropDownBox=OM;var NM=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},e=TM(this,MM(n).call(this,t)),t.title=t.title?t.title:"",e._initView(t.title),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LM(t,e)}(n,aM),t=n,(e=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-popcontainer");var n=document.createElement("div");n.setAttribute("class","component-popcontainer__header");var r=document.createElement("label");r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=t,n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),i.onclick=this.closeView.bind(this),e.appendChild(i),e.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-popcontainer__content"),this.content=o,e.appendChild(o),this.rootContainer=e}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&PM(t.prototype,e),r&&PM(t,r),n}();function kM(t){return(kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function IM(t,e){return!e||"object"!==kM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function RM(t){return(RM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jM(t,e){return(jM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.PopContainer=NM;var DM=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t.title=t.title?t.title:"属性",(e=IM(this,RM(n).call(this,t))).rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],e._createAttributesTable(t.attributes),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jM(t,e)}(n,NM),t=n,(e=[{key:"_createAttributesTable",value:function(t){var e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");var n=document.createElement("tbody"),r=!0;for(var i in t){var o=document.createElement("tr");r&&o.setAttribute("class","component-popcontainer__content__td--color");var s=document.createElement("td"),a=document.createElement("Span");a.innerHTML=i,s.appendChild(a);var l=document.createElement("td");l.innerHTML=t[i],o.appendChild(s),o.appendChild(l),n.appendChild(o),r=!r}e.appendChild(n),this.appendContent(e)}}])&&AM(t.prototype,e),r&&AM(t,r),n}();function FM(t){return(FM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function GM(t,e){return!e||"object"!==FM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function UM(t){return(UM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zM(t,e){return(zM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.AttributesPopContainer=DM;var qM=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=GM(this,UM(n).call(this,t)))._initView(),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zM(t,e)}(n,aM),t=n,(e=[{key:"_initView",value:function(){var t=document.createElement("div");t.setAttribute("class","component-tabpage");var e=document.createElement("ul");this.header=e;var n=document.createElement("div");n.setAttribute("class","component-tabpage__content"),this.content=n,t.appendChild(e),t.appendChild(n),this.rootContainer=t}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var n=document.createElement("span");n.index=e,n.appendChild(document.createTextNode(t[e].title)),n.onclick=this._changeTabsPage.bind(this);var r=t[e].content;r.index=e,r.hidden=!0,this.header.appendChild(n),this.content.appendChild(r)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.header.children.length;0<t;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,n=0;n<this.header.children.length;n++)this.header.children[n].setAttribute("class",""),this.content.children[n].hidden=!0,n===e&&(this.header.children[n].setAttribute("class","on"),this.content.children[n].hidden=!1)}}])&&BM(t.prototype,e),r&&BM(t,r),n}();function VM(t){return(VM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function WM(t,e){return!e||"object"!==VM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function JM(t){return(JM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function YM(t,e){return(YM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.IndexTabsPageContainer=qM;var XM=function(){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=WM(this,JM(e).call(this,t))).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),n.config=t.config,Et.isArray(n.config)?(n.header.hidden=!0,n._createCityItem("城市",n.config),n.content.style.border="none"):(n._createTabs(),n.header.onclick=function(t){for(var e=0;e<n.header.children.length;e++)n.header.children[e].setAttribute("class","");t.target.setAttribute("class","on"),n._createCityContent(t.target.innerHTML)}),n}var t,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&YM(t,e)}(e,qM),t=e,(n=[{key:"_createTabs",value:function(){if(Et.isArray(this.config))for(var t=0;t<this.config.length;t++){var e="";for(var n in this.config[t])e+=n;var r=document.createElement("li");r.innerHTML=e,this.header.appendChild(r)}else for(var i in this.config){var o=document.createElement("li");o.innerHTML=i,this.header.appendChild(o)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(t){for(var e=this.content.children.length;0<e;e--)this.content.removeChild(this.content.children[e-1]);var n=this.config[t];for(var r in n)this._createCityItem(r,n[r])}},{key:"_createCityItem",value:function(t,e){var n=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=t,n.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-citytabpag__content");for(var o=0;o<e.length;o++){var s=document.createElement("span");s.innerHTML=e[o],i.appendChild(s)}"HOT"===t&&(i.style.width="428px"),n.appendChild(i),this.content.appendChild(n)}}])&&HM(t.prototype,n),r&&HM(t,r),e}();function ZM(t){return(ZM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function KM(t,e){return!e||"object"!==ZM(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $M(t){return($M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tL(t,e){return(tL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.CityTabsPage=XM;var eL=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=KM(this,$M(n).call(this,t))).navTabsTitle=null,e.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],e._initView(t.tabs),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tL(t,e)}(n,aM),t=n,(e=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-navtabspage");var n=document.createElement("span");n.setAttribute("class","supermapol-icons-close"),n.onclick=this.closeView.bind(this),e.appendChild(n);var r=document.createElement("div");(this.navTabsTitle=r).setAttribute("class","component-navtabspage__title"),e.appendChild(r);var i=document.createElement("div");(this.navTabsContent=i).setAttribute("class","component-navtabspage__content"),e.appendChild(i),0<t.length&&this.appendTabs(t),this.rootContainer=e}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var n=document.createElement("span");n.index=e,n.appendChild(document.createTextNode(t[e].title)),n.onclick=this._changeTabsPage.bind(this);var r=t[e].content;r.index=e,r.hidden=!0,this.navTabsTitle.appendChild(n),this.navTabsContent.appendChild(r)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.navTabsTitle.children.length;0<t;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,n=0;n<this.navTabsTitle.children.length;n++)this.navTabsTitle.children[n].setAttribute("class",""),this.navTabsContent.children[n].hidden=!0,n===e&&(this.navTabsTitle.children[n].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[n].hidden=!1)}}])&&QM(t.prototype,e),r&&QM(t,r),n}();function nL(t){return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iL(t,e){return!e||"object"!==nL(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function oL(t){return(oL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sL(t,e){return(sL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.Components.NavTabsPage=eL;var aL=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),t=t||{},(e=iL(this,oL(n).call(this,t))).currentPage=0,e.pageNumberLis=[],e.currentPageNumberLis=[],e.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,e._initView(t.contents,t.pageCounts),e}var t,e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sL(t,e)}(n,aM),t=n,(e=[{key:"setLinkageEvent",value:function(t){this.linkageEvent=t}},{key:"_initView",value:function(t,e){var n=document.createElement("div");n.setAttribute("class","component-pagination");var r=document.createElement("div");r.setAttribute("class","component-pagination__content"),n.appendChild(r),this.content=r;var i=document.createElement("ul");i.setAttribute("class","component-pagination__link"),i.onclick=this._changePageEvent.bind(this),n.appendChild(i),this._createLink(i),this.link=i,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=n}},{key:"setContent",value:function(t){this.clearContent(),this.appendContent(t)}},{key:"appendContent",value:function(t){this.content.appendChild(t)}},{key:"clearContent",value:function(){for(var t=this.content.children.length-1;0<=t;t--)this.content.removeChild(this.content.children[t])}},{key:"setPageLink",value:function(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}},{key:"_createPageLi",value:function(t){for(var e=0;e<t;e++){var n=document.createElement("li");n.innerHTML=e+1,this.pageNumberLis.push(n)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(var r=0;r<5;r++)this.currentPageNumberLis.push(this.pageNumberLis[r])}},{key:"_appendPageLink",value:function(){for(var t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(var e=0;e<this.currentPageNumberLis.length;e++)this.currentPageNumberLis[e].setAttribute("class",""),Number(this.currentPageNumberLis[e].innerHTML)===this.currentPage&&this.currentPageNumberLis[e].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var t=this.link.children.length-3;1<t;t--)this.link.removeChild(this.link.children[t])}},{key:"_createLink",value:function(t){for(var e=0;e<4;e++){var n=document.createElement("li");n.setAttribute("class","disable");var r=document.createElement("span");n.appendChild(r),0===e?(r.id="first",r.setAttribute("class","supermapol-icons-first")):1===e?(r.id="prev",r.setAttribute("class","supermapol-icons-prev")):2===e?(r.id="next",r.setAttribute("class","supermapol-icons-next")):3===e&&(r.id="last",r.setAttribute("class","supermapol-icons-last")),t.appendChild(n)}}},{key:"_changePageEvent",value:function(t){var e=t.target;if("disable"!==e.parentElement.classList[0]){var n;if(e.id)n=e.id;else{if(!Number(e.innerHTML))return;n=Number(e.innerHTML)}this._prePageNum(n),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(t){var e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(var n=0;n<this.pageNumberLis.length;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage<=3)for(var r=0;r<5;r++)e.push(this.pageNumberLis[r]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var i=this.pageNumberLis.length-5;i<this.pageNumberLis.length;i++)e.push(this.pageNumberLis[i]);else for(var o=this.currentPage-3;o<=this.currentPage+1;o++)e.push(this.pageNumberLis[o]);0<e.length&&(this.currentPageNumberLis=e)}}])&&rL(t.prototype,e),r&&rL(t,r),n}();b.Components.PaginationContainer=aL;var lL={getFileType:function(t){return/^.*\.(?:xls|xlsx)$/i.test(t)?zT.EXCEL:/^.*\.(?:csv)$/i.test(t)?zT.CSV:/^.*\.(?:geojson|json)$/i.test(t)?zT.GEOJSON:null}};b.Lang["en-US"]={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"};b.Lang["zh-CN"]={title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"};var uL=n(0),cL=n.n(uL);cL.a.Projection={};function hL(t){return new pL(t)}function fL(t){return new dL(t)}var pL=cL.a.Class.extend({initialize:function(t){this.bounds=t},project:function(t){return new cL.a.Point(t.lng,t.lat)},unproject:function(t){return new cL.a.LatLng(t.y,t.x)}}),dL=cL.a.Class.extend({includes:cL.a.CRS,initialize:function(t){t.origin&&(this.transformation=new cL.a.Transformation(1,-t.origin.x,-1,t.origin.y)),this.projection=cL.a.Projection.NonProjection(t.bounds),this.bounds=t.bounds,this.origin=t.origin,this.resolutions=t.resolutions},scale:function(t){return this.resolutions&&0!==this.resolutions.length?1/this.resolutions[t]:1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256)*Math.pow(2,t)},zoom:function(t){if(!this.resolutions||0===this.resolutions.length){var e=1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256);return Math.log(t/e)/Math.LN2}for(var n=0;n<this.resolutions.length;n++)if(1/this.resolutions[n]==t)return n;return-1},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!1});cL.a.Projection.NonProjection=hL,cL.a.CRS.NonEarthCRS=fL;var yL=1,gL=2,mL=484813681109536e-20,vL=Math.PI/2,bL=.16666666666666666,_L=.04722222222222222,wL=.022156084656084655,SL=1e-10,xL=.017453292519943295,EL=57.29577951308232,OL=Math.PI/4,CL=2*Math.PI,PL=3.14159265359,TL={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},ML={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},LL=/[\s_\-\/\(\)]/g;function NL(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(LL,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(LL,"")===i)return t[n]}var kL=function(t){var e,n,r,i={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),s={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*xL},lat_1:function(t){i.lat1=t*xL},lat_2:function(t){i.lat2=t*xL},lat_ts:function(t){i.lat_ts=t*xL},lon_0:function(t){i.long0=t*xL},lon_1:function(t){i.long1=t*xL},lon_2:function(t){i.long2=t*xL},alpha:function(t){i.alpha=parseFloat(t)*xL},lonc:function(t){i.longc=t*xL},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=NL(ML,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*xL},pm:function(t){var e=NL(TL,t);i.from_greenwich=(e||parseFloat(t))*xL},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)n=o[e],e in s?"function"==typeof(r=s[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},AL=function(t){return new GL(t).output()},IL=1,RL=/\s/,jL=/[A-Za-z]/,DL=/[A-Za-z84]/,FL=/[,\]]/,BL=/[\d\.E\-\+]/;function GL(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=IL}function UL(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(t,e){return zL(e,t),t},r);e&&(t[e]=i)}function zL(t,e){if(Array.isArray(t)){var n,r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void zL(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r)switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&zL(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&zL(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void UL(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return zL(t,e[r]);return UL(e,r,t)}else e[r]=t;else e[r]=!0}else e[t]=!0}function qL(t){return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}GL.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;RL.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case IL:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},GL.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(FL.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},GL.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=IL)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=IL,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},GL.prototype.number=function(t){if(!BL.test(t)){if(FL.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},GL.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},GL.prototype.keyword=function(t){if(DL.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=IL)}if(!FL.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},GL.prototype.neutral=function(t){if(jL.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(BL.test(t))return this.word=t,void(this.state=3);if(!FL.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},GL.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var VL=.017453292519943295;function HL(t){return t*VL}function WL(o){"GEOGCS"===o.type?o.projName="longlat":"LOCAL_CS"===o.type?(o.projName="identity",o.local=!0):"object"===qL(o.PROJECTION)?o.projName=Object.keys(o.PROJECTION)[0]:o.projName=o.PROJECTION,o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),"metre"===o.units&&(o.units="meter"),o.UNIT.convert&&("GEOGCS"===o.type?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var t=o.GEOGCS;function e(t){return t*(o.to_meter||1)}"GEOGCS"===o.type&&(t=o),t&&(t.DATUM?o.datumCode=t.DATUM.name.toLowerCase():o.datumCode=t.name.toLowerCase(),"d_"===o.datumCode.slice(0,2)&&(o.datumCode=o.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==o.datumCode&&"new_zealand_1949"!==o.datumCode||(o.datumCode="nzgd49"),"wgs_1984"===o.datumCode&&("Mercator_Auxiliary_Sphere"===o.PROJECTION&&(o.sphere=!0),o.datumCode="wgs84"),"_ferro"===o.datumCode.slice(-6)&&(o.datumCode=o.datumCode.slice(0,-6)),"_jakarta"===o.datumCode.slice(-8)&&(o.datumCode=o.datumCode.slice(0,-8)),~o.datumCode.indexOf("belge")&&(o.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(o.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===o.ellps.toLowerCase().slice(0,13)&&(o.ellps="intl"),o.a=t.DATUM.SPHEROID.a,o.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),t.DATUM&&t.DATUM.TOWGS84&&(o.datum_params=t.DATUM.TOWGS84),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65"),"ch1903+"===o.datumCode&&(o.datumCode="ch1903"),~o.datumCode.indexOf("israel")&&(o.datumCode="isr93")),o.b&&!isFinite(o.b)&&(o.b=o.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",HL],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",HL],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",HL],["lat0","latitude_of_origin",HL],["lat0","standard_parallel_1",HL],["lat1","standard_parallel_1",HL],["lat2","standard_parallel_2",HL],["azimuth","Azimuth"],["alpha","azimuth",HL],["srsCode","name"]].forEach(function(t){return e=o,r=(n=t)[0],i=n[1],void(!(r in e)&&i in e&&(e[r]=e[i],3===n.length&&(e[r]=n[2](e[r]))));var e,n,r,i}),o.long0||!o.longc||"Albers_Conic_Equal_Area"!==o.projName&&"Lambert_Azimuthal_Equal_Area"!==o.projName||(o.long0=o.longc),o.lat_ts||!o.lat1||"Stereographic_South_Pole"!==o.projName&&"Polar Stereographic (variant B)"!==o.projName||(o.lat0=HL(0<o.lat1?90:-90),o.lat_ts=o.lat1)}var JL,YL=function(t){var e=AL(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return zL(e,i),WL(i),i};function XL(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?XL[t]=kL(arguments[1]):XL[t]=YL(arguments[1]):XL[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?XL.apply(e,t):XL(t)});if("string"==typeof t){if(t in XL)return XL[t]}else"EPSG"in t?XL["EPSG:"+t.EPSG]=t:"ESRI"in t?XL["ESRI:"+t.ESRI]=t:"IAU2000"in t?XL["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(JL=XL)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),JL("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),JL("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),JL.WGS84=JL["EPSG:4326"],JL["EPSG:3785"]=JL["EPSG:3857"],JL.GOOGLE=JL["EPSG:3857"],JL["EPSG:900913"]=JL["EPSG:3857"],JL["EPSG:102113"]=JL["EPSG:3857"];var ZL=XL;var QL=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var KL=["3857","900913","3785","102113"];function $L(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function tN(t){return t<0?-1:1}function eN(t){return Math.abs(t)<=PL?t:t-tN(t)*CL}function nN(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(vL-e))/r}function rN(t,e){for(var n,r,i=.5*t,o=vL-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=r=vL-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999}var iN=function(t){if("string"!=typeof t)return t;if(t in ZL)return ZL[t];if(r=t,QL.some(function(t){return-1<r.indexOf(t)})){var e=YL(t);if(function(t){var e=NL(t,"authority");if(e){var n=NL(e,"epsg");return n&&-1<KL.indexOf(n)}}(e))return ZL["EPSG:3857"];var n=function(t){var e=NL(t,"extension");if(e)return NL(e,"proj4")}(e);return n?kL(n):e}return"+"===t[0]?kL(t):void 0;var r},oN=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t};function sN(t){return t}var aN=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=$L(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(90<i*EL&&i*EL<-90&&180<r*EL&&r*EL<-180)return null;if(Math.abs(Math.abs(i)-vL)<=SL)return null;if(this.sphere)e=this.x0+this.a*this.k0*eN(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(OL+.5*i));else{var o=Math.sin(i),s=nN(this.e,i,o);e=this.x0+this.a*this.k0*eN(r-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=vL-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=rN(this.e,o)))return null}return e=eN(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:sN,inverse:sN,names:["longlat","identity"]}],lN={},uN=[];function cN(t,e){var n=uN.length;return t.names?((uN[n]=t).names.forEach(function(t){lN[t.toLowerCase()]=n}),this):(console.log(e),!0)}var hN={start:function(){aN.forEach(cN)},add:cN,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==lN[e]&&uN[lN[e]]?uN[lN[e]]:void 0}},fN={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},pN=fN.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};fN.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var dN={};dN.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},dN.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},dN.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},dN.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},dN.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},dN.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},dN.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},dN.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},dN.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},dN.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},dN.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},dN.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},dN.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},dN.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},dN.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},dN.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},dN.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var yN=function(t,e,n,r,i,o){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=yL),3<s.datum_params.length&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=gL,s.datum_params[3]*=mL,s.datum_params[4]*=mL,s.datum_params[5]*=mL,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=r,s.es=i,s.ep2=o,s};function gN(t){return(gN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mN(t,e){if(!(this instanceof mN))return new mN(t);e=e||function(t){if(t)throw t};var n=iN(t);if("object"===gN(n)){var r=mN.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=NL(dN,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,s,a,l,u,c,h,f=function(t,e,n,r,i){if(!t){var o=NL(fN,r);t=(o=o||pN).a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<SL)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(o=f.a,s=f.b,f.rf,a=n.R_A,c=((l=o*o)-(u=s*s))/l,h=0,a?(l=(o*=1-c*(bL+c*(_L+c*wL)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(l-u)/u}),d=n.datum||yN(n.datumCode,n.datum_params,f.a,f.b,p.es,p.ep2);oN(this,n),oN(this,r),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}(mN.projections=hN).start();var vN=mN;function bN(t,e,n){var r,i,o,s,a=t.x,l=t.y,u=t.z?t.z:0;if(l<-vL&&-1.001*vL<l)l=-vL;else if(vL<l&&l<1.001*vL)l=vL;else{if(l<-vL)return{x:-1/0,y:-1/0,z:t.z};if(vL<l)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),i=Math.sin(l),s=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+u)*s*Math.cos(a),y:(r+u)*s*Math.sin(a),z:(r*(1-e)+u)*i}}function _N(t,e,n,r){var i,o,s,a,l,u,c,h,f,p,d,y,g,m,v,b=t.x,_=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+_*_),o=Math.sqrt(b*b+_*_+w*w),i/n<1e-12){if(m=0,o/n<1e-12)return v=-r,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(_,b);for(s=w/o,h=(a=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),f=s*l,g=0;g++,u=e*(c=n/Math.sqrt(1-e*f*f))/(c+(v=i*h+w*f-c*(1-e*f*f))),y=(d=s*(l=1/Math.sqrt(1-u*(2-u)*a*a)))*h-(p=a*(1-u)*l)*f,h=p,f=d,1e-24<y*y&&g<30;);return{x:m,y:Math.atan(d/Math.abs(p)),z:v}}function wN(t){return t===yL||t===gL}var SN=function(t,e,n){return i=e,((r=t).datum_type!==i.datum_type||r.a!==i.a||5e-11<Math.abs(r.es-i.es)||(r.datum_type===yL?r.datum_params[0]!==i.datum_params[0]||r.datum_params[1]!==i.datum_params[1]||r.datum_params[2]!==i.datum_params[2]:r.datum_type===gL&&(r.datum_params[0]!==i.datum_params[0]||r.datum_params[1]!==i.datum_params[1]||r.datum_params[2]!==i.datum_params[2]||r.datum_params[3]!==i.datum_params[3]||r.datum_params[4]!==i.datum_params[4]||r.datum_params[5]!==i.datum_params[5]||r.datum_params[6]!==i.datum_params[6])))&&5!==t.datum_type&&5!==e.datum_type&&(t.es!==e.es||t.a!==e.a||wN(t.datum_type)||wN(e.datum_type))?(n=bN(n,t.es,t.a),wN(t.datum_type)&&(n=function(t,e,n){if(e===yL)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===gL){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+a*t.z)+r,y:u*(l*t.x+t.y-s*t.z)+i,z:u*(-a*t.x+s*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),wN(e.datum_type)&&(n=function(t,e,n){if(e===yL)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===gL){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6],c=(t.x-r)/u,h=(t.y-i)/u,f=(t.z-o)/u;return{x:c+l*h-a*f,y:-l*c+h+s*f,z:a*c-s*h+f}}}(n,e.datum_type,e.datum_params)),_N(n,e.es,e.a,e.b)):n;var r,i},xN=function(t,e,n){var r,i,o,s=n.x,a=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(i=0===o?(r=s,"x"):1===o?(r=a,"y"):(r=l,"z"),t.axis[o]){case"e":u[i]=r;break;case"w":u[i]=-r;break;case"n":u[i]=r;break;case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},EN=function(t){var e={x:t[0],y:t[1]};return 2<t.length&&(e.z=t[2]),3<t.length&&(e.m=t[3]),e},ON=function(t){CN(t.x),CN(t.y)};function CN(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function PN(t,e,n){var r,i,o;return Array.isArray(n)&&(n=EN(n)),ON(n),t.datum&&e.datum&&(o=e,((i=t).datum.datum_type===yL||i.datum.datum_type===gL)&&"WGS84"!==o.datumCode||(o.datum.datum_type===yL||o.datum.datum_type===gL)&&"WGS84"!==i.datumCode)&&(n=PN(t,r=new vN("WGS84"),n),t=r),"enu"!==t.axis&&(n=xN(t,!1,n)),n="longlat"===t.projName?{x:n.x*xL,y:n.y*xL,z:n.z||0}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=SN(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*EL,y:n.y*EL,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?xN(e,!0,n):n}var TN=vN("WGS84");function MN(e,n,r){var t,i,o;return Array.isArray(r)?(t=PN(e,n,r)||{x:NaN,y:NaN},2<r.length?void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name?"number"==typeof t.z?[t.x,t.y,t.z].concat(r.splice(3)):[t.x,t.y,r[2]].concat(r.splice(3)):[t.x,t.y].concat(r.splice(2)):[t.x,t.y]):(i=PN(e,n,r),2===(o=Object.keys(r)).length||o.forEach(function(t){if(void 0!==e.name&&"geocent"===e.name||void 0!==n.name&&"geocent"===n.name){if("x"===t||"y"===t||"z"===t)return}else if("x"===t||"y"===t)return;i[t]=r[t]}),i)}function LN(t){return t instanceof vN?t:t.oProj?t.oProj:vN(t)}var NN=function(e,n,t){e=LN(e);var r,i=!1;return void 0===n?(n=e,e=TN,i=!0):void 0===n.x&&!Array.isArray(n)||(t=n,n=e,e=TN,i=!0),n=LN(n),t?MN(e,n,t):(r={forward:function(t){return MN(e,n,t)},inverse:function(t){return MN(n,e,t)}},i&&(r.oProj=n),r)},kN=6,AN="AJSAJS",IN="AFAFAF",RN=65,jN=73,DN=79,FN=86,BN=90,GN={forward:UN,inverse:function(t){var e=HN(JN(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:zN};function UN(t,e){return e=e||5,n=function(t){var e,n,r,i,o,s,a,l,u=t.lat,c=t.lon,h=.00669438,f=qN(u),p=qN(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);56<=u&&u<64&&3<=c&&c<12&&(l=32);72<=u&&u<84&&(0<=c&&c<9?l=31:9<=c&&c<21?l=33:21<=c&&c<33?l=35:33<=c&&c<42&&(l=37));a=qN(6*(l-1)-180+3),e=h/(1-h),n=6378137/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=e*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(p-a),s=6378137*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*h*h*h/3072*Math.sin(6*f));var d=.9996*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,y=.9996*(s+n*Math.tan(f)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(d),zoneNumber:l,zoneLetter:function(t){var e="Z";t<=84&&72<=t?e="X":t<72&&64<=t?e="W":t<64&&56<=t?e="V":t<56&&48<=t?e="U":t<48&&40<=t?e="T":t<40&&32<=t?e="S":t<32&&24<=t?e="R":t<24&&16<=t?e="Q":t<16&&8<=t?e="P":t<8&&0<=t?e="N":t<0&&-8<=t?e="M":t<-8&&-16<=t?e="L":t<-16&&-24<=t?e="K":t<-24&&-32<=t?e="J":t<-32&&-40<=t?e="H":t<-40&&-48<=t?e="G":t<-48&&-56<=t?e="F":t<-56&&-64<=t?e="E":t<-64&&-72<=t?e="D":t<-72&&-80<=t&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),r=e,i="00000"+n.easting,o="00000"+n.northing,n.zoneNumber+n.zoneLetter+function(t,e,n){var r=WN(n),i=Math.floor(t/1e5),o=Math.floor(e/1e5)%20;return function(t,e,n){var r=n-1,i=AN.charCodeAt(r),o=IN.charCodeAt(r),s=i+t-1,a=o+e,l=!1;return BN<s&&(s=s-BN+RN-1,l=!0),(s===jN||i<jN&&jN<s||(jN<s||i<jN)&&l)&&s++,(s===DN||i<DN&&DN<s||(DN<s||i<DN)&&l)&&++s===jN&&s++,BN<s&&(s=s-BN+RN-1),l=FN<a&&(a=a-FN+RN-1,!0),(a===jN||o<jN&&jN<a||(jN<a||o<jN)&&l)&&a++,(a===DN||o<DN&&DN<a||(DN<a||o<DN)&&l)&&++a===jN&&a++,FN<a&&(a=a-FN+RN-1),String.fromCharCode(s)+String.fromCharCode(a)}(i,o,r)}(n.easting,n.northing,n.zoneNumber)+i.substr(i.length-5,r)+o.substr(o.length-5,r);var n,r,i,o}function zN(t){var e=HN(JN(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function qN(t){return t*(Math.PI/180)}function VN(t){return t/Math.PI*180}function HN(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||60<i)return null;var o,s,a,l,u,c,h,f,p,d=.00669438,y=(1-Math.sqrt(1-d))/(1+Math.sqrt(1-d)),g=n-5e5,m=e;r<"N"&&(m-=1e7),h=6*(i-1)-180+3,o=d/(1-d),p=(f=m/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),s=6378137/Math.sqrt(1-d*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=o*Math.cos(p)*Math.cos(p),u=6378137*(1-d)/Math.pow(1-d*Math.sin(p)*Math.sin(p),1.5),c=g/(.9996*s);var v=p-s*Math.tan(p)/u*(c*c/2-(5+3*a+10*l-4*l*l-9*o)*c*c*c*c/24+(61+90*a+298*l+45*a*a-252*o-3*l*l)*c*c*c*c*c*c/720);v=VN(v);var b,_=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*o+24*a*a)*c*c*c*c*c/120)/Math.cos(p);if(_=h+VN(_),t.accuracy){var w=HN({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:w.lat,right:w.lon,bottom:v,left:_}}else b={lat:v,lon:_};return b}function WN(t){var e=t%kN;return 0===e&&(e=kN),e}function JN(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var s=parseInt(i,10);if(0===o||n<o+3)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||"Z"<=a||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;r=t.substring(o,o+=2);for(var l=WN(s),u=function(t,e){var n=AN.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===jN&&n++,n===DN&&n++,BN<n){if(i)throw"Bad character: "+t;n=RN,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(t,e){if("V"<t)throw"MGRSPoint given invalid Northing "+t;var n=IN.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===jN&&n++,n===DN&&n++,FN<n){if(i)throw"Bad character: "+t;n=RN,i=!0}r+=1e5}return r}(r.charAt(1),l);c<YN(a);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,y=h/2,g=0,m=0;return 0<y&&(f=1e5/Math.pow(10,y),p=t.substring(o,o+y),g=parseFloat(p)*f,d=t.substring(o+y),m=parseFloat(d)*f),{easting:g+u,northing:m+c,zoneLetter:a,zoneNumber:s,accuracy:f}}function YN(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(0<=e)return e;throw"Invalid zone letter: "+t}function XN(t){return(XN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZN(t,e,n){if(!(this instanceof ZN))return new ZN(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===XN(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ZN.fromMGRS=function(t){return new ZN(zN(t))},ZN.prototype.toMGRS=function(t){return UN([this.x,this.y],t)};function QN(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*ek))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*ek)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function KN(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function $N(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var s=Math.sin(i),a=1-e*s*s;if(i-=a=(KN(i,s,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,Math.abs(a)<SL)return i}return i}var tk=ZN,ek=.01068115234375;function nk(t){var e=Math.exp(t);return e=(e-1/e)/2}function rk(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function ik(t){var e,n,r,i=Math.abs(t);return e=i*(1+i/(rk(1,i)+1)),i=0==(r=(n=1+e)-1)?e:e*Math.log(n)/r,t<0?-i:i}function ok(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],s=0;0<=--i;)n=r*o-s+t[i],s=o,o=n;return e+n*Math.sin(2*e)}function sk(t,e,n){for(var r,i,o,s,a=Math.sin(e),l=Math.cos(e),u=nk(n),c=(r=n,i=((i=Math.exp(r))+1/i)/2),h=2*l*c,f=-2*a*u,p=t.length-1,d=t[p],y=0,g=0,m=0;0<=--p;)o=g,s=y,d=h*(g=d)-o-f*(y=m)+t[p],m=f*g-s+h*y;return[(h=a*c)*d-(f=l*u)*m,h*m+f*d]}var ak={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=QN(this.es),this.ml0=KN(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,s=eN(i-this.long0),a=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*s,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),p=Math.abs(l)>SL?Math.tan(o):0,d=Math.pow(p,2),y=Math.pow(d,2);e=1-this.es*Math.pow(a,2),u/=Math.sqrt(e);var g=KN(o,a,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-d+h+c/20*(5-18*d+y+14*h-58*d*h+c/42*(61+179*y-y*d-479*d)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+a*s*u/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+y-58*d+270*h-330*d*h+c/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var m=l*Math.sin(s);if(Math.abs(Math.abs(m)-1)<SL)return 93;if(n=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,r=l*Math.cos(s)/Math.sqrt(1-Math.pow(m,2)),1<=(m=Math.abs(r))){if(SL<m-1)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,n=$N(e,this.es,this.en),Math.abs(n)<vL){var a=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>SL?Math.tan(n):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),f=Math.pow(u,2),p=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var d=o*Math.sqrt(e)/this.k0,y=Math.pow(d,2);r=n-(e*=u)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*c*f+c-4*h-y/30*(61+90*f-252*c*f+45*p+46*c-y/56*(1385+3633*f+4095*p+1574*p*f)))),i=eN(this.long0+d*(1-y/6*(1+2*f+c-y/20*(5+28*f+24*p+8*c*f+6*c-y/42*(61+662*f+1320*p+720*p*f))))/l)}else r=vL*tN(s),i=0;else{var g=Math.exp(o/this.k0),m=.5*(g-1/g),v=this.lat0+s/this.k0,b=Math.cos(v);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(m,2))),r=Math.asin(e),s<0&&(r=-r),i=0==m&&0===b?0:eN(Math.atan2(m,b)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};var lk={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+-2854/675*e))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+4642/4725*e))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+2323/945*e))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+-1522/945*e)))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+73814/2835*e))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+-12686/2835*e))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+-399572/14175*e)),this.cbg[3]=n*(1237/630+e*(-24832/14175*e-2.4)),n*=e,this.cgb[4]=n*(4174/315+-144838/6237*e),this.cbg[4]=n*(-734/315+109598/31185*e),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+-96199/604800*e))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+7891/37800*e))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+1118711/3870720*e)))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+-1983433/1935360*e))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+-5569/90720*e))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+167603/181440*e))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+830251/7257600*e)),this.gtu[3]=n*(49561/161280+e*(-179/168+6601661/7257600*e)),n*=e,this.utg[4]=n*(-4583/161280+108847/3991680*e),this.gtu[4]=n*(34729/80640+-3418889/1995840*e),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=ok(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],s=0;0<=--i;)n=r*o-s+t[i],s=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=eN(t.x-this.long0),n=t.y;n=ok(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(r,s*i),e=Math.atan2(o*i,rk(r,i*s)),e=ik(Math.tan(e));var a,l,u=sk(this.gtu,2*n,2*e);return n+=u[0],e+=u[1],l=Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,this.a*(this.Qn*n+this.Zb)+this.y0):a=1/0,t.x=a,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=sk(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(nk(r));var s=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(s*u,rk(l,u*a)),r=Math.atan2(l,u*a),e=eN(r+this.long0),n=ok(this.cgb,i)}else n=e=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};function uk(t,e){return Math.pow((1-t)/(1+t),e)}var ck={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(eN(e)+Math.PI)/Math.PI)+1)<0)return 0;if(60<t)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*xL,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,lk.init.apply(this),this.forward=lk.forward,this.inverse=lk.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};var hk={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+OL)/(Math.pow(Math.tan(.5*this.lat0+OL),this.C)*uk(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+OL),this.C)*uk(this.e*Math.sin(n),this.ratexp))-vL,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+OL)/this.K,1/this.C),i=20;0<i&&(n=2*Math.atan(r*uk(this.e*Math.sin(t.y),-.5*this.e))-vL,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var fk={init:function(){hk.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=eN(t.x-this.long0),hk.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,hk.inverse.apply(this,[t]),t.x=eN(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var pk={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=SL&&(this.k0=.5*(1+tN(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=SL&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=SL&&(this.k0=.5*this.cons*$L(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/nN(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=$L(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-vL,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,s,a=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),h=eN(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=SL&&Math.abs(l+this.lat0)<=SL?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,u,this.e))-vL,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=SL?(o=nN(this.e,l*this.con,this.con*u),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0)):(Math.abs(this.sinlat0)<SL?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0),t)},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return(e=this.long0,n=this.lat0,s<=SL)?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<SL?0<this.lat0?eN(this.long0+Math.atan2(t.x,-1*t.y)):eN(this.long0+Math.atan2(t.x,t.y)):eN(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=SL){if(s<=SL)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=s*this.cons/(2*this.a*this.k0),n=this.con*rN(this.e,r),e=this.con*eN(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=SL?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/s),e=eN(this.long0+Math.atan2(t.x*Math.sin(i),s*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*rN(this.e,Math.tan(.5*(vL+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(vL+t))*Math.pow((1-e)/(1+e),.5*n)}};var dk={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,l=0,u=o,c=-1e3,h=0;1e-7<Math.abs(u-c);){if(20<++h)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t},names:["somerc"]};var yk={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=nN(this.e,this.lat0,t),s=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(s*s<1&&(s=1),isNaN(this.longc)){var a=nN(this.e,this.lat1,Math.sin(this.lat1)),l=nN(this.e,this.lat2,Math.sin(this.lat2));0<=this.lat0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(o,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(o,this.bl);var u=Math.pow(a,this.bl),c=Math.pow(l,this.bl);i=.5*((r=this.el/u)-1/r);var h=(this.el*this.el-c*u)/(this.el*this.el+c*u),f=(c-u)/(c+u),p=eN(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=eN(this.long0);var d=eN(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else r=0<=this.lat0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:0<=this.lat0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,s=eN(i-this.long0);if(Math.abs(Math.abs(o)-vL)<=SL)r=0<o?-1:1,n=this.al/this.bl*Math.log(Math.tan(OL+r*this.gamma0*.5)),e=-1*r*vL*this.al/this.bl;else{var a=nN(this.e,o,Math.sin(o)),l=this.el/Math.pow(a,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),h=Math.sin(this.bl*s),f=(u*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=SL?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=SL?this.al*this.bl*s:this.al*Math.atan2(u*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.bl*e/this.al),a=(s*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<SL?(t.x=this.long0,t.y=vL):Math.abs(1+a)<SL?(t.x=this.long0,t.y=-1*vL):(t.y=rN(this.e,l),t.x=eN(this.long0-Math.atan2(i*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var gk={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<SL)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=$L(this.e,e,n),i=nN(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=$L(this.e,o,s),l=nN(this.e,this.lat2,o),u=nN(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>SL?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=SL&&(n=tN(n)*(vL-2*SL));var r,i,o=Math.abs(Math.abs(n)-vL);if(SL<o)r=nN(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var s=this.ns*eN(e-this.long0);return t.x=this.k0*(i*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,r,i,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;n=0<this.ns?(e=Math.sqrt(s*s+a*a),1):(e=-Math.sqrt(s*s+a*a),-1);var l=0;if(0!==e&&(l=Math.atan2(n*s,n*a)),0!==e||0<this.ns){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=rN(this.e,r)))return null}else i=-vL;return o=eN(l/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};function mk(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function vk(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function bk(t){return.375*t*(1+.25*t*(1+.46875*t))}function _k(t){return.05859375*t*t*(1+.75*t)}function wk(t){return t*t*t*(35/3072)}function Sk(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function xk(t){return Math.abs(t)<vL?t:t-tN(t)*Math.PI}function Ek(t,e,n,r,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}var Ok={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,s,a,l=t.x,u=t.y,c=eN(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(s),t.x=a*Math.sin(s),this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,s,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e;for(var u=a=0;t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,u+=1,0===a&&u<15;);return 15<=u?null:t},names:["Krovak","krovak"]};function Ck(t,e){var n;return 1e-7<t?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var Pk={init:function(){this.sphere||(this.e0=vk(this.es),this.e1=bk(this.es),this.e2=_k(this.es),this.e3=wk(this.es),this.ml0=this.a*mk(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=eN(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=Sk(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,h=this.es*s*s/(1-this.es);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=this.a*mk(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*o/s*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var s=this.ml0/this.a+i,a=Ek(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-vL)<=SL)return t.x=this.long0,t.y=vL,i<0&&(t.y*=-1),t;var l=Sk(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),h=r*this.a/l,f=h*h;e=a-l*Math.tan(a)/u*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return t.x=eN(n+this.long0),t.y=xk(e),t},names:["Cassini","Cassini_Soldner","cass"]};var Tk=.3333333333333333,Mk=.17222222222222222,Lk=.10257936507936508,Nk=.06388888888888888,kk=.0664021164021164,Ak=.016415012942191543;function Ik(t){return 1<Math.abs(t)&&(t=1<t?1:-1),Math.asin(t)}var Rk={init:function(){var t,e,n,r,i=Math.abs(this.lat0);if(Math.abs(i-vL)<SL?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<SL?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=Ck(this.e,1),this.mmf=.5/(1-this.es),this.apa=(e=this.es,(r=[])[0]=e*Tk,n=e*e,r[0]+=n*Mk,r[1]=n*Nk,n*=e,r[0]+=n*Lk,r[1]+=n*kk,r[2]=n*Ak,r),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Ck(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,s,a,l,u,c,h=t.x,f=t.y;if(h=eN(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=SL)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.phi0)<SL)return null;n=OL-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(u=l=a=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),s=Ck(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=vL+f,s=this.qp-s;break;case this.S_POLE:u=f-vL,s=this.qp+s}if(Math.abs(u)<SL)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*a-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:0<=s?(e=(u=Math.sqrt(s))*i,n=r*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,s,a,l,u,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,y=0;if(1<(n=.5*(p=Math.sqrt(h*h+f*f))))return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=SL?0:Math.asin(f*y/p),h*=y,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=SL?this.phi0:Math.asin(d*this.sinph0+f*y*this.cosph0/p),h*=y*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=vL-n;break;case this.S_POLE:n-=vL}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(s=Math.sqrt(h*h+f*f))<SL)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*s/this.rq),r=Math.cos(i),h*=i=Math.sin(i),f=this.mode===this.OBLIQ?(a=r*this.sinb1+f*i*this.cosb1/s,o=this.qp*a,s*this.cosb1*r-f*this.sinb1*i):(a=f*i/s,o=this.qp*a,s*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=0,t.y=this.phi0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(h,f),l=Math.asin(a),u=this.apa,c=l+l,n=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return t.x=eN(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};var jk={init:function(){Math.abs(this.lat1+this.lat2)<SL||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=$L(this.e3,this.sin_po,this.cos_po),this.qs1=Ck(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=$L(this.e3,this.sin_po,this.cos_po),this.qs2=Ck(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ck(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>SL?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Ck(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*eN(e-this.long0),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,r=0<=this.ns0?(e=Math.sqrt(t.x*t.x+t.y*t.y),1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),-1),(i=0)!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,s=this.sphere?Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,this.phi1z(this.e3,n)),o=eN(i/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,s=Ik(.5*e);if(t<SL)return s;for(var a=t*t,l=1;l<=25;l++)if(s+=o=.5*(i=1-(r=t*(n=Math.sin(s)))*r)*i/Math.cos(s)*(e/(1-a)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return s;return null}};var Dk={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,s,a,l=t.x,u=t.y;return r=eN(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),a=0<(o=this.sin_p14*e+this.cos_p14*n*i)||Math.abs(o)<=SL?(s=this.x0+this.a*n*Math.sin(r)/o,this.y0+this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(s=this.x0+this.infinity_dist*n*Math.sin(r),this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),s=Ik(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),eN(this.long0+o)):(s=this.phic0,0),t.x=o,t.y=s,t},names:["gnom"]};var Fk={init:function(){this.sphere||(this.k0=$L(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=eN(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=Ck(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=eN(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*vL:vL;for(var r,i,o,s,a=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(a),o=Math.cos(a),s=t*i,a+=r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=eN(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var Bk={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=eN(e-this.long0),i=xk(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=eN(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=xk(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Gk={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=vk(this.es),this.e1=bk(this.es),this.e2=_k(this.es),this.e3=wk(this.es),this.ml0=this.a*mk(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,s=eN(i-this.long0);if(r=s*Math.sin(o),this.sphere)n=Math.abs(o)<=SL?(e=this.a*s,-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),this.a*(xk(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=SL)e=this.a*s,n=-1*this.ml0;else{var a=Sk(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(r),n=this.a*mk(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,s,a,l,u;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=SL)e=eN(r/this.a+this.long0),n=0;else{var c;for(s=this.lat0+i/this.a,a=r*r/this.a/this.a+s*s,l=s,o=20;o;--o)if(l+=u=-1*(s*(l*(c=Math.tan(l))+1)-l-.5*(l*l+a)*c)/((l-s)/c-1),Math.abs(u)<=SL){n=l;break}e=eN(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=SL)n=0,e=eN(this.long0+r/this.a);else{var h,f,p,d,y;for(s=(this.ml0+i)/this.a,a=r*r/this.a/this.a+s*s,l=s,o=20;o;--o)if(y=this.e*Math.sin(l),h=Math.sqrt(1-y*y)*Math.tan(l),f=this.a*mk(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(s*(h*(d=f/this.a)+1)-d-.5*h*(d*d+a))/(this.es*Math.sin(2*l)*(d*d+a-2*s*d)/(4*h)+(s-d)*(h*p-2/Math.sin(2*l))-p),Math.abs(u)<=SL){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=eN(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var Uk={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/mL*1e-5,s=i,a=1,l=0;for(e=1;e<=10;e++)a*=o,l+=this.A[e]*a;var u,c=l,h=s,f=1,p=0,d=0,y=0;for(e=1;e<=6;e++)u=p*c+f*h,f=f*c-p*h,p=u,d=d+this.B_re[e]*f-this.B_im[e]*p,y=y+this.B_im[e]*f+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,s=(i-this.y0)/this.a,a=o/this.a,l=1,u=0,c=0,h=0;for(e=1;e<=6;e++)n=u*s+l*a,l=l*s-u*a,u=n,c=c+this.C_re[e]*l-this.C_im[e]*u,h=h+this.C_im[e]*l+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,d=c,y=h,g=s,m=a;for(e=2;e<=6;e++)p=y*c+d*h,d=d*c-y*h,y=p,g+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),m+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var v=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=y*c+d*h,d=d*c-y*h,y=p,v+=e*(this.B_re[e]*d-this.B_im[e]*y),b+=e*(this.B_im[e]*d+this.B_re[e]*y);var _=v*v+b*b;c=(g*v+m*b)/_,h=(m*v-g*b)/_}var w=c,S=h,x=1,E=0;for(e=1;e<=9;e++)x*=w,E+=this.D[e]*x;var O=this.lat0+E*mL*1e5,C=this.long0+S;return t.x=C,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var zk={init:function(){},forward:function(t){var e=t.x,n=t.y,r=eN(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=eN(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var qk={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=QN(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=eN(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),s=20;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<SL)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*KN(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=Ik((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Ik(Math.sin(e)/this.n)),r=eN(r+this.long0),e=xk(e)):(e=$N(t.y/this.a,this.es,this.en),(i=Math.abs(e))<vL?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=eN(n)):i-SL<vL&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var Vk={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=eN(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<SL)break}i/=2,Math.PI/2-Math.abs(n)<SL&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),.999999999999<Math.abs(n)&&(n=.999999999999),e=Math.asin(n);var r=eN(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,1<Math.abs(n)&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var Hk={init:function(){Math.abs(this.lat1+this.lat2)<SL||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=vk(this.es),this.e1=bk(this.es),this.e2=_k(this.es),this.e3=wk(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=$L(this.e,this.sinphi,this.cosphi),this.ml1=mk(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<SL?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=$L(this.e,this.sinphi,this.cosphi),this.ml2=mk(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mk(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=mk(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*eN(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,e=0<=this.ns?(n=Math.sqrt(t.x*t.x+t.y*t.y),1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=eN(this.long0+o/this.ns),r=xk(this.g-n/this.a),t.x=i,t.y=r,t;var s=this.g-n/this.a;return r=Ek(s,this.e0,this.e1,this.e2,this.e3),i=eN(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]};var Wk={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=eN(r-this.long0);Math.abs(i)<=SL&&(e=this.x0+this.R*o,n=this.y0);var s=Ik(2*Math.abs(i/Math.PI));(Math.abs(o)<=SL||Math.abs(Math.abs(i)-vL)<=SL)&&(e=this.x0,n=0<=i?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),l=a*a,u=Math.sin(s),c=Math.cos(s),h=c/(u+c-1),f=h*h,p=h*(2/u-1),d=p*p,y=Math.PI*this.R*(a*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(f-d)))/(d+l);o<0&&(y=-y),e=this.x0+y;var g=l+h;return y=Math.PI*this.R*(p*g-a*Math.sqrt((d+l)*(1+l)-g*g))/(d+l),n=0<=i?this.y0+y:this.y0-y,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,s,a,l,u,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(s=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(a=s-2*i*i+r*r)*a*a/l/l/l-9*s*a/l/l)/27)/(u=(s-a*a/3/l)/l)/(c=2*Math.sqrt(-u/3)),1<Math.abs(h)&&(h=0<=h?1:-1),f=Math.acos(h)/3,n=0<=t.y?(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(r)<SL?this.long0:eN(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Jk={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,s,a,l,u,c,h,f,p,d,y,g,m,v,b,_,w,S,x=t.x,E=t.y,O=Math.sin(t.y),C=Math.cos(t.y),P=eN(x-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=SL?(t.x=this.x0+this.a*(vL-E)*Math.sin(P),t.y=this.y0-this.a*(vL-E)*Math.cos(P)):Math.abs(this.sin_p12+1)<=SL?(t.x=this.x0+this.a*(vL+E)*Math.sin(P),t.y=this.y0+this.a*(vL+E)*Math.cos(P)):(v=this.sin_p12*O+this.cos_p12*C*Math.cos(P),m=(g=Math.acos(v))/Math.sin(g),t.x=this.x0+this.a*m*C*Math.sin(P),t.y=this.y0+this.a*m*(this.cos_p12*O-this.sin_p12*C*Math.cos(P))):(e=vk(this.es),n=bk(this.es),r=_k(this.es),i=wk(this.es),Math.abs(this.sin_p12-1)<=SL?(o=this.a*mk(e,n,r,i,vL),s=this.a*mk(e,n,r,i,E),t.x=this.x0+(o-s)*Math.sin(P),t.y=this.y0-(o-s)*Math.cos(P)):Math.abs(this.sin_p12+1)<=SL?(o=this.a*mk(e,n,r,i,vL),s=this.a*mk(e,n,r,i,E),t.x=this.x0+(o+s)*Math.sin(P),t.y=this.y0+(o+s)*Math.cos(P)):(a=O/C,l=Sk(this.a,this.e,this.sin_p12),u=Sk(this.a,this.e,O),c=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(u*C)),b=0===(h=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=SL?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(P)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*b*(1-(_=b*b)*(y=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-y)/6+(w=_*b)/8*(d=f*p)*(1-2*y)+(S=w*b)/120*(y*(4-7*y)-3*f*f*(1-7*y))-S*b/48*d),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h))),t},inverse:function(t){var e,n,r,i,o,s,a,l,u,c,h,f,p,d,y,g,m,v,b,_,w,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*vL*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=SL?s=this.lat0:(s=Ik(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-vL,o=Math.abs(a)<=SL?0<=this.lat0?eN(this.long0+Math.atan2(t.x,-t.y)):eN(this.long0-Math.atan2(-t.x,t.y)):eN(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=s,t}return l=vk(this.es),u=bk(this.es),c=_k(this.es),h=wk(this.es),Math.abs(this.sin_p12-1)<=SL?(f=this.a*mk(l,u,c,h,vL),e=Math.sqrt(t.x*t.x+t.y*t.y),s=Ek((f-e)/this.a,l,u,c,h),o=eN(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=SL?(f=this.a*mk(l,u,c,h,vL),e=Math.sqrt(t.x*t.x+t.y*t.y),s=Ek((e-f)/this.a,l,u,c,h),o=eN(this.long0+Math.atan2(t.x,t.y))):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),p=Sk(this.a,this.e,this.sin_p12),g=Math.cos(y),v=-(m=this.e*this.cos_p12*g)*m/(1-this.es),b=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),S=1-v*(w=(_=e/p)-v*(1+v)*Math.pow(_,3)/6-b*(1+3*v)*Math.pow(_,4)/24)*w/2-_*w*w*w/6,d=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*g),o=eN(this.long0+Math.asin(Math.sin(y)*Math.sin(w)/Math.cos(d))),s=Math.atan((1-this.es*S*this.sin_p12/Math.sin(d))*Math.tan(d)/(1-this.es))),t.x=o,t.y=s,t},names:["Azimuthal_Equidistant","aeqd"]};var Yk={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,s,a,l=t.x,u=t.y;return r=eN(l-this.long0),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(0<(o=this.sin_p14*e+this.cos_p14*n*i)||Math.abs(o)<=SL)&&(s=this.a*n*Math.sin(r),a=this.y0+this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Ik(e/this.a),r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=SL?(a=this.lat0,t.x=s,t.y=a,t):(a=Ik(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-vL,s=Math.abs(o)<=SL?0<=this.lat0?eN(this.long0+Math.atan2(t.x,-t.y)):eN(this.long0-Math.atan2(-t.x,t.y)):eN(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=s,t.y=a,t)},names:["ortho"]},Xk=1,Zk=2,Qk=3,Kk=4,$k=5,tA=6,eA={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function nA(t,e,n,r){var i;return t<SL?(r.value=eA.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=OL?r.value=eA.AREA_0:OL<i&&i<=vL+OL?(r.value=eA.AREA_1,i-=vL):vL+OL<i||i<=-(vL+OL)?(r.value=eA.AREA_2,i=0<=i?i-PL:i+PL):(r.value=eA.AREA_3,i+=vL)),i}function rA(t,e){var n=t+e;return n<-PL?n+=CL:+PL<n&&(n-=CL),n}function iA(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))}var oA={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=vL-OL/2?this.face=$k:this.lat0<=-(vL-OL/2)?this.face=tA:Math.abs(this.long0)<=OL?this.face=Xk:Math.abs(this.long0)<=vL+OL?this.face=0<this.long0?Zk:Kk:this.face=Qk,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,s,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===$k)i=vL-e,r=OL<=n&&n<=vL+OL?(l.value=eA.AREA_0,n-vL):vL+OL<n||n<=-(vL+OL)?(l.value=eA.AREA_1,0<n?n-PL:n+PL):-(vL+OL)<n&&n<=-OL?(l.value=eA.AREA_2,n+vL):(l.value=eA.AREA_3,n);else if(this.face===tA)i=vL+e,r=OL<=n&&n<=vL+OL?(l.value=eA.AREA_0,-n+vL):n<OL&&-OL<=n?(l.value=eA.AREA_1,-n):n<-OL&&-(vL+OL)<=n?(l.value=eA.AREA_2,-n-vL):(l.value=eA.AREA_3,0<n?-n+PL:-n-PL);else{var u,c,h,f,p,d;this.face===Zk?n=rA(n,+vL):this.face===Qk?n=rA(n,+PL):this.face===Kk&&(n=rA(n,-vL)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),u=p*Math.cos(n),c=p*d,h=f,this.face===Xk?r=nA(i=Math.acos(u),h,c,l):this.face===Zk?r=nA(i=Math.acos(c),h,-u,l):this.face===Qk?r=nA(i=Math.acos(-u),h,-c,l):this.face===Kk?r=nA(i=Math.acos(-c),h,u,l):(i=r=0,l.value=eA.AREA_0)}return s=Math.atan(12/PL*(r+Math.acos(Math.sin(r)*Math.cos(OL))-vL)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===eA.AREA_1?s+=vL:l.value===eA.AREA_2?s+=PL:l.value===eA.AREA_3&&(s+=1.5*PL),a.x=o*Math.cos(s),a.y=o*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,r,i,o,s,a,l,u,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),0<=t.x&&t.x>=Math.abs(t.y)?d.value=eA.AREA_0:0<=t.y&&t.y>=Math.abs(t.x)?(d.value=eA.AREA_1,e-=vL):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=eA.AREA_2,e=e<0?e+PL:e-PL):(d.value=eA.AREA_3,e+=vL),u=PL/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),s=Math.atan(o),(a=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:1<a&&(a=1),this.face===$k)l=Math.acos(a),p.phi=vL-l,d.value===eA.AREA_0?p.lam=s+vL:d.value===eA.AREA_1?p.lam=s<0?s+PL:s-PL:d.value===eA.AREA_2?p.lam=s-vL:p.lam=s;else if(this.face===tA)l=Math.acos(a),p.phi=l-vL,d.value===eA.AREA_0?p.lam=-s+vL:d.value===eA.AREA_1?p.lam=-s:d.value===eA.AREA_2?p.lam=-s-vL:p.lam=s<0?-s-PL:-s+PL;else{var y,g,m;u=(y=a)*y,g=1<=(u+=(m=1<=u?0:Math.sqrt(1-u)*Math.sin(s))*m)?0:Math.sqrt(1-u),d.value===eA.AREA_1?(u=g,g=-m,m=u):d.value===eA.AREA_2?(g=-g,m=-m):d.value===eA.AREA_3&&(u=g,g=m,m=-u),this.face===Zk?(u=y,y=-g,g=u):this.face===Qk?(y=-y,g=-g):this.face===Kk&&(u=y,y=g,g=-u),p.phi=Math.acos(-m)-vL,p.lam=Math.atan2(g,y),this.face===Zk?p.lam=rA(p.lam,-vL):this.face===Qk?p.lam=rA(p.lam,-PL):this.face===Kk&&(p.lam=rA(p.lam,+vL))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},sA=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],aA=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],lA=EL/5,uA=1/lA;var cA={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=eN(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*lA);r<0?r=0:18<=r&&(r=17);var i={x:iA(sA[r],n=EL*(n-uA*r))*e,y:iA(aA[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var r={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(1<=r.y)r.x/=sA[18][0],r.y=t.y<0?-vL:vL;else{var e=Math.floor(18*r.y);for(e<0?e=0:18<=e&&(e=17);;)if(aA[e][0]>r.y)--e;else{if(!(aA[e+1][0]<=r.y))break;++e}var i=aA[e],n=5*(r.y-i[0])/(aA[e+1][0]-i[0]);n=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}(function(t){return(iA(i,t)-r.y)/(n=t,(e=i)[1]+n*(2*e[2]+3*n*e[3]));var e,n},n,SL,100),r.x/=iA(sA[e],n),r.y=(5*e+n)*xL,t.y<0&&(r.y=-r.y)}return r.x=eN(r.x+this.long0),r},names:["Robinson","robin"]};var hA,fA={init:function(){this.name="geocent"},forward:function(t){return bN(t,this.es,this.a)},inverse:function(t){return _N(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};NN.defaultDatum="WGS84",NN.Proj=vN,NN.WGS84=new NN.Proj("WGS84"),NN.Point=tk,NN.toPoint=EN,NN.defs=ZL,NN.transform=PN,NN.mgrs=GN,NN.version="__VERSION__",(hA=NN).Proj.projections.add(ak),hA.Proj.projections.add(lk),hA.Proj.projections.add(ck),hA.Proj.projections.add(fk),hA.Proj.projections.add(pk),hA.Proj.projections.add(dk),hA.Proj.projections.add(yk),hA.Proj.projections.add(gk),hA.Proj.projections.add(Ok),hA.Proj.projections.add(Pk),hA.Proj.projections.add(Rk),hA.Proj.projections.add(jk),hA.Proj.projections.add(Dk),hA.Proj.projections.add(Fk),hA.Proj.projections.add(Bk),hA.Proj.projections.add(Gk),hA.Proj.projections.add(Uk),hA.Proj.projections.add(zk),hA.Proj.projections.add(qk),hA.Proj.projections.add(Vk),hA.Proj.projections.add(Hk),hA.Proj.projections.add(Wk),hA.Proj.projections.add(Jk),hA.Proj.projections.add(Yk),hA.Proj.projections.add(oA),hA.Proj.projections.add(cA),hA.Proj.projections.add(fA);var pA=NN;window.proj4=pA,window.Proj4js=pA,cL.a.Proj={},cL.a.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},cL.a.Proj.Projection=cL.a.Class.extend({initialize:function(t,e,n){var r=cL.a.Proj._isProj4Obj(t);this._proj=r?t:this._projFromCodeDef(t,e);var i=n;cL.a.Util.isArray(n)&&(i=cL.a.bounds(n)),this.bounds=r?e:i},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new cL.a.Point(e[0],e[1])},unproject:function(t,e){this.bounds&&(t.x=t.x<this.bounds.min.x?this.bounds.min.x:t.x>this.bounds.max.x?this.bounds.max.x:t.x,t.y=t.y<this.bounds.min.y?this.bounds.min.y:t.y>this.bounds.max.y?this.bounds.max.y:t.y);var n=this._proj.inverse([t.x,t.y]);return new cL.a.LatLng(n[1],n[0],e)},_projFromCodeDef:function(t,e){if(e)pA.defs(t,e);else if(void 0===pA.defs[t]){var n=t.split(":");if(3<n.length&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===pA.defs[t])throw"No projection definition for code "+t}return pA(t)},getUnits:function(){return this._proj.oProj.units||"degrees"}});function dA(t,e){return new yA(t,e)}var yA=cL.a.Class.extend({includes:cL.a.CRS,options:{transformation:new cL.a.Transformation(1,0,-1,0)},initialize:function(t,e){var n,r;if(cL.a.Proj._isProj4Obj(t)?(n=t.srsCode,e=e||{},this.projection=new cL.a.Proj.Projection(t,e.bounds)):(n=t,r=(e=e||{}).def||"",this.projection=new cL.a.Proj.Projection(n,r,e.bounds)),cL.a.Util.setOptions(this,e),this.code=n,this.transformation=this.options.transformation,this.options.dpi=this.options.dpi||96,this.options.bounds&&(this.options.bounds=cL.a.bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof cL.a.Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new cL.a.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&0<this.options.scales.length)this.scales=this.options.scales,this._scales=this._toProj4Scales(this.options.scales,this.options.dpi);else if(this.options.scaleDenominators&&0<this.options.scaleDenominators.length){this.scales=[];for(var i=0;i<this.options.scaleDenominators.length;i++)this.scales[i]=1/this.options.scaleDenominators[i];this._scales=this._toProj4Scales(this.scales,this.options.dpi)}else if(this.options.resolutions&&0<this.options.resolutions.length){this._scales=[];for(var o=this.options.resolutions.length-1;0<=o;o--)this.options.resolutions[o]&&(this._scales[o]=1/this.options.resolutions[o])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this._rectify(),this.infinite=!this.options.bounds},_rectify:function(){if(this._scales&&(this.resolutions||(this.resolutions=[],this.resolutions=this._proj4ScalesToResolutions(this._scales)),!this.scales)){this.scales=[];for(var t=0;t<this.resolutions.length;t++){var e=this.resolutions[t]*this.options.dpi*(1/.0254)*this._getMeterPerMapUnit(this.projection.getUnits());this.scales[t]=1/e}}},scale:function(t){var e,n=Math.floor(t);return t===n?this._scales[t]:(e=this._scales[n])+(this._scales[n+1]-e)*(t-n)},zoom:function(t){var e,n,r=this._closestElement(this._scales,t),i=this._scales.indexOf(r);return r?t===r?i:(n=i+1,void 0===(e=this._scales[n])?i:(t-r)/(e-r)+i):0},distance:cL.a.CRS.Earth.distance,R:cL.a.CRS.Earth.R,_closestElement:function(t,e){for(var n,r=t.length;r--;)t[r]<=e&&(void 0===n||n<t[r])&&(n=t[r]);return n},_proj4ScalesToResolutions:function(t){var e=[];if(!t)return e;for(var n=0;n<t.length;n++)e[n]=1/t[n];return e},_toProj4Scales:function(t,e){var n=[];if(!t)return n;for(var r=0;r<t.length;r++){var i=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;n[r]=1/(.0254/((e||96)*t[r])/i)}return n},_getMeterPerMapUnit:function(t){var e=1;return"meter"===t?e=1:"degrees"===t?e=2*Math.PI*6378137/360:"kilometer"===t?e=.001:"inch"===t?e=1/.025399999918:"feet"===t&&(e=.3048),e},_getDefaultProj4ScalesByBounds:function(t){if(!t)return[];for(var e=t.getSize(),n=Math.max(e.x,e.y)/256,r=[],i=0;i<23;i++)r[i]=Math.pow(2,i)/n;return r}});cL.a.Proj.CRS=dA;for(var gA,mA=cL.a.CRS.Baidu=cL.a.extend({},cL.a.CRS.EPSG3857,{code:"Baidu",scale:function(t){return 6378137*Math.PI*2/Math.pow(2,18-t)},transformation:(gA=.5/(6378137*Math.PI),new cL.a.Transformation(gA,0,-gA,0))}),vA=[],bA=1;bA<19;bA++)vA.push(1.40625/Math.pow(2,bA));for(var _A=cL.a.CRS.TianDiTu_WGS84=cL.a.Proj.CRS("EPSG:4326",{origin:[-180,90],resolutions:vA,bounds:cL.a.bounds([-180,-90],[180,90])}),wA=[],SA=1;SA<19;SA++)wA.push(156543.03392804062/Math.pow(2,SA));var xA=cL.a.CRS.TianDiTu_Mercator=cL.a.Proj.CRS("EPSG:3857",{origin:[-20037508.3427892,20037508.3427892],resolutions:wA,bounds:cL.a.bounds([-20037508.3427892,-20037508.3427892],[20037508.3427892,20037508.3427892])});cL.a.CRS.BaiduCRS=mA,cL.a.CRS.TianDiTu_WGS84CRS=_A,cL.a.CRS.TianDiTu_MercatorCRS=xA;var EA={Prefix:"<a href='https://leafletjs.com' title='A JS library for interactive maps'>Leaflet</a>\n                with <span>© <a href='https://iclient.supermap.io' title='SuperMap iClient' target='_blank'>SuperMap iClient</a></span>",Common:{attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' title='SuperMap iServer' target='_blank'>SuperMap iServer</a></span>"},Online:{attribution:"Map Data <span>© <a href='https://www.supermapol.com' title='SuperMap Online' target='_blank'>SuperMap Online</a></span>"},ECharts:{attribution:"© 2018 百度 ECharts"},MapV:{attribution:"© 2018 百度 MapV "},Turf:{attribution:"<span>© <a href='https://turfjs.org/' title='turfjs' target='_blank'>turfjs</a></span>"},Baidu:{attribution:"Map Data © 2018 Baidu - GS(2016)2089号 - Data © 长地万方"},Cloud:{attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo"},Tianditu:{attribution:"Map Data <a href='https://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='https://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a>"}};cL.a.supermap=cL.a.supermap||{},cL.a.supermap.control=cL.a.supermap.control||{},cL.a.supermap.components=cL.a.supermap.components||{},cL.a.Control.Attribution.include({options:{position:"bottomright",prefix:EA.Prefix}}),cL.a.Map.include({latLngToAccurateContainerPoint:function(t){var e=this.project(cL.a.latLng(t))._subtract(this.getPixelOrigin());return cL.a.point(e).add(this._getMapPanePos())}}),[cL.a.Polyline,cL.a.Polygon,cL.a.Marker,cL.a.CircleMarker,cL.a.Circle,cL.a.LayerGroup].map(function(e){return e.defaultFunction=e.prototype.toGeoJSON,e.include({toGeoJSON:function(t){return e.defaultFunction.call(this,t||10)}}),e});function OA(t,e){return new PA(t,e)}var CA=cL.a.Evented.extend({options:{url:null,proxy:null,serverType:null,withCredentials:!1,crossOrigin:null},initialize:function(t,e){t=t&&(t.indexOf("/")!==t.length-1?t:t.substr(0,t.length-1)),this.url=t,cL.a.setOptions(this,e),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}}),PA=(cL.a.supermap.ServiceBase=CA).extend({options:{projection:null},initialize:function(t,e){e=e||{},cL.a.setOptions(this,e),e.projection&&(this.options.projection=e.projection),CA.prototype.initialize.call(this,t,e)},getMapInfo:function(t){new Jg(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},projection:this.options.projection}).processAsync()},getTilesets:function(t){new Bw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync()}});cL.a.supermap.mapService=OA;var TA=cL.a.Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal",switch:!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var t=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),t},setContent:function(t){var e=cL.a.Util.extend({},t);this.setVersionName(e.desc).setToolTip(e.desc)},setVersionName:function(t){var e=t;return t||(e=this.getValue()),this._sliderValue.innerHTML=e,this},setToolTip:function(t){return this.tooltip.innerHTML=t,this},updateLength:function(t){0<t&&(this.length=t,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(t){t&&(this.options.layer=t);var n=this,e=n.options.layer;e.on("tilesetsinfoloaded",function(t){var e=t&&t.tileVersions;n.update(e)}),e.on("tileversionschanged",function(t){var e=t&&t.tileVersion;n.setContent(e)}),n.getTileSetsInfo()},update:function(t){this.tileVersions=t,this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var e=this;e.options.layer&&new PA(e.options.layer._url).getTilesets(function(t){e.options.layer.setTileSetsInfo(t.result)})},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1):parseInt(this.slider.value)>this.max-1||(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion()),this},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1||(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion()),this},tilesVersion:function(t){for(var e=this.options.layer,n=this.tileVersions,r=n.length,i=0;i<r;i++)if(n[i].name==t){e.updateCurrentTileSetsIndex(i),e.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var t=this.tileVersions[this.getValue()];return t&&t.name},_initLayout:function(){var t="leaflet-control-ctv";this._container=cL.a.DomUtil.create("div",t+" "+t+"-"+this.options.orientation),this._sliderBtn=cL.a.DomUtil.create("a",t+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=cL.a.DomUtil.create("p",t+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;var e="leaflet-ctv-slider";return this._sliderContent=cL.a.DomUtil.create("div",e+"-main  tooltip",this._container),this.tooltip=cL.a.DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options.switch&&(this._next=cL.a.DomUtil.create("a",e+"-incdec "+e+"-next",this._sliderContent),this._next.innerHTML=this.options.nextText,cL.a.DomEvent.on(this._next,"click",this.nextTilesVersion,this),cL.a.DomUtil.addClass(this._container,t+"-incdec")),this._sliderContainer=cL.a.DomUtil.create("div",e+"-container",this._sliderContent),this.slider=cL.a.DomUtil.create("input",e,this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?cL.a.DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options.switch&&(this._last=cL.a.DomUtil.create("a",e+"-incdec "+e+"-last",this._sliderContent),this._last.innerHTML=this.options.lastText,cL.a.DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",cL.a.DomEvent.disableClickPropagation(this._container),this.options.collapsed?(cL.a.Browser.android||cL.a.DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),cL.a.Browser.touch?cL.a.DomEvent.on(this._sliderBtn,"click",cL.a.DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):cL.a.DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){cL.a.DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){cL.a.DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var t=this.getVersion();this.tilesVersion(t)}});cL.a.Map.mergeOptions({changeTileVersionControl:!1}),cL.a.Map.addInitHook(function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new TA,this.addControl(this.changeTileVersionControl))});function MA(t){return new TA(t)}cL.a.supermap.control.changeTileVersion=MA;var LA=cL.a.Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var t=cL.a.DomUtil.create("div","iclient-leaflet-logo");t.style.marginTop=0,t.style.marginBottom=0,t.style.marginLeft=0,t.style.marginRight=0;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.options.imageUrl&&(e=this.options.imageUrl);var n=this.options.alt,r="94px",i="29px",o="width:"+r+";height:"+i+";";this.options.imageUrl&&(o="width:"+(r=this.options.width)+";height:"+(i=this.options.height)+";",r&&i||(o=""));var s=this.options.link||"https://iclient.supermap.io";return t.innerHTML="<a href='"+s+"' target='_blank' style='border: none;display: block;'><img src="+e+" alt='"+n+"' style='border: none;"+o+"margin-right:5px;margin-bottom:2px;white-space: nowrap'></a>",t}});cL.a.Map.mergeOptions({logoControl:!0}),cL.a.Map.addInitHook(function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new LA:this.options.logoControl instanceof cL.a.Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))});function NA(t){return new LA(t)}function kA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cL.a.supermap.control.logo=NA;var AA=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"toSuperMapBounds",value:function(t){return t&&-1!==["FeatureCollection","Feature"].indexOf(t.type)&&(t=cL.a.geoJSON(t).getBounds()),t instanceof cL.a.LatLngBounds?new Tt(t.getSouthWest().lng,t.getSouthWest().lat,t.getNorthEast().lng,t.getNorthEast().lat):t instanceof cL.a.Bounds?new Tt(t.min.x,t.min.y,t.max.x,t.max.y):this.isArray(t)?new Tt(t[0],t[1],t[2],t[3]):new Tt}},{key:"isArray",value:function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{key:"toProcessingParam",value:function(t){var e={};if(t.length<1)e="";else{for(var n=[],r=0;r<t.length;r++){var i={};i.x=t[r][0],i.y=t[r][1],n.push(i)}e.type="REGION",e.points=n}return e}}],(n=null)&&kA(e.prototype,n),r&&kA(e,r),t}();cL.a.supermap.CommontypesConversion=AA;cL.a.Util.supermap_callbacks={};function IA(t){return t?(new Bn).toGeoJSON(t):t}function RA(t){if(!t)return t;var e,n=new Bn;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t.type))e=n.read(t,t.type);else if("function"==typeof t.toGeoJSON){var r=t.toGeoJSON();e=r?n.read(r,r.type):t}var i=e;return cL.a.Util.isArray(e)&&(1===e.length?i=e[0]:1<e.length&&(i=[],e.map(function(t){return i.push(t.geometry),t}))),i&&i.geometry?i.geometry:i}function jA(t,e,n){var r=t*e*(1/.0254)*GA(n);return r=1/r}function DA(t,e,n){var r=t*e*(1/.0254)*GA(n);return r=1/r}function FA(t,e,n,r){return r=r||6378137,n=n||"",0<t&&0<e?(t=cL.a.Util.NormalizeScale(t),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/e/t/(2*Math.PI*r/360)/1e4:254/e/t/1e4):-1}function BA(t){return 1<t?1/t:t}var GA=function(t){var e;if(t===c.METER)e=1;else if(t===c.DEGREE)e=2*Math.PI*6378137/360;else if(t===c.KILOMETER)e=.001;else if(t===c.INCH)e=1/.025399999918;else{if(t!==c.FOOT)return e;e=.3048}return e};cL.a.Util.toGeoJSON=IA,cL.a.Util.toSuperMapGeometry=RA,cL.a.Util.resolutionToScale=jA,cL.a.Util.scaleToResolution=DA,cL.a.Util.getMeterPerMapUnit=GA,cL.a.Util.GetResolutionFromScaleDpi=FA,cL.a.Util.NormalizeScale=BA;cL.a.Util.transform=function(t,e,n){var r=1<arguments.length&&void 0!==e?e:cL.a.CRS.EPSG4326,i=2<arguments.length?n:void 0,o=null,s=null;if(-1===["FeatureCollection","Feature","Geometry"].indexOf(t.type))if(t.toGeoJSON)t=t.toGeoJSON();else if(t instanceof cL.a.LatLngBounds)t=cL.a.rectangle(t).toGeoJSON();else{if(!(t instanceof cL.a.Bounds))throw new Error("This tool only supports data conversion in geojson format or Vector Layers of Leaflet.");t=cL.a.rectangle([[t.getTopLeft().x,t.getTopLeft().y],[t.getBottomRight().x,t.getBottomRight().y]]).toGeoJSON()}var a={point:function(t){return s(t)},multipoint:function(t){return a.linestring.apply(this,[t])},linestring:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=a.point.apply(this,[t[r]])}catch(t){throw t}e.push(n)}return e},multilinestring:function(t){return a.polygon.apply(this,[t])},polygon:function(t){for(var e,n=[],r=0,i=t.length;r<i;++r){try{e=a.linestring.apply(this,[t[r]])}catch(t){throw t}n.push(e)}return n},multipolygon:function(t){for(var e=[],n=null,r=0,i=t.length;r<i;++r){try{n=a.polygon.apply(this,[t[r]])}catch(t){throw t}e.push(n)}return e}};return function(t,e){if(s=e,"Feature"===(o=t).type)o=l(t);else if("FeatureCollection"===t.type){for(var n=[],r=0;r<t.features.length;++r)try{n.push(l(t.features[r]))}catch(t){n=null}o.features=n}return o}(t,function(t){var e=r.unproject({x:t[0],y:t[1]}),n=i.project(e);return[n.x,n.y]});function l(t){var e=t.geometry;if(!Et.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!a[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{e.coordinates=a[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(t){throw t}return t.geometry=e,t}};function UA(t,e){return new zA(t,e)}var zA=cL.a.TileLayer.extend({url:"http://online{num}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:cL.a.latLngBounds(cL.a.latLng(-85.0511287798,-180),cL.a.latLng(85.0511287798,180)),retina:cL.a.Browser.retina,attribution:EA.Baidu.attribution},initialize:function(t,e){t&&(this.url=t),cL.a.setOptions(this,e),this.options.retina&&(this.options.maxZoom=18),cL.a.stamp(this)},getTileUrl:function(t){var e=cL.a.Util.template(this.url,{num:Math.abs((t.x+t.y)%8)+1,x:t.x,y:-t.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}});cL.a.supermap.baiduTileLayer=UA;function qA(t,e){return new VA(t,e)}var VA=cL.a.TileLayer.extend({defaultURL:"http://t2.supermapcloud.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:EA.Cloud.attribution},initialize:function(t,e){cL.a.setOptions(this,e);var n=t||this.defaultURL;this._url=n+"?map="+this.options.mapName+"&type="+this.options.type,cL.a.stamp(this)},getTileUrl:function(t){var e=this._url+"&x="+t.x+"&y="+t.y+"&z="+t.z;return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}});cL.a.supermap.cloudTileLayer=qA;function HA(t,e){return new WA(t,e)}var WA=uL.Layer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:"",serverType:i.ISERVER,attribution:EA.Common.attribution,updateInterval:150,tileProxy:null,format:"png"},initialize:function(t,e){this._url=t,uL.Util.setOptions(this,e)},onAdd:function(t){this.update=uL.Util.throttle(this.update,this.options.updateInterval,this),t.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getImageUrl:function(t){var e=uL.Util.getParamString(t)+this._initLayerUrl();return e=this._url+"/image."+this.options.format+e,e=this._appendCredential(e),this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),this.options.cacheEnabled||(e+="&_t="+(new Date).getTime()),e},_getImageParams:function(){var t=this._calculateImageSize();return{viewBounds:this._compriseBounds(this._calculateBounds()),width:t.x,height:t.y}},_initLayerUrl:function(){var t="&";return t+=encodeURI(this._initAllRequestParams().join("&"))},_initAllRequestParams:function(){var t=this.options||{},e=[],n=!0===t.redirect&&t.redirect;e.push("redirect="+n);var r=!0===t.transparent&&t.transparent;e.push("transparent="+r);var i=!1!==t.cacheEnabled||t.cacheEnabled;return e.push("cacheEnabled="+i),t.prjCoordSys&&e.push("prjCoordSys="+JSON.stringify(t.prjCoordSys)),t.layersID&&e.push("layersID="+t.layersID),t.rasterfunction&&e.push("rasterfunction="+JSON.stringify(t.rasterfunction)),t.clipRegionEnabled&&t.clipRegion&&(e.push("clipRegionEnabled="+t.clipRegionEnabled),e.push("clipRegion="+JSON.stringify(kn.fromGeometry(uL.Util.toSuperMapGeometry(t.clipRegion))))),!1===t.overlapDisplayed?(e.push("overlapDisplayed=false"),t.overlapDisplayedOptions&&e.push("overlapDisplayedOptions="+this.overlapDisplayedOptions.toString())):e.push("overlapDisplayed=true"),e},_requestImage:function(t,e){var n=this.getImageUrl(t);this._loadImage(n,e)},_loadImage:function(t,o){if(this._map){var s=new uL.ImageOverlay(t,o,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),e=function t(e){s.off("error",t,this);var n=this._map;if(n){var r=e.target,i=this._currentImage;r._bounds&&r._bounds.equals(o)&&r._bounds.equals(n.getBounds())?(this._currentImage=r,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),i&&n.removeLayer(i),i&&i._map&&i._map.removeLayer(i)):n.removeLayer(r),this.fire("load",{bounds:o})}};s.once("load",e,this),s.once("error",function(){this._map.removeLayer(s),this.fire("error"),s.off("load",e,this)},this),this.fire("loading",{bounds:o})}},update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(t>this._map.options.maxZoom||t<this._map.options.zoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var n=this._getImageParams();n?this._requestImage(n,e):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),n=this._map.unproject(t.getTopRight()),r=this._map.options.crs.project(n),i=this._map.options.crs.project(e);return cL.a.bounds(r,i)},_compriseBounds:function(t){var e={leftBottom:{x:t.getBottomLeft().x,y:t.getTopRight().y},rightTop:{x:t.getTopRight().x,y:t.getBottomLeft().y}};return JSON.stringify(e)},_calculateImageSize:function(){var t=this._map,e=t.getPixelBounds(),n=t.getSize(),r=t.unproject(e.getBottomLeft()),i=t.unproject(e.getTopRight()),o=t.latLngToLayerPoint(i).y,s=t.latLngToLayerPoint(r).y;return(0<o||s<n.y)&&(n.y=s-o),n},_appendCredential:function(t){var e,n,r=t;switch(this.options.serverType){case i.IPORTAL:e=(e=(n=lr.getToken(this._url))?new We(n,"token"):null)||((n=lr.getKey(this._url))?new We(n,"key"):null);break;case i.ONLINE:e=(n=lr.getKey(this._url))?new We(n,"key"):null;break;default:e=(n=lr.getToken(this._url))?new We(n,"token"):null}return e&&(r+="&"+e.getUrlParameters()),r}});cL.a.supermap.imageMapLayer=HA;function JA(t,e){return new YA(t,e)}var YA=cL.a.TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:""},initialize:function(t,e){this._url=t,cL.a.setOptions(this,e);var n=this.options;if("REST"===n.requestEncoding){this.formatSuffix="."+({"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"}[n.format]||n.format.split("/").pop()||"png")}else n.requestEncoding="KVP"},getTileUrl:function(t){var e=this._getZoomForUrl(),n=this.options.matrixIds?this.options.matrixIds[e].identifier:e,r=cL.a.Util.template(this._url,{s:this._getSubdomain(t)}),i={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:n,tilerow:t.y,tilecol:t.x};if(this.options.tileProxy&&(r=this.options.tileProxy+r),"KVP"===this.options.requestEncoding)r+=cL.a.Util.getParamString(i,r);else if("REST"===this.options.requestEncoding){r+="/"+i.layer+"/"+i.style+"/"+i.tilematrixSet+"/"+i.tilematrix+"/"+i.tilerow+"/"+i.tilecol+this.formatSuffix}return r}});cL.a.supermap.wmtsLayer=JA;function XA(t){return new ZA(t)}var ZA=YA.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:EA.Tianditu.attribution,url:"https://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,key:"",dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7]},initialize:function(t){t=t||{},cL.a.setOptions(this,t),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,YA.prototype.initialize.call(this,this.options.url,this.options),cL.a.stamp(this)},onAdd:function(t){this.options.tilematrixSet="EPSG:4326"===t.options.crs.code?"c":"w",this.options.key&&(this._url="".concat(this._url,"tk=").concat(this.options.key)),this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),YA.prototype.onAdd.call(this,t)}});cL.a.supermap.tiandituTileLayer=XA;function QA(t,e){return new KA(t,e)}var KA=cL.a.TileLayer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,serverType:i.ISERVER,format:"png",tileProxy:null,attribution:EA.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,cL.a.TileLayer.prototype.initialize.apply(this,arguments),cL.a.setOptions(this,e),cL.a.stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(t){this._crs=this.options.crs||t.options.crs,cL.a.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.getScaleFromCoords(t),n=this._getLayerUrl()+"&scale="+e+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),this.options.cacheEnabled||(n+="&_t="+(new Date).getTime()),this.options.subdomains&&(n=cL.a.Util.template(n,{s:this._getSubdomain(t)})),n},getScale:function(t){var e=t||this._map.getZoom();return this.scales[e]},getScaleFromCoords:function(t){var e;return this.scales&&this.scales[t.z]?this.scales[t.z]:(this.scales=this.scales||{},e=this.getDefaultScale(t),this.scales[t.z]=e)},getDefaultScale:function(t){var e=this._crs;if(e.scales)return e.scales[t.z];var n=this._tileCoordsToBounds(t),r=e.project(n.getNorthEast()),i=e.project(n.getSouthWest()),o=this.options.tileSize,s=Math.max(Math.abs(r.x-i.x)/o,Math.abs(r.y-i.y)/o),a=c.METER;if(e.code){var l=e.code.split(":");if(l&&1<l.length){var u=parseInt(l[1]);a=u&&4e3<=u&&u<=5e3?c.DEGREE:c.METER}}return jA(s,96,a)},setTileSetsInfo:function(t){this.tileSets=t,cL.a.Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var t=this;if(null!=t.tileSets&&!(t.tempIndex===t.tileSetsIndex||this.tempIndex<0)){var e=t.tileSets.tileVersions;if(e&&t.tempIndex<e.length&&0<=t.tempIndex){var n=e[t.tempIndex].name;t.mergeTileVersionParam(n)&&(t.tileSetsIndex=t.tempIndex,t.fire("tileversionschanged",{tileVersion:e[t.tempIndex]}))}}},updateCurrentTileSetsIndex:function(t){this.tempIndex=t},mergeTileVersionParam:function(t){return!!t&&(this.requestParams.tileversion=t,this._paramsChanged=!0,this.redraw(),!(this._paramsChanged=!1))},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var t=this._url+"/tileImage."+this.options.format+"?";return t+=encodeURI(this._getRequestParamString()),t=this._appendCredential(t),this._layerUrl=t},_getRequestParamString:function(){this.requestParams=this.requestParams||this._getAllRequestParams();var t=[];for(var e in this.requestParams)t.push(e+"="+this.requestParams[e]);return t.join("&")},_getAllRequestParams:function(){var t=this.options||{},e={},n=this.options.tileSize;n instanceof cL.a.Point||(n=cL.a.point(n,n)),e.width=n.x,e.height=n.y,e.redirect=!0===t.redirect,e.transparent=!0===t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID.toString()),t.clipRegionEnabled&&t.clipRegion&&(t.clipRegion=kn.fromGeometry(RA(t.clipRegion)),e.clipRegionEnabled=t.clipRegionEnabled,e.clipRegion=JSON.stringify(t.clipRegion));var r=this._crs;if(r.options&&r.options.origin)e.origin=JSON.stringify({x:r.options.origin[0],y:r.options.origin[1]});else if(r.projection&&r.projection.bounds){var i=r.projection.bounds,o=cL.a.point(i.min.x,i.max.y);e.origin=JSON.stringify({x:o.x,y:o.y})}return!1===t.overlapDisplayed?(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):e.overlapDisplayed=!0,!0===e.cacheEnabled&&t.tileversion&&(e.tileversion=t.tileversion.toString()),t.rasterfunction&&(e.rasterfunction=JSON.stringify(t.rasterfunction)),e},_appendCredential:function(t){var e,n,r=t;switch(this.options.serverType){case i.IPORTAL:e=(e=(n=lr.getToken(this._url))?new We(n,"token"):null)||((n=lr.getKey(this._url))?new We(n,"key"):null);break;case i.ONLINE:e=(n=lr.getKey(this._url))?new We(n,"key"):null;break;default:e=(n=lr.getToken(this._url))?new We(n,"token"):null}return e&&(r+="&"+e.getUrlParameters()),r}});cL.a.supermap.tiledMapLayer=QA;var $A=n(3),tI=n.n($A),eI={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}};cL.a.supermap.DefaultStyle=eI;var nI={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},rI={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},iI={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};function oI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cL.a.supermap.CartoStyleMap=nI,cL.a.supermap.ServerStyleMap=rI,cL.a.supermap.CompOpMap=iI;var sI=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.cartoCSS=null,this.mapUrl=t}var t,n,r;return t=e,(n=[{key:"pretreatedCartoCSS",value:function(t,e){e&&(t=this.processCharacters(t)),this.cartoCSS=this.cartoCSS||{};var n=new Hx(t).getShaders();if(n)for(var r=0;r<n.length;r++){var i=n[r].elements[0],o=n[r].attachment;this.cartoCSS[i.clean]=this.cartoCSS[i.clean]||{},this.cartoCSS[i.clean][o]=this.cartoCSS[i.clean][o]||[],this.cartoCSS[i.clean][o].push(n[r])}}},{key:"processCharacters",value:function(t){var o=t;if(o){o=(o=o.replace(/[@]/gi,"___")).replace(/\\#/gi,"#");var s={};return this.layersInfo&&Object.keys(this.layersInfo).sort().forEach(function(t){for(var e=t.replace(/[@#\s]/gi,"___"),n=t,r=Object.keys(s),i=r.length;-1<i;i--)if(-1<t.indexOf(r[i])){n=t.replace(r[i],s[r[i]]);break}n=n.replace(/[#]/gi,"#"),s[t]=e,o=o.replace(new RegExp(n,"g"),e)}),o=(o=o.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}}},{key:"pickShader",value:function(t){if(!this.cartoCSS)return null;var e=t.replace(/[@#\s]/gi,"___");return this.cartoCSS[e]}},{key:"getDefaultStyle",value:function(t){var e={},n=eI[t];for(var r in n){var i=n[r];e[r]=i}return e}},{key:"getStyleFromiPortalMarker",value:function(t){return 0==t.indexOf("./")?null:(0==t.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(t=t.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),cL.a.icon({iconUrl:t,iconSize:cL.a.point(48,43),iconAnchor:cL.a.point(24,43),popupAnchor:cL.a.point(0,-43)}))}},{key:"getStyleFromiPortalStyle",value:function(t,e,n){var r=n?JSON.parse(n):null,i={};if("Point"===e||"MultiPoint"===e){var o=r||t.pointStyle;return o.externalGraphic?0==o.externalGraphic.indexOf("./")?null:(0==o.externalGraphic.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(o.externalGraphic=o.externalGraphic.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),cL.a.icon({iconUrl:o.externalGraphic,iconSize:cL.a.point(o.graphicWidth,o.graphicHeight),iconAnchor:cL.a.point(-o.graphicXOffset,-o.graphicYOffset),popupAnchor:cL.a.point(0,-o.graphicHeight)})):(i.radius=o.pointRadius,i.color=o.strokeColor,i.opacity=o.strokeOpacity,i.lineCap=o.strokeLineCap,i.weight=o.strokeWidth,i.fillColor=o.fillColor,i.fillOpacity=o.fillOpacity,i.dashArray=this.dashStyle(o,1),i)}if("LineString"===e||"MultiLineString"===e||"Box"===e){var s=r||t.lineStyle;return i.color=s.strokeColor,i.opacity=s.strokeOpacity,i.fillOpacity=s.fillOpacity,i.lineCap=s.strokeLineCap,i.weight=s.strokeWidth,i.dashArray=this.dashStyle(s,1),i}if("Polygon"===e||"MultiPolygon"===e){var a=r||t.polygonStyle;return i.color=a.strokeColor,i.opacity=a.strokeOpacity,i.lineCap=a.strokeLineCap,i.weight=a.strokeWidth,i.fillColor=a.fillColor,i.fillOpacity=a.fillOpacity,i.dashArray=this.dashStyle(a,1),i}}},{key:"dashStyle",value:function(t,e){if(!t)return[];var n=t.strokeWidth*e,r=t.strokeDashstyle;switch(r){case"solid":return[];case"dot":return[1,4*n];case"dash":return[4*n,4*n];case"dashdot":return[4*n,4*n,1,4*n];case"longdash":return[8*n,4*n];case"longdashdot":return[8*n,4*n,1,4*n];default:return r?Et.isArray(r)?r:(r=ft.trim(r).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getValidStyleFromCarto",value:function(t,e,n,r,i){if(!n)return null;var o=r.type,s=r.properties.attributes||{},a=this.getDefaultStyle(o);i=void 0===i||i,s.FEATUREID=r.properties.id,s.SCALE=e;for(var l,u=nI[o],c=0,h=n.length;c<h;c++){var f=n[c],p=u[f.property],d=f.getValue(s,t,!0);if(null!==d&&p)if("fontSize"===p)i&&(d*=.8),l=d+"px",a.fontSize=l;else if("fontName"===p)a.fontName=d;else{if("globalCompositeOperation"===p){if(!(d=iI[d]))continue}else if(i&&"iconUrl"===p){d=(d=this.mapUrl+"/tileFeature/symbols/"+d.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"),a.iconUrl=d;continue}"weight"===p&&d<1&&(d=Math.ceil(d)),a[p]=d}}return a}},{key:"getValidStyleFromLayerInfo",value:function(t,e){var n=t.type,r=this.getDefaultStyle(n),i=e&&e.layerStyle;if(!i)return r;if("POINT"===n){var o=Math.ceil(i.markerSize*b.DOTS_PER_INCH*b.INCHES_PER_UNIT.mm)||8,s={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:o,picHeight:o,style:JSON.stringify(i)};return r.iconUrl=Et.urlAppend(this.mapUrl+"/symbol.png",Et.getParameterString(s)),r.iconSize=[o,o],r}if("TEXT"===n){if(i=t.properties.textStyle||e.layerStyle,r.fontWeight=i.bold?i.fontWeight:"normal",i.fontHeight){var a=i.fontHeight*b.DOTS_PER_INCH*b.INCHES_PER_UNIT.mm*.85;r.fontSize=a+"px",r.textHeight=a}if(i.fontName&&(r.fontFamily=i.fontName.indexOf("@")?i.fontName.replace(/@/g,""):i.fontName),i.align){var l=i.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");r.textAlign=l.toLowerCase()}return r.weight=i.outline?i.outlineWidth:0,i.backColor&&(r.color="rgba("+i.backColor.red+","+i.backColor.green+","+i.backColor.blue+",1)"),i.foreColor&&(r.fillColor="rgba("+i.foreColor.red+","+i.foreColor.green+","+i.foreColor.blue+",1)"),r.rotation=i.rotation||0,r}var u=7<i.fillSymbolID?0:i.fillSymbolID,c=5<i.lineSymbolID?0:i.lineSymbolID;for(var h in i){var f=rI[h];if(f){var p=f.leafletStyle;switch(f.type){case"number":var d=i[h];f.unit&&(d=d*b.DOTS_PER_INCH*b.INCHES_PER_UNIT[f.unit]*2.5),r[p]=d;break;case"color":var y=i[h],g=void 0,m=1;if("fillColor"===p)0!==u&&1!==u||(m=1-u,g="rgba("+y.red+","+y.green+","+y.blue+","+m+")");else if("color"===p){if(0===c||5===c)m=0===c?1:0;else{var v=[1,0];switch(c){case 1:v=[9.7,3.7];break;case 2:v=[3.7,3.7];break;case 3:v=[9.7,3.7,2.3,3.7];break;case 4:v=[9.7,3.7,2.3,3.7,2.3,3.7]}r.lineDasharray=v}g="rgba("+y.red+","+y.green+","+y.blue+","+m+")"}r[p]=g}}}return e.textField&&(r.textAlign="LEFT"),r}}])&&oI(t.prototype,n),r&&oI(t,r),e}();cL.a.supermap.CartoCSSToLeaflet=sI;function aI(t){return new lI(t)}var lI=cL.a.Class.extend({initialize:function(t){var e=(t=t||{}).latLng||t._latLng;this._latLng=cL.a.latLng(e.lat,e.lng),this._style=t.style||t._canvas,this.attributes=t.attributes,this.id=t.id?t.id:null,this.name=t.name?t.name:null},getId:function(){return this.id},setId:function(t){this.id=t},getName:function(){return this.name},setName:function(t){this.name=t},setLatLng:function(t){this._latLng=t},setCanvas:function(t){this._style=t},setAttributes:function(t){this.attributes=t},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this.attributes},setStyle:function(t){this._style=t},getStyle:function(){return this._style}});cL.a.supermap.graphic=aI;function uI(t,e){return new cI(t,e)}var cI=cL.a.Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t,e=this.geometry,n=[];if(e.toGeoJSON)return(t=e.toGeoJSON()).properties=this.attributes,(new Bn).read(t)[0];if(3===e.length)e=new ye(e[1],e[0],e[2]);else if(2===e.length)e=new ee(n[0],n[1]);else if(e instanceof cL.a.LatLng)e=new ee(e.lng,e.lat);else if(e instanceof cL.a.Point)e=new ee(e.x,e.y);else if(e instanceof cL.a.CircleMarker){var r=e.getLatLng();e=new ee(r.lng,r.lat)}return new sn(e,this.attributes)},reverseLatLngs:function(t){cL.a.Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]=[t[e].lng,t[e].lat];return t}});cL.a.supermap.themeFeature=uI;function hI(t,e){return new dI(t,e)}var fI=cL.a.Layer.extend({options:{alwaysMapCRS:!1,id:Et.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:EA.Common.attribution},initialize:function(t,e){cL.a.Util.setOptions(this,e),this.name=t,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new UT,this.movingOffset=[0,0]},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},onRemove:function(t){cL.a.DomUtil.remove(this.container),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var n=this;if(n.map=n._map=t,n._initContainer(),n.levelRenderer){var e=t.getSize();n.container.style.width=e.x+"px",n.container.style.height=e.y+"px",n._updateOpacity(),n.renderer=n.levelRenderer.init(n.container),n.renderer.clear(),n.features&&0<n.features.length&&n._reset(),n.addTFEvents(),n.mouseMoveHandler=function(t){var e=t.layerPoint;n.currentMousePosition=cL.a.point(e.x+n.movingOffset[0],e.y+n.movingOffset[1])},t.on("mousemove",n.mouseMoveHandler),n.update(t.getBounds())}else t.removeLayer(n)},addFeatures:function(){},redrawThematicFeatures:function(){},destroyFeatures:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t);for(var e=t.length-1;0<=e;e--)t[e].destroy()}},removeFeatures:function(t){var e=this;if(t&&0!==t.length){if(t===e.features)return e.removeAllFeatures();cL.a.Util.isArray(t)||(t=[t]);for(var n=[],r=t.length-1;0<=r;r--){var i=t[r],o=cL.a.Util.indexOf(e.features,i);-1!==o?e.features.splice(o,1):n.push(i)}for(var s=[],a=0,l=e.features.length;a<l;a++)i=e.features[a],s.push(i);e.features=[],e.addFeatures(s),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures());var u=0==n.length;e.fire("featuresremoved",{features:n,succeed:u})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(){for(var t=this.features.length,e=new Array(t),n=0;n<t;++n)e[n]=this.features[n];return e},getFeatureBy:function(t,e){var n=null;for(var r in this.features)if(this.features[r][t]===e){n=this.features[r];break}return n},getFeatureById:function(t){return this.getFeatureBy("id",t)},getFeaturesByAttribute:function(t,e){var n,r=[];for(var i in this.features)(n=this.features[i])&&n.attributes&&n.attributes[t]===e&&r.push(n);return r},update:function(t){var e=this._map.containerPointToLayerPoint([0,0]);cL.a.DomUtil.setPosition(this.container,e);var n=this;n.renderer&&n.redrawThematicFeatures(t),n.currentMousePosition&&(n.currentMousePosition=cL.a.point(n.currentMousePosition.x-n.movingOffset[0],n.currentMousePosition.y-n.movingOffset[1])),n.movingOffset=[0,0],n._zoom=n._map.getZoom(),n._center=n._map.getCenter()},setOpacity:function(t){t!==this.options.opacity&&(isNaN(t)||(this.options.opacity=t,this._updateOpacity()))},redraw:function(){return!!this.renderer&&(this._map?this.redrawThematicFeatures(this._map.getBounds()):this.redrawThematicFeatures(),!0)},on:function(t,e){return this.renderer?this.renderer.on(t,e):cL.a.Layer.prototype.on.call(this,t,e),this},off:function(t,e){return this.renderer?this.renderer.un(t,e):cL.a.Layer.prototype.off.call(this,t,e),this},fire:function(t,e,n){return this.renderer&&this.renderer.trigger(t,e),cL.a.Layer.prototype.fire.call(this,t,e,n),this},addTFEvents:function(){for(var t=this.TFEvents,e=t.length,n=0;n<e;n++)this.renderer.on(t[n][0],t[n][1])},getLocalXY:function(t){if(!this._map)return t;var e=t;cL.a.Util.isArray(t)&&(e=cL.a.point(t[0],t[1])),t instanceof cL.a.Point||(e=t instanceof ee||t instanceof ye?cL.a.point(t.x,t.y):cL.a.point(t.lon,t.lat));var n=this._map.latLngToAccurateContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):cL.a.latLng(e.y,e.x));return[n.x,n.y]},toiClientFeature:function(t){Et.isArray(t)||(t=[t]);for(var e=[],n=0;n<t.length;n++)if(t[n]instanceof cI)e.push(t[n].toFeature());else if(t[n]instanceof sn)e.push(t[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[n].type)){var r=new Bn;e=e.concat(r.read(t[n]))}else{if(!t[n].geometry||!t[n].geometry.parts)throw new Error("features[".concat(n,"]'s type is not be supported."));e.push(ab.fromJson(t[n]).toFeature())}return e},toFeature:function(t){return this.toiClientFeature(t)},_initContainer:function(){var t=this.getPane(),e="themeLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&cL.a.Browser.any3d?"animated":"hide");this.container=cL.a.DomUtil.create("div",e,t);var n=cL.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[n]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());cL.a.DomUtil.setTransform?cL.a.DomUtil.setTransform(this.container,n,e):this.container.style[cL.a.DomUtil.TRANSFORM]=cL.a.DomUtil.getTranslateString(n)+" scale("+e+")"},_updateOpacity:function(){Et.modifyDOMElement(this.container,null,null,null,null,null,null,this.options.opacity),null!==this._map&&this._map.fire("changelayer",{layer:this,property:"opacity"})},_reset:function(){var t=this._map.getBounds();this.update(t);var e=this._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);cL.a.DomUtil.setPosition(this.container,n),parseFloat(this.container.width)!==parseFloat(e.x)&&(this.container.width=e.x+"px"),parseFloat(this.container.height)!==parseFloat(e.y)&&(this.container.height=e.y+"px"),this.redraw()},_resize:function(){var t=this._map.getSize();this.container.style.width=t.x+"px",this.container.style.height=t.y+"px",this.renderer.resize()}}),pI=fI.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(t,e){fI.prototype.initialize.call(this,t,e),cL.a.Util.setOptions(this,e);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(t){this.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&(this._map?this.redrawThematicFeatures(this._map.getBounds()):this.redrawThematicFeatures())},removeFeatures:function(t){this.clearCache(),fI.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.clearCache(),fI.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(t){var e=this,n=e.renderer.getHoverOne(),r=null;if(n&&n.refDataID&&(r=n.refDataID),this.options.alwaysMapCRS&&t&&t instanceof cL.a.LatLngBounds){var i=this._map.options.crs;t=cL.a.bounds(i.project(t.getSouthWest()),i.project(t.getNorthEast()))}t=AA.toSuperMapBounds(t),e.renderer.clearAll();for(var o=e.features,s=e.cache,a=e.cacheFields,l=e._map.getZoom(),u=e.maxCacheCount,c=0,h=o.length;c<h;c++){var f=o[c],p=f.geometry.getBounds();if(!t||t.intersectsBounds(p)){var d=f.id+"_zoom_"+l.toString();if(s[d])s[d].updateAndAddShapes();else{var y=e.createThematicFeature(o[c]);if(!(y.getShapesCount()<1)&&(s[d]=y,a.push(d),a.length>u)){var g=a[0];a.splice(0,1),delete s[g]}}}}if(e.renderer.render(),r&&e.options.isHoverAble&&e.options.isMultiHover){var m=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(m)}},createThematicFeature:function(t){var e=this.getStyleByData(t);t.style&&this.isAllowFeatureStyle&&(e=Et.copyAttributesWithClip(t.style));var n={};n.nodesClipPixel=this.options.nodesClipPixel,n.isHoverAble=this.options.isHoverAble,n.isMultiHover=this.options.isMultiHover,n.isClickAble=this.options.isClickAble,n.highlightStyle=RC.transformStyle(this.highlightStyle);for(var r=new tT(t,this,RC.transformStyle(e),n),i=0;i<r.shapes.length;i++)this.renderer.addShape(r.shapes[i]);return r},redraw:function(){return this.clearCache(),fI.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(t){var e=[],n=this.renderer.getAllShapes();if(!t)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&t===o.refDataID&&e.push(o)}return e}}),dI=pI.extend({initialize:function(t,e){pI.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=t,n=Et.copyAttributesWithClip({},this.style),r=this.styleGroups,i=!1,o=null,s=this.styleGroups&&0<this.styleGroups.length;if(this.themeField&&s&&e.attributes){var a=this.themeField,l=e.attributes;for(var u in l)if(a===u){i=!0,o=l[u];break}}if(i)for(var c=0,h=r.length;c<h;c++)if(o.toString()===r[c].value.toString()){var f=r[c].style;n=Et.copyAttributesWithClip(n,f)}return n}});cL.a.supermap.uniqueThemeLayer=hI;function yI(t,e){return new gI(t,e)}var gI=pI.extend({initialize:function(t,e){pI.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=t,n=Et.copyAttributesWithClip({},this.style),r=this.styleGroups,i=!1,o=null,s=this.styleGroups&&0<this.styleGroups.length;if(this.themeField&&s&&e.attributes){var a=this.themeField,l=e.attributes;for(var u in l)if(a===u){i=!0,o=l[u];break}}if(i)for(var c=0,h=r.length;c<h;c++){if(c===h-1?o>=r[c].start&&o<=r[c].end:o>=r[c].start&&o<r[c].end){var f=r[c].style;n=Et.copyAttributesWithClip(n,f)}}return n}});cL.a.supermap.rangeThemeLayer=yI;function mI(t,e){return new vI(t,e)}var vI=pI.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(t,e){pI.prototype.initialize.call(this,t,e),cL.a.Util.setOptions(this,e),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0,this.labelFeatures=[]},onAdd:function(t){pI.prototype.onAdd.call(this,t),this.container.style.zIndex=200},redrawThematicFeatures:function(t){if(0<this.features.length&&0==this.labelFeatures.length)for(var e=this.setLabelsStyle(this.features),n=0,r=e.length;n<r;n++)this.labelFeatures.push(e[n]);this.features=this.getDrawnLabels(this.labelFeatures),pI.prototype.redrawThematicFeatures.call(this,t)},removeFeatures:function(t){this.labelFeatures=[],pI.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.labelFeatures=[],pI.prototype.removeAllFeatures.call(this,arguments)},getDrawnLabels:function(t){for(var e,n,r,i,o=[],s=[],a={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this._map,u=l.getSize(),c=l.getZoom(),h=0,f=t.length;h<f;h++){!(n=t[h]).isStyleChange&&void 0!==n.isStyleChange||(n=this.setStyle(n));var p=this.getLabelPxLocation(n);if(0<=p.x&&p.x<=u.x&&0<=p.y&&p.y<=u.y){if(-1<n.style.minZoomLevel&&c<=n.style.minZoomLevel)continue;if(-1<n.style.maxZoomLevel&&c>n.style.maxZoomLevel)continue;var d=null;d=n.isStyleChange?(n.isStyleChange=null,this.calculateLabelBounds(n,p)):n.geometry.bsInfo.w&&n.geometry.bsInfo.h?this.calculateLabelBounds2(n,p):this.calculateLabelBounds(n,p);var y=new Tt(0,u.y,u.x,0),g=d.length;if(this.options.isAvoid){var m=this.getAvoidInfo(y,d);if(m){if("left"===m.aspectW){n.style.labelXOffset+=m.offsetX;for(var v=0;v<g;v++)d[v].x+=m.offsetX}else if("right"===m.aspectW){n.style.labelXOffset+=-m.offsetX;for(var b=0;b<g;b++)d[b].x+=-m.offsetX}if("top"===m.aspectH){n.style.labelYOffset+=m.offsetY;for(var _=0;_<g;_++)d[_].y+=m.offsetY}else if("bottom"===m.aspectH){n.style.labelYOffset+=-m.offsetY;for(var w=0;w<g;w++)d[w].y+=-m.offsetY}n.isStyleChange=!0}}if(this.options.isOverLay){var S=!1;if(0!=h)for(var x=0;x<s.length;x++)if(this.isQuadrilateralOverLap(d,s[x])){S=!0;break}if(S)continue;s.push(d)}for(var E=[],O=0;O<g-1;O++)E.push(l.containerPointToLatLng(d[O]));var C=E[3],P=E[1],T=new Tt(C.lng,C.lat,P.lng,P.lat).getCenterLonLat(),M=new ye(T.lon,T.lat,n.attributes[this.themeField]);M.calculateBounds(),r=Et.cloneObject(n.style),i=Et.cloneObject(Et.copyAttributes(r,a)),(e=new sn(M,n.attributes,i)).id=n.id,e.fid=n.fid,o.push(e)}}return o},getStyleByData:function(t){var e=t;if(e.style=Et.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=Et.copyAttributes(e.style,this.style),this.themeField&&this.styleGroups&&e.attributes){var n=this.themeField,r=e.attributes,i=this.styleGroups,o=!1,s=null;for(var a in r)if(n===a){o=!0,s=r[a];break}if(o)for(var l=0,u=i.length;l<u;l++)if(s>=i[l].start&&s<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=Et.copyAttributes(e.style,c)}e.style.label=e.attributes[this.themeField]}return e.style},setLabelsStyle:function(t){for(var e,n=[],r=0,i=t.length;r<i;r++){var o=t[r];if("SuperMap.Geometry.GeoText"!==o.geometry.CLASS_NAME)return t;(o.geometry.bsInfo.w||o.geometry.bsInfo.h)&&(o.geometry.bsInfo.w=null,o.geometry.bsInfo.h=null,o.geometry.labelWTmp=null),(e=this.setStyle(o)).layer=this.layer,n.push(e)}return n},setStyle:function(t){var e=t;if(e.style=Et.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=Et.copyAttributes(e.style,this.style),this.groupField&&this.styleGroups&&e.attributes){var n=this.groupField,r=e.attributes,i=this.styleGroups,o=!1,s=null;for(var a in r)if(n===a){o=!0,s=r[a];break}if(o)for(var l=0,u=i.length;l<u;l++)if(s>=i[l].start&&s<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=Et.copyAttributes(e.style,c)}}return e.style.label=e.geometry.text,e},getLabelPxLocation:function(t){var e=t.geometry,n=t.style,r=e.getCentroid(),i=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(cL.a.point(r.x,r.y)):cL.a.latLng(r.y,r.x)),o=cL.a.point(i.x,i.y);if(n.labelXOffset||n.labelYOffset){var s=isNaN(n.labelXOffset)?0:n.labelXOffset,a=isNaN(n.labelYOffset)?0:n.labelYOffset,l=o.add(cL.a.point(s,-a));return cL.a.point(l.x,l.y)}return cL.a.point(o.x,o.y)},calculateLabelBounds:function(t,e){var n=t.geometry,r=null,i=null;if(0==this.getPxBoundsMode)r=n.getLabelPxBoundsByText(e,t.style);else{if(1!==this.getPxBoundsMode)return null;i=this.getLabelInfo(t.geometry.getCentroid(),t.style),r=n.getLabelPxBoundsByLabel(e,i.w,i.h,t.style)}var o=[];return o=t.style.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,e,t.style.labelRotation),n.bounds=new Tt(o[1].x,o[3].y,o[2].x,o[4].y),o},calculateLabelBounds2:function(t,e){var n,r,i,o,s,a=t.geometry.bsInfo,l=t.style,u=Et.cloneObject(e);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=a.w/2,u.y+=a.h/2;break;case"lm":u.x+=a.w/2;break;case"lb":u.x+=a.w/2,u.y-=a.h/2;break;case"ct":u.y+=a.h/2;break;case"cb":u.y-=a.h/2;break;case"rt":u.x-=a.w/2,u.y+=a.h/2;break;case"rm":u.x-=a.w/2;break;case"rb":u.x-=a.w/2,u.y-=a.h/2}r=u.x-a.w/2,i=u.y+a.h/2,s=l.fontStyle&&"italic"===l.fontStyle?u.x+a.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+a.w/2,o=u.y-a.h/2,n=new Tt(r,i,s,o);var c=[];return c=l.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,e,l.labelRotation),t.geometry.bounds=new Tt(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(t,e){var n={l:"left",r:"right",t:"top",b:"bottom"},r={l:0,r:-1,t:0,b:-1};e=Et.extend({fontColor:"#000000",labelAlign:"cm"},e);var i=this.getLocalXY(t),o=0;if(e.labelXOffset||e.labelYOffset){var s=isNaN(e.labelXOffset)?0:e.labelXOffset,a=isNaN(e.labelYOffset)?0:e.labelYOffset;i[0]+=s,i[1]-=a}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=e.fontColor,u.globalAlpha=e.fontOpacity||1;var c,h,f,p=[e.fontStyle?e.fontStyle:"normal","normal",e.fontWeight?e.fontWeight:"normal",e.fontSize?e.fontSize:"1em",e.fontFamily?e.fontFamily:"sans-serif"].join(" "),d=e.label.split("\n"),y=d.length;if(u.fillText){u.font=p,u.textAlign=n[e.labelAlign[0]]||"center",u.textBaseline=n[e.labelAlign[1]]||"middle",null==(c=r[e.labelAlign[1]])&&(c=-.5),h=u.measureText("Mg").height||u.measureText("xx").width,i[1]+=h*c*(y-1);for(var g=0;g<y;g++)o<(f=u.measureText(d[g]).width)&&(o=f)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=r[e.labelAlign[1]])&&(c=-.5),h=u.mozMeasureText("xx"),i[1]+=h*(1+c*y);for(var m=0;m<y;m++)o<(f=u.measureText(d[m]).width)&&(o=f)}var v={};return o?(v.w=o,v.h=e.fontSize,v.rows=d.length,v):null},rotationBounds:function(t,e,n){var r=cL.a.point(t.left,t.top),i=cL.a.point(t.right,t.top),o=cL.a.point(t.right,t.bottom),s=cL.a.point(t.left,t.bottom),a=[];a.push(this.getRotatedLocation(r.x,r.y,e.x,e.y,n)),a.push(this.getRotatedLocation(i.x,i.y,e.x,e.y,n)),a.push(this.getRotatedLocation(o.x,o.y,e.x,e.y,n)),a.push(this.getRotatedLocation(s.x,s.y,e.x,e.y,n));for(var l=[],u=0;u<a.length;u++)l.push({x:a[u].x,y:a[u].y});return l.push({x:a[0].x,y:a[0].y}),l},getRotatedLocation:function(t,e,n,r,i){var o,s,a={};return e=-e,r=-r,i=-i,o=(t-n)*Math.cos(i/180*Math.PI)-(e-r)*Math.sin(i/180*Math.PI)+n,s=(t-n)*Math.sin(i/180*Math.PI)+(e-r)*Math.cos(i/180*Math.PI)+r,a.x=o,a.y=-s,a},getAvoidInfo:function(o,t){if(5!==t.length)return null;for(var e=[{x:o.left,y:o.top},{x:o.right,y:o.top},{x:o.right,y:o.bottom},{x:o.left,y:o.bottom},{x:o.left,y:o.top}],n=!1,r=e.length,i=t.length,s=0,a=0,l="",u="",c=0;c<r-1;c++)for(var h=0;h<i-1;h++){"SuperMap.Geometry.Point"===Et.lineIntersection(e[c],e[c+1],t[h],t[h+1]).CLASS_NAME&&(f(t[h]),f(t[h+1]),n=!0)}return n?{aspectW:u,aspectH:l,offsetX:s,offsetY:a}:null;function f(t){if(!o.contains(t.x,t.y)){if(t.y<o.top){var e=Math.abs(o.top-t.y);a<e&&(a=e,l="top")}if(t.y>o.bottom){var n=Math.abs(t.y-o.bottom);a<n&&(a=n,l="bottom")}if(t.x<o.left){var r=Math.abs(o.left-t.x);s<r&&(s=r,u="left")}if(t.x>o.right){var i=Math.abs(t.x-o.right);s<i&&(s=i,u="right")}}}},isQuadrilateralOverLap:function(t,e){var n=t.length,r=e.length;if(5!==n||5!==r)return null;for(var i=!1,o=0;o<n;o++)if(this.isPointInPoly(t[o],e)){i=!0;break}for(var s=0;s<r;s++)if(this.isPointInPoly(e[s],t)){i=!0;break}for(var a=0;a<n-1&&!i;a++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===Et.lineIntersection(t[a],t[a+1],e[l],e[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(t,e){for(var n=!1,r=-1,i=e.length,o=i-1;++r<i;o=r)(e[r].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[r].y)&&t.x<(e[o].x-e[r].x)*(t.y-e[r].y)/(e[o].y-e[r].y)+e[r].x&&(n=!n);return n}});cL.a.supermap.labelThemeLayer=mI;function bI(t,e){return new _I(t,e)}var _I=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},getFeaturesByIDs:function(t,e,n){new Nf(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},getFeaturesByBounds:function(t,e,n){new zh(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},getFeaturesByBuffer:function(t,e,n){new nf(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},getFeaturesBySQL:function(t,e,n){new Hf(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},getFeaturesByGeometry:function(t,e,n){new mf(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},editFeatures:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var n=this.url,r=t.dataSourceName,i=t.dataSetName;new Ca(n+="/datasources/"+r+"/datasets/"+i,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync(this._processParams(t))}},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=t.toIndex?t.toIndex:-1,t.isUseBatch=null!=t.isUseBatch&&t.isUseBatch,t.bounds&&(t.bounds=AA.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry=RA(t.geometry)),t.editType&&(t.editType=t.editType.toLowerCase());var e=this;if(t.features){var n=[];cL.a.Util.isArray(t.features)?t.features.map(function(t){return n.push(e._createServerFeature(t)),t}):n.push(e._createServerFeature(t.features)),t.features=n}return t},_createServerFeature:function(t){var e,n={},r=[],i=[];for(var o in(e=t||{}).properties)r.push(o),i.push(e.properties[o]);return n.fieldNames=r,n.fieldValues=i,e.id&&(n.id=e.id),n.geometry=RA(e),n},_processFormat:function(t){return t||M.GEOJSON}});cL.a.supermap.featureService=bI;function wI(t,e){return new SI(t,e)}var SI=cL.a.Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(t,e){cL.a.Util.setOptions(this,e),this._latlng=t},setLatLng:function(t){return this._latlng=t,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._clickTolerance(),e=[t,t];this._pxBounds=new cL.a.Bounds(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._clickTolerance()}});cL.a.Canvas.include({_updateUnicode:function(t){if(this._drawing){var e={x:t._point.x,y:t._point.y},n=this._ctx,r=[t.options.fontStyle,"normal",t.options.fontWeight,t.options.fontSize,t.options.fontFamily].join(" "),i=t.options.label.replace(/^&#x/,""),o=(i=String.fromCharCode(parseInt(i,16))).split("\n"),s=o.length;if(n.fillStyle=t.options.fontColor,n.globalAlpha=1,0<=t.options.fontOpacity&&t.options.fontOpacity<1&&(n.globalAlpha=t.options.fontOpacity),n.fillText){n.font=r,n.textAlign=t.options.textAlign,n.textBaseline=t.options.textBaseline;var a=t.options.vfactor,l=n.measureText("Mg").height||n.measureText("xx").width;e.y+=l*a*(s-1);for(var u=0;u<s;u++)0!=t.options.labelRotation?(n.save(),n.translate(e.x,e.y),n.rotate(t.options.labelRotation*Math.PI/180),n.fillText(o[u],0,l*u),n.restore()):n.fillText(o[u],e.x,e.y)}else if(n.mozDrawText){n.mozTextStyle=r;var c=t.options.textAlign,h=t.options.vfactor,f=n.mozMeasureText("xx");e.y+=f*(1+h*s);for(var p=0;p<s;p++){var d=e.x+c*n.mozMeasureText(o[p]),y=e.y+p*f;n.translate(d,y),n.mozDrawText(o[p]),n.translate(-d,-y)}}}}}),cL.a.supermap.unicodeMarker=wI;function xI(t,e){return new EI(t,e)}var EI=cL.a.LayerGroup.extend({options:{map:"map",server:"https://www.supermapol.com",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:EA.Online.attribution},defaultFeatureLayerPopup:function(t){return t.feature.properties.attributes.title+":"+t.feature.properties.attributes.description},initialize:function(t,e){(t||e)&&(this._layers={},cL.a.setOptions(this,e),this.id=t,this.load(),this.cartoCSSToLeaflet=new sI)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var t=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(t+="?"+this.options.credentialKey+"="+this.options.credentialValue);var n=this;sr.get(t).then(function(t){return t.json()}).then(function(t){if(t){var e=t.layers;n.mapInfo=t,n.createLayersByJson(e)}})},addLayerWrapper:function(t,e,n){return e&&this.createMap(n),this.addLayer(t),t.labelLayer&&this.addLayer(t.labelLayer),this},createLayersByJson:function(t){if(cL.a.Util.isArray(t)&&0!==t.length){this.layers=[];for(var e=[],n=0;n<t.length;n++){var r=t[n];r._originIndex=n,"BASE_LAYER"===(r.layerType=r.layerType||"BASE_LAYER")?(r.isBaseLayer=!0,this.createLayer(r.type,r)):e.unshift(r)}for(;0<e.length;){var i=e.pop(),o=i.type,s=i.layerType=i.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==s&&(o=s),this.createLayer(o,i)}this.fire("maploaded",{map:this._map})}},createCRS:function(t,e,n,r,i){return t<0?new dL({bounds:i,origin:r,resolutions:n}):910112===t||910102===t?cL.a.CRS.BaiduCRS:(910111===t&&(t=3857),910101===t&&(t=4326),cL.a.Proj.CRS("EPSG:"+t,{origin:r,resolutions:n,bounds:i}))},createMap:function(t){var e=t.crs||cL.a.CRS.EPSG3857,n=cL.a.latLngBounds(e.unproject(t.bounds.min),e.unproject(t.bounds.max));this._map=cL.a.map(this.options.map,{center:n.getCenter(),maxZoom:t.maxZoom||22,minZoom:t.minZoom||0,zoom:t.zoom||0,crs:e,renderer:cL.a.canvas()}),e instanceof dL?this._map.setZoom(t.zoom?t.zoom+2:2,{maxZoom:t.maxZoom||22}):this._map.fitBounds(n,{maxZoom:t.maxZoom||22})},getResolutionsFromScales:function(t,e,n,r){for(var i=[],o=0;o<t.length;o++)i.push(cL.a.Util.GetResolutionFromScaleDpi(t[o],e,n,r));return i},createLayer:function(t,e){var n=e.prjCoordSys,r=n&&n.epsgCode||this.mapInfo.epsgCode,i=this.mapInfo.center||e.center,o=this.mapInfo.level||e.level,s=this.mapInfo.extent||e.bounds,a=e.scales,l=e.isBaseLayer,u=e.opacity,c=cL.a.bounds([s.leftBottom.x,s.leftBottom.y],[s.rightTop.x,s.rightTop.y]),h=e.bounds?cL.a.bounds([e.bounds.leftBottom.x,e.bounds.leftBottom.y],[e.bounds.rightTop.x,e.bounds.rightTop.y]):c;i=i||h.getCenter();var f,p=cL.a.point(h.min.x,h.max.y),d=a?this.getResolutionsFromScales(a,96,e.units):null,y=this.createCRS(r,n?n.type:"",d,p,h),g={bounds:c,center:cL.a.point(i.x,i.y),crs:y,zoom:o};switch(t){case"SUPERMAP_REST":f=QA(e.url,{transparent:!0,opacity:u});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":g.crs=4326===r?cL.a.CRS.TianDiTu_WGS84:cL.a.CRS.TianDiTu_Mercator,g.minZoom=1,g.zoom=1+g.zoom,f=this.createTiandituLayer(e);break;case"BAIDU":g.crs=cL.a.CRS.BaiduCRS,g.zoom=3+g.zoom,g.minZoom=3,f=UA();break;case"BING":break;case"WMS":f=this.createWmsLayer(e);break;case"WMTS":g.resolutions=this.getResolutionsFromScales(a,90.71446714322,e.units);var m=e.identifier,v=m.substring(m.indexOf("_")+1);f=JA(e.url,{layer:v,style:"default",tilematrixSet:m,format:"image/png"});break;case"CLOUD":g.crs=cL.a.CRS.EPSG3857,g.zoom=3+g.zoom,g.minZoom=3,f=qA(e.url,{opacity:u});break;case"MARKER_LAYER":f=this.createMarkersLayer(e,y);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==e.identifier||(f="THEME"==e.identifier?this.createThemeLayer(e):this.createVectorLayer(e,y));break;default:throw new Error("unSupported Layer Type")}f&&e.isVisible&&this.addLayerWrapper(f,l,g)},createTiandituLayer:function(t){var e=t.type.split("_")[1].toLowerCase(),n="OVERLAY_LAYER"===t.layerType;return new ZA({layerType:e,isLabel:n})},createMarkersLayer:function(t,n){var e=this,r=t.markers||[],i=cL.a.geoJSON(cL.a.Util.toGeoJSON(r),{pointToLayer:function(t,e){var n=new cL.a.Marker(e);return n.setStyle=function(t){t&&n.setIcon(t)},n},coordsToLatLng:function(t){var e=n.unproject(cL.a.point(t[0],t[1]));return new cL.a.LatLng(e.lat,e.lng,t[2])},style:function(t){return e.cartoCSSToLeaflet.getStyleFromiPortalMarker(t.properties.icon)}});return this.options.featureLayerPopupEnable&&i.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),i},createWmsLayer:function(t){var e=t.url,n=t.opacity,r=t.subLayers;return r&&"undefined"!==r&&"null"!==r||(r="0"),cL.a.tileLayer.wms(e,{layers:r,format:"image/png",transparent:!0,noWrap:!0,opacity:n})},createVectorLayer:function(t,n){function r(t){var e=n.unproject(cL.a.point(t[0],t[1]));return new cL.a.LatLng(e.lat,e.lng,t[2])}var i=this,o=t.style,s=t.opacity,a=this;if(!t.url){var e=cL.a.geoJSON(cL.a.Util.toGeoJSON(t.features),{pointToLayer:function(t,e){var n=new cL.a.Marker(e);return n.setStyle=function(t){t&&n.setIcon(t)},n},coordsToLatLng:r,style:function(t){var e=a.cartoCSSToLeaflet.getStyleFromiPortalStyle(o||{},t.geometry.type,t.properties.style);return e.dashArray&&0==e.dashArray.length&&(e.dashArray=null),e},opacity:s});return this.options.featureLayerPopupEnable&&e.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),e}for(var l=t.url,u=t.name,c=t.features,h=0;h<c.length;h++){var f=c[h];f.visible&&this.getFeaturesBySQL(l,u,f.name,"",M.GEOJSON,function(t){var e=cL.a.geoJSON(t.result,{pointToLayer:function(t,e){var n=new cL.a.Marker(e);return n.setStyle=function(t){t&&n.setIcon(t)},n},coordsToLatLng:r,style:function(t){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(o||{},t.geometry.type,t.properties.style)},opacity:s});i.options.featureLayerPopupEnable&&e.bindPopup(a.options.featureLayerPopup||a.defaultFeatureLayerPopup),i.addLayer(e)})}},getFeaturesBySQL:function(t,e,n,r,i,o){var s=new Ff({queryParameter:{name:n+"@"+e,attributeFilter:r=r||"SMID > 0"},datasetNames:[e+":"+n],fromIndex:0,toIndex:1e5});bI(t).getFeaturesBySQL(s,o,i)},createThemeLayer:function(t){var e,n=this,r=t.themeSettings&&JSON.parse(t.themeSettings),i=r.type;if(t.themeSettings=r,(e="HEAT"===i?this.createHeatLayer(t,r):"UNIQUE"===i?this.createUniqueLayer(t,r):"RANGE"===i?this.createRangeLayer(t,r):this.createBaseThemeLayer(t,r))&&(this.addFeature2ThemeLayer(t,e),e.on("add",function(t){n.registerThemeEvent(t.target)})),r&&r.labelField){var o=this.createLabelLayer(t,r);o.on("add",function(t){n.registerThemeEvent(t.target)}),e.labelLayer=o}return e},createBaseThemeLayer:function(t,e){var n=t.style,r=t.opacity,i=e.vectorType,o=n.pointStyle;o.fill="LINE"!==i;var s={};s.radius=o.pointRadius,s.color=o.strokeColor,s.opacity=o.strokeOpacity,s.lineCap=o.strokeLineCap,s.weight=o.strokeWidth,s.fillColor=o.fillColor,s.fillOpacity=o.fillOpacity;var a=function(t,e){return cL.a.circleMarker(e,s)};return o.unicode&&(a=function(t,e){return new SI(e,o)}),cL.a.geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:a,opacity:r})},createUniqueLayer:function(t,e){for(var n=t.title,r=e.field,i=[],o=e.settings,s=t.isVisible,a=t.opacity,l=e.vectorType,u=0;u<o.length;u++){var c={};c.value=o[u].value,c.style=o[u].style,i.push(c)}var h=new dI(n,{opacity:a,visibility:s});this.registerThemeEvent(h),h.style=t.style.pointStyle,h.style.fill="LINE"!==l,h.style.stroke=!0,h.themeField=r,h.styleGroups=i;var f=this;return h.on("click",function(t){if(t.target&&t.target.refDataID){var e=h.getFeatureById(t.target.refDataID);f.events.triggerEvent("uniquefeatureclicked",e,h)}}),h},createRangeLayer:function(t,e){var n=t.title,r=e.field,i=[],o=e.settings,s=t.isVisible,a=t.opacity,l=e.vectorType,u=t.style.pointStyle;u.fill="LINE"!==l;for(var c=0;c<o.length;c++){var h={};h.start=o[c].start,h.end=o[c].end,h.style=o[c].style,i.push(h)}var f=new gI(n,{visibility:s,opacity:a});return this.registerThemeEvent(f),f.style=t.style.pointStyle,f.style.stroke=!0,f.themeField=r,f.styleGroups=i,f},createLabelLayer:function(t,e){var n,r=t.title,i=e.labelField,o=e.settings,s=t.isVisible;n=!o||0<o.length?{fillColor:"#ffffff"}:o[0].style;var a=cL.a.Util.extend(new Wx,n);a.fontWeight="bold",a.fontSize="14px",a.labelRect=!0,a.strokeColor=a.fillColor,a.fontColor=e.labelColor,e.labelFont&&(a.fontFamily=e.labelFont);var l=new vI(r,{visibility:s,opacity:.7});return this.registerThemeEvent(l),l.style=a,l.themeField=i,l.styleGroups=[],l},createHeatLayer:function(t,e){for(var n,r=e.colors||["blue","cyan","lime","yellow","red"],i={},o=0,s=r.length,a=1;o<s;o++)i[a/s]=r[o],a++;var l=e.settings[0].radius;return"千米"!==e.heatUnit&&"km"!==e.heatUnit||(l=1e3*e.heatRadius),e.settings[0]&&e.settings[0].featureWeight&&(n=e.settings[0].featureWeight),cL.a.heatLayer([],{radius:l/2,minOpacity:t.opacity,gradient:i,blur:l/2,featureWeight:n})},addFeature2ThemeLayer:function(l,u){var c=this;if("FEATURE_LAYER"===l.layerType&&"THEME"===l.identifier){var h=this,t=!!l.datasourceName,e=l.cartoCSS;if(e)var f=this.getCartoCSS2Obj(e).needTransform,n=this.getCartoCSS2Obj(e).isAddFile;var r,i,o,s=l.url,a=l.credential,p=l.themeSettings,d=p.filter;if(n){var y=JSON.parse(l.datasourceName),g=this.getSQLFromFilter(d);if(s)this.getFeatureFromFileAdded(l,function(t){var e,n=[];if("EXCEL"===t.type||"CSV"===t.type)for(var r=0,i=(e=h.parseFeatureFromEXCEL.apply(h,[t.content.rows,t.content.colTitles,!1,y])).length;r<i;r++)0<tI()({attr:e[r].attributes},g).length&&n.push(e[r]);else for(var o=0,s=(e=h.parseFeatureFromJson(t.content)).length;o<s;o++)0<tI()({attr:e[o].attributes},g).length&&n.push(e[o]);var a=l.prjCoordSys&&l.prjCoordSys.epsgCode;f?h.changeFeatureLayerEpsgCode(a,"4326",u,n,function(t){T(t)}):T(n)},function(){});else{for(var m=[],v=l.features,b=0,_=v.length;b<_;b++){var w=v[b];if(0<tI()({attr:w.attributes},g).length){var S=w.geometry.points[0].x,x=w.geometry.points[0].y,E=new ee(S,x),O=new sn(E,w.attributes,w.style);m.push(O)}}T(m)}}else if(t){var C=l.datasourceName;o=(i=(r=l.subLayers&&JSON.parse(l.subLayers)).length&&0<r.length?r[0]:r)&&i.name,this.getFeaturesBySQL(l.url,C,o,p.filter,M.ISERVER,function(t){var e,n,r=t.result,i=[];if(r&&r.features){for(var o=0,s=(e=r.features).length;o<s;o++)n=ab.fromJson(e[o]).toFeature(),i.push(n);var a=l.prjCoordSys&&l.prjCoordSys.epsgCode;f?c.changeFeatureLayerEpsgCode(a,"4326",u,i,function(t){T(t)}):T(e)}})}else{o=(i=(r=l.subLayers&&JSON.parse(l.subLayers)).length&&0<r.length?r[0]:r)&&i.name;var P=l.prjCoordSys&&l.prjCoordSys.epsgCode;this.getFeaturesBySQL(s,a,o,d,M.ISERVER,function(t){f?h.changeFeatureLayerEpsgCode(P,"4326",u,t,function(t){T(t)}):T(t)})}}function T(t){if(u&&u.labelLayer instanceof vI&&h.addFeature2LabelLayer(u.labelLayer,t,l),cL.a.HeatLayer&&u instanceof cL.a.HeatLayer){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n].geometry;e[n]=cL.a.latLng(i.y,i.x),u.options.featureWeight&&(e[n]=[e[n].lat,e[n].lng,parseFloat(t[n].attributes[u.options.featureWeight])])}u.setLatLngs(e)}else u instanceof cL.a.GeoJSON?u.addData((new Bn).toGeoJSON(t)):u.addFeatures(t)}},addFeature2LabelLayer:function(t,e,n){if(e){for(var r,i,o=n.themeSettings,s=(o="string"==typeof o?JSON.parse(n.themeSettings):n.themeSettings).labelField,a=t.style,l=[],u=n.styleString&&JSON.parse(n.styleString),c=0;c<e.length;c++){i=this.getLabelLngLat(o.vectorType,e[c]),this.setLabelOffset(o.vectorType,u,e[c],a);var h=e[c].attributes;r=new cI([i.lat,i.lng,h[s]],h),l.push(r)}t.style=a,t.addFeatures(l)}},setLabelOffset:function(t,e,n,r){if("POINT"===t){var i=e.pointStyle.pointRadius||0,o=e.pointStyle.strokeWidth||0,s=parseInt(e.pointStyle.fontSize)||0;r.labelXOffset=0,r.labelYOffset=e.pointStyle.unicode?20+s:25+(i+o)}},getLabelLngLat:function(t,e){var n={};if("POINT"===t){var r=e.geometry;n.lng=r.x,n.lat=r.y}else if("LINE"===t){var i,o,s=e.geometry.components;if(s[0].x)i=s.length,o=parseInt(i/2),n.lng=s[o].x,n.lat=s[o].y;else{var a=s[0].components;i=a.length,o=parseInt(i/2),n.lng=a[o].x,n.lat=a[o].y}}else{var l=e.geometry.getCentroid();n.lng=l.x,n.lat=l.y}return n},changeFeatureLayerEpsgCode:function(t,e,n,r,o){var s,i,a=this,l=[];if(t&&e){if(r&&0<r.length){for(s=0,i=r.length;s<i;s++){var u=r[s].geometry.getVertices();l=l.concat(u)}t="EPSG:"+t,e="EPSG:"+e,a.coordsTransform(t,e,l,(c=r,function(t){var e=t.length;for(s=0;s<e;s++){var n=l[s],r=t[s];n.x=r.x,n.y=r.y,n.calculateBounds()}for(s=0,e=c.length;s<e;s++){var i=c[s].geometry;i.components&&a.calculateComponents(i.components),i.calculateBounds()}o&&o.call(a,c)}))}var c;return!0}},calculateComponents:function(t){if(t)if(t.components)this.calculateComponents(t.components);else for(var e=0,n=t.length;e<n;e++){var r=t[e];r.components&&this.calculateComponents(r.components),r.calculateBounds()}},coordsTransform:function(t,e,n,r){var i,o=this.SERVER_TYPE_MAP[t],s=this.SERVER_TYPE_MAP[e];if(t!==e&&o&&s){var a=this.SERVER_TYPE_MAP["EPSG:3857"],l=this.SERVER_TYPE_MAP["EPSG:4326"];if(o!==a&&o!==l||s!==a&&s!==l){var u=o+"_"+s;this.postTransform(u,n,r)}else this.projTransform(t,e,n,r)}else{if(n&&void 0!==n.length){i=[];for(var c=0,h=n.length;c<h;c++){var f={x:n[c].x,y:n[c].y};i.push(f)}}else i={x:n.x,y:n.y};r&&r.call(this,i)}},projTransform:function(t,e,n,r){var i;if(pA){if(n&&void 0!==n.length){i=[];for(var o=0,s=n.length;o<s;o++){var a=pA(t,e,[n[o].x,n[o].y]);i.push({x:a[0],y:a[1]})}}else i={x:(i=pA(t,e,[n.x,n.y]))[0],y:i[1]};r&&(this.fire("coordconvertsuccess",{newCoor:i}),r.call(this,i))}},postTransform:function(t,n,r){var i=this,e=[];if(!t)return r.call(this,null);if(n&&void 0!==n.length)for(var o=0,s=n.length;o<s;o++)e.push({x:n[o].x,y:n[o].y});else e=[{x:n.x,y:n.y}];if(0===e.length)return r.call(this,null);var a={convertType:t,points:e},l=this.server+"/apps/viewer/coordconvert.json";a=JSON.stringify(a);var u={};!Et.isInTheSameDomain(l)&&this.proxy&&(u.proxy=this.proxy),sr.post(l,a,u).then(function(t){return t.json()}).then(function(t){var e=t;n||void 0===n.length||(e=e[0]),i.fire("coordconvertsuccess",{newCoors:e}),r.call(i,e)}).catch(function(t){i.actived&&i.fire("coordconvertfailed",{err:t})})},getSQLFromFilter:function(t){return t?" *  where ("+(t=t.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<="))+")":" * where (1==1||1>=0)"},getAttributesObjFromTable:function(t,e){if(0!==t.length&&0!==e.length){for(var n=[],r=0;r<t.length;r++){for(var i={},o=0;o<e.length;o++)i[e[o]]=t[r][o];n.push(i)}return n}},parseFeatureFromEXCEL:function(t,e,n,r){for(var i=this.getAttributesObjFromTable(t,e),o=[],s=0,a=i.length;s<a;s++){var l=i[s][r.lon],u=i[s][r.lat];if(l&&u){l=parseFloat(l),u=parseFloat(u);var c,h=new ee(l,u);c=new(n?lI:sn)(h,i[s],null),o.push(c)}}return o},parseFeatureFromJson:function(t){var e=new Bn,n=e.read(t);if(null==n){var r=JSON.parse(t.replace(/'/,'"'));!r.isAnalyseResult&&"MapEditor"!==r.type&&"DataInsights"!==r.type&&"ISERVER"!==r.type||(r=r.data.recordsets[0].features),n=(e=new Bn).read(r)}for(var i=0,o=n.length;i<o;i++)n[i].attributes=n[i].attributes.properties||n[i].attributes;return n},getFeatureFromFileAdded:function(t,e,n,r){var i=r?t.url+"?currentPage=1&&pageSize=9999999":t.url;sr.get(i).then(function(t){return t.json()}).then(function(t){e&&e(t)}).catch(function(t){return n&&n(t)})},getCartoCSS2Obj:function(t){var e=!1;return{isAddFile:-1<t.indexOf("}")?(e=(t=JSON.parse(t)).needTransform,t.isAddFile):"needTransform"===t?!(e=!0):"true"===t,needTransform:e}},registerThemeEvent:function(n){var r=this;n.on("click",function(t){var e;n.map&&(r.selectedFeature&&(r.fire("featureunselected",{feature:r.selectedFeature}),r.selectedFeature=null),t.target&&t.target.refDataID&&(e=n.getFeatureById(t.target.refDataID)),e&&(r.selectedFeature=e,r.fire("featureselected",{feature:e})))}),n.on("mousemove",function(t){var e;n.map&&t.target&&t.target.refDataID&&(t.target&&t.target.refDataID&&(e=n.getFeatureById(t.target.refDataID)),e&&r.fire("featuremousemove",{feature:e}))})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}});cL.a.supermap.webmap=xI;function OI(t,e){return new CI(t,e)}var CI=CA.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(t,e){e=e||{},cL.a.setOptions(this,e),e.projection&&(this.options.prjCoordSys=e.projection),CA.prototype.initialize.call(this,t,e),this.dataFlow=new Ns(t,e),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(t){this.dataFlow.broadcast(t)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(t){this.fire(t.eventType||t.type,t)}});cL.a.supermap.dataFlowService=OI;var PI=n(6);function TI(t){return(TI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function LI(t,e){return!e||"object"!==TI(e)&&"function"!=typeof e?NI(t):e}function NI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kI(t,e,n){return(kI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AI(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function AI(t){return(AI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function II(t,e){return(II=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function RI(t,e,n){return new FI(t,e,n)}var jI=PI.baiduMapLayer?PI.baiduMapLayer.__proto__:Function,DI=function(){function s(t,e,n,r){var i;if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i=LI(this,AI(s).call(this,t,n,r)),!jI)return LI(i);var o=NI(i);return r=r||{},o.init(r),o.argCheck(r),i.canvasLayer=e,i.clickEvent=i.clickEvent.bind(NI(i)),i.mousemoveEvent=i.mousemoveEvent.bind(NI(i)),i._moveStartEvent=i.moveStartEvent.bind(NI(i)),i._moveEndEvent=i.moveEndEvent.bind(NI(i)),i._zoomStartEvent=i.zoomStartEvent.bind(NI(i)),i.bindEvent(),i}var t,e,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&II(t,e)}(s,jI),t=s,(e=[{key:"clickEvent",value:function(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio||1,r=t.layerPoint;kI(AI(s.prototype),"clickEvent",this).call(this,cL.a.point((r.x-e.x)/n,(r.y-e.y)/n),t)}},{key:"mousemoveEvent",value:function(t){var e=t.layerPoint;kI(AI(s.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"bindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"update",value:function(t){var e=t||{},n=e.data;n&&n.get&&(n=n.get()),null!=n&&this.dataSet.set(n),kI(AI(s.prototype),"update",this).call(this,{options:e.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(n){if(this.canvasLayer){var r=this,i=r.options.animation,t=this.getContext(),o=this.map;if(r.isEnabledTime()){if(void 0===n)return void this.clear(t);"2d"===this.context&&(t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore())}else this.clear(t);if("2d"===this.context)for(var e in r.options)t[e]=r.options[e];else t.clear(t.COLOR_BUFFER_BIT);if(!(r.options.minZoom&&o.getZoom()<r.options.minZoom||r.options.maxZoom&&o.getZoom()>r.options.maxZoom)){var s=o.getBounds(),a=s.getEast()-s.getWest(),l=s.getNorth()-s.getSouth(),u=o.getSize(),c=a/u.x,h=l/u.y,f=GA("DEGREE")*c,p=this.canvasLayer.getTopLeft(),d=o.latLngToAccurateContainerPoint(p),y={transferCoordinate:function(t){var e,n={x:(e="2d"===r.context?o.latLngToAccurateContainerPoint(cL.a.latLng(t[1],t[0])):{x:(t[0]-p.lng)/c,y:(p.lat-t[1])/h}).x-d.x,y:e.y-d.y};return[n.x,n.y]}};void 0!==n&&(y.filter=function(t){var e=i.trails||10;return n&&t.time>n-e&&t.time<n});var g=r.dataSet.get(y);this.processData(g);var m=o.latLngToContainerPoint(cL.a.latLng(0,0)),v={x:m.x-d.x,y:m.y-d.y};"m"===r.options.unit?(r.options.size&&(r.options._size=r.options.size/f),r.options.width&&(r.options._width=r.options.width/f),r.options.height&&(r.options._height=r.options.height/f)):(r.options._size=r.options.size,r.options._height=r.options.height,r.options._width=r.options.width),this.drawContext(t,g,r.options,v),r.options.updateCallback&&r.options.updateCallback(n)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}])&&MI(t.prototype,e),n&&MI(t,n),s}(),FI=cL.a.Layer.extend({options:{attributionPrefix:null,attribution:EA.MapV.attribution},initialize:function(t,e,n){n=n||{},this.dataSet=t||{},this.mapVOptions=e||{},this.render=this.render.bind(this),cL.a.Util.setOptions(this,n),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),cL.a.stamp(this)},onAdd:function(t){this._map=t;var e=this.getPane(),n=this.container=cL.a.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",e);n.appendChild(this.canvas);var r=t.getSize();n.style.width=r.x+"px",n.style.height=r.y+"px",this.renderer=new DI(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){cL.a.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,e){this.renderer.addData(t,e)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t,e=this._map;e&&(t=e.getBounds().getNorthWest());return t},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||600;var e="undefined"==typeof window?{}:window,n=this.devicePixelRatio=e.devicePixelRatio||1;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||t.getContext("2d").scale(n,n),t},_resize:function(){var t=this.canvas;if(t){var e=this._map,n=e.getSize();t.width=n.x,t.height=n.y,t.style.width=n.x+"px",t.style.height=n.y+"px";var r=e.getBounds(),i=e.latLngToLayerPoint(r.getNorthWest());cL.a.DomUtil.setPosition(t,i)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}});cL.a.supermap.mapVLayer=RI;function BI(t,e){return new zI(t,e)}var GI=FI.extend({initialize:function(t,e){e=e||{},cL.a.Util.setOptions(this,e),this.data=[],this.mapVOptions={draw:"simple"},FI.prototype.initialize.call(this,new window.mapv.DataSet([]),this.mapVOptions,e),this.idCache={},this.url=t,this._last=new Date,this._imageCache={}},onMessageSuccessed:function(t){var e=this,n=t.featureResult.properties.id,r=t.featureResult.geometry,i={geometry:t.featureResult.geometry};if("Point"===r.type&&this.options.pointToLayer){var o=this.options.pointToLayer(t.featureResult,cL.a.latLng(r.coordinates[1],r.coordinates[0]));if(o instanceof cL.a.Marker){this.mapVOptions.draw="icon";var s=o.options.icon,a=s._getIconUrl("icon"),l=s.options.iconSize?s.options.iconSize[0]:null,u=s.options.iconSize?s.options.iconSize[1]:null,c="".concat(a,"_").concat(l,"_").concat(u),h=this._imageCache[c];h||(h=s.createIcon(),(this._imageCache[c]=h).onload=function(){e.update({data:e.data,options:e.mapVOptions})}),i.icon=h,(s.options.iconSize||h.style.height)&&(this.mapVOptions.offset={x:0,y:-(s.options.iconSize[1]||h.style.height)/2}),this.options.deg&&(i.deg=this.options.deg,"function"==typeof i.deg&&this.idCache[n]&&this.data[this.idCache[n]]&&(i.deg=i.deg(t.featureResult,cL.a.latLng(r.coordinates[1],r.coordinates[0]),this.data[this.idCache[n]])))}if(o instanceof cL.a.CircleMarker){this.mapVOptions.draw="simple";var f=this._toMapvStyle(o);for(var p in f)f.hasOwnProperty(p)&&(i[p]=f[p])}}else if(this.options.style){var d=this._toMapvStyle(this.options.style(t.featureResult));for(var y in d)d.hasOwnProperty(y)&&(i[y]=d[y])}null==this.idCache[n]?(this.data.push(i),this.idCache[n]=this.data.length-1):this.data[this.idCache[n]]=i,200<new Date-this._last&&(this._last=new Date,this.update({data:this.data,options:this.mapVOptions}))},_toMapvStyle:function(t){var e={draw:"simple"};return e.strokeStyle=t.color,e.lineWidth=t.width,e.globalAlpha=t.fillOpacity||t.opacity,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.fillStyle=t.fillColor,e.size=t.radius,e}}),UI=cL.a.GeoJSON.extend({initialize:function(t,n){(n=n||{}).style&&!n.pointToLayer&&(n.pointToLayer=function(t,e){return cL.a.circleMarker(e,n.style())}),cL.a.Util.setOptions(this,n),this._layers={},cL.a.stamp(this),this.url=t,this.idCache={}},onMessageSuccessed:function(t){var e=t.featureResult,n=t.featureResult.properties[this.options.idField],r=null;void 0!==n&&this.idCache[n]?(r=this.getLayer(this.idCache[n]),this._updateLayerData(r,e)):((r=cL.a.GeoJSON.geometryToLayer(e,this.options)).feature=cL.a.GeoJSON.asFeature(e),this.addLayer(r),void 0!==n&&(this.idCache[n]=this.getLayerId(r))),this.options.onEachFeature&&this.options.onEachFeature(e,r)},_updateLayerData:function(t,e){e.properties&&(t.feature.properties=e.properties);var n=[];switch(e.geometry.type){case"Point":n=cL.a.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(n);break;case"LineString":n=cL.a.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0),t.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=cL.a.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1),t.setLatLngs(n);break;case"MultiPolygon":n=cL.a.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2),t.setLatLngs(n)}}}),zI=cL.a.LayerGroup.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id",render:"normal"},initialize:function(t,e){e=e||{},cL.a.Util.setOptions(this,e),this.url=t,this._layers={},this.dataService=new CI(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField})},onAdd:function(t){var e=this;this.dataService.initSubscribe(),this.dataService.on("subscribeSocketConnected",function(t){return e.fire("subscribesucceeded",t)}),this.dataService.on("subscribeSocketError",function(t){return e.fire("subscribefailed",t)}),this.dataService.on("messageSucceeded",function(t){return e._onMessageSuccessed(t)}),this.dataService.on("setFilterParamSucceeded",function(t){return e.fire("setfilterparamsucceeded",t)}),"mapv"===this.options.render?this.addLayer(new GI(this.url,this.options)):this.addLayer(new UI(this.url,this.options)),cL.a.LayerGroup.prototype.onAdd.call(this,t)},onRemove:function(t){cL.a.LayerGroup.prototype.onRemove.call(this,t),this.dataService&&this.dataService.unSubscribe()},setExcludeField:function(t){return this.dataService.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataService.setGeometry(t),this.options.geometry=t,this},_onMessageSuccessed:function(e){var n=this;this.getLayers().map(function(t){return t.onMessageSuccessed&&(t.onMessageSuccessed(e),n.fire("dataupdated",{layer:t,data:e.featureResult})),t})}});cL.a.supermap.dataFlowLayer=BI;var qI=cL.a.Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,_echartsOptions:null,options:{attribution:EA.ECharts.attribution,loadWhileAnimating:!1},initialize:function(t,e){cL.a.Util.setOptions(this,e),this.setOption(t)},setOption:function(t,e,n){var r=t.baseOption||t;r.LeafletMap=r.LeafletMap||{roam:!0},r.animation=!0===r.animation,this._echartsOptions=t,this._ec&&this._ec.setOption(t,e,n)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(t){this._map=t,this._initEchartsContainer(),this._ec=XT.a.init(this._echartsContainer),this._ec.leafletMap=t;var f=this;t.on("zoomstart",function(){f._disableEchartsContainer()}),f.options.loadWhileAnimating||t.on("movestart",function(){f._disableEchartsContainer()}),XT.a.registerAction({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},function(t){}),XT.a.registerCoordinateSystem("leaflet",VI),XT.a.extendComponentModel({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),XT.a.extendComponentView({type:"LeafletMap",render:function(i,t,o){var s=!0,e=t.scheduler.ecInstance.leafletMap,a=o.getZr().painter.getViewportRoot(),n=e.options.zoomAnimation&&cL.a.Browser.any3d;a.className=" leaflet-layer leaflet-zoom-"+(n?"animated":"hide")+" echarts-layer";var r=cL.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[r]="50% 50%";function l(){if(!s){var t,e=f._map.containerPointToLayerPoint([0,0]),n=[e.x||0,e.y||0];if(a.style.left=n[0]+"px",a.style.top=n[1]+"px",!f.options.loadWhileAnimating){for(var r in c)c.hasOwnProperty(r)&&c[r]&&((t=c[r].ctx)&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height));f._enableEchartsContainer()}u.setMapOffset(n),i.__mapOffset=n,o.dispatchAction({type:"LeafletMapLayout"})}}var u=i.coordinateSystem,c=o.getZr().painter.getLayers();function h(){s||(o.dispatchAction({type:"LeafletMapLayout"}),f._enableEchartsContainer())}f._oldMoveHandler&&e.off(f.options.loadWhileAnimating?"move":"moveend",f._oldMoveHandler),f._oldZoomEndHandler&&e.off("zoomend",f._oldZoomEndHandler),e.on(f.options.loadWhileAnimating?"move":"moveend",l),e.on("zoomend",h),f._oldMoveHandler=l,f._oldZoomEndHandler=h,s=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.clear(),this._ec.dispose(),delete this._ec,cL.a.DomUtil.remove(this._echartsContainer),this._oldZoomEndHandler&&(this._map.off("zoomend",this._oldZoomEndHandler),this._oldZoomEndHandler=null),this._oldMoveHandler&&(this._map.off(this.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldMoveHandler=null),this._resizeHandler&&(this._map.off("resize",this._resizeHandler),this._resizeHandler=null),delete this._map},_initEchartsContainer:function(){var t=this._map.getSize(),e=document.createElement("div");e.style.position="absolute",e.style.height=t.y+"px",e.style.width=t.x+"px",e.style.zIndex=10,this._echartsContainer=e,this.getPane().appendChild(this._echartsContainer);var n=this;function r(t){var e=t.newSize;n._echartsContainer.style.width=e.x+"px",n._echartsContainer.style.height=e.y+"px",n._ec.resize()}this._map.on("resize",r),this._resizeHandler=r}});function VI(t){this._LeafletMap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0]}VI.prototype.dimensions=["lng","lat"],VI.prototype.setMapOffset=function(t){this._mapOffset=t},VI.prototype.getBMap=function(){return this._LeafletMap},VI.prototype.prepareCustoms=function(){var t=XT.a.util,e=this.getViewRect();return{coordSys:{type:"leaflet",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(function(o,s){return s=s||[0,0],t.map([0,1],function(t){var e=s[t],n=o[t]/2,r=[],i=[];return r[t]=e-n,i[t]=e+n,r[1-t]=i[1-t]=s[1-t],Math.abs(this.dataToPoint(r)[t]-this.dataToPoint(i)[t])},this)},this)}}},VI.prototype.dataToPoint=function(t){null===t[1]&&(t[1]=cL.a.CRS.EPSG3857.projection.MAX_LATITUDE);var e=this._LeafletMap.latLngToLayerPoint([t[1],t[0]]),n=this._mapOffset;return[e.x-n[0],e.y-n[1]]},VI.prototype.fixLat=function(t){return 90<=t?89.99999999999999:t<=-90?-89.99999999999999:t},VI.prototype.pointToData=function(t){var e=this._mapOffset,n=this._LeafletMap.layerPointToLatLng([t[0]+e[0],t[1]+e[1]]);return[n.lng,n.lat]},VI.prototype.getViewRect=function(){var t=this._LeafletMap.getSize();return new XT.a.graphic.BoundingRect(0,0,t.x,t.y)},VI.prototype.getRoamTransform=function(){return XT.a.matrix.create()},VI.dimensions=VI.prototype.dimensions,VI.create=function(t){var e,n=t.scheduler.ecInstance.leafletMap;t.eachComponent("LeafletMap",function(t){e=e||new VI(n),t.coordinateSystem=e,t.coordinateSystem.setMapOffset(t.__mapOffset||[0,0])}),t.eachSeries(function(t){t.get("coordinateSystem")&&"leaflet"!==t.get("coordinateSystem")||(e=e||new VI(n),t.coordinateSystem=e,t.animation=!0===t.animation)})};function HI(t,e){return new qI(t,e)}function WI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cL.a.supermap.echartsLayer=HI;var JI=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"supportWebGL",value:function(){return YI("webgl")}},{key:"supportWebGL2",value:function(){return YI("webgl2")}},{key:"supportCanvas",value:function(){return YI("2d")}}],(n=null)&&WI(e.prototype,n),r&&WI(e,r),t}();function YI(t){var e=document.createElement("canvas");return e&&e.getContext(t)}function XI(t){return new ZI(t)}var ZI=cL.a.Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1,strokeWidth:1},initialize:function(t){t=t||{},cL.a.Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var e=void 0===this.options.strokeWidth?1:this.options.strokeWidth;this.options.width=2*(this.options.radius+e)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(t,e,n,r,i,o){i=i/180*Math.PI,o=o/180*Math.PI,t.moveTo(e,n),t.lineTo(e+r*Math.cos(i),n+r*Math.sin(i)),t.arc(e,n,r,i,o),t.lineTo(e,n)},_initStyle:function(){var t=0,e=this.options,n=e.angle;if(e.spaceAngle=360/e.count-e.angle,!(e.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[e.width/2,e.width/2];for(var r=0;r<e.count;r++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],e.radius,t,n),n=(t=n+e.spaceAngle)+e.angle;this._fillStroke()}},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}});cL.a.supermap.cloverStyle=XI;function QI(t){return new KI(t)}var KI=cL.a.Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(t){t=t||{},cL.a.Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}});cL.a.supermap.circleStyle=QI;function $I(t){return new tR(t)}var tR=cL.a.Class.extend({options:{img:null,origin:[0,0],anchor:null,size:null},initialize:function(t){t=t||{},cL.a.Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}});cL.a.supermap.imageStyle=$I;var eR=cL.a.Util.falseFn,nR=cL.a.Class.extend({initialize:function(t,e){this.layer=t,e=e||{},cL.a.Util.setOptions(this,e)},getRenderer:function(){return this.options.renderer},update:function(){this.getRenderer()._clear(),this.getRenderer()._draw()},_handleClick:function(t){var e=this.layer,n=e._map,r=e._getGraphicsInBounds();if(t.target=null,r)for(var i=r.length-1;0<=i;i--){var o=void 0,s=void 0,a=n.latLngToLayerPoint(r[i].getLatLng()),l=r[i].getStyle();if(!l&&this.defaultStyle&&(l=this.defaultStyle),l.img){var u=l.img.width,c=l.img.height;l.size&&l.size[0]&&l.size[1]&&(u=l.size[0],c=l.size[1]);var h=l.anchor||[u/2,c/2];o=cL.a.point(a.x-h[0],a.y-h[1]),s=cL.a.point(o.x+u,o.y+c)}else o=cL.a.point(a.x-l.width/2,a.y-l.height/2),s=cL.a.point(a.x+l.width/2,a.y+l.height/2);if(cL.a.bounds(o,s).contains(n.latLngToLayerPoint(t.latlng)))return this.layer._renderer._ctx.canvas.style.cursor="pointer",t.target=r[i],void("click"===t.type&&e.options.onClick&&e.options.onClick.call(e,r[i],t));this.layer._renderer._ctx.canvas.style.cursor="auto"}},_clearBuffer:eR});cL.a.Canvas.include({drawGraphics:function(t,n){var r=this;r._drawing&&t.forEach(function(t){var e=t.getStyle();!e&&n&&(e=n),e.img?r._drawImage.call(r,r._ctx,e,t.getLatLng()):r._drawCanvas.call(r,r._ctx,e,t.getLatLng())})},_drawCanvas:function(t,e,n){var r=e,i=this._map.latLngToLayerPoint(n),o=i.x-r.width/2,s=i.y-r.height/2,a=r.width,l=r.height;t.drawImage(r,o,s,a,l)},_drawImage:function(t,e,n){var r,i;if(e.size){var o=e.size;r=o[0],i=o[1]}else r=e.img.width,i=e.img.height;var s=this._coordinateToPoint(n),a=cL.a.point(s),l=cL.a.point(e.anchor||[r/2,i/2]);s=[a.x-l.x,a.y-l.y],t.drawImage(e.img,s[0],s[1],r,i)},_coordinateToPoint:function(t){if(!this._map)return t;var e=t;cL.a.Util.isArray(t)?e=cL.a.latLng(t[0],t[1]):t instanceof cL.a.LatLng&&(e=cL.a.latLng(t.lat,t.lng));var n=this._map.latLngToLayerPoint(e);return[n.x,n.y]}});function rR(t,e){return new uR(t,e)}var iR=cL.a.Util.falseFn,oR=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<e.length;n++){var r=e[n];if(void 0!==t.style[r])return r}return e[0]}(),sR=cL.a.Class.extend({initialize:function(t,e){this.layer=t;var n=e||{};cL.a.Util.setOptions(this,n),this.options.radius=this._pixelToMeter(this.options.radius),this._initContainer()},getRenderer:function(){return this},update:function(t){t&&-1<t.length&&(this._data=t),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var e=this._getLayerState();e.data=this._data||[],this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(e)},drawGraphics:function(t){this._clearBuffer();var e=this.layer._map.getSize();this._container.width!==e.x&&(this._container.width=e.x),this._container.height!==e.y&&(this._container.height=e.y);var n=this.layer._map.getPanes().mapPane._leaflet_pos;this._container.style[oR]="translate("+-Math.round(n.x)+"px,"+-Math.round(n.y)+"px)",this._data=t||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=cL.a.DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(t,e){var n=cL.a.DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return n.oncontextmenu=cL.a.Util.falseFn,n.width=t,n.height=e,n.style.width=t+"px",n.style.height=e+"px",n},_pixelToMeter:function(t){var e=this.layer._map.getBounds();return t*((e.getEast()-e.getWest())/this.layer._map.getSize().x*(6378137*Math.PI/180))},_createInnerRender:function(){var r=this,t=this._getLayerState(),e=t.color,n=t.radius,i=t.opacity,o=t.highlightColor,s=t.radiusScale,a=t.radiusMinPixels,l=t.radiusMaxPixels,u=t.strokeWidth,c=t.outline,h={id:"scatter-plot",data:r._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:e,opacity:i,radius:n,radiusScale:s,highlightColor:o,radiusMinPixels:a,radiusMaxPixels:l,strokeWidth:u,outline:c,getPosition:function(t){if(!t)return[0,0,0];var e=t.getLatLng();return e&&[e.lng,e.lat,0]},getColor:function(t){var e=r._getLayerDefaultStyle(),n=t&&t.options;return n&&n.color||e.color},getRadius:function(t){var e=r._getLayerDefaultStyle(),n=t&&t.getStyle();return n&&n.radius||e.radius},updateTriggers:{getColor:[e],getRadius:[n]}},f=this;this.options.onClick&&(h.onClick=function(){f._container.style.cursor="pointer",f.options.onClick.apply(f,arguments)}),this.options.onHover&&(h.onHover=function(){f._container.style.cursor="pointer",f.options.onHover.apply(f,arguments)}),r._renderLayer=new window.DeckGL.ScatterplotLayer(h)},_getLayerDefaultStyle:function(){if(this._layerDefaultStyleCache)return this._layerDefaultStyleCache;var t=this.layer.options,e=t.color,n=t.opacity,r=t.radius,i=t.radiusScale,o=t.radiusMinPixels,s=t.radiusMaxPixels,a=t.strokeWidth,l=t.outline;return r=this._pixelToMeter(r),this._layerDefaultStyleCache={color:e,opacity:n,radius:r,radiusScale:i,radiusMinPixels:o,radiusMaxPixels:s,strokeWidth:a,outline:l},this._layerDefaultStyleCache},_getLayerState:function(){var t=this.layer.getState();return t.zoom=t.zoom-1,t},_draw:function(){var t=this._getLayerState();this._refreshData(),t.data=this._data||[];var e={};for(var n in t)e[n]=t[n];this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),e.layers=[this._renderLayer],e.canvas=this._container,e.onBeforeRender=this._onBeforeRender.bind(this),e.onAfterRender=this._onAfterRender.bind(this),this.deckGL?this.deckGL.setProps(e):this.deckGL=new window.DeckGL.experimental.DeckGLJS(e)},_clearBuffer:function(){if(this.deckGL){var t=this.deckGL.layerManager;t&&t.context.gl.clear(t.context.gl.COLOR_BUFFER_BIT)}return this},_refreshData:function(){var t=this._data||[],e=cL.a.Util.isArray(t)?[].concat(t):[t];this._renderLayer.props.data||(this._renderLayer.props.data=[]);for(var n=this._renderLayer.props.data.length=0;n<e.length;n++)this._renderLayer.props.data.push(e[n]);this._data=this._renderLayer.props.data},_handleClick:iR,_onBeforeRender:iR,_onAfterRender:iR,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:iR,_addPath:iR}),aR=["canvas","webgl"],lR={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},uR=cL.a.Path.extend({initialize:function(t,e){this.graphics=[].concat(t);var n=e||{};n.pane="overlayPane",cL.a.Util.setOptions(this,n),this.options.render=this.options.render||aR[0],JI.supportWebGL2()||(this.options.render=aR[0]),this.on("click mousemove dblclick mousedown mouseup mouseout contextmenu",this._handleClick,this)},getEvents:function(){return{resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)}},onAdd:function(t){this._map=t,this.defaultStyle=this._getDefaultStyle(this.options),this._renderer=this._createRenderer(),this._container=this._renderer._container,this.addInteractiveTarget(this._container),cL.a.Path.prototype.onAdd.call(this)},onRemove:function(){this.off("click mousemove dblclick mousedown mouseup contextmenu",this._handleClick,this),this._renderer._removePath(this)},setGraphics:function(t){this.graphics=this.graphics||[],this.graphics.length=0;var e=cL.a.Util.isArray(t)?[].concat(t):[t];this.graphics=[].concat(e),this.update()},addGraphics:function(t){this.graphics=this.graphics||[];var e=cL.a.Util.isArray(t)?[].concat(t):[t];this.graphics=this.graphics.concat(e),this.update()},getGraphicBy:function(t,e){var n=null;for(var r in this.graphics)if(this.graphics[r][t]===e){n=this.graphics[r];break}return n},getGraphicById:function(t){return this.getGraphicBy("id",t)},getGraphicsByAttribute:function(t,e){var n,r=[];for(var i in this.graphics)(n=this.graphics[i])&&n.attributes&&n.attributes[t]===e&&r.push(n);return r},removeGraphics:function(t){var e=0<arguments.length&&void 0!==t?t:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,void this.update();Et.isArray(e)||(e=[e]);for(var n=e.length-1;0<=n;n--){var r=e[n],i=Et.indexOf(this.graphics,r);-1!==i&&this.graphics.splice(i,1)}this.update()},setStyle:function(t){var e=this.options,n={color:e.color,radius:e.radius,opacity:e.opacity,highlightColor:e.highlightColor,radiusScale:e.radiusScale,radiusMinPixels:e.radiusMinPixels,radiusMaxPixels:e.radiusMaxPixels,strokeWidth:e.strokeWidth,outline:e.outline};this.options=cL.a.Util.extend(this.options,n,t),this.defaultStyle=this._getDefaultStyle(this.options),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},getRenderer:function(){return this._renderer},getState:function(){var t=this._map,e=t.getSize().x,n=t.getSize().y,r=t.getCenter(),i={longitude:r.lng,latitude:r.lat,zoom:t.getZoom(),maxZoom:t.getMaxZoom(),pitch:0,bearing:0},o={};for(var s in i)o[s]=i[s];o.width=e,o.height=n;var a=this.options;return o.color=a.color,o.radius=a.radius,o.opacity=a.opacity,o.highlightColor=a.highlightColor,o.radiusScale=a.radiusScale,o.radiusMinPixels=a.radiusMinPixels,o.radiusMaxPixels=a.radiusMaxPixels,o.strokeWidth=a.strokeWidth,o.outline=a.outline,o},_resize:function(){var t=this._map.getSize();this._container.width=t.x,this._container.height=t.y,this._container.style.width=t.x+"px",this._container.style.height=t.y+"px";var e=this._map.containerPointToLayerPoint([0,0]);cL.a.DomUtil.setPosition(this._container,e),this._update()},_moveEnd:function(){this._layerRenderer instanceof sR&&this._update()},_createRenderer:function(){var t,e=this._map,n=e.getSize().x,r=e.getSize().y;if(this.options.render===aR[0])t=new nR(this,{width:n,height:r,renderer:e.getRenderer(this)});else{var i=cL.a.Util.setOptions({},lR),o=cL.a.Util.setOptions({options:i},this.options);(o=cL.a.Util.setOptions(this,o)).container=e.getPane("overlayPane"),o.width=n,o.height=r,t=new sR(this,o)}return t.defaultStyle=this.defaultStyle,this._layerRenderer=t,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){var t=this._getGraphicsInBounds();this._renderer.drawGraphics(t,this.defaultStyle)},_project:function(){var i=this;i._getGraphicsInBounds().map(function(t){var e=i._map.latLngToLayerPoint(t.getLatLng()),n=i._clickTolerance(),r=[t._anchor+n,t._anchor+n];return t._pxBounds=new cL.a.Bounds(e.subtract(r),e.add(r)),t}),i._pxBounds=cL.a.bounds(cL.a.point(0,0),cL.a.point(this._container.width,this._container.height))},_getDefaultStyle:function(t){var e={};if(t.color){e.fill=!0;var n=this.toRGBA(t.color);e.color=n,e.fillColor=n}return t.opacity&&(e.opacity=t.opacity,e.fillOpacity=t.opacity),t.radius&&(e.radius=t.radius),t.strokeWidth&&(e.weight=t.strokeWidth),t.outline&&(e.stroke=t.outline),new KI(e).getStyle()},toRGBA:function(t){return"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat((t[3]||255)/255,")")},_getGraphicsInBounds:function(){var e=[];if(this._map){var n=this._map.getBounds();return this.graphics.map(function(t){return n.contains(t.getLatLng())&&e.push(t),t}),e}},_handleClick:function(t){this._layerRenderer._handleClick(t)},beforeAdd:cL.a.Util.falseFn,_containsPoint:cL.a.Util.falseFn});cL.a.supermap.graphicLayer=rR;function cR(t,e,n){return new hR(t,e,n)}var hR=fI.extend({options:{isOverLay:!0},initialize:function(t,e,n){var r=[];r.push(t),r.push(n),fI.prototype.initialize.apply(this,r),this.chartsType=e,this.themeFields=n&&n.themeFields?n.themeFields:null,this.charts=n&&n.charts?n.charts:[],this.cache=n&&n.cache?n.cache:{},this.chartsSetting=n&&n.chartsSetting?n.chartsSetting:{}},setChartsType:function(t){this.chartsType=t,this.redraw()},addFeatures:function(t){this.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),this.renderer&&(this._map?this.redrawThematicFeatures(this._map.getBounds()):this.redrawThematicFeatures())},redrawThematicFeatures:function(t){var e=this;e.renderer.clearAll();var n=e.features;if(this.options.alwaysMapCRS&&t&&t instanceof cL.a.LatLngBounds){var r=this._map.options.crs;t=cL.a.bounds(r.project(t.getSouthWest()),r.project(t.getNorthEast()))}t=AA.toSuperMapBounds(t);for(var i=0,o=n.length;i<o;i++){var s=n[i],a=s.geometry.getBounds();if(!t||t.intersectsBounds(a)){var l=e.cache,u=s.id;if(!l[u]){l[u]=u;var c=e.createThematicFeature(s),h=e.overlayWeightField&&s.attributes[e.overlayWeightField]&&!isNaN(s.attributes[e.overlayWeightField]);c&&h&&(c.__overlayWeight=s.attributes[e.overlayWeightField]),c&&e.charts.push(c)}}}e.drawCharts()},createThematicFeature:function(t){var e;return DC[this.chartsType]&&this.themeFields&&this.chartsSetting&&(e=new DC[this.chartsType](t,this,this.themeFields,this.chartsSetting)),!!e&&(e.assembleShapes(),e)},drawCharts:function(){this.renderer&&(this.overlayWeightField&&this._sortChart(),this.options&&!this.options.isOverLay?this._addOverlayShape():this._addNoOverlayShape(),this.renderer.render())},getShapesByFeatureID:function(t){var e=[],n=this.renderer.getAllShapes();if(!t)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&t===o.refDataID&&e.push(o)}return e},isQuadrilateralOverLap:function(t,e){var n=t.length,r=e.length;if(5!==n||5!==r)return null;for(var i=!1,o=0;o<n;o++)if(this.isPointInPoly(t[o],e)){i=!0;break}for(var s=0;s<r;s++)if(this.isPointInPoly(e[s],t)){i=!0;break}for(var a=0;a<n-1&&!i;a++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===Et.lineIntersection(t[a],t[a+1],e[l],e[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(t,e){for(var n=!1,r=-1,i=e.length,o=i-1;++r<i;o=r)(e[r].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[r].y)&&t.x<(e[o].x-e[r].x)*(t.y-e[r].y)/(e[o].y-e[r].y)+e[r].x&&(n=!n);return n},isChartInMap:function(t,e){for(var n=t,r=!1,i=0,o=e.length;i<o;i++){var s=e[i];if(s.x>=n.left&&s.x<=n.right&&s.y>=n.top&&s.y<=n.bottom){r=!0;break}}return r},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(t){this.clearCache(),fI.prototype.removeFeatures.apply(this,arguments)},removeAllFeatures:function(){this.clearCache(),fI.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),fI.prototype.redraw.apply(this,arguments)},clear:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()},getWeightFieldValue:function(t,e,n){if(void 0!==n&&!isNaN(n)||(n=0),!t.attributes)return n;var r=t.attributes[e];return void 0!==r&&!isNaN(r)||(r=n),r},_sortChart:function(){this.charts&&this.charts.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var t=this.charts,e=0,n=t.length;e<n;e++)for(var r=t[e],i=r.resetLocation(),o=r.shapes,s=0,a=o.length;s<a;s++)o[s].refOriginalPosition=i,this.renderer.addShape(o[s])},_addNoOverlayShape:function(){var t=this._map.getBounds(),e=this._map.options.crs;this.options.alwaysMapCRS&&(t=cL.a.bounds(e.project(t.getSouthWest()),e.project(t.getNorthEast()))),t=AA.toSuperMapBounds(t);for(var n=this.charts,r=[],i=this.getLocalXY(new Ct(t.left,t.top)),o=this.getLocalXY(new Ct(t.right,t.bottom)),s=new Tt(i[0],o[1],o[0],i[1]),a=0,l=n.length;a<l;a++){var u=n[a],c=u.resetLocation(),h=u.chartBounds,f=[{x:h.left,y:h.top},{x:h.left,y:h.bottom},{x:h.right,y:h.bottom},{x:h.right,y:h.top},{x:h.left,y:h.top}];if(!s||this.isChartInMap(s,f)){for(var p=!1,d=0;d<r.length;d++)if(this.isQuadrilateralOverLap(f,r[d])){p=!0;break}if(!p){r.push(f);for(var y=u.shapes,g=0,m=y.length;g<m;g++)y[g].refOriginalPosition=c,this.renderer.addShape(y[g])}}}}});cL.a.supermap.graphThemeLayer=cR;function fR(t,e,n){return new pR(t,e,n)}var pR=hR.extend({initialize:function(t,e,n){hR.prototype.initialize.apply(this,arguments),this.symbolType=e,this.symbolSetting={}},setSymbolType:function(t){this.symbolType=t,this.redraw()},createThematicFeature:function(t){var e;return DC[this.symbolType]&&this.themeField&&this.symbolSetting&&(e=new DC[this.symbolType](t,this,[this.themeField],this.symbolSetting)),!!e&&(e.assembleShapes(),e)}});cL.a.supermap.rankSymbolThemeLayer=fR;var dR=cL.a.SVG.extend({initialize:function(t,e,n){cL.a.SVG.prototype.initialize.call(this,n),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:cL.a.Util.falseFn,addTo:function(t){if(this._map=t,this.options.interactive)for(var e in this._layers){var n=this._layers[e];n._path.style.pointerEvents="auto",this._map._targets[cL.a.stamp(n._path)]=n}},removeFrom:function(t){var e=t||this._map;if(this.options.interactive)for(var n in this._layers){var r=this._layers[n];delete e._targets[cL.a.stamp(r._path)]}delete this._map},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(t._path),this._layers[cL.a.stamp(t)]=t},_updateIcon:function(r){var i=r._path=cL.a.SVG.create("image"),t=r.options,e=t.iconUrl;if(t.iconSize){var n=cL.a.point(t.iconSize),o=n&&n.divideBy(2,!0),s=r._point.subtract(o);i.setAttribute("x",s.x),i.setAttribute("y",s.y),i.setAttribute("width",n.x+"px"),i.setAttribute("height",n.y+"px")}else{var a=new Image;a.src=e,cL.a.DomEvent.on(a,"load",function(){var t=cL.a.point([a.width,a.height]),e=t&&t.divideBy(2,!0),n=r._point.subtract(e);i.setAttribute("x",n.x),i.setAttribute("y",n.y),i.setAttribute("width",t.x+"px"),i.setAttribute("height",t.y+"px")})}i.setAttribute("href",e)}}),yR=cL.a.Canvas.extend({initialize:function(t,e,n){cL.a.Canvas.prototype.initialize.call(this,n),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,n.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:cL.a.Util.falseFn,addTo:function(t){this._map=t},removeFrom:function(){delete this._map},_updateDashArray:function(t){var e=t.options.dashArray;if(e&&"string"==typeof e){var n,r=e.split(","),i=[];for(n=0;n<r.length;n++)i.push(Number(r[n]));t.options._dashArray=i}else t.options._dashArray=e},_onClick:function(t){var e,n,r=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());for(var i in this._layers)(e=this._layers[i]).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(cL.a.DomEvent.stop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseHover(t,e)}},_updateIcon:function(r){if(this._drawing){var t=r.options,i=this._ctx,o=r._getImage();if(t.iconSize&&o.complete){var e=cL.a.point(t.iconSize),n=e&&e.divideBy(2,!0),s=r._point.subtract(n);i.drawImage(o,s.x,s.y,e.x,e.y)}else cL.a.DomEvent.on(o,"load",function(){var t=cL.a.point([o.width,o.height]),e=t&&t.divideBy(2,!0),n=r._point.subtract(e);i.drawImage(o,n.x,n.y,t.x,t.y)});this._drawnLayers[r._leaflet_id]=r}}}),gR={LABEL:"LABEL",TEXT:"TEXT",POINT:"POINT",LINE:"LINE",REGION:"REGION"},mR=cL.a.Class.extend({initialize:function(t){this.properties=t.properties,this.type=t.type,this.layerName=t.layerName},render:function(t,e){this._renderer=t,this._container=t._container,this.options=e,t._initPath(this),t._updateStyle(this);var n=this.getElement();n&&this.layerName&&cL.a.DomUtil.addClass(n,this.layerName)},updateStyle:function(t,e){this.options=e,t._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var t=this._parts,e=cL.a.bounds([]),n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)e.extend(r[i]);var o=this._clickTolerance(),s=new cL.a.Point(o,o);return e.min._subtract(s),e.max._add(s),e},_clickTolerance:cL.a.Path.prototype._clickTolerance});function vR(t){return(vR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var bR=cL.a.Path.extend({includes:mR.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(t,e){mR.prototype.initialize.call(this,t),this._makeFeatureParts(t,e),this.options.offsetX=e||1,this.options.offsetY=e||1},render:function(t,e){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var n=this.properties.attributes;this._text=n&&this.properties.textField&&n[this.properties.textField]||""}var r=this.options;this._pxBounds=cL.a.bounds(this._point,this._point),mR.prototype.render.apply(this,[t,e]),this.options=cL.a.Util.extend(r,e),this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var n=t.geometry[0];"object"===vR(n[0])&&"x"in n[0]?this._point=cL.a.point(n[0]).scaleBy(e):this._point=cL.a.point(n).scaleBy(e),this._empty=cL.a.Util.falseFn},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._updateBounds(),mR.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){var t=this._renderer._getTextWidth(this),e=[t/2,t/2];this._pxBounds=cL.a.bounds(this._point.subtract(e),this._point.add(e))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(){return!1}});function _R(t){return(_R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}yR.include({_getTextWidth:function(t){return this._ctx.measureText(t._text).width},_updateText:function(t){if(this._drawing&&!t._empty()){var e=this.getContainer(),n=this._map.getSize();e.width=n.x,e.height=n.y,e.style.width=n.x+"px",e.style.height=n.y+"px";var r=this._ctx,i=t.options,o=i.offsetX||1,s=i.offsetY||1,a=t._point.subtract(cL.a.point(o,s));i.fill&&(this._drawnLayers[t._leaflet_id]=t,r.fillRect(0,0,n.x,n.y),r.font=[i.fontWeight?i.fontWeight:"normal",i.fontSize?i.fontSize:"14px",i.fontFamily?i.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),r.textAlign=i.textAlign,r.lineWidth=i.weight,r.fillStyle=i.fillColor,r.fillText(t._text,a.x,a.y),r.strokeStyle=i.color,r.strokeText(t._text,a.x,a.y),r.rotate(i.rotation))}}}),dR.include({_getTextWidth:function(t){return t._path.getComputedTextLength()||0},_initPath:function(t){var e;bR&&t instanceof bR?(e=t._path=cL.a.SVG.create("text")).textContent=t._text:e=t._path=cL.a.SVG.create("path"),t.options.className&&cL.a.DomUtil.addClass(e,t.options.className),t.options.interactive&&cL.a.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[cL.a.stamp(t)]=t},_updateText:function(t){var e=t._path,n=t.options,r=n.offsetX||1,i=n.offsetY||1,o=t._point.subtract(cL.a.point(r,i));e.setAttribute("x",o.x),e.setAttribute("y",o.y),n.rotation=n.rotation||0,e.setAttribute("transform","rotate("+n.rotation/Math.PI*180+" "+o.x+" "+o.y+")"),e.setAttribute("text-anchor","center"===n.textAlign?"middle":n.textAlign),e.style.fontSize=n.fontSize,e.style.fontFamily=n.fontFamily,e.style.fontWeight=n.fontWeight||"normal",e.style.glyphOrientationVertical=n.rotation||"",n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",1<n.weight?n.weight/10:n.weight)):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity)):e.setAttribute("fill","none")}});var wR=cL.a.CircleMarker.extend({includes:mR.prototype,statics:{iconCache:{}},initialize:function(t,e){mR.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},getLatLng:function(){return this._renderer._map.layerPointToLatLng(this._point)},render:function(t,e){mR.prototype.render.call(this,t,e),this._radius=e.radius||cL.a.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var n=t.geometry[0];"object"===_R(n[0])&&"x"in n[0]?this._point=cL.a.point(n[0]).scaleBy(e):this._point=cL.a.point(n).scaleBy(e),this._empty=cL.a.Util.falseFn},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._radius=e.radius||this._radius,this._updateBounds(),mR.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){if(this.options.iconUrl&&this.options.iconSize){var t=cL.a.point(this.options.iconSize),e=t&&t.divideBy(2,!0),n=this._point.subtract(e);this._pxBounds=new cL.a.Bounds(n,n.add(t))}else cL.a.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):cL.a.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var t=this.options.iconUrl,e=wR.iconCache[t];if(!e){var n=this.options.iconSize||[50,50];e=wR.iconCache[t]=this._createIcon(t,n)}return e},_createIcon:function(t,e){var n=t;if(!n)throw new Error("iconUrl not set in Icon options (see the docs).");var r=document.createElement("img");r.src=n,r.className="leaflet-marker-icon "+(this.layerName||"");var i=e;if("number"==typeof i&&(i=[i,i]),i){var o=cL.a.point(i),s=cL.a.point(o&&o.divideBy(2,!0));o&&(r.style.width=o.x+"px",r.style.height=o.y+"px"),s&&(r.style.marginLeft=-s.x+"px",r.style.marginTop=-s.y+"px")}return r.onload=function(){i||(r.style.width=this.width+"px",r.style.height=this.height+"px")},r},_containsPoint:function(t){return this.options.iconUrl?this._pxBounds.contains(t):cL.a.CircleMarker.prototype._containsPoint.call(this,t)}}),SR={_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var n,r=t.geometry;this._parts=[];for(var i=0;i<r.length;i++){for(var o=r[i],s=[],a=0;a<o.length;a++)n=o[a],s.push(cL.a.point(n).scaleBy(e));this._parts.push(s)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},xR=cL.a.Polyline.extend({includes:[mR.prototype,SR],initialize:function(t,e){mR.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){e.fill=!1,mR.prototype.render.call(this,t,e),this._updatePath()},updateStyle:function(t,e){e.fill=!1,mR.prototype.updateStyle.call(this,t,e)}}),ER=cL.a.Polygon.extend({includes:[mR.prototype,SR],initialize:function(t,e){mR.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){mR.prototype.render.call(this,t,e),this._updatePath()}}),OR=n(12),CR=n.n(OR),PR=n(13),TR=cL.a.Class.extend({initialize:function(t){this.url=t},getTile:function(){var e=this;return sr.get(e.url,null,{timeout:1e4}).then(function(t){return t.ok?t.blob().then(function(t){var n=new FileReader;return new Promise(function(e){n.addEventListener("loadend",function(){var t=new CR.a(n.result);return e(new PR.VectorTile(t))}),n.readAsArrayBuffer(t)})}):{layers:[]}}).then(function(t){return e._processVectorTileSpec(t)})},_processVectorTileSpec:function(t){var e=[];for(var n in t.layers){for(var r=[],i=0;i<t.layers[n].length;i++){var o=t.layers[n].feature(i);switch(o.geometry=o.loadGeometry(),o.layerName=n,o.properties={attributes:cL.a.Util.extend({},o.properties),id:o.id},o.type){case 1:o.type=gR.POINT;break;case 2:o.type=gR.LINE;break;case 3:o.type=gR.REGION}r.push(o)}var s={};s.features=r,s.layerName=n,s.extent=t.layers[n].extent,e.push(s)}return e}}),MR=cL.a.Class.extend({initialize:function(t){this.url=t},getTile:function(){var e=this;return sr.get(e.url,null,{timeout:1e4}).then(function(t){return t.json()}).then(function(t){return e._processRecordSets(t,e)})},_processRecordSets:function(t,e){var n=t.recordsets;if(!(n=e._convertToGeoJSON(n)))return null;for(var r=0;r<n.length;r++){for(var i=n[r],o=0;o<i.features.length;o++){var s=i.features[o];(s=e._convertToVectorLayerFeature(s,e)).layerName=i.layerName,i.features[o]=s}i.extent=256,delete i.fieldTypes,delete i.fields}return n},_convertToVectorLayerFeature:function(t,e){if(t.geometry){var n,r,i,o,s={},a=t.geometry,l=a.type,u=a.coordinates,c=t.properties,h=c.id;if("Point"===l)s=c&&c.texts?e._createFeature(h,gR.TEXT,[u],c):e._createFeature(h,gR.POINT,[u],c);else if("MultiPoint"===l)s=e._createFeature(h,gR.POINT,u,c);else if("LineString"===l)s=e._createFeature(h,gR.LINE,[u],c);else if("MultiLineString"===l||"Polygon"===l){for(i=[],n=0;n<u.length;n++)o=u[n],"Polygon"===l&&(o.outer=0===n),i.push(o);var f="Polygon"===l?gR.REGION:gR.LINE;s=e._createFeature(h,f,i,c)}else{if("MultiPolygon"!==l)throw new Error("Illegal GeoJSON object");for(i=[],n=0;n<u.length;n++)for(r=0;r<u[n].length;r++)(o=u[n][r]).outer=0===r,i.push(o);s=e._createFeature(h,gR.REGION,i,c)}return s}},_convertToGeoJSON:function(t){if(t){for(var e=0;e<t.length;e++){for(var n=t[e],r=0;r<n.features.length;r++){for(var i=n.features[r],o=[],s=0,a=0;a<i.geometry.parts.length;a++){for(var l=2*i.geometry.parts[a],u=0,c=s;u<l;u+=2,c+=2){var h=i.geometry.points[c],f=i.geometry.points[c+1];o.push({x:h,y:f})}s+=l}i.geometry.points=o}n.features=IA(n.features).features}return t}},_createFeature:function(t,e,n,r){return{id:t,type:e,geometry:n,properties:r}}}),LR={JSON:"JSON",MVT:"MVT",PBF:"PBF"};cL.a.supermap.VectorTileFormat=LR;function NR(t,e){return new IR(t,e)}var kR=cL.a.Class.extend({initialize:function(t,e){this.layer=t.layer,this.tileSize=t.layer.getTileSize(),this.format=t.format,this.coords=t.coords,this.renderer=t.renderer,this.done=e,this.layer._textVectorTiles={}},renderTile:function(){var e=this,t=e.layer,n=e.coords,r=t._getTileUrl(n);new(-1<[LR.MVT,LR.PBF].indexOf(e.format.toUpperCase())?TR:MR)(r).getTile().then(function(t){e.render(t,n)})},render:function(t,e){if(t){for(var n=this,r=n.renderer,i=n.layer,o=0;o<t.length;o++){var s=t[o],a=s.layerName;i._dataLayerNames[a]=!0;for(var l=n.tileSize.divideBy(s.extent),u=i.getLayerStyleInfo(s.layerName),c=0;c<s.features.length;c++){var h=s.features[c];if(h){u&&u.type===gR.LABEL&&h.type===gR.POINT&&h.properties.attributes&&(h.type=gR.TEXT);var f=n._getStyleOptions(e,h,a,n);if(f.length){var p=n._createFeatureLayer(h,l);if(p){var d={scope:n,coords:e,renderer:r};if(!n._extractTextLayer(h,p,f,d)){for(var y=0;y<f.length;y++){var g=n._validateStyle(f[y],h.type);p.render(r,g),r._addPath(p)}i.options.interactive&&p.makeInteractive();var m=i._getFeatureKey(h.id,a);r._features[m]={layerName:a,feature:p}}}}}}}i._map&&r.addTo(i._map),cL.a.Util.requestAnimFrame(n.done.bind(e,null,n.layer._vectorTiles[n.layer._tileCoordsToKey(e)]))}},_extractTextLayer:function(t,e,n,r){if(t.type!==gR.TEXT)return!1;var i=r.scope,o=r.coords,s=i.layer,a=s._tileCoordsToKey(o),l=t.id,u=t.layerName,c=s._textVectorTiles[a];return(c=c||{layers:{},coords:o,renderer:r.renderer}).layers[l]={layer:e,style:n,layerName:u},s._textVectorTiles[a]=c,!0},_getStyleOptions:function(t,e,n,r){var i=r,o=i.layer,s=o.getVectorTileLayerStyle(t,e)||i._defaultStyle(e.type),a=e.id,l=o._getFeatureKey(a,n),u=o._overriddenStyles[l];return s=(s=(s=u||s)instanceof Function?s(e.properties,t.z):s)instanceof Array?s:[s]},_createFeatureLayer:function(t,e){var n;switch(t.type){case gR.POINT:n=new wR(t,e);break;case gR.LINE:n=new xR(t,e);break;case gR.REGION:n=new ER(t,e);break;case gR.TEXT:n=new bR(t,e)}var r=this.layer;return n&&r.options.interactive&&n.addEventParent(r),n},_validateStyle:function(t,e){switch(cL.a.Path.prototype.options.weight=1,cL.a.Path.prototype.options.fillOpacity=1,e){case gR.POINT:return cL.a.extend({},cL.a.CircleMarker.prototype.options,t);case gR.LINE:return cL.a.extend({},cL.a.Polyline.prototype.options,t);case gR.REGION:return cL.a.extend({},cL.a.Polygon.prototype.options,t);case gR.TEXT:return cL.a.extend({},bR.prototype.options,t)}},_defaultStyle:function(t){var e=cL.a.Path.prototype.options;switch(e.weight=1,e.fillOpacity=1,e.radius=3,t){case gR.POINT:return cL.a.extend({},e,cL.a.CircleMarker.prototype.options);case gR.LINE:return cL.a.extend({},e,cL.a.Polyline.prototype.options);case gR.REGION:return cL.a.extend({},e,cL.a.Polygon.prototype.options);case gR.TEXT:return cL.a.extend({},e,bR.prototype.options)}}}),AR=cL.a.GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:LR.JSON,interactive:!0,maxZoom:23},initialize:function(t){var r=this;cL.a.setOptions(r,t),cL.a.GridLayer.prototype.initialize.call(r,t),r._vectorTiles={},r._overriddenStyles={},r.vectorTileLayerStyles=r.options.vectorTileLayerStyles,r.on("tileunload",function(t){var e=r._tileCoordsToKey(t.coords),n=r._vectorTiles[e];n&&r._map&&n.removeFrom(r._map),delete r._vectorTiles[e]},r),r.on("tileerror ",r._renderText,r),r.on("load",r._renderText,r),r._dataLayerNames={}},createTile:function(t,e){var n=this.getTileSize(),r=null;return r=new("Canvas"===this.options.renderer?yR:dR)(t,n,this.options),(this._vectorTiles[this._tileCoordsToKey(t)]=r)._features={},new kR({layer:this,format:this.options.format,coords:t,renderer:r},e).renderTile(),r.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(t){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[t]},setFeatureStyle:function(t,e,n){var r=this._getFeatureKey(t,e);for(var i in this._overriddenStyles[r]=n,this._vectorTiles){var o=this._vectorTiles[i],s=o._features[r];if(s){var a=s.feature;this._updateStyles(a,o,n)}}return this},resetFeatureStyle:function(t,e){var n=this._getFeatureKey(t,e);for(var r in delete this._overriddenStyles[n],this._vectorTiles){var i=this._vectorTiles[r],o=i._features[n];if(o){var s=o.feature,a=this.vectorTileLayerStyles[o.layerName];this._updateStyles(s,i,a)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){cL.a.GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var t=this._textVectorTiles;for(var e in t){var n=t[e],r=n.renderer;for(var i in n.layers){for(var o=n.layers[i],s=o.style,a=o.layer,l=0;l<s.length;l++)a.render(r,s[l]),r._addPath(a);this.options.interactive&&a.makeInteractive()}}},_getFeatureKey:function(t,e){return(t=t||0)+"_"+(e=e||"null")},_updateStyles:function(t,e,n){(n=n instanceof Function?n(t.properties,e.getCoord().z):n)instanceof Array||(n=[n]);for(var r=0;r<n.length;r++){var i=this._extendStyle(n[r],t.type);t.updateStyle(e,i)}},_extendStyle:function(t,e){switch(e){case gR.POINT:return cL.a.extend({},cL.a.CircleMarker.prototype.options,t);case gR.LINE:return cL.a.extend({},cL.a.Polyline.prototype.options,t);case gR.REGION:return cL.a.extend({},cL.a.Polygon.prototype.options,t);case gR.TEXT:return cL.a.extend({},bR.prototype.options,t)}}}),IR=AR.extend({options:{serverType:null,crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,processCharacters:!1,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:EA.Common.attribution},initialize:function(t,e){(e=e||{}).noWrap=null==e.noWrap||e.noWrap,cL.a.setOptions(this,e),AR.prototype.initialize.call(this,e),cL.a.stamp(this);if(!t||t.indexOf("http")<0)return t="",this;(this.url=t).indexOf("/")===t.length-1&&(t=t.substr(0,t.length-1),this.url=t),this.cartoCSSToLeaflet=new sI(this.url),this.initLayersInfo(),!this.options.serverCartoCSSStyle&&this.options.cartoCSS&&this.setClientCartoCSS(this.options.cartoCSS)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._map=t,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var a=this,t=a.url+"/layers.json";sr.get(t,null,{timeout:a.options.timeout}).then(function(t){return t.json()}).then(function(t){if(a.layersInfoInitialized=!0,a.layersInfo=t,a.layersInfo){for(var e={},n=0,r=a.layersInfo.length;n<r;n++)for(var i=a.layersInfo[n].subLayers.layers,o=0,s=i.length;o<s;o++)i[o].layerIndex=s-o,e[i[o].name]=i[o];a.layersInfo=e,a.cartoCSSToLeaflet.layersInfo=e,a.options.serverCartoCSSStyle&&a.getVectorStylesFromServer()}}).catch(function(t){console.error("error",t)})},getLayerStyleInfo:function(t){var e;if(this.layersStyles=this.layersStyles||{},e=this.layersStyles[t])return e;if(!this.layersInfo)return{};var n=this.layersInfo[t];if(!n)return null;switch(e={layerIndex:n.layerIndex,ugcLayerType:n.ugcLayerType},n.ugcLayerType){case"VECTOR":e.layerStyle=n.style?n.style:null;break;case"THEME":var r=n.theme;e.layerStyle=r?r.defaultStyle:null,r&&"LABEL"===r.type&&(e.type=r.type,e.textField=r.labelExpression);break;default:n.style&&(e.layerStyle=n.style)}return this.layersStyles[t]=e},getVectorStylesFromServer:function(){var e=this,t=e.url+"/tileFeature/vectorstyles.json";sr.get(t,null,{timeout:e.options.timeout}).then(function(t){return t.json()}).then(function(t){if(!t||!t.style)return null;t.style&&"cartoCSS"===t.type&&e.setServerCartoCSS(t.style),e.options&&e.setClientCartoCSS(e.options.cartoCSS),e._initGrid()}).catch(function(t){console.error("error",t)})},setServerCartoCSS:function(t){this.cartoCSSToLeaflet.pretreatedCartoCSS(t,!0)},setClientCartoCSS:function(t){var e=!1;this.options.processCharacters&&(e=this.options.processCharacters),this.cartoCSSToLeaflet.pretreatedCartoCSS(t,e)},getVectorTileLayerStyle:function(t,e){if(!e)return null;var n=e.layerName,r=this.getLayerStyleInfo(n);if(r&&r.textField){var i=r.textField;if(i&&i.indexOf(".")){var o=i.split(".");i=o&&0<o.length&&o[o.length-1]}e.properties.textField=i}this.vectorTileLayerStyles=this.vectorTileLayerStyles||{};var s=this.vectorTileLayerStyles[n];if(s)return e=this._mergeFeatureTextField(e,s),s;var a=this.getScaleFromCoords(t),l=this.cartoCSSToLeaflet.pickShader(n)||[];for(var u in s=[],l)for(var c=l[u],h=0;h<c.length;h++){var f=this.cartoCSSToLeaflet.getValidStyleFromCarto(t.z,a,c[h],e,this.options.serverCartoCSSStyle);f&&s.push(f)}return"TEXT"!==(e=this._mergeFeatureTextField(e,s)).type&&0!==s.length||(s=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(e,r),"TEXT"===e.type&&(s.textName="["+e.properties.textField+"]")),this.vectorTileLayerStyles[n]=s},getScale:function(t){var e=t||this._map.getZoom();return this.scales[e]},getScaleFromCoords:function(t){var e;return this.scales&&this.scales[t.z]?this.scales[t.z]:(this.scales=this.scales||{},e=this.getDefaultScale(t),this.scales[t.z]=e)},getDefaultScale:function(t){var e=this._crs;if(e.scales)return e.scales[t.z];var n=this._tileCoordsToBounds(t),r=e.project(n.getNorthEast()),i=e.project(n.getSouthWest()),o=this.options.tileSize,s=Math.max(Math.abs(r.x-i.x)/o,Math.abs(r.y-i.y)/o),a=c.METER;if(e.code){var l=e.code.split(":");if(l&&1<l.length){var u=parseInt(l[1]);a=u&&4e3<=u&&u<=5e3?c.DEGREE:c.METER}}return jA(s,96,a)},_mergeFeatureTextField:function(t,e){if(!this.options.serverCartoCSSStyle||!e||"TEXT"!==t.type)return t;var n=e;cL.a.Util.isArray(e)||(n=[e]);for(var r=0;r<n.length;r++){var i=n[r].textName;i&&t.properties&&(t.properties.textField=i.substring(1,i.length-1))}return t},_getTileUrl:function(t){return this.options.tileTemplate?this._getTileTemplateUrl(t):this._getDefaultTileUrl(t)},_getTileTemplateUrl:function(t){var e=this.options.tileTemplate,n={s:this._getSubdomain(t),x:t.x,y:t.y,z:t.z};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return cL.a.Util.template(e,cL.a.extend(n,this.options))},_initGrid:function(){AR.prototype.onAdd.call(this,this._map)},_getSubdomain:cL.a.TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(t){var e=t.x,n=t.y,r=this._tileUrl+"&x="+e+"&y="+n;return r+="&scale="+this.getScaleFromCoords(t)},_initLayerUrl:function(){var t=this.options;if(this.url){var e=t.format.toString().toLowerCase();this._tileUrl=this.url+"/tileFeature."+e+"?",this._tileUrl+=encodeURI(this._createURLParam(t))}},_createURLParam:function(t){var e=[],n=this._getCredential();if(n&&e.push(n),t.layersID&&e.push("layersID="+t.layersID),t.layerNames){cL.a.Util.isArray(t.layerNames)||(t.layerNames=[t.layerNames]);var r="["+t.layerNames.join(",")+"]";e.push("layerNames="+r)}var i=this._crs;if(i.options&&i.options.origin)e.push("origin="+JSON.stringify({x:i.options.origin[0],y:i.options.origin[1]}));else if(i.projection&&i.projection.bounds){var o=i.projection.bounds,s=cL.a.point(o.min.x,o.max.y);e.push("origin="+JSON.stringify({x:s.x,y:s.y}))}t.expands&&e.push("expands="+t.expands),e.push("returnAttributes="+t.returnAttributes),e.push("cacheEnabled="+t.cacheEnabled);var a=this.options.tileSize;return e.push("width="+a),e.push("height="+a),e.join("&")},_getCredential:function(t){var e,n;switch(this.options.serverType){case i.IPORTAL:e=(e=(n=lr.getToken(t))?new We(n,"token"):null)||((n=lr.getKey(t))?new We(n,"key"):null);break;case i.ONLINE:e=(n=lr.getKey(t))?new We(n,"key"):null;break;default:e=(n=lr.getToken(t))?new We(n,"token"):null}return e?e.getUrlParameters():null}});cL.a.supermap.tiledVectorLayer=NR;function RR(t){return new DR(t)}var jR=n(7),DR=cL.a.GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},options:{attribution:EA.Turf.attribution},initialize:function(t){t=t||{},cL.a.Util.setOptions(this,t),cL.a.stamp(this),this._layers={}},turfOptionMap:{"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},process:function(e,n,t,r){var i;try{i=jR[e.split(".")[1]].apply(this,this.parse(e,n))}catch(t){i=jR[e.split(".")[1]].apply(this,this.parseOption(e,n))}(r=null==r||r)&&this.addData([i]),t&&t(i)},parse:function(t,e){if("Transformation.union"===t)return e.A;var n=[],r=this.turfMap[t];return r&&r.map(function(t){return n.push(e[t]),e[t]}),n},parseOption:function(t,n){var r=[];return this.turfOptionMap[t].map(function(t){if(t instanceof Object){var e=t;Object.keys(e).forEach(function(t){e[t]=n[t]}),r.push(e)}else r.push(n[t]);return n}),r}});cL.a.supermap.turfLayer=RR;var FR=cL.a.Layer.extend({options:{alwaysMapCRS:!1,id:Et.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:EA.Common.attribution},initialize:function(t,e){cL.a.Util.setOptions(this,e),this.name=t,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.blur=this.options.blur,this.movingOffset=[0,0]},onRemove:function(t){cL.a.DomUtil.remove(this.rootCanvas),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var n=this;if(n._map=t,n._createCanvasContainer(),n.rootCanvas){var e=t.getSize();n.rootCanvas.width=n.maxWidth=e.x,n.rootCanvas.height=n.maxHeight=e.y,n._updateOpacity(),n.mouseMoveHandler=function(t){var e=t.layerPoint;n.currentMousePosition=cL.a.point(e.x+n.movingOffset[0],e.y+n.movingOffset[1])},t.on("mousemove",n.mouseMoveHandler),n.update()}else t.removeLayer(n)},addFeatures:function(t){this.features=this.toiClientFeature(t),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var t=this._map.getBounds();this.updateHeatPoints(t)}},updateHeatPoints:function(t){this.features&&0<this.features.length?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(t){var e,n,r,i,o,s,a,l=[],u=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),h=this._map.getSize();i=u/h.x>c/h.y?u/h.x:c/h.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/i):this.radius;for(var f=0;f<this.features.length;f++){var p=this.features[f],d=p.geometry,y=this.getLocalXY(new Ct(d.x,d.y));this.featureWeight?(y.weight=p.attributes[this.featureWeight],this.maxWeight||(o=o||y.weight,s=s||y.weight,o=Math.max(o,y.weight),s=Math.min(s,y.weight))):y.weight=1,e=Math.floor(y[0]),n=Math.floor(y[1]),r=y.weight,l.push([e,n,r])}this.maxWeight?this.draw(l,this.maxWeight):(a=o&&s?(o+s)/2:1,this.draw(l,a))},draw:function(t,e){if(!(0<this.maxHeight&&0<this.maxWidth))return!1;var n=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var r=0;r<t.length;r++){var i=t[r];this.canvasContext.globalAlpha=Math.max(i[2]/e,.05),this.canvasContext.drawImage(this.circle,i[0]-this.useRadius,i[1]-this.useRadius)}var o=n.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(o.data,this.grad),n.putImageData(o,0,0)},colorize:function(t,e){for(var n,r=0;r<t.length;r+=4)(n=4*t[r+3])&&(t[r]=e[n],t[r+1]=e[1+n],t[r+2]=e[2+n])},drawCircle:function(t){var e=this.blur||t/2,n=this.circle=document.createElement("canvas"),r=n.getContext("2d");n.height=2*t,n.width=2*t,r.shadowOffsetX=r.shadowOffsetY=2*t,r.shadowBlur=e,r.shadowColor="#000000",r.beginPath(),r.arc(-t,-t,t/2,0,2*Math.PI,!0),r.closePath(),r.fill()},createGradient:function(){var t=this.colors,e=document.createElement("canvas"),n=e.getContext("2d"),r=n.createLinearGradient(0,0,0,256);e.height=256;for(var i=e.width=1,o=0,s=t.length;o<s;o++)r.addColorStop(i/s,t[o]),i++;n.fillStyle=r,n.fillRect(0,0,1,256),this.grad=n.getImageData(0,0,1,256).data},update:function(){var t=this._map.containerPointToLayerPoint([0,0]);cL.a.DomUtil.setPosition(this.rootCanvas,t);var e=this;e.refresh(),e.currentMousePosition&&(e.currentMousePosition=cL.a.point(e.currentMousePosition.x-e.movingOffset[0],e.currentMousePosition.y-e.movingOffset[1])),e.movingOffset=[0,0],e._zoom=e._map.getZoom(),e._center=e._map.getCenter()},getLocalXY:function(t){if(!this._map)return t;var e=t;cL.a.Util.isArray(t)&&(e=cL.a.point(t[0],t[1])),t instanceof cL.a.Point||(e=t instanceof ee||t instanceof ye?cL.a.point(t.x,t.y):cL.a.point(t.lon,t.lat));var n=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):cL.a.latLng(e.y,e.x));return[n.x,n.y]},setOpacity:function(t){t!==this.options.opacity&&(t&&(this.options.opacity=t),this._updateOpacity())},removeFeatures:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();Et.isArray(t)||(t=[t]);for(var e,n,r=[],i=0,o=t.length;i<o;i++)e=t[i],-1!==(n=Et.indexOf(this.features,e))?this.features.splice(n,1):r.push(e);var s=0==r.length;this._map.fire("featuresremoved",{features:r,succeed:s}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var t=this.getPane(),e="heatMapLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&cL.a.Browser.any3d?"animated":"hide");this.rootCanvas=cL.a.DomUtil.create("canvas",e,t);var n=cL.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[n]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,Et.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){Et.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.options.opacity),null!==this._map&&this._map.fire("changelayer",{layer:this,property:"opacity"})},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},toiClientFeature:function(t){cL.a.Util.isArray(t)||(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++)if(t[n]instanceof BR)e.push(t[n].toFeature());else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[n].type)){var i=new Bn;e=e.concat(i.read(t[n]))}else{if(!t[n].geometry||!t[n].geometry.parts)throw new Error("Features's type does not match, please check.");e.push(ab.fromJson(t[n]).toFeature())}return e},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());cL.a.DomUtil.setTransform?cL.a.DomUtil.setTransform(this.rootCanvas,n,e):this.rootCanvas.style[cL.a.DomUtil.TRANSFORM]=cL.a.DomUtil.getTranslateString(n)+" scale("+e+")"},_reset:function(){this.update();var t=this._map.getSize(),e=this._map.containerPointToLayerPoint([0,0]);cL.a.DomUtil.setPosition(this.rootCanvas,e),parseFloat(this.rootCanvas.width)!==parseFloat(t.x)&&(this.rootCanvas.width=t.x),parseFloat(this.rootCanvas.height)!==parseFloat(t.y)&&(this.rootCanvas.height=t.y),this.refresh()},_resize:function(){var t=this._map.getSize();this.maxWidth=t.x,this.maxHeight=t.y}});cL.a.supermap.heatMapLayer=function(t,e){return new FR(t,e)};var BR=cL.a.Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t=this.geometry,e=[];if(t instanceof cL.a.LatLng)e=[t.lng,t.lat];else if(t instanceof cL.a.Point)e=[t.x,t.y];else if(t instanceof cL.a.CircleMarker){var n=t.getLatLng();e=[n.lng,n.lat]}else e=t;return 2===e.length&&(t=new ee(e[0],e[1])),new sn(t,this.attributes)}});cL.a.supermap.heatMapFeature=function(t,e){return new BR(t,e)};function GR(t,e){return new UR(t,e)}var UR=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},code:function(t,e){new ni(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).code(this.url+"/geocoding",t)},decode:function(t,e){new ni(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).decode(this.url+"/geodecoding",t)}});cL.a.supermap.addressMatchService=GR;function zR(t,e){return new qR(t,e)}var qR=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},queryChart:function(t,e,n){var r=this._processParams(t),i=this._processFormat(n);new ls(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:i}).processAsync(r)},getChartFeatureInfo:function(t){var e=this.url.concat();new Xo(e+="/chartFeatureInfoSpecs",{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync()},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.chartQueryFilterParameters&&!cL.a.Util.isArray(t.chartQueryFilterParameters)&&(t.chartQueryFilterParameters=[t.chartQueryFilterParameters]),t.bounds&&(t.bounds=AA.toSuperMapBounds(t.bounds))},_processFormat:function(t){return t||M.GEOJSON}});cL.a.supermap.chartService=zR;function VR(t,e){return new HR(t,e)}var HR=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},getFields:function(t,e){new Kf(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},datasource:t.datasource,dataset:t.dataset}).processAsync()},getFieldStatisticsInfo:function(e,t){if(e instanceof pu){var n=this,r=e.fieldName,i=e.statisticMode;i&&!cL.a.Util.isArray(i)&&(i=[i]),n.currentStatisticResult={fieldName:r},n._statisticsCallback=t,i.forEach(function(t){n.currentStatisticResult[t]=null,n._fieldStatisticRequest(e.datasource,e.dataset,r,t)})}},_fieldStatisticRequest:function(t,e,n,r){new _u(this.url,{eventListeners:{scope:this,processCompleted:this._processCompleted,processFailed:this._statisticsCallback},datasource:t,dataset:e,field:n,statisticMode:r,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers}).processAsync()},_processCompleted:function(t){var e=!0,n=t.result;for(var r in this.currentStatisticResult&&null==this.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),this.currentStatisticResult)if(null==this.currentStatisticResult[r]){e=!1;break}e&&this._statisticsCallback({result:this.currentStatisticResult})}});cL.a.supermap.fieldService=VR;function WR(t,e){return new JR(t,e)}var JR=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},getGridCellInfos:function(t,e){if(t instanceof tp){new ap(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)}}});cL.a.supermap.gridCellInfosService=WR;function YR(t,e){return new XR(t,e)}var XR=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},getLayersInfo:function(t){new Py(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync()},setLayerInfo:function(t,e){if(t instanceof ub){var n=t.resourceID,r=t.tempLayerName,i=t.layerInfo;if(n&&r){var o=this.url.concat();new gb(o+="/tempLayersSet/"+n+"/"+r,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync(i)}}},setLayersInfo:function(t,e){if(t instanceof vb){var n=t.resourceID,r=!!t.isTempLayers&&t.isTempLayers,i=t.layersInfo;if((!r||n)&&i)new Ob(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e},resourceID:n,isTempLayers:r}).processAsync(i)}},setLayerStatus:function(t,e){if(t instanceof Pb){new Ib(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync(t)}}});cL.a.supermap.layerInfoService=YR;function ZR(t,e){return new QR(t,e)}var QR=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},measureDistance:function(t,e){return this.measure(u.DISTANCE,t,e),this},measureArea:function(t,e){return this.measure(u.AREA,t,e),this},measure:function(t,e,n){if(e instanceof im){e.geometry&&(e.geometry=RA(e.geometry)),new hm(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,measureMode:t,eventListeners:{scope:this,processCompleted:n,processFailed:n}}).processAsync(e)}}});cL.a.supermap.measureService=ZR;function KR(t,e){return new $R(t,e)}var $R=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},sinksFacilityAnalyst:function(t,e){new Ua(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},sourcesFacilityAnalyst:function(t,e){new el(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},traceUpFacilityAnalyst:function(t,e){new Fl(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},traceDownFacilityAnalyst:function(t,e){new El(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},upstreamFacilityAnalyst:function(t,e){new Kl(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)}});cL.a.supermap.networkAnalyst3DService=KR;function tj(t,e){return new ej(t,e)}var ej=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},burstPipelineAnalyst:function(t,e){new zo(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(this._processParams(t))},computeWeightMatrix:function(t,e){new Os(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(this._processParams(t))},findClosestFacilities:function(t,e,n){new Mu(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},streamFacilityAnalyst:function(t,e,n){new cl(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},findLocation:function(t,e,n){new Fu(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},findPath:function(t,e,n){new nc(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},findTSPPaths:function(t,e,n){new _c(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},findMTSPPaths:function(t,e,n){new Ju(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},findServiceAreas:function(t,e,n){new hc(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},updateEdgeWeight:function(t,e){new xS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},updateTurnNodeWeight:function(t,e){new kS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},_processParams:function(n){if(!n)return{};if(n.centers&&cL.a.Util.isArray(n.centers)&&n.centers.map(function(t,e){return n.centers[e]=t instanceof cL.a.LatLng?{x:t.lng,y:t.lat}:t,n.centers[e]}),n.nodes&&cL.a.Util.isArray(n.nodes)&&n.nodes.map(function(t,e){return n.nodes[e]=t instanceof cL.a.LatLng?{x:t.lng,y:t.lat}:t,n.nodes[e]}),n.event&&n.event instanceof cL.a.LatLng&&(n.event={x:n.event.lng,y:n.event.lat}),n.facilities&&cL.a.Util.isArray(n.facilities)&&n.facilities.map(function(t,e){return n.facilities[e]=t instanceof cL.a.LatLng?{x:t.lng,y:t.lat}:t,n.facilities[e]}),n.parameter&&n.parameter.barrierPoints){var t=n.parameter.barrierPoints;cL.a.Util.isArray(t)?t.map(function(t,e){return n.parameter.barrierPoints[e]=t instanceof cL.a.LatLng?{x:t.lng,y:t.lat}:t,n.parameter.barrierPoints[e]}):n.parameter.barrierPoints=[t instanceof cL.a.LatLng?{x:t.lng,y:t.lat}:t]}return n},_processFormat:function(t){return t||M.GEOJSON}});cL.a.supermap.networkAnalystService=tj;function nj(t,e){return new rj(t,e)}var rj=CA.extend({initialize:function(t,e){e=e||{},cL.a.setOptions(this,e),CA.prototype.initialize.call(this,t,e),this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},getKernelDensityJobs:function(t,e){var n=this._processFormat(e);new bg(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getKernelDensityJobs()},getKernelDensityJob:function(t,e,n){var r=this._processFormat(n);new bg(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getKernelDensityJob(t)},addKernelDensityJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new bg(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.kernelDensityJobs[t.id]=t.state}},format:s}).addKernelDensityJob(o,n)},getKernelDensityJobState:function(t){return this.kernelDensityJobs[t]},getSummaryMeshJobs:function(t,e){var n=this._processFormat(e);new g_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryMeshJobs()},getSummaryMeshJob:function(t,e,n){var r=this._processFormat(n);new g_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJob(t)},addSummaryMeshJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new g_(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.summaryMeshJobs[t.id]=t.state}},format:s}).addSummaryMeshJob(o,n)},getSummaryMeshJobState:function(t){return this.summaryMeshJobs[t]},getQueryJobs:function(t,e){var n=this._processFormat(e);new qb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getQueryJobs()},getQueryJob:function(t,e,n){var r=this._processFormat(n);new qb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getQueryJob(t)},addQueryJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new qb(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.queryJobs[t.id]=t.state}},format:s}).addQueryJob(o,n)},getQueryJobState:function(t){return this.queryJobs[t]},getSummaryRegionJobs:function(t,e){var n=this._processFormat(e);new O_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryRegionJobs()},getSummaryRegionJob:function(t,e,n){var r=this._processFormat(n);new O_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJob(t)},addSummaryRegionJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new O_(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.summaryRegionJobs[t.id]=t.state}},format:s}).addSummaryRegionJob(o,n)},getSummaryRegionJobState:function(t){return this.summaryRegionJobs[t]},getVectorClipJobs:function(t,e){var n=this._processFormat(e);new US(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getVectorClipJobs()},getVectorClipJob:function(t,e,n){var r=this._processFormat(n);new US(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getVectorClipJob(t)},addVectorClipJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new US(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.vectorClipJobs[t.id]=t.state}},format:s}).addVectorClipJob(o,n)},getVectorClipJobState:function(t){return this.vectorClipJobs[t]},getOverlayGeoJobs:function(t,e){var n=this._processFormat(e);new Pm(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getOverlayGeoJobs()},getOverlayGeoJob:function(t,e,n){var r=this._processFormat(n);new Pm(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJob(t)},addOverlayGeoJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new Pm(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.overlayGeoJobs[t.id]=t.state}},format:s}).addOverlayGeoJob(o,n)},getoverlayGeoJobState:function(t){return this.overlayGeoJobs[t]},getBuffersJobs:function(t,e){var n=this._processFormat(e);new Co(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getBuffersJobs()},getBuffersJob:function(t,e,n){var r=this._processFormat(n);new Co(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getBuffersJob(t)},addBuffersJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new Co(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.buffersJobs[t.id]=t.state}},format:s}).addBuffersJob(o,n)},getBuffersJobState:function(t){return this.buffersJobs[t]},getTopologyValidatorJobs:function(t,e){var n=this._processFormat(e);new Yw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getTopologyValidatorJobs()},getTopologyValidatorJob:function(t,e,n){var r=this._processFormat(n);new Yw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJob(t)},addTopologyValidatorJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new Yw(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.topologyValidatorJobs[t.id]=t.state}},format:s}).addTopologyValidatorJob(o,n)},getTopologyValidatorJobState:function(t){return this.topologyValidatorJobs[t]},getSummaryAttributesJobs:function(t,e){var n=this._processFormat(e);new a_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryAttributesJobs()},getSummaryAttributesJob:function(t,e,n){var r=this._processFormat(n);new a_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJob(t)},addSummaryAttributesJob:function(t,e,n,r){var i=this,o=i._processParams(t),s=i._processFormat(r);new a_(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:e,processFailed:e,processRunning:function(t){i.summaryAttributesJobs[t.id]=t.state}},format:s}).addSummaryAttributesJob(o,n)},getSummaryAttributesJobState:function(t){return this.summaryAttributesJobs[t]},_processFormat:function(t){return t||M.GEOJSON},_processParams:function(t){return t?(t.bounds&&(t.bounds=AA.toSuperMapBounds(t.bounds)),t.query&&(t.query=AA.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=AA.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=AA.toProcessingParam(t.geometryClip)),t):{}}});cL.a.supermap.processingService=nj;function ij(t,e){return new oj(t,e)}var oj=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},queryByBounds:function(t,e,n){new Zm(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},queryByDistance:function(t,e,n){new hv(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},queryBySQL:function(t,e,n){new Uv(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},queryByGeometry:function(t,e,n){new Cv(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},_processParams:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!cL.a.Util.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds=AA.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry instanceof cL.a.Point?t.geometry=new ee(t.geometry.x,t.geometry.y):t.geometry=RA(t.geometry)),t):{}},_processFormat:function(t){return t||M.GEOJSON}});cL.a.supermap.queryService=ij;function sj(t,e){return new aj(t,e)}var aj=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},getAreaSolarRadiationResult:function(t,e,n){new Si(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(t)},bufferAnalysis:function(t,e,n){new oo(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},densityAnalysis:function(t,e,n){new ma(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},generateSpatialData:function(t,e,n){new Mc(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(t)},geoRelationAnalysis:function(t,e,n){new bh(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(t)},interpolationAnalysis:function(t,e,n){new cg(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},mathExpressionAnalysis:function(t,e,n){new nm(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},overlayAnalysis:function(t,e,n){new vm(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},routeCalculateMeasure:function(t,e,n){new Zv(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},routeLocate:function(t,e,n){new ob(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},surfaceAnalysis:function(t,e,n){new I_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},terrainCurvatureCalculate:function(t,e,n){new q_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(t)},thiessenAnalysis:function(t,e,n){new Ow(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}).processAsync(this._processParams(t))},geometrybatchAnalysis:function(t,e,n){for(var r=new kw(this.url,{serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:this._processFormat(n)}),i=[],o=0;o<t.length;o++){var s=t[o];i.push({analystName:s.analystName,param:this._processParams(s.param)})}r.processAsync(i)},_processParams:function(n){if(!n)return{};if(n.bounds&&(n.bounds=AA.toSuperMapBounds(n.bounds)),n.inputPoints)for(var t=0;t<n.inputPoints.length;t++){var e=n.inputPoints[t];cL.a.Util.isArray(e)&&(n.inputPoints[t]={x:e[0],y:e[1],tag:e[2]})}if(n.points)for(var r=0;r<n.points.length;r++){var i=n.points[r];cL.a.Util.isArray(i)?n.points[r]={x:i[0],y:i[1]}:i instanceof cL.a.LatLng?n.points[r]={x:i.lng,y:i.lat}:n.points[r]={x:i.x,y:i.y}}if(n.point&&(cL.a.Util.isArray(n.point)?n.point={x:n.point[0],y:n.point[1]}:n.point instanceof cL.a.LatLng?n.point={x:n.point.lng,y:n.point.lat}:n.point={x:n.point.x,y:n.point.y}),n.extractRegion&&(n.extractRegion=RA(n.extractRegion)),n.extractParameter&&n.extractParameter.clipRegion&&(n.extractParameter.clipRegion=RA(n.extractParameter.clipRegion)),n.clipParam&&n.clipParam.clipRegion&&(n.clipParam.clipRegion=RA(n.clipParam.clipRegion)),n.sourceGeometry){var o=null;n.sourceGeometrySRID&&(o=n.sourceGeometrySRID),n.sourceGeometry=RA(n.sourceGeometry),o&&(n.sourceGeometry.SRID=o),delete n.sourceGeometry.sourceGeometrySRID}if(n.operateGeometry&&(n.operateGeometry=RA(n.operateGeometry)),n.sourceGeometries){for(var s=[],a=0;a<n.sourceGeometries.length;a++)s.push(RA(n.sourceGeometries[a]));n.sourceGeometries=s}if(n.operateGeometries){for(var l=[],u=0;u<n.operateGeometries.length;u++)l.push(RA(n.operateGeometries[u]));n.operateGeometries=l}if(n.sourceRoute&&n.sourceRoute instanceof cL.a.Polyline){var c={type:"LINEM"};c.parts=[n.sourceRoute.getLatLngs().length],c.points=[];for(var h=0;h<n.sourceRoute.getLatLngs().length;h++){var f=n.sourceRoute.getLatLngs()[h];c.points=c.points.concat({x:f.lng,y:f.lat,measure:f.alt})}n.sourceRoute=c}return n.operateRegions&&cL.a.Util.isArray(n.operateRegions)&&n.operateRegions.map(function(t,e){return n.operateRegions[e]=RA(t),n.operateRegions[e]}),n},_processFormat:function(t){return t||M.GEOJSON}});cL.a.supermap.spatialAnalystService=sj;function lj(t,e){return new uj(t,e)}var uj=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},getThemeInfo:function(t,e){new vw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)}});cL.a.supermap.themeService=lj;function cj(t,e){return new hj(t,e)}var hj=CA.extend({initialize:function(t,e){CA.prototype.initialize.call(this,t,e)},queryStop:function(t,e){new Kb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(t)},analysisTransferPath:function(t,e){new oS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(this._processParams(t))},analysisTransferSolution:function(t,e){new dS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,serverType:this.options.serverType,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync(this._processParams(t))},_processParams:function(n){return n?(n.points&&cL.a.Util.isArray(n.points)&&n.points.map(function(t,e){return n.points[e]=t instanceof cL.a.LatLng?{x:t.lng,y:t.lat}:t,n.points[e]}),n):{}}});cL.a.supermap.trafficTransferAnalystService=cj;var fj=cL.a.Control.extend({options:{position:"topright",style:function(t,e){return e?cL.a.circleMarker(e,{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}):{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}},onEachFeature:null},initialize:function(t){cL.a.setOptions(this,t),this._event=new cL.a.Evented,this.rootContainer=null},onAdd:function(t){return this.map=t,this.rootContainer=this._initView(),this.rootContainer},on:function(t,e){this._event.on(t,e)},off:function(t,e){this._event.off(t,e)},_initView:function(){},_preventMapEvent:function(t,e){t&&e&&(t.addEventListener("mouseover",function(){e.dragging.disable(),e.scrollWheelZoom.disable(),e.doubleClickZoom.disable()}),t.addEventListener("mouseout",function(){e.dragging.enable(),e.scrollWheelZoom.enable(),e.doubleClickZoom.enable()}))}});cL.a.supermap.components.componentsViewBase=function(t){return new fj(t)};function pj(t){return new dj(t)}var dj=cL.a.Evented.extend({initialize:function(){this.fileModel=new HT},readFile:function(t){var e=t.target,n=e.files[0];if(n.size>this.fileModel.FileConfig.fileMaxSize)return this.fire("filesizeexceed",{messageType:"warring",message:ZT.i18n("msg_fileSizeExceeded")}),!1;var r=e.value,i=n.name,o=lL.getFileType(i);if(!o)return this.fire("errorfileformat",{messageType:"failure",message:ZT.i18n("msg_fileTypeUnsupported")}),!1;""!==i&&(this.fileModel.set("loadFileObject",{file:n,filePath:r,fileName:i,fileType:o}),this._readData())},_readData:function(){var e=this,n=this,r=this.fileModel.loadFileObject.fileType;$T.readFile(r,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},function(t){$T.processDataToGeoJson(r,t,function(t){t&&e.fire("openfilesucceeded",{result:t,layerName:e.fileModel.loadFileObject.fileName.split(".")[0]})},function(t){n.fire("openfilefailed",{messageType:"failure",message:t})},e)},function(){n.fire("openfilefailed",{messageType:"failure",message:ZT.i18n("msg_openFileFail")})},this)}});cL.a.supermap.components.openFileViewModel=pj,cL.a.supermap.components.util=lL;function yj(t){return new gj(t)}var gj=fj.extend({options:{layer:null},initialize:function(t){fj.prototype.initialize.apply(this,[t]),this.viewModel=new dj},setViewStyle:function(t,e){this.rootContainer.style[t]=e},_initView:function(){var e=this,t=cL.a.DomUtil.create("div","component-openfile");return t.id="openFile",this.fileSelect=cL.a.DomUtil.create("div","",t),this.label=cL.a.DomUtil.create("label","component-openfile__span--select",this.fileSelect),this.label.htmlFor="input_file",cL.a.DomUtil.create("div","supermapol-icons-upload",this.label),cL.a.DomUtil.create("span","component-openfile__span",this.label).appendChild(document.createTextNode(ZT.i18n("text_chooseFile"))),this.fileInput=cL.a.DomUtil.create("input","component-openfile__input",this.fileSelect),this.fileInput.id="input_file",this.fileInput.type="file",this.fileInput.accept=".json,.geojson,.csv,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",this.fileInput.onchange=function(t){e.messageBox.closeView(),e.viewModel.readFile(t)},this.messageBox=new JT,this.viewModel.on("filesizeexceed",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("errorfileformat",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilefailed",function(t){e.messageBox.showView(t.message,t.messageType),e._event.fire("openfilefailed",t)}),this.viewModel.on("readdatafail",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilesucceeded",function(t){e._event.fire("openfilesucceeded",t)}),this._preventMapEvent(t,this.map),t}});cL.a.supermap.components.openFile=yj;function mj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bj(t,e,n){return e&&vj(t.prototype,e),n&&vj(t,n),t}var _j=function(){function e(t){mj(this,e),this.layers=[],t&&0<t.length&&this.addLayers(t),this.currentLayerDataModel=null}return bj(e,[{key:"addLayers",value:function(t,e,n,r){for(var i=0;i<t.length;i++){var o=t[i].layerName;if(t[i].layer instanceof cL.a.GeoJSON){var s=new wj(t[i].layer);this.layers[o]=s,e&&e.call(r,{layerName:o,layer:s})}else n&&n.call(r,"")}}},{key:"setCurrentLayerDataModel",value:function(t){this.layers[t]&&(this.currentLayerDataModel=this.layers[t])}}]),e}();cL.a.supermap.components.GeoJsonLayersDataModel=_j;var wj=function(){function n(t){if(mj(this,n),this.layer=t,this.features=t.getLayers(),this.attributeNames=[],this.features[0].feature.properties)for(var e in this.features[0].feature.properties)this.attributeNames.push(e);this.operatingAttributeNames=[],this.attributes={}}return bj(n,[{key:"setOperatingAttributeNames",value:function(t){this.operatingAttributeNames=t}},{key:"getAllAttributeNames",value:function(){return this.attributeNames}},{key:"getAttributeNamesByType",value:function(t){if(this.features[0].feature.properties){var e=this.features[0].feature.properties,n=[];if("Num"===t)for(var r in e)isNaN(e[r])||n.push(r);else n=this.attributeNames;return n}}},{key:"getAllFeatures",value:function(){return this.features}},{key:"getAttributeValueByAttributeName",value:function(t){if(this.attributes[t])return this.attributes[t];this.attributes[t]=[];for(var e=0;e<this.features.length;e++)this.attributes[t].push([this.features[e].feature.properties[t]]);return this.attributes[t]}},{key:"getFeaturesByKeyWord",value:function(t){var a=[],l=new RegExp(t.toLowerCase()),u=this;return this.features.forEach(function(t){if(!t.feature.properties)return null;for(var e,n=t.feature.properties,r=0,i=(e=0<u.operatingAttributeNames.length?u.operatingAttributeNames:u.attributeNames).length;r<i;r++)if(n[e[r]]&&l.test(n[e[r]].toString().toLowerCase())){var o=e[r],s=n[e[r]];t.filterAttribute={filterAttributeName:o,filterAttributeValue:s},a.push(t);break}}),a}}]),n}(),Sj=cL.a.Evented.extend({options:{cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"}},initialize:function(t,e){if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,cL.a.Util.setOptions(this,e),this.dataModel=new _j,this.geoCodeParam={keyWords:"北京市",city:"北京市",pageSize:this.options.pageSize,pageNum:this.options.pageNum},this.searchCache={}},search:function(t,e){e?this.searchFromLayer(t,e):this.searchFromCityLocalSearchService(t)},searchFromLayer:function(t,e){if(this.dataModel.layers[e]){var n=this.dataModel.layers[e].getFeaturesByKeyWord(t);n&&0<n.length?this.fire("searchlayersucceeded",{result:n}):this.fire("searchfailed",{searchType:"searchLayersField"})}},searchFromCityLocalSearchService:function(t){if(this.searchCache[t])this.fire("geocodesucceeded",{result:this.searchCache[t]});else{this.geoCodeParam.keyWords=t||this.geoCodeParam.city;var n=this,e=this._getSearchUrl(this.geoCodeParam);sr.get(e).then(function(t){return t.json()}).then(function(t){if(t.error||0===t.poiInfos.length)n.fire("searchfailed",{searchType:"searchGeocodeField"});else if(t.poiInfos){var e=n._dataToGeoJson(t.poiInfos,n.geoCodeParam);n.fire("geocodesucceeded",{result:e})}})}},addSearchLayers:function(t){var e=this;this.dataModel.addLayers(t,function(t){e.fire("newlayeradded",{layerName:t.layerName})},null,this)},panToLayer:function(t){this.dataModel.layers[t]&&this.map.flyToBounds(this.dataModel.layers[t].layer.getBounds())},panToCity:function(t){this.geoCodeParam.keyWords=t,this.geoCodeParam.city=t;var n=this,e=this._getSearchUrl(this.geoCodeParam);sr.get(e).then(function(t){return t.json()}).then(function(t){if(0<t.poiInfos.length){var e=cL.a.latLng(t.poiInfos[0].location.y,t.poiInfos[0].location.x);n.map.setView(e,8)}else n.fire("searchfailed",{searchType:"cityGeocodeField"})})},_dataToGeoJson:function(t,e){for(var n=[],r=0;r<t.length;r++){var i={type:"Feature",geometry:{type:"Point",coordinates:[t[r].location.x,t[r].location.y]},properties:{name:t[r].name||e.keyWords,address:t[r].formatedAddress||t[r].address}};n.push(i)}return n},_getSearchUrl:function(t){return this.options.cityGeoCodingConfig.addressUrl+".json?keywords=".concat(t.keyWords,"&city=").concat(t.city,"&pageSize=").concat(t.pageSize,"&pageNum=").concat(t.pageNum,"&key=").concat(this.options.cityGeoCodingConfig.key)}});cL.a.supermap.components.searchViewModel=function(t){return new Sj(t)};function xj(t){return new Ej(t)}var Ej=fj.extend({options:{cityConfig:{HOT:{HOT:["北京市","上海市","广州市","深圳市","南京市","杭州市","天津市","重庆市","成都市","青岛市","苏州市","无锡市","常州市","温州市","武汉市","长沙市","南昌市","三亚市","合肥市","石家庄市"]},AB:{A:["阿拉善盟","鞍山市","安庆市","安阳市","阿坝藏族羌族自治州","安顺市","阿里地区","安康市","阿克苏地区","阿勒泰地区","阿拉尔市"],B:["北京市","保定市","包头市","巴彦淖尔市","本溪市","白山市","白城市","蚌埠市","亳州市","滨州市","北海市","百色市","白沙黎族自治县","保亭黎族苗族自治县","巴中市","毕节地区","保山市","宝鸡市","白银市","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","北区"]},CD:{C:["重庆市","成都市","常州市","长沙市","承德市","沧州市","长治市","赤峰市","朝阳市","长春市","滁州市","巢湖市","池州市","常德市","郴州市","潮州市","崇左市","澄迈县","昌江黎族自治县","楚雄彝族自治州","昌都地区","昌吉回族自治州"],D:["大同市","大连市","丹东市","大庆市","大兴安岭地区","东营市","德州市","东莞市","儋州市","东方市","定安县","德阳市","达州市","大理白族自治州","德宏傣族景颇族自治州","迪庆藏族自治州","定西市","东区","大埔区","大堂区"]},EFG:{E:["鄂尔多斯市","鄂州市","恩施土家族苗族自治州"],F:["抚顺市","阜新市","阜阳市","福州市","抚州市","佛山市","防城港市"],G:["广州市","赣州市","桂林市","贵港市","广元市","广安市","贵阳市","固原市","高雄市","高雄县","甘南藏族自治州","甘孜藏族自治州"]},H:{H:["杭州市","合肥市","邯郸市","衡水市","呼和浩特市","呼伦贝尔市","葫芦岛市","哈尔滨市","鹤岗市","黑河市","淮安市","湖州市","淮南市","淮北市","黄山市","菏泽市","鹤壁市","黄石市","黄冈市","衡阳市","怀化市","惠州市","河源市","贺州市","河池市","海口市","红河哈尼族彝族自治州","汉中市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","海西蒙古族藏族自治州","哈密地区","和田地区","花莲县","黄大仙区","花地玛堂区"]},J:{J:["晋城市","晋中市","锦州市","吉林市","鸡西市","佳木斯市","嘉兴市","金华市","景德镇市","九江市","吉安市","济南市","济宁市","焦作市","济源市","荆门市","荆州市","江门市","湛江市","揭阳市","嘉峪关市","金昌市","酒泉市","基隆市","嘉义市","嘉义县","九龙城区","嘉模堂区"]},KL:{K:["开封市","昆明市","克拉玛依市","克孜勒苏柯尔克孜自治州","喀什地区"],L:["廊坊市","临汾市","吕梁市","辽阳市","辽源市","连云港市","丽水市","六安市","龙岩市","莱芜市","临沂市","聊城市","洛阳市","漯河市","娄底市","柳州市","来宾市","临高县","乐东黎族自治县","陵水黎族自治县","泸州市","乐山市","凉山彝族自治州","六盘水市","丽江市","临沧市","拉萨市","林芝地区","兰州市","陇南市","临夏回族自治州"]},MNP:{M:["牡丹江市","马鞍山市","茂名市","梅州市","绵阳市","眉山市","苗栗县"],N:["南京市","南昌市","南通市","宁波市","南平市","宁德市","南阳市","南宁市","南沙群岛","内江市","南充市","怒江傈傈族自治州","那曲地区","南投县"],P:["盘锦市","莆田市","萍乡市","平顶山市","濮阳市","攀枝花市","平凉市","屏东县","澎湖县"]},QR:{Q:["青岛市","秦皇岛市","齐齐哈尔市","黔西南布依族苗族自治州","七台河市","衢州市","泉州市","潜江市","清远市","钦州市","琼海市","曲靖市","庆阳市","荃湾区","黔东南苗族侗族自治州","黔南布依族苗族自治州","琼中黎族苗族自治县"],R:["日照市","日喀则地区"]},S:{S:["上海市","深圳市","苏州市","石家庄市","三亚市","朔州市","沈阳市","四平市","松原市","双鸭山市","绥化市","宿迁市","绍兴市","宿州市","三明市","上饶市","三门峡市","商丘市","十堰市","随州市","邵阳市","韶关市","汕头市","汕尾市","三亚市","遂宁市","思茅市","山南地区","商洛市","石嘴山市","石河子市","深水埗区","沙田区","神农架林区","圣安多尼堂区","圣方济各堂区"]},T:{T:["天津市","唐山市","太原市","通辽市","铁岭市","通化市","泰州市","台州市","铜陵市","泰安市","天门市","屯昌县","铜仁地区","铜川市","天水市","吐鲁番地区","塔城地区","图木舒克市","台北市","台中市","台南市","台北县","桃园县","台中县","台南县","台东县","屯门区"]},W:{W:["无锡市","温州市","武汉市","乌海市","乌兰察布市","芜湖市","潍坊市","威海市","梧州市","五指山市","文昌市","万宁市","文山壮族苗族自治州","渭南市","武威市","吴忠市","乌鲁木齐市","五家渠市","湾仔区","望德堂区"]},X:{X:["邢台市","忻州市","兴安盟","徐州市","宣城市","厦门市","新余市","新乡市","许昌市","信阳市","襄樊市","孝感市","咸宁市","仙桃市","湘潭市","西安市","咸阳市","西宁市","新竹市","新竹县","西贡区","锡林郭勒盟","西沙群岛","湘西土家族苗族自治州","西双版纳傣族自治州"]},Y:{Y:["阳泉市","运城市","营口市","延边朝鲜族自治州","伊春市","盐城市","扬州市","鹰潭市","宜春市","烟台市","宜昌市","岳阳市","益阳市","永州市","阳江市","云浮市","玉林市","宜宾市","雅安市","玉溪市","延安市","榆林市","玉树藏族自治州","银川市","伊犁哈萨克自治州","宜兰县","云林县","油尖旺区","元朗区"]},Z:{Z:["郑州市","张家口市","镇江市","舟山市","漳州市","淄博市","枣庄市","周口市","驻马店市","株洲市","张家界市","珠海市","肇庆市","中山市","自贡市","资阳市","遵义市","昭通市","张掖市","中卫市","彰化县","中西区","中沙群岛的岛礁及其海域"]}},cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},isGeoCoding:!0,pageSize:10,pageNum:1,perPageDataNum:8},initialize:function(t){fj.prototype.initialize.apply(this,[t]),this.currentSearchLayerName="",this.isSearchLayer=!1,this.perPageDataNum=this.options.perPageDataNum},onAdd:function(t){return this.viewModel=new Sj(t,this.options),fj.prototype.onAdd.apply(this,[t])},addSearchLayer:function(t){this.viewModel.addSearchLayers(t)},_initView:function(){var e=this,c=this,t=document.createElement("div");t.setAttribute("class","component-search-container");var n=document.createElement("div");n.setAttribute("class","component-search");var r=document.createElement("div");r.setAttribute("class","component-search__settings");var h=document.createElement("div");h.setAttribute("class","component-search__settings__name"),r.appendChild(h);var i=document.createElement("span");i.setAttribute("class","supermapol-icons-solid-down-triangle"),r.appendChild(i);var o=null;if(this.options.isGeoCoding){var s=new XM({config:this.options.cityConfig});o=s.getElement(),s.content.onclick=function(t){"SPAN"===t.target.nodeName&&t.target.innerText&&(e.viewModel.panToCity(t.target.innerHTML),e.messageBox.closeView(),h.removeChild(h.firstChild),h.insertBefore(document.createTextNode(t.target.innerHTML),h.firstChild),e.isSearchLayer=!1)},h.appendChild(document.createTextNode(s.content.getElementsByTagName("span")[0].innerText))}var a=function(){var t=document.createElement("div");t.setAttribute("class","component-search__layers");var e=document.createElement("div");e.setAttribute("class","component-search-layers-content"),t.appendChild(e);var n=document.createElement("div");n.setAttribute("class","component-search__layers__header");var r=document.createElement("div");r.setAttribute("class","load-btn"),n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","supermapol-icons-poi-load"),r.appendChild(i);var o=document.createElement("span");o.appendChild(document.createTextNode(ZT.i18n("text_loadSearchCriteria"))),r.appendChild(o);var s=document.createElement("div");s.setAttribute("class","save-btn"),n.appendChild(s);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-poi-save"),s.appendChild(a);var l=document.createElement("span");l.appendChild(document.createTextNode(ZT.i18n("text_saveSearchCriteria"))),s.appendChild(l);var u=document.createElement("div");return u.setAttribute("class","component-search__layers__body"),u.onclick=function(t){c.clearSearchResult();var e=null;if("component-search__layers__itme__singleselect"===t.target.classList[0])e=t.target;else{if("component-single-default-img"!==t.target.classList[0]&&"single-label"!==t.target.classList[0])return;e=t.target.parentNode}0<document.getElementsByClassName("component-single-checked-img").length&&document.getElementsByClassName("component-single-checked-img")[0].setAttribute("class","component-single-default-img"),e.firstChild.setAttribute("class","component-single-checked-img"),c.currentSearchLayerName=e.lastChild.innerText,c.isSearchLayer=!0,h.removeChild(h.firstChild),h.insertBefore(document.createTextNode(c.currentSearchLayerName),h.firstChild),c.viewModel.panToLayer(c.currentSearchLayerName),c.messageBox.closeView()},e.appendChild(u),t}(),l=[];o&&l.push({title:ZT.i18n("title_searchCity"),content:o}),l.push({title:ZT.i18n("title_searchLayer"),content:a});var u=new eL({tabs:l}),f=u.getElement();u.closeView(),n.appendChild(f),r.onclick=function(){f.hidden?u.showView():u.closeView()},n.appendChild(r),h.innerText||h.appendChild(document.createTextNode(ZT.i18n("text_label_chooseSearchLayers")));var p=document.createElement("div");p.setAttribute("class","component-search__input");var d=document.createElement("input");d.type="text",d.placeholder=ZT.i18n("text_label_searchTips"),p.appendChild(d),this.poiInput=d;var y=document.createElement("span");y.setAttribute("class","supermapol-icons-close"),y.hidden=!0,p.appendChild(y),n.appendChild(p);var g=document.createElement("div");g.setAttribute("class","component-search-icon supermapol-icons-search"),g.onclick=function(){m.closeView(),e.clearSearchResult(),e.messageBox.closeView(),u.closeView();var t=e.poiInput.value.trim();""!==t?e.isSearchLayer?e.viewModel.search(t,e.currentSearchLayerName):e.viewModel.search(t):e.messageBox.showView(ZT.i18n("msg_searchKeywords"))},d.onkeypress=function(t){if(13==t.which){var e=document.createEvent("HTMLEvents");e.initEvent("click",!1,!0),g.dispatchEvent(e)}},n.appendChild(g);var m=new aL;this._resultDomObj=m;var v,b=((v=m.getElement()).style.position="absolute",v.style.top="44px",v.style.right="0",m.closeView(),m.content.onclick=function(t){var e=null;if("component-search-result-info"===t.target.parentNode.className)e=t.target.parentNode.parentNode;else if("component-search__resultitme"===t.target.parentNode.className)e=t.target.parentNode;else{if("component-search__resultitme"!==t.target.className)return;e=t.target}0<document.getElementsByClassName("component-search__resultitme-selected").length&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),e.firstChild.classList.add("component-search__resultitme-selected");var n=e.children[1].firstChild.innerText;c._linkageFeature(n)},v);return n.appendChild(b),y.onclick=function(t){e.clearSearchResult(),d.value="",t.target.hidden=!0,m.closeView()},d.oninput=function(){y.hidden=!1},this.messageBox=new JT,this._addViewModelListener(),t.appendChild(n),this._preventMapEvent(t,this.map),t},_createSearchLayerItem:function(t){var e=document.createElement("div");e.setAttribute("class","component-search__layers__itme");var n=document.createElement("div");n.setAttribute("class","component-search__layers__itme__singleselect");var r=document.createElement("div");r.setAttribute("class","component-single-default-img"),n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","single-label"),i.innerHTML=t,n.appendChild(i),e.appendChild(n),document.getElementsByClassName("component-search__layers__body")[0].appendChild(e)},_createResultItem:function(t,e){var n=document.createElement("div");n.setAttribute("class","component-search__resultitme");var r=document.createElement("div");"Point"===t||"MultiPoint"===t?r.setAttribute("class","supermapol-icons-marker-layer component-search-result-icon"):"LineString"===t||"MultiLineString "===t?r.setAttribute("class","supermapol-icons-line-layer component-search-result-icon"):"Polygon"===t||"MultiPolygon"===t?r.setAttribute("class","supermapol-icons-polygon-layer component-search-result-icon"):r.setAttribute("class","supermapol-icons-point-layer component-search-result-icon"),n.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-search-result-info");var o=document.createElement("div");i.appendChild(o);var s=document.createElement("div");return e.name?(o.innerHTML=e.name,s.innerHTML=e.address,i.appendChild(s)):o.innerHTML=e.filterAttributeName+": "+e.filterAttributeValue,n.appendChild(i),document.createElement("div").setAttribute("class","component-checkbox component-checkbox-default-img"),n},_addViewModelListener:function(){var n=this;this.viewModel.on("searchlayerschanged",function(t){for(var e=0;e<t.length;e++)n._createSearchLayerItem(t[e])}),this.viewModel.on("newlayeradded",function(t){n._createSearchLayerItem(t.layerName)}),this.viewModel.on("searchlayersucceeded",function(t){var e=t.result;n.clearSearchResult(),n.searchResultLayer=cL.a.featureGroup(e,{pointToLayer:n.options.style,style:n.options.style}).bindPopup(function(t){if(t.feature.properties)return new DM({attributes:t.feature.properties}).getElement()}).addTo(n.map),n.searchResultLayer.eachLayer(function(t){n.options.onEachFeature?n.options.onEachFeature(t.toGeoJSON(),t):n._featureOnclickEvent.bind(n)(t.toGeoJSON(),t)}),n.searchLayersData=e,n._prepareResultData(e),n._event.fire("searchlayersucceeded",{result:n.searchResultLayer.toGeoJSON()})}),this.viewModel.on("geocodesucceeded",function(t){var e=t.result;n.clearSearchResult(),n.searchResultLayer=cL.a.geoJSON(e,{pointToLayer:n.options.style,style:n.options.style,onEachFeature:n.options.onEachFeature||n._featureOnclickEvent.bind(n)}).bindPopup(function(t){if(t.feature.properties)return new DM({attributes:t.feature.properties}).getElement()}).addTo(n.map),n.searchLayersData=e,n._prepareResultData(e),n._event.fire("geocodesucceeded",{result:e})}),this.viewModel.on("searchfailed",function(t){var e="";e="searchGeocodeField"===t.searchType?ZT.i18n("msg_searchGeocodeField"):"cityGeocodeField"===t.searchType?ZT.i18n("msg_cityGeocodeField"):ZT.i18n("msg_getFeatureField"),n.messageBox.showView(e),n._event.fire("searchfailed",{message:e})})},_prepareResultData:function(t){this.currentResult=t;var e=Math.ceil(t.length/this.perPageDataNum);this._resultDomObj.setPageLink(e),this._createResultListByPageNum(1,t),this._resultDomObj.showView(),this._resultDomObj.setLinkageEvent(function(t){n._createResultListByPageNum(t,n.currentResult)});var n=this},_createResultListByPageNum:function(t,e){var n,r=0;n=1===t&&e.length<this.perPageDataNum?e.length-1:t*this.perPageDataNum>e.length?(r=this.perPageDataNum*(t-1),e.length-1):(r=this.perPageDataNum*(t-1),t*this.perPageDataNum-1);for(var i=document.createElement("div"),o=r;o<=n;o++){var s=void 0,a="Point";s=e[o].filterAttribute?(a=e[o].feature.geometry.type,e[o].filterAttribute):e[o].properties,i.appendChild(this._createResultItem(a,s))}this._resultDomObj.setContent(i),this._resultDomObj.showView(),i.firstChild.getElementsByClassName("component-search-result-icon")[0].classList.add("component-search__resultitme-selected");var l=i.firstChild.getElementsByClassName("component-search-result-info")[0].firstChild.innerText;this._selectMarkerFeature||this._linkageFeature(l)},_flyToBounds:function(t){var e=t.getSouthWest(),n=t.getNorthEast();e.lat===n.lat&&e.lng===n.lng?this.map.flyTo(e):this.map.fitBounds(t)},_linkageFeature:function(t){var e=this,n="";n=this.isSearchLayer?t.split(":")[1].trim():t,this._selectFeature&&this._selectFeature.addTo(this.map),this.searchResultLayer.eachLayer(function(t){(!n||t.filterAttribute&&t.filterAttribute.filterAttributeValue===n||t.feature.properties&&t.feature.properties.name===n)&&(t.remove(),e._setSelectedLayerStyle(t))})},clearSearchResult:function(){this.searchResultLayer&&(this.map.closePopup(),this.isSearchLayer||this.map.removeLayer(this.searchResultLayer),this._selectMarkerFeature&&this.map.removeLayer(this._selectMarkerFeature),this._selectFeaturethis&&this.map.removeLayer(this._selectFeature),this._selectMarkerFeature=null,this._selectFeature=null,this.searchResultLayer=null,this.currentResult=null)},_featureOnclickEvent:function(c,h){var f=this;h.on("click",function(){var t,e,n=document.getElementsByClassName("component-pagination__link")[0];f._resultDomObj._changePageEvent({target:n.children[0].children[0]}),f._selectFeature&&f._selectFeature.addTo(f.map),h.remove();for(var r=0;r<f.searchLayersData.length;r++){var i=f.searchLayersData[r];if(i.properties&&i.properties.name===c.properties.name||i.filterAttribute&&i.filterAttribute.filterAttributeName+": "+i.filterAttribute.filterAttributeValue==h.filterAttribute.filterAttributeName+": "+h.filterAttribute.filterAttributeValue){e=r%f.perPageDataNum,t=parseInt(r/f.perPageDataNum)+1;break}}if(1<t)for(var o=1;o<t;o++){var s;s=document.getElementsByClassName("component-pagination__link")[0],f._resultDomObj._changePageEvent({target:s.children[s.children.length-2].children[0]})}var a=document.getElementsByClassName("component-search-result-info"),l=a[e].children[0];if(l.innerHTML===c.properties.name||l.innerHTML===h.filterAttribute.filterAttributeName+": "+h.filterAttribute.filterAttributeValue){var u=a[e].parentNode;0<document.getElementsByClassName("component-search__resultitme-selected").length&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),u.firstChild.classList.add("component-search__resultitme-selected"),f._setSelectedLayerStyle(h)}},this)},_setSelectedLayerStyle:function(t){var e;this._selectMarkerFeature&&this._selectMarkerFeature.remove(),this._selectMarkerFeature=null,this._selectFeature=t,this._selectMarkerFeature=cL.a.geoJSON(t.toGeoJSON(),{pointToLayer:function(t,e){return cL.a.marker(e,{icon:cL.a.divIcon({className:"component-select-marker-icon",iconAnchor:[15,0]})})},style:{fillColor:"red",weight:1,opacity:1,color:"red",fillOpacity:.2}}).addTo(this.map),this._selectMarkerFeature.bindPopup(function(){return new DM({attributes:t.feature.properties}).getElement()},{closeOnClick:!1}).openPopup().addTo(this.map),this._flyToBounds(this.searchResultLayer.getBounds()),t.getLatLng?e=t.getLatLng():t.getCenter&&(e=t.getCenter()),this.map.setView(e)}});cL.a.supermap.components.search=xj;var Oj=cL.a.Evented.extend({options:{_defaultLayerOptions:{style:null,onEachFeature:function(t,e){var n="属性信息如下：<br>";for(var r in t.properties)n+=r+": "+t.properties[r]+"<br>";e.bindPopup(n)}}},initialize:function(t,e){var n=1<arguments.length&&void 0!==e?e:null;if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,cL.a.Util.extend(this.options._defaultLayerOptions,n),this.options._defaultLayerOptions.pointToLayer=this.options._defaultLayerOptions.style,this.popupsStatus=!0,this.dataFlowStatus=!1,this.dataFlowUrl="",this.currentFeatures=[],this.dataFlowLayer=null},subscribe:function(t){var i=this;if(this.dataFlowUrl===t){if(this.dataFlowStatus)return void this.fire("dataflowservicesubscribed")}else this.dataFlowUrl=t;this.dataFlowStatus=!0,this.dataFlowLayer&&(this.dataFlowLayer.remove(),this.dataFlowLayer=null);var e=new zI(t,this.options._defaultLayerOptions);e.on("subscribesucceeded",function(t){i.fire("subscribesucceeded",{result:t})}),e.on("subscribefailed",function(t){i.fire("subscribefailed",{result:t})}),e.on("dataupdated",function(t){i.fire("dataupdated",{result:t});var e=t.layer.getBounds(),n=AA.toSuperMapBounds(i.map.getBounds()),r=AA.toSuperMapBounds(e);n.intersectsBounds(r)||(r.left===r.right&&r.top===r.bottom?i.map.setView(e.getCenter()):i.map.flyToBounds(e)),i.popupsStatus&&i.openPopups()}),e.addTo(this.map),this.dataFlowLayer=e},cancelSubscribe:function(){this.dataFlowLayer&&(this.dataFlowStatus=!1,this.dataFlowLayer.dataService.unSubscribe(),this.dataFlowLayer.remove(),this.dataFlowLayer=null)},openPopups:function(){if(this.popupsStatus=!0,this.dataFlowLayer)for(var t=this.dataFlowLayer.getLayers(),e=0;e<t.length;e++)for(var n=0;n<t[e].getLayers().length;n++)t[e].getLayers()[n].openPopup()},closePopups:function(){if(this.popupsStatus=!1,this.dataFlowLayer)for(var t=this.dataFlowLayer.getLayers(),e=0;e<t.length;e++)for(var n=0;n<t[e].getLayers().length;n++)t[e].getLayers()[n].closePopup()}});cL.a.supermap.components.dataFlowViewModel=function(t){return new Oj(t)};function Cj(t){return new Pj(t)}var Pj=fj.extend({initialize:function(t){fj.prototype.initialize.apply(this,[t])},onAdd:function(t){var e={};return this.options.style&&(e.style=this.options.style),this.options.onEachFeature&&(e.style=this.options.onEachFeature),this.viewModel=new Oj(t,e),fj.prototype.onAdd.apply(this,[t])},_initView:function(){var e=this,t=new pM({title:ZT.i18n("title_dataFlowService")}),n=t.getElement(),r=t.getContentElement();r.style.padding="10px 18px";var i=document.createElement("div");i.setAttribute("class","component-dataflow__container");var o=document.createElement("div");o.setAttribute("class","component-input-default");var s=document.createElement("input");s.setAttribute("class","component-input-default"),s.type="text",s.placeholder=ZT.i18n("text_input_value_inputDataFlowUrl"),s.title=ZT.i18n("text_input_value_inputDataFlowUrl"),o.appendChild(s);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-close"),a.hidden=!0,a.onclick=function(t){s.value="",t.target.hidden=!0},s.oninput=function(){a.hidden=!1},o.appendChild(a),i.appendChild(o),r.appendChild(i);var l=document.createElement("div");l.setAttribute("class","component-dataflow__container");var u=document.createElement("div");u.setAttribute("class","component-checkbox-container");var c=document.createElement("div");c.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),c.checked=!0,u.appendChild(c);var h=document.createElement("div");h.setAttribute("class","component-label component-label-selected"),h.innerHTML=ZT.i18n("text_displayFeaturesInfo"),u.appendChild(h),c.onclick=function(t){t.target.checked=!t.target.checked,t.target.checked?(h.setAttribute("class","component-label component-label-selected"),t.target.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),e.viewModel.openPopups()):(h.setAttribute("class","component-label"),t.target.setAttribute("class","component-checkbox-default component-checkbox-default-img"),e.viewModel.closePopups())},l.appendChild(u),r.appendChild(l);var f=document.createElement("div");f.setAttribute("class","component-dataflow__container component-init-center");var p=document.createElement("button");p.setAttribute("class","component-button-default"),p.innerHTML=ZT.i18n("text_subscribe"),p.onclick=function(){var t=s.value;""!==t?e.viewModel.subscribe(t):e.messageBox.showView(ZT.i18n("msg_inputDataFlowUrlFirst"))},f.appendChild(p);var d=document.createElement("button");return d.setAttribute("class","component-button-default"),d.innerHTML=ZT.i18n("text_cancelSubscribe"),d.onclick=function(){e.viewModel.cancelSubscribe()},f.appendChild(d),r.appendChild(f),this.messageBox=new JT,this.viewModel.on("dataflowservicesubscribed",function(){e.messageBox.showView(ZT.i18n("msg_dataflowservicesubscribed"))}),this.viewModel.on("subscribesucceeded",function(){e.messageBox.showView(ZT.i18n("msg_subscribesucceeded"))}),this.viewModel.on("dataupdated",function(t){e.messageBox.closeView(),e._event.fire("dataupdated",t)}),this._preventMapEvent(n,this.map),n}});cL.a.supermap.components.dataFlow=Cj;function Tj(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tj),this.layerName=t,this.layer=e}function Mj(t,e){return new Tj(t,e)}function Lj(t){return(Lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kj(t,e){return!e||"object"!==Lj(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Aj(t){return(Aj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ij(t,e){return(Ij=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}cL.a.supermap.components.geoJSONLayerWithName=Mj;var Rj=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kj(this,Aj(t).apply(this,arguments))}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ij(t,e)}(t,cL.a.Evented),e=t,(n=[{key:"initialize",value:function(t){this.workerUrl=t,this.turfLayers=[]}},{key:"getLayersData",value:function(t){for(var e={},n={},r={},i={},o=0;o<t;o++)t[o]=new Tj(t[o].layerName,t[o].layer);this.geoJsonLayersDataModel=new _j(t);for(var s=[],a=0;a<t.length;a++)s[t[a].layerName]={fields:t[a].fields,layer:t[a].layer.toGeoJSON()};for(var l in this.geoJsonLayersDataModel.layers){var u=void 0;u=s[l].fields?s[l].fields:this.geoJsonLayersDataModel.layers[l].getAttributeNamesByType("Num");for(var c=[],h=0;h<u.length;h++){c[u[h]]=this.geoJsonLayersDataModel.layers[l].getAttributeValueByAttributeName(u[h]);for(var f=c[u[h]],p=0;p<f.length;p++)""!=f[p]&&void 0!==f[p]||(f.splice(p,1),--p),f[p]=parseFloat(f[p]);c[u[h]]=Array.from(new Set(f.sort(function(t,e){return t-e})))}var d={layerName:l,fields:u,fieldsValue:c,features:s[l].layer},y=s[l].layer.features[0].geometry.type;"Point"===y?n[l]=d:"LineString"===y?r[l]=d:"Polygon"===y&&(i[l]=d)}return e.point=n,e.lineString=r,e.polygon=i,e}},{key:"analysis",value:function(n,r){this.geoJsonLayersDataModel.setCurrentLayerDataModel(n.analysisLayers),this.worker=new Worker(this.workerUrl);var t=this.geoJsonLayersDataModel.currentLayerDataModel.layer.toGeoJSON();if("isolines"===n.analysisMethod){for(var e=n.analysisFieldsValue.split(","),i=t,o=0;o<e.length;o++)e[o]=parseFloat(e[o]);var s=this,a={pointGrid:i,analysisMethod:n.analysisMethod,breaks:e,zProperty:n.analysisFields,analysisCellSize:n.analysisCellSize,options:{gridType:"point",property:n.analysisFields,weight:Number(n.analysisBreaks)}};this.worker.postMessage(a),this.worker.onmessage=function(t){if(0===t.data.features.length)s.fire("analysisfailed");else{s.fire("analysissucceeded",{data:t.data});var e=cL.a.geoJSON(t.data,{style:{color:"#1060C2",weight:3},onEachFeature:function(t,e){t.properties&&e.bindPopup(new DM(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",weight:5})},mouseout:function(){e.setStyle({color:"#1060C2",weight:3})},click:function(){e.setStyle({color:"#ffffff",weight:5})}})}}).addTo(r);s.turfLayers.push(e),s.fire("layerloaded",{layer:e,name:n.resultLayersName}),s.worker.terminate()}}}else if("buffer"===n.analysisMethod){var l=this,u={analysisMethod:"buffer",radius:n.radius,unit:n.unit,isSave:n.isSaveStatus,isUnion:n.isUnion,geoJson:t};this.worker.postMessage(u),this.worker.onmessage=function(t){var e=cL.a.geoJSON(t.data,{style:{color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5},onEachFeature:function(t,e){t.properties&&e.bindPopup(new DM(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:5})},mouseout:function(){e.setStyle({color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5})},click:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:2})}})}}).addTo(r);l.turfLayers.push(e),l.fire("layerloaded",{layer:e,name:n.resultLayersName}),l.worker.terminate()}}}},{key:"clearLayers",value:function(){for(var t in this.turfLayers)this.turfLayers[t].clearLayers();this.fire("layersremoved",{layers:this.turfLayers})}},{key:"cancelAnalysis",value:function(){this.worker.terminate()}}])&&Nj(e.prototype,n),r&&Nj(e,r),t}();cL.a.supermap.components.clientComputationViewModel=function(t){return new Rj(t)};function jj(t){return new Dj(t)}var Dj=fj.extend({initialize:function(t,e){if(!t)throw new Error("workerUrl is required");this.workerUrl=t,fj.prototype.initialize.apply(this,[e])},onAdd:function(t){return this.map=t,fj.prototype.onAdd.apply(this,[t])},addLayer:function(t){this.layers=this.layers||[],this.layers.push(t);var e=this.viewModel.getLayersData(this.layers);this.fillDataToView(e)},fillDataToView:function(t){if(t){this.fillData=t;var e={};switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":case"buffer":e=t.point}if("{}"!=JSON.stringify(e)){var n=[];for(var r in e)n.push(r);var i=document.getElementById("layersSelect"),o=document.getElementById("layerSelectName");i.innerHTML="",o.title=n[0],o.innerHTML=n[0],this._createOptions(i,n),this.layerSelectObj.optionClickEvent(i,o,this.layersSelectOnchange);var s=e[o.title],a=s.fields,l=s.fieldsValue;this.currentData=s,this.currentFillData=e;var u=document.getElementById("fieldsSelect");u.innerHTML="";var c=document.getElementById("fieldsSelectName");c.innerHTML=a[0],c.title=a[0],this._createOptions(u,a),this.fieldsSelectObj.optionClickEvent(u,c,this.fieldsSelectOnchange);var h=c.title,f=document.getElementById("getValueTextArea");f.value=l[h].toString().replace(/,/g,",\r\n"),f.setAttribute("data-value",l[h]);var p=document.getElementById("resultLayersName");switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":p.value=ZT.i18n("text_label_isolines")+o.title;break;case"buffer":p.value=ZT.i18n("text_label_buffer")+o.title}}}},_initView:function(){var d=this;this.workerUrl&&(this.viewModel=new Rj(this.workerUrl));var t=new pM({title:ZT.i18n("title_clientComputing")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";var e=[{title:ZT.i18n("text_isoline"),dataValue:"isolines",remark:ZT.i18n("text_extractDiscreteValue"),icon:{className:"component-analyst-isoline-img"}},{title:ZT.i18n("text_buffer"),dataValue:"buffer",remark:ZT.i18n("text_specifyTheDistance"),icon:{className:"component-analyst-buffer-img"}}],a=t.children[1];a.classList.add("component-content--scroll"),a.classList.add("component-content--analysis");var n=new OM(e).getElement();a.appendChild(n);var l=n.children[0].children[0],u=n.children[0].children[2].children[0];l.children[0].id="dropDownTop";var r=cL.a.DomUtil.create("div","component-analysis__container",a),i=cL.a.DomUtil.create("div","component-analysis__container__analysisLayer",r),o=cL.a.DomUtil.create("div","component-analysis__selecttool",i);o.id="layerSelectControl";var s={optionsArr:[""],labelName:ZT.i18n("text_label_analysisLayer")},c=new bM(s),h=c.getElement();this.layerSelectObj=c,o.appendChild(h);var y=h.children[1].children[0];y.id="layerSelectName",h.children[1].children[2].children[0].children[0].id="layersSelect";var f=cL.a.DomUtil.create("div","component-analysis__container__analysistype",r),p=cL.a.DomUtil.create("div","component-clientcomputation__isoline",f),g={optionsArr:[""],labelName:ZT.i18n("text_label_extractField"),optionsClickCb:this.fieldsSelectOnchange},m=cL.a.DomUtil.create("div","component-analysis__selecttool",p),v=new bM(g),b=v.getElement();this.fieldsSelectObj=v;var _=b.children[1].children[0];_.id="fieldsSelectName";var w=b.children[1].children[2].children[0].children[0];w.id="fieldsSelect",m.appendChild(b);var S=cL.a.DomUtil.create("div","component-analysis__container",p);cL.a.DomUtil.create("span","component-textarea__name",S).innerHTML=ZT.i18n("text_label_extractedValue");var x=cL.a.DomUtil.create("div","component-textarea",S);x.id="getValueText";var E=cL.a.DomUtil.create("div","",x),O=cL.a.DomUtil.create("div","component-scrollarea-content",E);O.setAttribute("tabindex","1");var C=cL.a.DomUtil.create("textarea","component-textarea__content",O);C.id="getValueTextArea",C.setAttribute("rows","20");var P=cL.a.DomUtil.create("div","",p);cL.a.DomUtil.create("span","",P).innerHTML=ZT.i18n("text_label_distanceAttenuation");var T=cL.a.DomUtil.create("input","",P);T.value="3";var M=cL.a.DomUtil.create("div","",p);cL.a.DomUtil.create("span","",M).innerHTML=ZT.i18n("text_label_gridSize");var L=cL.a.DomUtil.create("input","",M);L.value="30";var N=cL.a.DomUtil.create("div","component-clientcomputation__buffer hidden",f),k=cL.a.DomUtil.create("div","component-clientcomputation__buffer--radius",N);cL.a.DomUtil.create("span","",k).innerHTML=ZT.i18n("text_label_bufferRadius");var A=cL.a.DomUtil.create("div","",k),I=cL.a.DomUtil.create("input","buffer-radius-input",A);I.id="bufferRadiusInput",I.value="10",I.setAttribute("placeholder",ZT.i18n("text_label_defaultkilometers"));var R=cL.a.DomUtil.create("div","component-clientcomputation__buffer--unit",A);R.id="bufferUnit";var j={optionsArr:[ZT.i18n("text_option_kilometer")],labelName:ZT.i18n("text_label_unit")},D=new bM(j).getElement(),F=D.children[1].children[0];F.id="bufferUnitSelectName",D.children[1].children[2].children[0].children[0].id="bufferUnitSelect",D.children[0].style.display="none",R.appendChild(D);var B=cL.a.DomUtil.create("div","",k),G=cL.a.DomUtil.create("div","component-clientcomputation__buffer--issaveattrs",B);G.id="saveAttrsContainer";var U=cL.a.DomUtil.create("div","checkbox checkbox-fault",G);U.id="saveAttrsCheckbox";var z=cL.a.DomUtil.create("div","lable",G);z.id="saveAttrsLabel",z.innerHTML=ZT.i18n("text_retainOriginal");var q=cL.a.DomUtil.create("div","component-clientcomputation__buffer--isunion",B);q.id="isUnionContainer";var V=cL.a.DomUtil.create("div","checkbox checkbox-fault",q);V.id="isUnionCheckbox";var H=cL.a.DomUtil.create("div","lable",q);H.innerHTML=ZT.i18n("text_mergeBuffer"),H.id="isUnionLabel";var W=cL.a.DomUtil.create("div","component-analysis__container__resultLayersName",r);cL.a.DomUtil.create("span","",W).innerHTML=ZT.i18n("text_label_resultLayerName");var J=cL.a.DomUtil.create("input","",W);J.id="resultLayersName";var Y=cL.a.DomUtil.create("div","component-analysis__container__analysisbtn",r),X=cL.a.DomUtil.create("div","component-analysis__analysisbtn",Y),Z=cL.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",X);Z.innerHTML=ZT.i18n("btn_analyze");var Q=cL.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",X),K=cL.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",Q),$=cL.a.DomUtil.create("div","component-analysis__svg-container",K);$.id="analyse_background",$.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',cL.a.DomUtil.create("span","",K).innerHTML=ZT.i18n("btn_analyzing");var tt=cL.a.DomUtil.create("button","component-analysis__analysisbtn--cancel",Q);tt.innerHTML=ZT.i18n("btn_cancelAnalysis");var et=cL.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",X);et.innerHTML=ZT.i18n("btn_emptyTheAnalysisLayer");for(var nt=function(s){u.children[s].onclick=function(){l.innerHTML=u.children[s].outerHTML,l.children[0].id="dropDownTop";var t=document.getElementById("layersSelect"),e=document.getElementById("layerSelectName"),n=u.children[s].getAttribute("data-value"),r={};switch(n){case"buffer":p.classList.add("hidden"),N.classList.remove("hidden"),a.style.height="422px",J.value=ZT.i18n("text_label_buffer")+e.title,r=d.fillData.point;break;case"isolines":p.classList.remove("hidden"),N.classList.add("hidden"),a.style.height="712px",J.value=ZT.i18n("text_label_isolines")+e.title,r=d.fillData.point}if(d.currentFillData!==r){if(t.innerHTML="","{}"==JSON.stringify(r))return J.value="",e.title="",void(e.innerHTML="");var i=[];for(var o in r)i.push(o);e.title=i[0],e.innerHTML=i[0],d._createOptions(t,i),d.layerSelectObj.optionClickEvent(t,e,d.layersSelectOnchange),"buffer"===n?J.value=ZT.i18n("text_label_buffer")+i[0]:"isolines"===n&&(J.value=ZT.i18n("text_label_isolines")+i[0]),d.currentData=r[e.title],d.currentFillData=r}}},rt=0;rt<u.children.length;rt++)nt(rt);this.fieldsSelectOnchange=function(t){if(this.currentData){var e=this.currentData,n=t.title;C.value=e.fieldsValue[n].toString().replace(/,/g,",\r\n"),C.setAttribute("data-value",e.fieldsValue[n])}}.bind(this),this.layersSelectOnchange=function(t){if(this.currentData){var e=t.title,n=this.currentFillData[e];this.currentData=n,w.innerHTML="",this._createOptions(w,n.fields);var r=document.getElementById("fieldsSelectName"),i=n.fields[0];r.title=i;var o=r.innerHTML=i;switch(this.fieldsSelectObj.optionClickEvent(w,r,this.fieldsSelectOnchange),C.value=n.fieldsValue[o].toString().replace(/,/g,",\r\n"),C.setAttribute("data-value",n.fieldsValue[o]),document.getElementById("dropDownTop").getAttribute("data-value")){case"buffer":J.value=ZT.i18n("text_label_buffer")+e;break;case"isolines":J.value=ZT.i18n("text_label_isolines")+e}}}.bind(this);var it=!0;z.classList.add("selected"),U.classList.add("checkbox-active");var ot=!(G.onclick=function(){it?(U.classList.add("checkbox-fault"),U.classList.remove("checkbox-active"),z.classList.remove("selected"),it=!1):(U.classList.add("checkbox-active"),U.classList.remove("checkbox-fault"),z.classList.add("selected"),it=!0,ot&&(V.classList.add("checkbox-fault"),V.classList.remove("checkbox-active"),ot=!1))});return q.onclick=function(){ot?(V.classList.add("checkbox-fault"),V.classList.remove("checkbox-active"),H.classList.remove("selected"),ot=!1):(V.classList.add("checkbox-active"),V.classList.remove("checkbox-fault"),H.classList.add("selected"),ot=!0,it&&(U.classList.add("checkbox-fault"),U.classList.remove("checkbox-active"),it=!1))},this.messageBox=new JT,Z.onclick=function(){var t,e,n,r,i,o,s,a,l,u,c,h,f,p;switch(Q.style.display="block",Z.style.display="none",document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":a=document.getElementById("dropDownTop").getAttribute("data-value"),l=document.getElementById("resultLayersName").value,u=y.title,c=_.title,h=C.value.replace(/[\r\n]/g,"").split(",").toString(),f=T.value,p=L.value,t={analysisMethod:a,analysisLayers:u,analysisFields:c,analysisFieldsValue:h,analysisBreaks:f,analysisCellSize:p,resultLayersName:l};break;case"buffer":e=document.getElementById("dropDownTop"),n=document.getElementById("resultLayersName").value,r=y.title,i=e.getAttribute("data-value"),o=I.value,s=F.title,t={analysisMethod:i,analysisLayers:r,radius:o,unit:s,resultLayersName:n,isSaveStatus:it,isUnion:ot}}d.viewModel.analysis(t,d.map),d.viewModel.on("layerloaded",function(t){Q.style.display="none",Z.style.display="block",d._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),d.viewModel.on("analysisfailed",function(){Q.style.display="none",Z.style.display="block",d.messageBox.showView(ZT.i18n("msg_resultIsEmpty"),"failure"),d._event.fire("analysisfailed")})},tt.onclick=function(){Q.style.display="none",Z.style.display="block",d.viewModel.cancelAnalysis()},et.onclick=function(){d.viewModel.on("layersremoved",function(t){d._event.fire("layersremoved",{layers:t.layers})}),d.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions:function(t,e){for(var n in e){var r=document.createElement("div"),i=e[n];r.className="component-selecttool__option",r.title=i,r.innerHTML=i,r.setAttribute("data-value",i),t.appendChild(r)}}});cL.a.supermap.components.clientComputation=jj;function Fj(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Fj),this.layerName=t.layerName,this.layer=t.layer,this.fields=t.fields||null}function Bj(t){return new Fj(t)}function Gj(t){return(Gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zj(t,e){return!e||"object"!==Gj(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function qj(t){return(qj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vj(t,e){return(Vj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}cL.a.supermap.components.clientComputationLayer=Bj;var Hj=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),zj(this,qj(t).apply(this,arguments))}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vj(t,e)}(t,cL.a.Evented),e=t,(n=[{key:"initialize",value:function(t){this.processingUrl=t}},{key:"getDatasetsName",value:function(){var t=this.processingUrl;this.dataset=[],this.dataset.datasetNames=[],this.dataset.childUrl=[];var e="http://"+t.split("/")[2],n=e+"/iserver/services/datacatalog/rest/datacatalog/sharefile.json",i=e+"/iserver/services/datacatalog/rest/datacatalog/relationship/datasets.json",o=this;sr.get(n).then(function(t){return t.json()}).then(function(t){o.dataset.datasetNames=o.dataset.datasetNames.concat(t.datasetNames),o.dataset.childUrl=o.dataset.childUrl.concat(t.childUriList);var r=o;sr.get(i).then(function(t){return t.json()}).then(function(t){r.dataset.datasetNames=r.dataset.datasetNames.concat(t.datasetNames),r.dataset.childUrl=r.dataset.childUrl.concat(t.childUriList);var e=[];for(var n in r.dataset.datasetNames)e[r.dataset.datasetNames[n]]=r.dataset.childUrl[n];r.fire("datasetsloaded",{result:{dataset:r.dataset,datasetHash:e}})})})}},{key:"getDatasetInfo",value:function(t){var s,a=this;sr.get(t).then(function(t){return t.json()}).then(function(t){var e=t.datasetInfo;"LINE"===e.datasetType||"LINE"===e.type?s="LINE":"POINT"===e.datasetType||"POINT"===e.type||"CSV"===e.type?s="POINT":"REGION"!==e.datasetType&&"REGION"!==e.type||(s="REGION");var n=[],r=e.fieldInfos||e.fieldInfo||null;if(r){for(var i in r)n.push(r[i].name);a.fire("datasetinfoloaded",{result:{type:s,fields:n}})}else{var o=t.childUriList[0].replace("//fields","/fields");sr.get(o).then(function(t){return t.json()}).then(function(t){var e=t.fieldNames,n=[];for(var r in e)n.push(e[r]);a.fire("datasetinfoloaded",{result:{type:s,fields:n}})})}})}}])&&Uj(e.prototype,n),r&&Uj(e,r),t}();function Wj(t){return(Wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yj(t,e){return!e||"object"!==Wj(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Xj(t){return(Xj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zj(t,e){return(Zj=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}cL.a.supermap.components.DistributedAnalysisModel=Hj;var Qj=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Yj(this,Xj(t).apply(this,arguments))}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zj(t,e)}(t,cL.a.Evented),e=t,(n=[{key:"initialize",value:function(t){this.processingUrl=t}},{key:"getDatasetsName",value:function(){var t=this.processingUrl;this.resultLayers=[],this.datasetNames=[],this.distributedAnalysisModel=new Hj(t),this.distributedAnalysisModel.getDatasetsName();var e=this;this.distributedAnalysisModel.on("datasetsloaded",function(t){e.fire("datasetsloaded",{result:t.result})})}},{key:"getDatasetInfo",value:function(t){this.distributedAnalysisModel.getDatasetInfo(t);var r=this;this.distributedAnalysisModel.on("datasetinfoloaded",function(t){var e=t.result.type,n=t.result.fields;r.fire("datasetinfoloaded",{result:{type:e,fields:n}})})}},{key:"analysis",value:function(o,s){var t=new rj(this.processingUrl);if(o.analysisParam instanceof fg){var e=o.analysisParam,a=this;t.addKernelDensityJob(e,function(t){t.error?a.fire("analysisfailed",{error:t.error}):t.result.setting.serviceInfo.targetServiceInfos.map(function(t){return"RESTMAP"===t.serviceType&&sr.get(t.serviceAddress+"/maps").then(function(t){return t.json()}).then(function(t){var e=t[0].path;a.fire("analysissucceed",{result:t});var n=cL.a.supermap.tiledMapLayer(e,{noWrap:!0,transparent:!0});a.resultLayers.push(n),n.addTo(s);var r=new Date,i=o.resultLayerName||r.getTime();a.fire("layerloaded",{layer:n,name:i})}),t})})}}},{key:"clearLayers",value:function(){for(var t in this.resultLayers)this.resultLayers[t].remove();this.fire("layersremoved",{layers:this.resultLayers}),this.resultLayers=[]}}])&&Jj(e.prototype,n),r&&Jj(e,r),t}();cL.a.supermap.components.distributedAnalysisViewModel=function(t){return new Qj(t)};function Kj(t){return new $j(t)}var $j=fj.extend({initialize:function(t,e){fj.prototype.initialize.apply(this,[e]),this.viewModel=new Qj(t)},onAdd:function(t){return this._fillDataToView(),fj.prototype.onAdd.apply(this,[t])},_fillDataToView:function(){var n=this;this.viewModel.on("datasetsloaded",function(t){var e=t.result.dataset.datasetNames;n.datasetSelect.innerHTML="",n._createOptions(n.datasetSelect,e),n.datasetSelectObj.optionClickEvent(n.datasetSelect,n.datasetSelectName,n.datasetSelectOnchange),n.dataHash=t.result.datasetHash}),this.viewModel.getDatasetsName()},_initView:function(){var e=this,t=new pM({title:ZT.i18n("title_distributedAnalysis")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";var n=cL.a.DomUtil.create("div","component-content component-content--scroll component-content--analysis",t),r=[{title:ZT.i18n("text_densityAnalysis"),dataValue:"density",remark:ZT.i18n("text_CalculateTheValuePerUnitArea"),icon:{className:"component-analyst-density-img"}}],i=new OM(r).getElement();n.appendChild(i);var p=i.children[0].children[0].children[0],o=cL.a.DomUtil.create("div","component-analysis__container",n),s=cL.a.DomUtil.create("div","analysistype",o),a=cL.a.DomUtil.create("div","component-analysis__container__analysisLayer",s),l=cL.a.DomUtil.create("div","component-analysis__selecttool",a),u={optionsArr:[ZT.i18n("text_option_selectDataset")],labelName:ZT.i18n("text_label_dataset"),optionsClickCb:ot.bind(this)},c=new bM(u),h=c.getElement();this.datasetSelectObj=c,l.appendChild(h);var d=h.children[1].children[0];this.datasetSelectName=d;var f=h.children[1].children[2].children[0].children[0];f.children[0].style.display="none",this.datasetSelect=f;var y=cL.a.DomUtil.create("div","component-analysis__idw",a),g=[{optionsArr:[ZT.i18n("text_option_simplePointDensityAnalysis"),ZT.i18n("text_option_nuclearDensityAnalysis")],labelName:ZT.i18n("text_label_analyticalMethod")},{optionsArr:[ZT.i18n("text_option_quadrilateral"),ZT.i18n("text_option_hexagon")],labelName:ZT.i18n("text_label_meshType")}],m=cL.a.DomUtil.create("div","component-analysis__idw__selecttool",y);for(var v in g){var b=new bM(g[v]).getElement();m.appendChild(b)}var _={optionsArr:[ZT.i18n("text_option_notSet")],labelName:ZT.i18n("text_label_weightField")},w=new bM(_),S=w.getElement();m.appendChild(S),this.weightFieldsSelectObj=w;var x=m.children[0].children[1].children[0];x.setAttribute("data-value","0");var E=m.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",E.children);var O=m.children[1].children[1].children[0];O.setAttribute("data-value","0");var C=m.children[1].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",C.children);var P=m.children[2].children[1].children[0],T=m.children[2].children[1].children[2].children[0].children[0],M=[{spanName:ZT.i18n("text_label_queryRange"),value:""}];for(var L in M)this._creatInputBox(M[L],m);var N=m.children[3].children[1];N.setAttribute("placeholder",ZT.i18n("text_label_queryRangeTips")),N.title=ZT.i18n("text_label_queryRangeTips");var k={labelName:ZT.i18n("text_label_gridSizeInMeters"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},A=this._creatUnitSelectBox(k,m),I=A.children[1].children[0];I.value="1000";var R=A.children[1].children[1].children[0].children[0].children[0],j={labelName:ZT.i18n("text_label_searchRadius"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},D=this._creatUnitSelectBox(j,m),F=D.children[1].children[0];F.value="300";var B=D.children[1].children[1].children[0].children[0].children[0],G={labelName:ZT.i18n("text_label_areaUnit"),optionsArr:["SquareMile","SquareMeter","Hectare","Acre","SquareFoot","SquareYard"]},U=new bM(G).getElement();m.appendChild(U);var z=U.children[1].children[0],q=cL.a.DomUtil.create("div","range-content",s),V={optionsArr:[ZT.i18n("text_option_notSet"),ZT.i18n("text_option_equidistantSegmentation"),ZT.i18n("text_option_logarithm"),ZT.i18n("text_option_equalCountingSegment"),ZT.i18n("text_option_squareRootSegmentation")],labelName:ZT.i18n("text_label_thematicMapSegmentationMode"),optionsClickCb:function(t){"NOTSET"!==t.getAttribute("data-value")?(J.classList.remove("hidden"),Y.classList.remove("hidden")):(J.classList.add("hidden"),Y.classList.add("hidden"))}};q.appendChild(new bM(V).getElement());var H=q.children[0].children[1].children[0];H.setAttribute("data-value","NOTSET");var W=q.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["NOTSET","EQUALINTERVAL","LOGARITHM","QUANTILE","SQUAREROOT"],"data-value",W.children);var J=this._creatInputBox({spanName:ZT.i18n("text_label_thematicMapSegmentationParameters"),value:"20"},q);J.classList.add("hidden");var Y=new bM({optionsArr:[ZT.i18n("text_option_greenOrangePurpleGradient"),ZT.i18n("text_option_greenOrangeRedGradient"),ZT.i18n("text_option_rainbowGradient"),ZT.i18n("text_option_spectralGradient"),ZT.i18n("text_option_terrainGradient")],labelName:ZT.i18n("text_label_thematicMapColorGradientMode")}).getElement();q.appendChild(Y),Y.classList.add("hidden");var X=Y.children[1].children[2].children[0].children[0],Z=Y.children[1].children[0];Z.setAttribute("data-value","GREENORANGEVIOLET");this._setEleAtribute(["GREENORANGEVIOLET","GREENORANGERED","RAINBOW","SPECTRUM","TERRAIN"],"data-value",X.children);var Q=cL.a.DomUtil.create("div","",s);cL.a.DomUtil.create("span","",Q).innerHTML=ZT.i18n("text_label_resultLayerName");var K=cL.a.DomUtil.create("input","component-distributeanalysis__input",Q),$=cL.a.DomUtil.create("div","component-analysis__container__analysisbtn",o),tt=cL.a.DomUtil.create("div","component-analysis__analysisbtn",$),et=cL.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",tt);et.innerHTML=ZT.i18n("btn_analyze");var nt=cL.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",tt),rt=cL.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",nt);rt.style.width="200px",cL.a.DomUtil.create("div","component-analysis__svg-container",rt).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',cL.a.DomUtil.create("span","",rt).innerHTML=ZT.i18n("btn_analyzing");var it=cL.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",tt);function ot(t){if(this.messageBox.closeView(),this.dataHash){T.innerHTML="";var e=this.dataHash[t.title],i=this;this.viewModel.on("datasetinfoloaded",function(t){P.title=ZT.i18n("text_option_notSet"),P.innerHTML=ZT.i18n("text_option_notSet"),T.innerHTML="";var e=p.getAttribute("data-value"),n=t.result.type,r=t.result.fields;"density"===e&&("REGION"===n||"LINE"===n?i.messageBox.showView(ZT.i18n("msg_datasetOrMethodUnsupport"),"failure"):(i.messageBox.closeView(),i._createOptions(T,r),i.weightFieldsSelectObj.optionClickEvent(T,P)))}),this.viewModel.getDatasetInfo(e)}}return it.id="deleteLayersBtn",it.innerHTML=ZT.i18n("btn_emptyTheAnalysisLayer"),this.messageBox=new JT,this.datasetSelectOnchange=ot.bind(this),et.onclick=function(){e.messageBox.closeView();var t=function(){var t,e,n=p.getAttribute("data-value"),r=x.getAttribute("data-value"),i=O.getAttribute("data-value"),o=N.value,s=R.title,a=B.title,l=z.title,u=Z.getAttribute("data-value"),c=H.getAttribute("data-value"),h=new Date,f=K.value||h.getTime();t="NOTSET"===c?"":{rangeMode:c,rangeCount:J.value,colorGradientType:u};"density"===n&&(e=new fg({datasetName:d.title,method:r,meshType:i,resolution:I.value,fields:P.title,radius:F.value,meshSizeUnit:s,radiusUnit:a,areaUnit:l,query:o,mappingParameters:new uo({rangeMode:t.rangeMode,rangeCount:t.rangeCount,colorGradientType:t.colorGradientType})}));return{analysisParam:e,resultLayerName:f}}();d.title===ZT.i18n("text_option_selectDataset")?e.messageBox.showView(ZT.i18n("msg_selectDataset"),"failure"):P.title===ZT.i18n("text_option_notSet")?e.messageBox.showView(ZT.i18n("msg_setTheWeightField"),"failure"):(e.messageBox.closeView(),nt.style.display="block",et.style.display="none",e.viewModel.on("layerloaded",function(t){nt.style.display="none",et.style.display="block",e._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),e.viewModel.on("analysisfailed",function(t){e.messageBox.showView(ZT.i18n("msg_theFieldNotSupportAnalysis"),"failure"),nt.style.display="none",et.style.display="block",e._event.fire("analysisfailed",{error:t.error})}),e.viewModel.analysis(t,e.map))},it.onclick=function(){e.viewModel.on("layersremoved",function(t){e._event.fire("layersremoved",{layers:t.layers})}),e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions:function(t,e){for(var n in e){var r=document.createElement("div");r.className="component-selecttool__option",r.title=e[n],r.innerHTML=e[n],r.setAttribute("data-value",e[n]),t.appendChild(r)}},_creatInputBox:function(t,e){var n=cL.a.DomUtil.create("div","",e);cL.a.DomUtil.create("span","",n).innerHTML=t.spanName;var r=cL.a.DomUtil.create("input","",n);return r.value=t.value,r.className="component-distributeanalysis__input",n},_creatUnitSelectBox:function(t,e){var n=cL.a.DomUtil.create("div","component-clientcomputation__buffer--radius",e);cL.a.DomUtil.create("span","",n).innerHTML=t.labelName;var r=cL.a.DomUtil.create("div","",n);cL.a.DomUtil.create("input","buffer-radius-input",r);var i=cL.a.DomUtil.create("div","component-clientcomputation__buffer--unit",r),o=t.selectOptions,s=new bM(o).getElement();return i.appendChild(s),n},_setEleAtribute:function(t,e,n){for(var r=0;r<n.length;r++)n[r].setAttribute(e,t[r])}});function tD(t){return(tD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nD(t,e){return!e||"object"!==tD(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function rD(t){return(rD=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iD(t,e){return(iD=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}cL.a.supermap.components.distributedAnalysis=Kj;function oD(t){return new oD(t)}var sD=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),nD(this,rD(t).apply(this,arguments))}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iD(t,e)}(t,cL.a.Evented),e=t,(n=[{key:"initialize",value:function(t){this.dataserviceUrl=t,this.resultLayers=[]}},{key:"getFeatures",value:function(t,e){var n=this.dataserviceUrl,r=this,i=cL.a.supermap.featureService(n);t instanceof Ef?i.getFeaturesByIDs(t,function(t){r._getQureyResult(t,e)}):t instanceof Ff?i.getFeaturesBySQL(t,function(t){r._getQureyResult(t,e)}):t instanceof Th?i.getFeaturesByBounds(t,function(t){r._getQureyResult(t,e)}):t instanceof Xh?i.getFeaturesByBuffer(t,function(t){r._getQureyResult(t,e)}):t instanceof cf&&i.getFeaturesByGeometry(t,function(t){r._getQureyResult(t,e)})}},{key:"_getQureyResult",value:function(t,e){if(t.error)this.fire("getfeaturesfailed",{error:t.error});else{var n=cL.a.geoJSON(t.result.features,{onEachFeature:function(t,e){e.bindPopup("ID: "+t.properties.SMID)},pointToLayer:function(t,e){return cL.a.circleMarker(e,{radius:6})}}).addTo(e);this.resultLayers.push(n),this.fire("getfeaturessucceeded",{result:t.result.features})}}},{key:"clearLayers",value:function(){for(var t in this.resultLayers)this.resultLayers[t].remove();this.resultLayers=[]}}])&&eD(e.prototype,n),r&&eD(e,r),t}();cL.a.supermap.components.dataServiceQueryViewModel=oD;function aD(t,e,n){return new lD(t,e,n)}var lD=fj.extend({initialize:function(t,e,n){if(fj.prototype.initialize.apply(this,[n]),this.dataServiceUrl=t,!e||0===e.length)throw new Error("Please configure the dataset of the query！");e instanceof Array?this.dataSetNames=e:this.dataSetNames=e.split(" ")},onAdd:function(t){return fj.prototype.onAdd.apply(this,[t])},onRemove:function(){this.map.off("pm:create")},setDataSetNames:function(t){t instanceof Array?this.dataSetNames=t:this.dataSetNames=t.split(" ")},setGetFeatureMode:function(t){this.getFeatureMode=t,this._getFeatureModeOnchange(this.getFeatureMode)},setDataServiceUrl:function(t){this.dataServiceUrl=t,this.viewModel=new sD(this.dataServiceUrl)},_getFeatureModeOnchange:function(t){var e;e=t&&"{}"!=JSON.stringify(t)?t:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var n=document.getElementById("queryModelControl");n.innerHTML="",this.creatQueryModeSelect(e,n)},_initView:function(){var r=this;this.viewModel=new sD(this.dataServiceUrl),this.messageBox=new JT;var t=new pM({title:ZT.i18n("title_dataServiceQuery")}).getElement();t.classList.add("component-servicequery__container"),t.children[0].classList.add("component-servicequery__title");var e=t.children[1];e.classList.add("component-content--scroll"),e.classList.add("data-services");var n,i=cL.a.DomUtil.create("div","component-analysis__container",e),o=cL.a.DomUtil.create("div","component-servicequery__analysistype",i),s=cL.a.DomUtil.create("div","component-analysis__container__analysisLayer",o),a=this.options.getFeatureMode;n=a&&"{}"!=JSON.stringify(a)?a:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var l=cL.a.DomUtil.create("div","",s);l.id="queryModelContainer";var u=cL.a.DomUtil.create("div","component-analysis__selecttool",l);u.id="queryModelControl",this.creatQueryModeSelect=function(t,e){var n;if(t instanceof Array&&1<t.length){var r={optionsArr:t,labelName:ZT.i18n("text_label_queryMode"),optionsClickCb:this.queryModeltOnchange},i=new bM(r).getElement();e.appendChild(i),n=i.children[1].children[0],i.children[1].classList.add("dataservice-select");var o=i.children[1];o.classList.add("dataservice-select"),o.classList.add("querymodel-select")}else{cL.a.DomUtil.create("span","",l).innerHTML=ZT.i18n("text_label_queryMode"),n=cL.a.DomUtil.create("div","component-servicequery__querymode-selectname",l);var s=cL.a.DomUtil.create("span","",n);t instanceof Array?s.innerHTML=t[0]:s.innerHTML=t,n.title=s.innerHTML,this.queryModeltOnchange(n)}return n.id="queryModelSelectName",n}.bind(this),this.queryModeltOnchange=J.bind(this),this.creatQueryModeSelect(n,u);var c=cL.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container",s),h=cL.a.DomUtil.create("span","textarea-name",c);h.innerHTML=ZT.i18n("text_label_IDArrayOfFeatures");var f=cL.a.DomUtil.create("div","component-textarea component-textarea--dataservice",c);f.id="getfeaturesIdArr";var p=cL.a.DomUtil.create("div","scrollarea",f),d=cL.a.DomUtil.create("div","component-scrollarea-content",p);d.setAttribute("tabindex","1");var y=cL.a.DomUtil.create("textarea","component-textarea__content",d);y.value="[1,2,3]",y.id="getValueTextArea";var g=cL.a.DomUtil.create("div","component-servicequery__maxfeatures-container hidden",s),m={spanName:ZT.i18n("text_label_maxFeatures"),value:"1000"},v=this._creatInputBox(m,g).children[1];v.classList.add("max-features-input");var b=cL.a.DomUtil.create("div","component-servicequery__distance-container hidden",s),_={spanName:ZT.i18n("text_label_bufferDistance"),value:"10"},w=this._creatInputBox(_,b).children[1],S=cL.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container hidden",s),x=cL.a.DomUtil.create("span","textarea-name",S),E=cL.a.DomUtil.create("div","",S),O=cL.a.DomUtil.create("div","component-servicequery__rangeicon-container",E);x.innerHTML=ZT.i18n("text_label_queryRange1");var C=cL.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-polygon-layer bounds",O),P=cL.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-line-layer hidden",O),T=cL.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-point-layer hidden",O),M=cL.a.DomUtil.create("div","component-textarea component-textarea--rangequery",E);M.id="getfeaturesIdArr";var L=cL.a.DomUtil.create("div","",M),N=cL.a.DomUtil.create("div","component-scrollarea-content",L);N.setAttribute("tabindex","1");var k=cL.a.DomUtil.create("textarea","component-textarea__content component-textarea--rangequery__content",N);k.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}';var A=cL.a.DomUtil.create("div","component-servicequery__spatialquerymode-container hidden",s),I={optionsArr:["CONTAIN","CROSS","DISJOINT","IDENTITY","INTERSECT","NONE","OVERLAP","TOUCH","WITHIN"],labelName:ZT.i18n("text_label_spatialQueryMode")},R=cL.a.DomUtil.create("div","component-analysis__selecttool",A),j=new bM(I).getElement();j.children[1].classList.add("dataservice-select"),R.appendChild(j);var D=j.children[1].children[0];D.id="spatialQueryModeSelectName",j.children[1].children[2].classList.add("component-servicequery__spatialquerymode__selectcontent");var F=cL.a.DomUtil.create("div","component-analysis__container__analysisbtn",s),B=cL.a.DomUtil.create("div","component-analysis__analysisbtn",F),G=cL.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",B);G.innerHTML=ZT.i18n("btn_query");var U=cL.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",B),z=cL.a.DomUtil.create("div","component-analysis__analysisbtn--analysising component-servicequery__querybtn--querying",U);cL.a.DomUtil.create("div","component-analysis__svg-container",z).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n             <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n             <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n             <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n             <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n         </svg>',cL.a.DomUtil.create("span","",z).innerHTML=ZT.i18n("btn_querying");var q=cL.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",B);q.innerHTML=ZT.i18n("btn_emptyTheRresultLayer"),J(n[0]);var V,H,W=this;function J(t){var e;switch(e=t.title?t.title:t,g.classList.add("hidden"),S.classList.add("hidden"),b.classList.add("hidden"),P.classList.add("hidden"),T.classList.add("hidden"),C.classList.remove("bounds"),A.classList.add("hidden"),h.innerHTML=ZT.i18n("text_label_featureFilter"),y.value="SMID<10","BUFFER"!==e&&"SPATIAL"!==e||(S.classList.remove("hidden"),x.innerHTML=ZT.i18n("text_label_geometricObject"),k.value='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[84.90234375,40.25390625]}}',P.classList.remove("hidden"),T.classList.remove("hidden")),e){case"ID":h.innerHTML=ZT.i18n("text_label_IDArrayOfFeatures"),y.value="[1,2,3]";break;case"SQL":g.classList.remove("hidden");break;case"BOUNDS":S.classList.remove("hidden"),x.innerHTML=ZT.i18n("text_label_queryRange"),k.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}',C.classList.add("bounds");break;case"BUFFER":b.classList.remove("hidden");break;case"SPATIAL":A.classList.remove("hidden")}}return G.onclick=function(){r.messageBox.closeView(),U.style.display="block",G.style.display="none";var t=function(){var t,e=W.dataSetNames,n=document.getElementById("queryModelSelectName").title,r=y.value;if("ID"===n){var i=y.value,o=i.substring(1,i.length-1).split(",");t=new Ef({IDs:o,datasetNames:e})}else if("SQL"===n){var s=v.value;t=new Ff({queryParameter:{attributeFilter:r},datasetNames:e,maxFeatures:s})}else if("BOUNDS"===n){if(!V){var a=JSON.parse(k.value);V=cL.a.bounds([a.leftBottom.x,a.leftBottom.y],[a.rightTop.x,a.rightTop.y])}t=new Th({attributeFilter:r,datasetNames:e,bounds:V})}else if("BUFFER"===n){var l=w.value,u=JSON.parse(k.value);t=new Xh({attributeFilter:r,datasetNames:e,bufferDistance:l,geometry:H||u})}else if("SPATIAL"===n){var c=D.title,h=JSON.parse(k.value);t=new cf({attributeFilter:r,datasetNames:e,spatialQueryMode:c,geometry:H||h})}return t}();r.viewModel.on("getfeaturessucceeded",function(t){U.style.display="none",G.style.display="block",0===t.result.features.length&&r.messageBox.showView(ZT.i18n("msg_dataReturnedIsEmpty"),"success"),r._event.fire("getfeaturessucceeded",{result:t.result})}),r.viewModel.on("getfeaturesfailed",function(t){U.style.display="none",G.style.display="block",r.messageBox.showView(t.error.errorMsg,"failure"),r._event.fire("getfeaturesfailed",{error:t.error})}),r.viewModel.getFeatures(t,r.map)},C.onclick=function(t){var e=document.getElementById("queryModelSelectName").title;H&&H.remove(),"BOUNDS"===e?r.map.pm.enableDraw("Rectangle"):r.map.pm.enableDraw("Poly"),t.stopPropagation(),t.preventDefault()},P.onclick=function(t){H&&H.remove(),r.map.pm.enableDraw("Line"),t.stopPropagation(),t.preventDefault()},T.onclick=function(t){H&&H.remove(),r.map.pm.enableDraw("Marker"),t.stopPropagation(),t.preventDefault()},this.map.on("pm:create",function(t){if("Rectangle"===t.shape){var e=(H=t.layer).getBounds();V=cL.a.bounds([e._southWest.lng,e._southWest.lat],[e._northEast.lng,e._northEast.lat]);var n={leftBottom:{x:e._southWest.lng,y:e._southWest.lat},rightTop:{x:e._northEast.lng,y:e._northEast.lat}};k.value=JSON.stringify(n)}"Marker"===t.shape&&(H=t.layer,k.value=JSON.stringify(t.layer.toGeoJSON()),r.map.pm.disableDraw("Marker")),"Line"===t.shape&&(H=t.layer,k.value=JSON.stringify(t.layer.toGeoJSON())),"Polygon"===t.shape&&(H=t.layer,k.value=JSON.stringify(t.layer.toGeoJSON()))}),q.onclick=function(){r.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_creatInputBox:function(t,e){var n=cL.a.DomUtil.create("div","",e);return cL.a.DomUtil.create("span","",n).innerHTML=t.spanName,cL.a.DomUtil.create("input","",n).value=t.value,n}});cL.a.supermap.components.dataServiceQuery=aD,n.d(e,"OpenFileView",function(){return gj}),n.d(e,"openFileView",function(){return yj}),n.d(e,"OpenFileViewModel",function(){return dj}),n.d(e,"openFileViewModel",function(){return pj}),n.d(e,"SearchView",function(){return Ej}),n.d(e,"searchView",function(){return xj}),n.d(e,"DataFlowView",function(){return Pj}),n.d(e,"dataFlowView",function(){return Cj}),n.d(e,"clientComputationView",function(){return jj}),n.d(e,"ClientComputationView",function(){return Dj}),n.d(e,"ClientComputationViewModel",function(){return Rj}),n.d(e,"ClientComputationLayer",function(){return Fj}),n.d(e,"clientComputationLayer",function(){return Bj}),n.d(e,"GeoJSONLayerWithName",function(){return Tj}),n.d(e,"geoJSONLayerWithName",function(){return Mj}),n.d(e,"GeoJsonLayersDataModel",function(){return _j}),n.d(e,"GeoJsonLayerDataModel",function(){return wj}),n.d(e,"DistributedAnalysisView",function(){return $j}),n.d(e,"distributedAnalysisView",function(){return Kj}),n.d(e,"DistributedAnalysisViewModel",function(){return Qj}),n.d(e,"DataServiceQueryView",function(){return lD}),n.d(e,"dataServiceQueryView",function(){return aD}),n.d(e,"DataServiceQueryViewModel",function(){return sD}),n.d(e,"dataServiceQueryViewModel",function(){return oD}),n.d(e,"SuperMap",function(){return b}),n.d(e,"DataFormat",function(){return M}),n.d(e,"ServerType",function(){return i}),n.d(e,"GeometryType",function(){return C}),n.d(e,"QueryOption",function(){return d}),n.d(e,"JoinType",function(){return r}),n.d(e,"EngineType",function(){return l}),n.d(e,"MeasureMode",function(){return u}),n.d(e,"SpatialRelationType",function(){return s}),n.d(e,"DataReturnMode",function(){return j}),n.d(e,"Unit",function(){return c}),n.d(e,"BufferRadiusUnit",function(){return a}),n.d(e,"SpatialQueryMode",function(){return o}),n.d(e,"ThemeGraphTextFormat",function(){return h}),n.d(e,"ThemeGraphType",function(){return f}),n.d(e,"GraphAxesTextDisplayMode",function(){return p}),n.d(e,"GraduatedMode",function(){return y}),n.d(e,"RangeMode",function(){return g}),n.d(e,"ThemeType",function(){return m}),n.d(e,"ColorGradientType",function(){return v}),n.d(e,"TextAlignment",function(){return _}),n.d(e,"FillGradientMode",function(){return w}),n.d(e,"SideType",function(){return P}),n.d(e,"AlongLineDirection",function(){return S}),n.d(e,"LabelBackShape",function(){return x}),n.d(e,"LabelOverLengthMode",function(){return E}),n.d(e,"DirectionType",function(){return O}),n.d(e,"OverlayOperationType",function(){return k}),n.d(e,"SupplyCenterType",function(){return T}),n.d(e,"TurnType",function(){return L}),n.d(e,"BufferEndType",function(){return N}),n.d(e,"SmoothMethod",function(){return I}),n.d(e,"SurfaceAnalystMethod",function(){return R}),n.d(e,"ColorSpaceType",function(){return U}),n.d(e,"ChartType",function(){return Q}),n.d(e,"EditType",function(){return D}),n.d(e,"TransferTactic",function(){return F}),n.d(e,"TransferPreference",function(){return B}),n.d(e,"GridType",function(){return G}),n.d(e,"ClientType",function(){return Z}),n.d(e,"LayerType",function(){return z}),n.d(e,"UGCLayerType",function(){return q}),n.d(e,"StatisticMode",function(){return V}),n.d(e,"PixelFormat",function(){return H}),n.d(e,"SearchMode",function(){return W}),n.d(e,"SummaryType",function(){return nt}),n.d(e,"InterpolationAlgorithmType",function(){return J}),n.d(e,"VariogramMode",function(){return Y}),n.d(e,"Exponent",function(){return X}),n.d(e,"ClipAnalystMode",function(){return K}),n.d(e,"AnalystAreaUnit",function(){return $}),n.d(e,"AnalystSizeUnit",function(){return tt}),n.d(e,"StatisticAnalystMode",function(){return et}),n.d(e,"TopologyValidatorRule",function(){return rt}),n.d(e,"OutputType",function(){return A}),n.d(e,"AggregationQueryBuilderType",function(){return ot}),n.d(e,"AggregationType",function(){return it}),n.d(e,"GetFeatureMode",function(){return st}),n.d(e,"TimeFlowControl",function(){return tr}),n.d(e,"IManager",function(){return mr}),n.d(e,"IManagerServiceBase",function(){return cr}),n.d(e,"IManagerCreateNodeParam",function(){return hr}),n.d(e,"IPortal",function(){return Ir}),n.d(e,"IPortalQueryParam",function(){return _r}),n.d(e,"IPortalResource",function(){return Pr}),n.d(e,"IPortalQueryResult",function(){return wr}),n.d(e,"IPortalShareParam",function(){return Tr}),n.d(e,"IPortalShareEntity",function(){return Rr}),n.d(e,"IPortalServiceBase",function(){return br}),n.d(e,"IPortalUser",function(){return qr}),n.d(e,"IPortalAddResourceParam",function(){return jr}),n.d(e,"IPortalRegisterServiceParam",function(){return Dr}),n.d(e,"Online",function(){return mx}),n.d(e,"OnlineData",function(){return yx}),n.d(e,"OnlineQueryDatasParameter",function(){return bx}),n.d(e,"ServiceStatus",function(){return ix}),n.d(e,"DataItemType",function(){return ox}),n.d(e,"DataItemOrderBy",function(){return sx}),n.d(e,"FilterField",function(){return ax}),n.d(e,"OnlineServiceBase",function(){return ux}),n.d(e,"KeyServiceParameter",function(){return wx}),n.d(e,"SecurityManager",function(){return lr}),n.d(e,"ServerInfo",function(){return Sx}),n.d(e,"TokenServiceParameter",function(){return Ex}),n.d(e,"ElasticSearch",function(){return Tx}),n.d(e,"FetchRequest",function(){return sr}),n.d(e,"ColorsPickerUtil",function(){return jx}),n.d(e,"ArrayStatistic",function(){return Fx}),n.d(e,"AreaSolarRadiationParameters",function(){return li}),n.d(e,"AggregationParameter",function(){return si}),n.d(e,"AggQueryBuilderParameter",function(){return ii}),n.d(e,"BufferAnalystParameters",function(){return Ti}),n.d(e,"BufferDistance",function(){return Ei}),n.d(e,"BuffersAnalystJobsParameter",function(){return ho}),n.d(e,"BufferSetting",function(){return Ci}),n.d(e,"BurstPipelineAnalystParameters",function(){return To}),n.d(e,"ChartQueryFilterParameter",function(){return Qo}),n.d(e,"ChartQueryParameters",function(){return $o}),n.d(e,"ClipParameter",function(){return cs}),n.d(e,"ColorDictionary",function(){return fs}),n.d(e,"ComputeWeightMatrixParameters",function(){return vs}),n.d(e,"DataReturnOption",function(){return Li}),n.d(e,"DatasetBufferAnalystParameters",function(){return Hi}),n.d(e,"DatasetInfo",function(){return As}),n.d(e,"DatasetOverlayAnalystParameters",function(){return zs}),n.d(e,"DatasetSurfaceAnalystParameters",function(){return $s}),n.d(e,"DatasetThiessenAnalystParameters",function(){return la}),n.d(e,"DatasourceConnectionInfo",function(){return Ii}),n.d(e,"DensityKernelAnalystParameters",function(){return ca}),n.d(e,"EditFeaturesParameters",function(){return ba}),n.d(e,"FacilityAnalyst3DParameters",function(){return Ta}),n.d(e,"FacilityAnalystSinks3DParameters",function(){return Ra}),n.d(e,"FacilityAnalystSources3DParameters",function(){return Ya}),n.d(e,"FacilityAnalystStreamParameters",function(){return rl}),n.d(e,"FacilityAnalystTracedown3DParameters",function(){return ml}),n.d(e,"FacilityAnalystTraceup3DParameters",function(){return Nl}),n.d(e,"FacilityAnalystUpstream3DParameters",function(){return Hl}),n.d(e,"FieldParameters",function(){return au}),n.d(e,"FilterAggParameter",function(){return ou}),n.d(e,"FieldStatisticsParameters",function(){return pu}),n.d(e,"FilterParameter",function(){return Fi}),n.d(e,"FindClosestFacilitiesParameters",function(){return Su}),n.d(e,"FindLocationParameters",function(){return Nu}),n.d(e,"FindMTSPPathsParameters",function(){return Gu}),n.d(e,"FindPathParameters",function(){return Xu}),n.d(e,"FindServiceAreasParameters",function(){return ic}),n.d(e,"FindTSPPathsParameters",function(){return pc}),n.d(e,"GenerateSpatialDataParameters",function(){return Sc}),n.d(e,"GeoBoundingBoxQueryBuilderParameter",function(){return jc}),n.d(e,"GeoCodingParameter",function(){return Jr}),n.d(e,"GeoDecodingParameter",function(){return Xr}),n.d(e,"GeoHashGridAggParameter",function(){return qc}),n.d(e,"GeometryBufferAnalystParameters",function(){return Ki}),n.d(e,"GeometryOverlayAnalystParameters",function(){return Zc}),n.d(e,"GeometrySurfaceAnalystParameters",function(){return rh}),n.d(e,"GeometryThiessenAnalystParameters",function(){return ch}),n.d(e,"GeoRelationAnalystParameters",function(){return fh}),n.d(e,"GetFeaturesByBoundsParameters",function(){return Th}),n.d(e,"GetFeaturesByBufferParameters",function(){return Xh}),n.d(e,"GetFeaturesByGeometryParameters",function(){return cf}),n.d(e,"GetFeaturesByIDsParameters",function(){return Ef}),n.d(e,"GetFeaturesBySQLParameters",function(){return Ff}),n.d(e,"GetGridCellInfosParameters",function(){return tp}),n.d(e,"Grid",function(){return sy}),n.d(e,"Image",function(){return qE}),n.d(e,"InterpolationAnalystParameters",function(){return My}),n.d(e,"InterpolationIDWAnalystParameters",function(){return Zy}),n.d(e,"InterpolationKrigingAnalystParameters",function(){return rg}),n.d(e,"InterpolationRBFAnalystParameters",function(){return jy}),n.d(e,"JoinItem",function(){return ki}),n.d(e,"KernelDensityJobParameter",function(){return fg}),n.d(e,"LabelImageCell",function(){return Cg}),n.d(e,"LabelMatrixCell",function(){return _g}),n.d(e,"LabelMixedTextStyle",function(){return xp}),n.d(e,"LabelSymbolCell",function(){return kg}),n.d(e,"LabelThemeCell",function(){return Fg}),n.d(e,"LayerStatus",function(){return Gg}),n.d(e,"LinkItem",function(){return ji}),n.d(e,"MathExpressionAnalysisParameters",function(){return Xg}),n.d(e,"MeasureParameters",function(){return im}),n.d(e,"OutputSetting",function(){return ao}),n.d(e,"MappingParameters",function(){return uo}),n.d(e,"OverlapDisplayedOptions",function(){return kd}),n.d(e,"OverlayAnalystParameters",function(){return Rs}),n.d(e,"OverlayGeoJobParameter",function(){return _m}),n.d(e,"PointWithMeasure",function(){return En}),n.d(e,"QueryByBoundsParameters",function(){return Rm}),n.d(e,"QueryByDistanceParameters",function(){return iv}),n.d(e,"QueryByGeometryParameters",function(){return bv}),n.d(e,"QueryBySQLParameters",function(){return Iv}),n.d(e,"QueryParameters",function(){return es}),n.d(e,"Route",function(){return Ln}),n.d(e,"RouteCalculateMeasureParameters",function(){return qv}),n.d(e,"RouteLocatorParameters",function(){return Kv}),n.d(e,"ServerColor",function(){return gn}),n.d(e,"ServerFeature",function(){return ab}),n.d(e,"ServerGeometry",function(){return kn}),n.d(e,"ServerStyle",function(){return vn}),n.d(e,"ServerTextStyle",function(){return pp}),n.d(e,"ServerTheme",function(){return $d}),n.d(e,"SetLayerInfoParameters",function(){return ub}),n.d(e,"SetLayersInfoParameters",function(){return vb}),n.d(e,"SetLayerStatusParameters",function(){return Pb}),n.d(e,"SingleObjectQueryJobsParameter",function(){return jb}),n.d(e,"StopQueryParameters",function(){return Hb}),n.d(e,"SummaryAttributesJobsParameter",function(){return t_}),n.d(e,"SummaryMeshJobParameter",function(){return u_}),n.d(e,"SummaryRegionJobParameter",function(){return v_}),n.d(e,"SupplyCenter",function(){return P_}),n.d(e,"SurfaceAnalystParameters",function(){return Ws}),n.d(e,"SurfaceAnalystParametersSetting",function(){return Vs}),n.d(e,"TerrainCurvatureCalculationParameters",function(){return j_}),n.d(e,"Theme",function(){return hp}),n.d(e,"ThemeDotDensity",function(){return cd}),n.d(e,"ThemeFlow",function(){return bp}),n.d(e,"ThemeGraduatedSymbol",function(){return bd}),n.d(e,"ThemeGraduatedSymbolStyle",function(){return fd}),n.d(e,"ThemeGraph",function(){return id}),n.d(e,"ThemeGraphAxes",function(){return Hp}),n.d(e,"ThemeGraphItem",function(){return Qp}),n.d(e,"ThemeGraphSize",function(){return Jp}),n.d(e,"ThemeGraphText",function(){return Xp}),n.d(e,"ThemeGridRange",function(){return K_}),n.d(e,"ThemeGridRangeItem",function(){return H_}),n.d(e,"ThemeGridUnique",function(){return aw}),n.d(e,"ThemeGridUniqueItem",function(){return tw}),n.d(e,"ThemeLabel",function(){return jp}),n.d(e,"ThemeLabelAlongLine",function(){return Pp}),n.d(e,"ThemeLabelBackground",function(){return Mp}),n.d(e,"ThemeLabelItem",function(){return yp}),n.d(e,"ThemeLabelText",function(){return Op}),n.d(e,"ThemeLabelUniqueItem",function(){return uw}),n.d(e,"ThemeMemoryData",function(){return up}),n.d(e,"ThemeOffset",function(){return wp}),n.d(e,"ThemeParameters",function(){return hw}),n.d(e,"ThemeRange",function(){return Td}),n.d(e,"ThemeRangeItem",function(){return wd}),n.d(e,"ThemeUnique",function(){return qp}),n.d(e,"ThemeUniqueItem",function(){return mp}),n.d(e,"ThiessenAnalystParameters",function(){return ea}),n.d(e,"TopologyValidatorJobsParameter",function(){return Uw}),n.d(e,"TransferLine",function(){return Zw}),n.d(e,"TransferPathParameters",function(){return Kw}),n.d(e,"TransferSolutionParameters",function(){return aS}),n.d(e,"TransportationAnalystParameter",function(){return gs}),n.d(e,"TransportationAnalystResultSetting",function(){return ds}),n.d(e,"UGCLayer",function(){return Ld}),n.d(e,"UGCMapLayer",function(){return Bd}),n.d(e,"UGCSubLayer",function(){return Wd}),n.d(e,"UpdateEdgeWeightParameters",function(){return gS}),n.d(e,"UpdateTurnNodeWeightParameters",function(){return OS}),n.d(e,"Vector",function(){return _y}),n.d(e,"VectorClipJobsParameter",function(){return IS}),n.d(e,"FileTypes",function(){return zT}),n.d(e,"FileConfig",function(){return qT}),n.d(e,"FileModel",function(){return HT}),n.d(e,"MessageBox",function(){return JT}),n.d(e,"CommonContainer",function(){return pM}),n.d(e,"DropDownBox",function(){return OM}),n.d(e,"Select",function(){return bM}),n.d(e,"AttributesPopContainer",function(){return DM}),n.d(e,"PopContainer",function(){return NM}),n.d(e,"IndexTabsPageContainer",function(){return qM}),n.d(e,"CityTabsPage",function(){return XM}),n.d(e,"NavTabsPage",function(){return eL}),n.d(e,"PaginationContainer",function(){return aL}),n.d(e,"ComponentsUtil",function(){return lL}),n.d(e,"FileReaderUtil",function(){return $T}),n.d(e,"ChartView",function(){return oM}),n.d(e,"ChartViewModel",function(){return rM}),n.d(e,"Logo",function(){return LA}),n.d(e,"logo",function(){return NA}),n.d(e,"ChangeTileVersion",function(){return TA}),n.d(e,"changeTileVersion",function(){return MA}),n.d(e,"CommontypesConversion",function(){return AA}),n.d(e,"BaiduCRS",function(){return mA}),n.d(e,"TianDiTu_WGS84CRS",function(){return _A}),n.d(e,"TianDiTu_MercatorCRS",function(){return xA}),n.d(e,"NonProjection",function(){return pL}),n.d(e,"nonProjection",function(){return hL}),n.d(e,"NonEarthCRS",function(){return dL}),n.d(e,"nonEarthCRS",function(){return fL}),n.d(e,"CRS",function(){return yA}),n.d(e,"crs",function(){return dA}),n.d(e,"toGeoJSON",function(){return IA}),n.d(e,"toSuperMapGeometry",function(){return RA}),n.d(e,"getMeterPerMapUnit",function(){return GA}),n.d(e,"resolutionToScale",function(){return jA}),n.d(e,"scaleToResolution",function(){return DA}),n.d(e,"GetResolutionFromScaleDpi",function(){return FA}),n.d(e,"NormalizeScale",function(){return BA}),n.d(e,"BaiduTileLayer",function(){return zA}),n.d(e,"baiduTileLayer",function(){return UA}),n.d(e,"CloudTileLayer",function(){return VA}),n.d(e,"cloudTileLayer",function(){return qA}),n.d(e,"ImageMapLayer",function(){return WA}),n.d(e,"imageMapLayer",function(){return HA}),n.d(e,"TiandituTileLayer",function(){return ZA}),n.d(e,"tiandituTileLayer",function(){return XA}),n.d(e,"TiledMapLayer",function(){return KA}),n.d(e,"tiledMapLayer",function(){return QA}),n.d(e,"WMTSLayer",function(){return YA}),n.d(e,"wmtsLayer",function(){return JA}),n.d(e,"WebMap",function(){return EI}),n.d(e,"webMap",function(){return xI}),n.d(e,"DataFlowLayer",function(){return zI}),n.d(e,"dataFlowLayer",function(){return BI}),n.d(e,"EchartsLayer",function(){return qI}),n.d(e,"echartsLayer",function(){return HI}),n.d(e,"LeafletMapCoordSys",function(){return VI}),n.d(e,"GraphicLayer",function(){return uR}),n.d(e,"graphicLayer",function(){return rR}),n.d(e,"GraphThemeLayer",function(){return hR}),n.d(e,"graphThemeLayer",function(){return cR}),n.d(e,"LabelThemeLayer",function(){return vI}),n.d(e,"labelThemeLayer",function(){return mI}),n.d(e,"MapVLayer",function(){return FI}),n.d(e,"mapVLayer",function(){return RI}),n.d(e,"RangeThemeLayer",function(){return gI}),n.d(e,"rangeThemeLayer",function(){return yI}),n.d(e,"RankSymbolThemeLayer",function(){return pR}),n.d(e,"rankSymbolThemeLayer",function(){return fR}),n.d(e,"TileVectorLayer",function(){return IR}),n.d(e,"tiledVectorLayer",function(){return NR}),n.d(e,"TurfLayer",function(){return DR}),n.d(e,"turfLayer",function(){return RR}),n.d(e,"UnicodeMarker",function(){return SI}),n.d(e,"unicodeMarker",function(){return wI}),n.d(e,"UniqueThemeLayer",function(){return dI}),n.d(e,"uniqueThemeLayer",function(){return hI}),n.d(e,"VectorTileFormat",function(){return LR}),n.d(e,"CartoCSSToLeaflet",function(){return sI}),n.d(e,"DefaultStyle",function(){return eI}),n.d(e,"CartoStyleMap",function(){return nI}),n.d(e,"ServerStyleMap",function(){return rI}),n.d(e,"CompOpMap",function(){return iI}),n.d(e,"ImageStyle",function(){return tR}),n.d(e,"imageStyle",function(){return $I}),n.d(e,"CircleStyle",function(){return KI}),n.d(e,"circleStyle",function(){return QI}),n.d(e,"Graphic",function(){return lI}),n.d(e,"graphic",function(){return aI}),n.d(e,"CloverStyle",function(){return ZI}),n.d(e,"cloverStyle",function(){return XI}),n.d(e,"MapVRenderer",function(){return DI}),n.d(e,"GeoFeatureThemeLayer",function(){return pI}),n.d(e,"ThemeFeature",function(){return cI}),n.d(e,"themeFeature",function(){return uI}),n.d(e,"ThemeLayer",function(){return fI}),n.d(e,"CanvasRenderer",function(){return yR}),n.d(e,"LineSymbolizer",function(){return xR}),n.d(e,"PointSymbolizer",function(){return wR}),n.d(e,"RegionSymbolizer",function(){return ER}),n.d(e,"SVGRenderer",function(){return dR}),n.d(e,"Symbolizer",function(){return mR}),n.d(e,"PolyBase",function(){return SR}),n.d(e,"TextSymbolizer",function(){return bR}),n.d(e,"VectorFeatureType",function(){return gR}),n.d(e,"VectorGrid",function(){return AR}),n.d(e,"VectorTile",function(){return kR}),n.d(e,"VectorTileJSON",function(){return MR}),n.d(e,"VectorTilePBF",function(){return TR}),n.d(e,"AddressMatchService",function(){return UR}),n.d(e,"addressMatchService",function(){return GR}),n.d(e,"ChartService",function(){return qR}),n.d(e,"chartService",function(){return zR}),n.d(e,"DataFlowService",function(){return CI}),n.d(e,"dataFlowService",function(){return OI}),n.d(e,"FeatureService",function(){return _I}),n.d(e,"featureService",function(){return bI}),n.d(e,"FieldService",function(){return HR}),n.d(e,"fieldService",function(){return VR}),n.d(e,"GridCellInfosService",function(){return JR}),n.d(e,"gridCellInfosService",function(){return WR}),n.d(e,"LayerInfoService",function(){return XR}),n.d(e,"layerInfoService",function(){return YR}),n.d(e,"MapService",function(){return PA}),n.d(e,"mapService",function(){return OA}),n.d(e,"MeasureService",function(){return QR}),n.d(e,"measureService",function(){return ZR}),n.d(e,"NetworkAnalyst3DService",function(){return $R}),n.d(e,"networkAnalyst3DService",function(){return KR}),n.d(e,"NetworkAnalystService",function(){return ej}),n.d(e,"networkAnalystService",function(){return tj}),n.d(e,"ProcessingService",function(){return rj}),n.d(e,"processingService",function(){return nj}),n.d(e,"QueryService",function(){return oj}),n.d(e,"queryService",function(){return ij}),n.d(e,"ServiceBase",function(){return CA}),n.d(e,"SpatialAnalystService",function(){return aj}),n.d(e,"spatialAnalystService",function(){return sj}),n.d(e,"ThemeService",function(){return uj}),n.d(e,"themeService",function(){return lj}),n.d(e,"TrafficTransferAnalystService",function(){return hj}),n.d(e,"trafficTransferAnalystService",function(){return cj})},function(t,e,n){"use strict";n.r(e);n(26),n(32),n(37),n(42),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69)},function(t,e){},,,,,,function(t,e){},,,,,function(t,e){},,,,,function(t,e){},,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){}]),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(x,t){"use strict";function y(t){return null!=t&&t===t.window}var e=[],E=x.document,r=Object.getPrototypeOf,a=e.slice,g=e.concat,l=e.push,i=e.indexOf,n={},o=n.toString,m=n.hasOwnProperty,s=m.toString,u=s.call(Object),v={},b=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},c={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,n){var r,i,o=(n=n||E).createElement("script");if(o.text=t,e)for(r in c)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[o.call(t)]||"object":typeof t}var O=function(t,e){return new O.fn.init(t,e)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!b(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}O.fn=O.prototype={jquery:"3.4.1",constructor:O,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=O.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return O.each(this,t)},map:function(n){return this.pushStack(O.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:e.sort,splice:e.splice},O.extend=O.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||b(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(u&&r&&(O.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||O.isPlainObject(n)?n:{},i=!1,s[e]=O.extend(u,o,r)):void 0!==r&&(s[e]=r));return s},O.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==o.call(t)||(e=r(t))&&("function"!=typeof(n=m.call(e,"constructor")&&e.constructor)||s.call(n)!==u))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){_(t,{nonce:e&&e.nonce})},each:function(t,e){var n,r=0;if(f(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(h,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(f(Object(t))?O.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:i.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!=s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(f(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return g.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(O.fn[Symbol.iterator]=e[Symbol.iterator]),O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var p=function(n){function h(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){S()}var t,p,_,o,s,d,f,y,w,l,u,S,x,a,E,g,c,m,v,O="sizzle"+ +new Date,b=n.document,C=0,r=0,P=lt(),T=lt(),M=lt(),L=lt(),N=function(t,e){return t===e&&(u=!0),0},k={}.hasOwnProperty,e=[],A=e.pop,I=e.push,R=e.push,j=e.slice,D=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",U="\\["+B+"*("+G+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+G+"))|)"+B+"*\\]",z=":("+G+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",q=new RegExp(B+"+","g"),V=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),H=new RegExp("^"+B+"*,"+B+"*"),W=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),J=new RegExp(B+"|>"),Y=new RegExp(z),X=new RegExp("^"+G+"$"),Z={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),TAG:new RegExp("^("+G+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,rt=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{R.apply(e=j.call(b.childNodes),b.childNodes),e[b.childNodes.length].nodeType}catch(t){R={apply:e.length?function(t,e){I.apply(t,j.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function at(t,e,n,r){var i,o,s,a,l,u,c,h=e&&e.ownerDocument,f=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return n;if(!r&&((e?e.ownerDocument||e:b)!==x&&S(e),e=e||x,E)){if(11!==f&&(l=et.exec(t)))if(i=l[1]){if(9===f){if(!(s=e.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(h&&(s=h.getElementById(i))&&v(e,s)&&s.id===i)return n.push(s),n}else{if(l[2])return R.apply(n,e.getElementsByTagName(t)),n;if((i=l[3])&&p.getElementsByClassName&&e.getElementsByClassName)return R.apply(n,e.getElementsByClassName(i)),n}if(p.qsa&&!L[t+" "]&&(!g||!g.test(t))&&(1!==f||"object"!==e.nodeName.toLowerCase())){if(c=t,h=e,1===f&&J.test(t)){for((a=e.getAttribute("id"))?a=a.replace(it,ot):e.setAttribute("id",a=O),o=(u=d(t)).length;o--;)u[o]="#"+a+" "+bt(u[o]);c=u.join(","),h=nt.test(t)&&mt(e.parentNode)||e}try{return R.apply(n,h.querySelectorAll(c)),n}catch(e){L(t,!0)}finally{a===O&&e.removeAttribute("id")}}}return y(t.replace(V,"$1"),e,n,r)}function lt(){var r=[];return function t(e,n){return r.push(e+" ")>_.cacheLength&&delete t[r.shift()],t[e+" "]=n}}function ut(t){return t[O]=!0,t}function ct(t){var e=x.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)_.attrHandle[n[r]]=e}function ft(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function yt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&st(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function gt(s){return ut(function(o){return o=+o,ut(function(t,e){for(var n,r=s([],t.length,o),i=r.length;i--;)t[n=r[i]]&&(t[n]=!(e[n]=t[n]))})})}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in p=at.support={},s=at.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!Q.test(e||n&&n.nodeName||"HTML")},S=at.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:b;return r!==x&&9===r.nodeType&&r.documentElement&&(a=(x=r).documentElement,E=!s(x),b!==x&&(n=x.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),p.attributes=ct(function(t){return t.className="i",!t.getAttribute("className")}),p.getElementsByTagName=ct(function(t){return t.appendChild(x.createComment("")),!t.getElementsByTagName("*").length}),p.getElementsByClassName=tt.test(x.getElementsByClassName),p.getById=ct(function(t){return a.appendChild(t).id=O,!x.getElementsByName||!x.getElementsByName(O).length}),p.getById?(_.filter.ID=function(t){var e=t.replace(rt,h);return function(t){return t.getAttribute("id")===e}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&E){var n=e.getElementById(t);return n?[n]:[]}}):(_.filter.ID=function(t){var n=t.replace(rt,h);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},_.find.ID=function(t,e){if(void 0!==e.getElementById&&E){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),_.find.TAG=p.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):p.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},_.find.CLASS=p.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&E)return e.getElementsByClassName(t)},c=[],g=[],(p.qsa=tt.test(x.querySelectorAll))&&(ct(function(t){a.appendChild(t).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+B+"*(?:value|"+F+")"),t.querySelectorAll("[id~="+O+"-]").length||g.push("~="),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+O+"+*").length||g.push(".#.+[+~]")}),ct(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=x.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+B+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(p.matchesSelector=tt.test(m=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ct(function(t){p.disconnectedMatch=m.call(t,"*"),m.call(t,"[s!='']:x"),c.push("!=",z)}),g=g.length&&new RegExp(g.join("|")),c=c.length&&new RegExp(c.join("|")),e=tt.test(a.compareDocumentPosition),v=e||tt.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},N=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t===x||t.ownerDocument===b&&v(b,t)?-1:e===x||e.ownerDocument===b&&v(b,e)?1:l?D(l,t)-D(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t===x?-1:e===x?1:i?-1:o?1:l?D(l,t)-D(l,e):0;if(i===o)return ft(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ft(s[r],a[r]):s[r]===b?-1:a[r]===b?1:0}),x},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==x&&S(t),p.matchesSelector&&E&&!L[e+" "]&&(!c||!c.test(e))&&(!g||!g.test(e)))try{var n=m.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){L(e,!0)}return 0<at(e,x,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!==x&&S(t),v(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==x&&S(t);var n=_.attrHandle[e.toLowerCase()],r=n&&k.call(_.attrHandle,e.toLowerCase())?n(t,e,!E):void 0;return void 0!==r?r:p.attributes||!E?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(it,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],r=0,i=0;if(u=!p.detectDuplicates,l=!p.sortStable&&t.slice(0),t.sort(N),u){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return l=null,t},o=at.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=o(e);return n},(_=at.selectors={cacheLength:50,createPseudo:ut,match:Z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(rt,h),t[3]=(t[3]||t[4]||t[5]||"").replace(rt,h),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Y.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(rt,h).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=P[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&P(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(t){var e=at.attr(t,n);return null==e?"!="===r:!r||(e+="","="===r?e===i:"!="===r?e!==i:"^="===r?i&&0===e.indexOf(i):"*="===r?i&&-1<e.indexOf(i):"$="===r?i&&e.slice(-i.length)===i:"~="===r?-1<(" "+e.replace(q," ")+" ").indexOf(i):"|="===r&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,t,e,y,g){var m="nth"!==d.slice(0,3),v="last"!==d.slice(-4),b="of-type"===t;return 1===y&&0===g?function(t){return!!t.parentNode}:function(t,e,n){var r,i,o,s,a,l,u=m!=v?"nextSibling":"previousSibling",c=t.parentNode,h=b&&t.nodeName.toLowerCase(),f=!n&&!b,p=!1;if(c){if(m){for(;u;){for(s=t;s=s[u];)if(b?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;l=u="only"===d&&!l&&"nextSibling"}return!0}if(l=[v?c.firstChild:c.lastChild],v&&f){for(p=(a=(r=(i=(o=(s=c)[O]||(s[O]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===C&&r[1])&&r[2],s=a&&c.childNodes[a];s=++a&&s&&s[u]||(p=a=0)||l.pop();)if(1===s.nodeType&&++p&&s===t){i[d]=[C,a,p];break}}else if(f&&(p=a=(r=(i=(o=(s=t)[O]||(s[O]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===C&&r[1]),!1===p)for(;(s=++a&&s&&s[u]||(p=a=0)||l.pop())&&((b?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++p||(f&&((i=(o=s[O]||(s[O]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[C,p]),s!==t)););return(p-=g)===y||p%y==0&&0<=p/y}}},PSEUDO:function(t,o){var e,s=_.pseudos[t]||_.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return s[O]?s(o):1<s.length?(e=[t,t,"",o],_.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,e){for(var n,r=s(t,o),i=r.length;i--;)t[n=D(t,r[i])]=!(e[n]=r[i])}):function(t){return s(t,0,e)}):s}},pseudos:{not:ut(function(t){var r=[],i=[],a=f(t.replace(V,"$1"));return a[O]?ut(function(t,e,n,r){for(var i,o=a(t,null,r,[]),s=t.length;s--;)(i=o[s])&&(t[s]=!(e[s]=i))}):function(t,e,n){return r[0]=t,a(r,null,n,i),r[0]=null,!i.pop()}}),has:ut(function(e){return function(t){return 0<at(e,t).length}}),contains:ut(function(e){return e=e.replace(rt,h),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:ut(function(n){return X.test(n||"")||at.error("unsupported lang: "+n),n=n.replace(rt,h).toLowerCase(),function(t){var e;do{if(e=E?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:yt(!1),disabled:yt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t}),gt:gt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=dt(t);function vt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function _t(a,t,e){var l=t.dir,u=t.next,c=u||l,h=e&&"parentNode"===c,f=r++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||h)return a(t,e,n);return!1}:function(t,e,n){var r,i,o,s=[C,f];if(n){for(;t=t[l];)if((1===t.nodeType||h)&&a(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||h)if(i=(o=t[O]||(t[O]={}))[t.uniqueID]||(o[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[l]||t;else{if((r=i[c])&&r[0]===C&&r[1]===f)return s[2]=r[2];if((i[c]=s)[2]=a(t,e,n))return!0}return!1}}function wt(i){return 1<i.length?function(t,e,n){for(var r=i.length;r--;)if(!i[r](t,e,n))return!1;return!0}:i[0]}function St(t,e,n,r,i){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),u&&e.push(a)));return s}function xt(p,d,y,g,m,t){return g&&!g[O]&&(g=xt(g)),m&&!m[O]&&(m=xt(m,t)),ut(function(t,e,n,r){var i,o,s,a=[],l=[],u=e.length,c=t||function(t,e,n){for(var r=0,i=e.length;r<i;r++)at(t,e[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),h=!p||!t&&d?c:St(c,a,p,n,r),f=y?m||(t?p:u||g)?[]:e:h;if(y&&y(h,f,n,r),g)for(i=St(f,l),g(i,[],n,r),o=i.length;o--;)(s=i[o])&&(f[l[o]]=!(h[l[o]]=s));if(t){if(m||p){if(m){for(i=[],o=f.length;o--;)(s=f[o])&&i.push(h[o]=s);m(null,f=[],i,r)}for(o=f.length;o--;)(s=f[o])&&-1<(i=m?D(t,s):a[o])&&(t[i]=!(e[i]=s))}}else f=St(f===e?f.splice(u,f.length):f),m?m(null,e,f,r):R.apply(e,f)})}function Et(t){for(var i,e,n,r=t.length,o=_.relative[t[0].type],s=o||_.relative[" "],a=o?1:0,l=_t(function(t){return t===i},s,!0),u=_t(function(t){return-1<D(i,t)},s,!0),c=[function(t,e,n){var r=!o&&(n||e!==w)||((i=e).nodeType?l:u)(t,e,n);return i=null,r}];a<r;a++)if(e=_.relative[t[a].type])c=[_t(wt(c),e)];else{if((e=_.filter[t[a].type].apply(null,t[a].matches))[O]){for(n=++a;n<r&&!_.relative[t[n].type];n++);return xt(1<a&&wt(c),1<a&&bt(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(V,"$1"),e,a<n&&Et(t.slice(a,n)),n<r&&Et(t=t.slice(n)),n<r&&bt(t))}c.push(e)}return wt(c)}return vt.prototype=_.filters=_.pseudos,_.setFilters=new vt,d=at.tokenize=function(t,e){var n,r,i,o,s,a,l,u=T[t+" "];if(u)return e?0:u.slice(0);for(s=t,a=[],l=_.preFilter;s;){for(o in n&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=W.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(V," ")}),s=s.slice(n.length)),_.filter)!(r=Z[o].exec(s))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?at.error(t):T(t,a).slice(0)},f=at.compile=function(t,e){var n,g,m,v,b,r,i=[],o=[],s=M[t+" "];if(!s){for(n=(e=e||d(t)).length;n--;)(s=Et(e[n]))[O]?i.push(s):o.push(s);(s=M(t,(g=o,v=0<(m=i).length,b=0<g.length,r=function(t,e,n,r,i){var o,s,a,l=0,u="0",c=t&&[],h=[],f=w,p=t||b&&_.find.TAG("*",i),d=C+=null==f?1:Math.random()||.1,y=p.length;for(i&&(w=e===x||e||i);u!==y&&null!=(o=p[u]);u++){if(b&&o){for(s=0,e||o.ownerDocument===x||(S(o),n=!E);a=g[s++];)if(a(o,e||x,n)){r.push(o);break}i&&(C=d)}v&&((o=!a&&o)&&l--,t&&c.push(o))}if(l+=u,v&&u!==l){for(s=0;a=m[s++];)a(c,h,e,n);if(t){if(0<l)for(;u--;)c[u]||h[u]||(h[u]=A.call(r));h=St(h)}R.apply(r,h),i&&!t&&0<h.length&&1<l+m.length&&at.uniqueSort(r)}return i&&(C=d,w=f),c},v?ut(r):r))).selector=t}return s},y=at.select=function(t,e,n,r){var i,o,s,a,l,u="function"==typeof t&&t,c=!r&&d(t=u.selector||t);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===e.nodeType&&E&&_.relative[o[1].type]){if(!(e=(_.find.ID(s.matches[0].replace(rt,h),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=Z.needsContext.test(t)?0:o.length;i--&&(s=o[i],!_.relative[a=s.type]);)if((l=_.find[a])&&(r=l(s.matches[0].replace(rt,h),nt.test(o[0].type)&&mt(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&bt(o)))return R.apply(n,r),n;break}}return(u||f(t,c))(r,e,!E,n,!e||nt.test(t)&&mt(e.parentNode)||e),n},p.sortStable=O.split("").sort(N).join("")===O,p.detectDuplicates=!!u,S(),p.sortDetached=ct(function(t){return 1&t.compareDocumentPosition(x.createElement("fieldset"))}),ct(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),p.attributes&&ct(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ct(function(t){return null==t.getAttribute("disabled")})||ht(F,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),at}(x);O.find=p,O.expr=p.selectors,O.expr[":"]=O.expr.pseudos,O.uniqueSort=O.unique=p.uniqueSort,O.text=p.getText,O.isXMLDoc=p.isXML,O.contains=p.contains,O.escapeSelector=p.escape;function d(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&O(t).is(n))break;r.push(t)}return r}function S(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var C=O.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,n,r){return b(n)?O.grep(t,function(t,e){return!!n.call(t,e,t)!==r}):n.nodeType?O.grep(t,function(t){return t===n!==r}):"string"!=typeof n?O.grep(t,function(t){return-1<i.call(n,t)!==r}):O.filter(n,t,r)}O.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?O.find.matchesSelector(r,t)?[r]:[]:O.find.matches(t,O.grep(e,function(t){return 1===t.nodeType}))},O.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(O(t).filter(function(){for(e=0;e<r;e++)if(O.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)O.find(t,i[e],n);return 1<r?O.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&C.test(t)?O(t):t||[],!1).length}});var L,N=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(O.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||L,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):b(t)?void 0!==n.ready?n.ready(t):t(O):O.makeArray(t,this);if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:N.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof O?e[0]:e,O.merge(this,O.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:E,!0)),T.test(r[1])&&O.isPlainObject(e))for(r in e)b(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}).prototype=O.fn,L=O(E);var k=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}O.fn.extend({has:function(t){var e=O(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(O.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&O(t);if(!C.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&O.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?O.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?i.call(O(t),this[0]):i.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),O.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return d(t,"parentNode")},parentsUntil:function(t,e,n){return d(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return d(t,"nextSibling")},prevAll:function(t){return d(t,"previousSibling")},nextUntil:function(t,e,n){return d(t,"nextSibling",n)},prevUntil:function(t,e,n){return d(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(P(t,"template")&&(t=t.content||t),O.merge([],t.childNodes))}},function(r,i){O.fn[r]=function(t,e){var n=O.map(this,i,t);return"Until"!==r.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=O.filter(e,n)),1<this.length&&(A[r]||O.uniqueSort(n),k.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function j(t){return t}function D(t){throw t}function F(t,e,n,r){var i;try{t&&b(i=t.promise)?i.call(t).done(e).fail(n):t&&b(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}O.Callbacks=function(r){var n;r="string"==typeof r?(n={},O.each(r.match(R)||[],function(t,e){n[e]=!0}),n):O.extend({},r);function i(){for(s=s||r.once,e=o=!0;l.length;u=-1)for(t=l.shift();++u<a.length;)!1===a[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=a.length,t=!1);r.memory||(t=!1),o=!1,s&&(a=t?[]:"")}var o,t,e,s,a=[],l=[],u=-1,c={add:function(){return a&&(t&&!o&&(u=a.length-1,l.push(t)),function n(t){O.each(t,function(t,e){b(e)?r.unique&&c.has(e)||a.push(e):e&&e.length&&"string"!==w(e)&&n(e)})}(arguments),t&&!o&&i()),this},remove:function(){return O.each(arguments,function(t,e){for(var n;-1<(n=O.inArray(e,a,n));)a.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<O.inArray(t,a):0<a.length},empty:function(){return a=a&&[],this},disable:function(){return s=l=[],a=t="",this},disabled:function(){return!a},lock:function(){return s=l=[],t||o||(a=t=""),this},locked:function(){return!!s},fireWith:function(t,e){return s||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),o||i()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!e}};return c},O.extend({Deferred:function(t){var o=[["notify","progress",O.Callbacks("memory"),O.Callbacks("memory"),2],["resolve","done",O.Callbacks("once memory"),O.Callbacks("once memory"),0,"resolved"],["reject","fail",O.Callbacks("once memory"),O.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var i=arguments;return O.Deferred(function(r){O.each(o,function(t,e){var n=b(i[e[4]])&&i[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&b(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,r){var l=0;function u(i,o,s,a){return function(){function t(){var t,e;if(!(i<l)){if((t=s.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,b(e)?a?e.call(t,u(l,o,j,a),u(l,o,D,a)):(l++,e.call(t,u(l,o,j,a),u(l,o,D,a),u(l,o,j,o.notifyWith))):(s!==j&&(n=void 0,r=[t]),(a||o.resolveWith)(n,r))}}var n=this,r=arguments,e=a?t:function(){try{t()}catch(t){O.Deferred.exceptionHook&&O.Deferred.exceptionHook(t,e.stackTrace),l<=i+1&&(s!==D&&(n=void 0,r=[t]),o.rejectWith(n,r))}};i?e():(O.Deferred.getStackHook&&(e.stackTrace=O.Deferred.getStackHook()),x.setTimeout(e))}}return O.Deferred(function(t){o[0][3].add(u(0,t,b(r)?r:j,t.notifyWith)),o[1][3].add(u(0,t,b(e)?e:j)),o[2][3].add(u(0,t,b(n)?n:D))}).promise()},promise:function(t){return null!=t?O.extend(t,s):s}},a={};return O.each(o,function(t,e){var n=e[2],r=e[5];s[e[1]]=n.add,r&&n.add(function(){i=r},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){i[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--n||s.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=a.call(arguments),s=O.Deferred();if(n<=1&&(F(t,s.done(e(r)).resolve,s.reject,!n),"pending"===s.state()||b(o[r]&&o[r].then)))return s.then();for(;r--;)F(o[r],e(r),s.reject);return s.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;O.Deferred.exceptionHook=function(t,e){x.console&&x.console.warn&&t&&B.test(t.name)&&x.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},O.readyException=function(t){x.setTimeout(function(){throw t})};var G=O.Deferred();function U(){E.removeEventListener("DOMContentLoaded",U),x.removeEventListener("load",U),O.ready()}O.fn.ready=function(t){return G.then(t).catch(function(t){O.readyException(t)}),this},O.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--O.readyWait:O.isReady)||(O.isReady=!0)!==t&&0<--O.readyWait||G.resolveWith(E,[O])}}),O.ready.then=G.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?x.setTimeout(O.ready):(E.addEventListener("DOMContentLoaded",U),x.addEventListener("load",U));var z=function(t,e,n,r,i,o,s){var a=0,l=t.length,u=null==n;if("object"===w(n))for(a in i=!0,n)z(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,b(r)||(s=!0),u&&(e=s?(e.call(t,r),null):(u=e,function(t,e,n){return u.call(O(t),n)})),e))for(;a<l;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:u?e.call(t):l?e(t[0],n):o},q=/^-ms-/,V=/-([a-z])/g;function H(t,e){return e.toUpperCase()}function W(t){return t.replace(q,"ms-").replace(V,H)}function J(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function Y(){this.expando=O.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},J(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[W(e)]=n;else for(r in e)i[W(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(W):(e=W(e))in r?[e]:e.match(R)||[]).length;for(;n--;)delete r[e[n]]}void 0!==e&&!O.isEmptyObject(r)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!O.isEmptyObject(e)}};var X=new Y,Z=new Y,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function $(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(K,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:Q.test(i)?JSON.parse(i):i)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}O.extend({hasData:function(t){return Z.hasData(t)||X.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),O.fn.extend({data:function(n,t){var e,r,i,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){Z.set(this,n)}):z(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=Z.get(o,n))||void 0!==(e=$(o,n))?e:void 0;this.each(function(){Z.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(i=Z.get(o),1===o.nodeType&&!X.get(o,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(r=s[e].name).indexOf("data-")&&(r=W(r.slice(5)),$(o,r,i[r]));X.set(o,"hasDataAttrs",!0)}return i},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),O.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=X.get(t,e),n&&(!r||Array.isArray(n)?r=X.access(t,e,O.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=O.queue(t,e),r=n.length,i=n.shift(),o=O._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){O.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:O.Callbacks("once memory").add(function(){X.remove(t,[e+"queue",n])})})}}),O.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?O.queue(this[0],e):void 0===n?this:this.each(function(){var t=O.queue(this,e,n);O._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&O.dequeue(this,e)})},dequeue:function(t){return this.each(function(){O.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=O.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(r=X.get(s[a],t+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=E.documentElement,it=function(t){return O.contains(t.ownerDocument,t)},ot={composed:!0};rt.getRootNode&&(it=function(t){return O.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});function st(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&it(t)&&"none"===O.css(t,"display")}function at(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=s[o];return i}function lt(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return O.css(t,e,"")},l=a(),u=n&&n[3]||(O.cssNumber[e]?"":"px"),c=t.nodeType&&(O.cssNumber[e]||"px"!==u&&+l)&&et.exec(O.css(t,e));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;s--;)O.style(t,e,c+u),(1-o)*(1-(o=a()/l||.5))<=0&&(s=0),c/=o;c*=2,O.style(t,e,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var ut={};function ct(t,e){for(var n,r,i,o,s,a,l=[],u=0,c=t.length;u<c;u++)(r=t[u]).style&&(n=r.style.display,e?("none"===n&&(l[u]=X.get(r,"display")||null,l[u]||(r.style.display="")),""===r.style.display&&st(r)&&(l[u]=(a=o=i=void 0,o=r.ownerDocument,s=r.nodeName,(a=ut[s])||(i=o.body.appendChild(o.createElement(s)),a=O.css(i,"display"),i.parentNode.removeChild(i),"none"===a&&(a="block"),ut[s]=a)))):"none"!==n&&(l[u]="none",X.set(r,"display",n)));for(u=0;u<c;u++)null!=l[u]&&(t[u].style.display=l[u]);return t}O.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){st(this)?O(this).show():O(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pt=/^$|^module$|\/(?:java|ecma)script/i,dt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function yt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?O.merge([t],n):n}function gt(t,e){for(var n=0,r=t.length;n<r;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}dt.optgroup=dt.option,dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td;var mt,vt,bt=/<|&#?\w+;/;function _t(t,e,n,r,i){for(var o,s,a,l,u,c,h=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===w(o))O.merge(f,o.nodeType?[o]:o);else if(bt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(ft.exec(o)||["",""])[1].toLowerCase(),l=dt[a]||dt._default,s.innerHTML=l[1]+O.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;O.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(r&&-1<O.inArray(o,r))i&&i.push(o);else if(u=it(o),s=yt(h.appendChild(o),"script"),u&&gt(s),n)for(c=0;o=s[c++];)pt.test(o.type||"")&&n.push(o);return h}mt=E.createDocumentFragment().appendChild(E.createElement("div")),(vt=E.createElement("input")).setAttribute("type","radio"),vt.setAttribute("checked","checked"),vt.setAttribute("name","t"),mt.appendChild(vt),v.checkClone=mt.cloneNode(!0).cloneNode(!0).lastChild.checked,mt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!mt.cloneNode(!0).lastChild.defaultValue;var wt=/^key/,St=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xt=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function Ot(){return!1}function Ct(t,e){return t===function(){try{return E.activeElement}catch(t){}}()==("focus"===e)}function Pt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Pt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ot;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return O().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=O.guid++)),t.each(function(){O.event.add(this,e,i,r,n)})}function Tt(t,i,o){o?(X.set(t,i,!1),O.event.add(t,i,{namespace:!1,handler:function(t){var e,n,r=X.get(this,i);if(1&t.isTrigger&&this[i]){if(r.length)(O.event.special[i]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),X.set(this,i,r),e=o(this,i),this[i](),r!==(n=X.get(this,i))||e?X.set(this,i,!1):n={},r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else r.length&&(X.set(this,i,{value:O.event.trigger(O.extend(r[0],O.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,i)&&O.event.add(t,i,Et)}O.event={global:{},add:function(e,t,n,r,i){var o,s,a,l,u,c,h,f,p,d,y,g=X.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&O.find.matchesSelector(rt,i),n.guid||(n.guid=O.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==O&&O.event.triggered!==t.type?O.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)p=y=(a=xt.exec(t[u])||[])[1],d=(a[2]||"").split(".").sort(),p&&(h=O.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=O.event.special[p]||{},c=O.extend({type:p,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&O.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,d,s)||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),O.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,s,a,l,u,c,h,f,p,d,y,g=X.hasData(t)&&X.get(t);if(g&&(l=g.events)){for(u=(e=(e||"").match(R)||[""]).length;u--;)if(p=y=(a=xt.exec(e[u])||[])[1],d=(a[2]||"").split(".").sort(),p){for(h=O.event.special[p]||{},f=l[p=(r?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!i&&y!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,d,g.handle)||O.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)O.event.remove(t,p+e[u],n,r,!0);O.isEmptyObject(l)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=O.event.fix(t),l=new Array(arguments.length),u=(X.get(this,"events")||{})[a.type]||[],c=O.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=O.event.handlers.call(this,a,u),e=0;(i=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((O.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,r,i,o,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(o=[],s={},n=0;n<l;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?-1<O(i,this).index(u):O.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,l<e.length&&a.push({elem:u,handlers:e.slice(l)}),a},addProp:function(e,t){Object.defineProperty(O.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[O.expando]?t:new O.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ht.test(e.type)&&e.click&&P(e,"input")&&Tt(e,"click",Et),!1},trigger:function(t){var e=this||t;return ht.test(e.type)&&e.click&&P(e,"input")&&Tt(e,"click"),!0},_default:function(t){var e=t.target;return ht.test(e.type)&&e.click&&P(e,"input")&&X.get(e,"click")||P(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},O.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},O.Event=function(t,e){if(!(this instanceof O.Event))return new O.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:Ot,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&O.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[O.expando]=!0},O.Event.prototype={constructor:O.Event,isDefaultPrevented:Ot,isPropagationStopped:Ot,isImmediatePropagationStopped:Ot,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},O.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&St.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},O.event.addProp),O.each({focus:"focusin",blur:"focusout"},function(t,e){O.event.special[t]={setup:function(){return Tt(this,t,Ct),!1},trigger:function(){return Tt(this,t),!0},delegateType:e}}),O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){O.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||O.contains(this,n))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=i),e}}}),O.fn.extend({on:function(t,e,n,r){return Pt(this,t,e,n,r)},one:function(t,e,n,r){return Pt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,O(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ot),this.each(function(){O.event.remove(this,t,n,e)});for(i in t)this.off(i,e,t[i]);return this}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Lt=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function At(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&O(t).children("tbody")[0]||t}function It(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Rt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var n,r,i,o,s,a,l,u;if(1===e.nodeType){if(X.hasData(t)&&(o=X.access(t),s=X.set(e,o),u=o.events))for(i in delete s.handle,s.events={},u)for(n=0,r=u[i].length;n<r;n++)O.event.add(e,i,u[i][n]);Z.hasData(t)&&(a=Z.access(t),l=O.extend({},a),Z.set(e,l))}}function Dt(n,r,i,o){r=g.apply([],r);var t,e,s,a,l,u,c=0,h=n.length,f=h-1,p=r[0],d=b(p);if(d||1<h&&"string"==typeof p&&!v.checkClone&&Nt.test(p))return n.each(function(t){var e=n.eq(t);d&&(r[0]=p.call(this,t,e.html())),Dt(e,r,i,o)});if(h&&(e=(t=_t(r,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(a=(s=O.map(yt(t,"script"),It)).length;c<h;c++)l=t,c!==f&&(l=O.clone(l,!0,!0),a&&O.merge(s,yt(l,"script"))),i.call(n[c],l,c);if(a)for(u=s[s.length-1].ownerDocument,O.map(s,Rt),c=0;c<a;c++)l=s[c],pt.test(l.type||"")&&!X.access(l,"globalEval")&&O.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?O._evalUrl&&!l.noModule&&O._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):_(l.textContent.replace(kt,""),l,u))}return n}function Ft(t,e,n){for(var r,i=e?O.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||O.cleanData(yt(r)),r.parentNode&&(n&&it(r)&&gt(yt(r,"script")),r.parentNode.removeChild(r));return t}O.extend({htmlPrefilter:function(t){return t.replace(Mt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,s,a,l,u,c=t.cloneNode(!0),h=it(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||O.isXMLDoc(t)))for(s=yt(c),r=0,i=(o=yt(t)).length;r<i;r++)a=o[r],"input"===(u=(l=s[r]).nodeName.toLowerCase())&&ht.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(e)if(n)for(o=o||yt(t),s=s||yt(c),r=0,i=o.length;r<i;r++)jt(o[r],s[r]);else jt(t,c);return 0<(s=yt(c,"script")).length&&gt(s,!h&&yt(t,"script")),c},cleanData:function(t){for(var e,n,r,i=O.event.special,o=0;void 0!==(n=t[o]);o++)if(J(n)){if(e=n[X.expando]){if(e.events)for(r in e.events)i[r]?O.event.remove(n,r):O.removeEvent(n,r,e.handle);n[X.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),O.fn.extend({detach:function(t){return Ft(this,t,!0)},remove:function(t){return Ft(this,t)},text:function(t){return z(this,function(t){return void 0===t?O.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Dt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||At(this,t).appendChild(t)})},prepend:function(){return Dt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=At(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Dt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Dt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(O.cleanData(yt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return O.clone(this,t,e)})},html:function(t){return z(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Lt.test(t)&&!dt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=O.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(O.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Dt(this,arguments,function(t){var e=this.parentNode;O.inArray(this,n)<0&&(O.cleanData(yt(this)),e&&e.replaceChild(t,this))},n)}}),O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){O.fn[t]=function(t){for(var e,n=[],r=O(t),i=r.length-1,o=0;o<=i;o++)e=o===i?this:this.clone(!0),O(r[o])[s](e),l.apply(n,e.get());return this.pushStack(n)}});var Bt,Gt,Ut,zt,qt,Vt,Ht,Wt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=x),e.getComputedStyle(t)},Yt=new RegExp(nt.join("|"),"i");function Xt(t,e,n){var r,i,o,s,a=t.style;return(n=n||Jt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||it(t)||(s=O.style(t,e)),!v.pixelBoxStyles()&&Wt.test(s)&&Yt.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function Qt(){if(Ht){Vt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ht.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(Vt).appendChild(Ht);var t=x.getComputedStyle(Ht);Bt="1%"!==t.top,qt=12===Kt(t.marginLeft),Ht.style.right="60%",zt=36===Kt(t.right),Gt=36===Kt(t.width),Ht.style.position="absolute",Ut=12===Kt(Ht.offsetWidth/3),rt.removeChild(Vt),Ht=null}}function Kt(t){return Math.round(parseFloat(t))}Vt=E.createElement("div"),(Ht=E.createElement("div")).style&&(Ht.style.backgroundClip="content-box",Ht.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Ht.style.backgroundClip,O.extend(v,{boxSizingReliable:function(){return Qt(),Gt},pixelBoxStyles:function(){return Qt(),zt},pixelPosition:function(){return Qt(),Bt},reliableMarginLeft:function(){return Qt(),qt},scrollboxSize:function(){return Qt(),Ut}}));var $t=["Webkit","Moz","ms"],te=E.createElement("div").style,ee={};function ne(t){return O.cssProps[t]||ee[t]||(t in te?t:ee[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=$t.length;n--;)if((t=$t[n]+e)in te)return t}(t)||t)}var re=/^(none|table(?!-c[ea]).+)/,ie=/^--/,oe={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function ae(t,e,n){var r=et.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function le(t,e,n,r,i,o){var s="width"===e?1:0,a=0,l=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=O.css(t,n+nt[s],!0,i)),r?("content"===n&&(l-=O.css(t,"padding"+nt[s],!0,i)),"margin"!==n&&(l-=O.css(t,"border"+nt[s]+"Width",!0,i))):(l+=O.css(t,"padding"+nt[s],!0,i),"padding"!==n?l+=O.css(t,"border"+nt[s]+"Width",!0,i):a+=O.css(t,"border"+nt[s]+"Width",!0,i));return!r&&0<=o&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-a-.5))||0),l}function ue(t,e,n){var r=Jt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===O.css(t,"boxSizing",!1,r),o=i,s=Xt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Wt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||"auto"===s||!parseFloat(s)&&"inline"===O.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===O.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+le(t,e,n||(i?"border":"content"),o,r,s)+"px"}function ce(t,e,n,r,i){return new ce.prototype.init(t,e,n,r,i)}O.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Xt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=W(e),l=ie.test(e),u=t.style;if(l||(e=ne(a)),s=O.cssHooks[e]||O.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e];"string"==(o=typeof n)&&(i=et.exec(n))&&i[1]&&(n=lt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(O.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(l?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,r){var i,o,s,a=W(e);return ie.test(e)||(e=ne(a)),(s=O.cssHooks[e]||O.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Xt(t,e,r)),"normal"===i&&e in se&&(i=se[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),O.each(["height","width"],function(t,l){O.cssHooks[l]={get:function(t,e,n){if(e)return!re.test(O.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,l,n):at(t,oe,function(){return ue(t,l,n)})},set:function(t,e,n){var r,i=Jt(t),o=!v.scrollboxSize()&&"absolute"===i.position,s=(o||n)&&"border-box"===O.css(t,"boxSizing",!1,i),a=n?le(t,l,n,s,i):0;return s&&o&&(a-=Math.ceil(t["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(i[l])-le(t,l,"border",!1,i)-.5)),a&&(r=et.exec(e))&&"px"!==(r[3]||"px")&&(t.style[l]=e,e=O.css(t,l)),ae(0,e,a)}}}),O.cssHooks.marginLeft=Zt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Xt(t,"marginLeft"))||t.getBoundingClientRect().left-at(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),O.each({margin:"",padding:"",border:"Width"},function(i,o){O.cssHooks[i+o]={expand:function(t){for(var e=0,n={},r="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+nt[e]+o]=r[e]||r[e-2]||r[0];return n}},"margin"!==i&&(O.cssHooks[i+o].set=ae)}),O.fn.extend({css:function(t,e){return z(this,function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Jt(t),i=e.length;s<i;s++)o[e[s]]=O.css(t,e[s],!1,r);return o}return void 0!==n?O.style(t,e,n):O.css(t,e)},t,e,1<arguments.length)}}),((O.Tween=ce).prototype={constructor:ce,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||O.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(O.cssNumber[n]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,n=ce.propHooks[this.prop];return this.options.duration?this.pos=e=O.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ce.propHooks._default.set(this),this}}).init.prototype=ce.prototype,(ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=O.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){O.fx.step[t.prop]?O.fx.step[t.prop](t):1!==t.elem.nodeType||!O.cssHooks[t.prop]&&null==t.elem.style[ne(t.prop)]?t.elem[t.prop]=t.now:O.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},O.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},O.fx=ce.prototype.init,O.fx.step={};var he,fe,pe,de,ye=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function me(){fe&&(!1===E.hidden&&x.requestAnimationFrame?x.requestAnimationFrame(me):x.setTimeout(me,O.fx.interval),O.fx.tick())}function ve(){return x.setTimeout(function(){he=void 0}),he=Date.now()}function be(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=nt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function _e(t,e,n){for(var r,i=(we.tweeners[e]||[]).concat(we.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function we(o,t,e){var n,s,r=0,i=we.prefilters.length,a=O.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=he||ve(),e=Math.max(0,u.startTime+u.duration-t),n=1-(e/u.duration||0),r=0,i=u.tweens.length;r<i;r++)u.tweens[r].run(n);return a.notifyWith(o,[u,n,e]),n<1&&i?e:(i||a.notifyWith(o,[u,1,0]),a.resolveWith(o,[u]),!1)},u=a.promise({elem:o,props:O.extend({},t),opts:O.extend(!0,{specialEasing:{},easing:O.easing._default},e),originalProperties:t,originalOptions:e,startTime:he||ve(),duration:e.duration,tweens:[],createTween:function(t,e){var n=O.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var e=0,n=t?u.tweens.length:0;if(s)return this;for(s=!0;e<n;e++)u.tweens[e].run(1);return t?(a.notifyWith(o,[u,1,0]),a.resolveWith(o,[u,t])):a.rejectWith(o,[u,t]),this}}),c=u.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=W(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=O.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,u.opts.specialEasing);r<i;r++)if(n=we.prefilters[r].call(u,o,c,u.opts))return b(n.stop)&&(O._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return O.map(c,_e,u),b(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),O.fx.timer(O.extend(l,{elem:o,anim:u,queue:u.opts.queue})),u}O.Animation=O.extend(we,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){for(var n,r=0,i=(t=b(t)?(e=t,["*"]):t.match(R)).length;r<i;r++)n=t[r],we.tweeners[n]=we.tweeners[n]||[],we.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,l,u,c,h="width"in e||"height"in e,f=this,p={},d=t.style,y=t.nodeType&&st(t),g=X.get(t,"fxshow");for(r in n.queue||(null==(s=O._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,O.queue(t,"fx").length||s.empty.fire()})})),e)if(i=e[r],ye.test(i)){if(delete e[r],o=o||"toggle"===i,i===(y?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;y=!0}p[r]=g&&g[r]||O.style(t,r)}if((l=!O.isEmptyObject(e))||!O.isEmptyObject(p))for(r in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(u=g&&g.display)&&(u=X.get(t,"display")),"none"===(c=O.css(t,"display"))&&(u?c=u:(ct([t],!0),u=t.style.display||u,c=O.css(t,"display"),ct([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===O.css(t,"float")&&(l||(f.done(function(){d.display=u}),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(y=g.hidden):g=X.access(t,"fxshow",{display:u}),o&&(g.hidden=!y),y&&ct([t],!0),f.done(function(){for(r in y||ct([t]),X.remove(t,"fxshow"),p)O.style(t,r,p[r])})),l=_e(y?g[r]:0,r,f),r in g||(g[r]=l.start,y&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?we.prefilters.unshift(t):we.prefilters.push(t)}}),O.speed=function(t,e,n){var r=t&&"object"==typeof t?O.extend({},t):{complete:n||!n&&e||b(t)&&t,duration:t,easing:n&&e||e&&!b(e)&&e};return O.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in O.fx.speeds?r.duration=O.fx.speeds[r.duration]:r.duration=O.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){b(r.old)&&r.old.call(this),r.queue&&O.dequeue(this,r.queue)},r},O.fn.extend({fadeTo:function(t,e,n,r){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(e,t,n,r){function i(){var t=we(this,O.extend({},e),s);(o||X.get(this,"finish"))&&t.stop(!0)}var o=O.isEmptyObject(e),s=O.speed(t,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,t,o){function s(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof i&&(o=t,t=i,i=void 0),t&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=O.timers,r=X.get(this);if(e)r[e]&&r[e].stop&&s(r[e]);else for(e in r)r[e]&&r[e].stop&&ge.test(e)&&s(r[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||O.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=X.get(this),n=e[s+"queue"],r=e[s+"queueHooks"],i=O.timers,o=n?n.length:0;for(e.finish=!0,O.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===s&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),O.each(["toggle","show","hide"],function(t,r){var i=O.fn[r];O.fn[r]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(be(r,!0),t,e,n)}}),O.each({slideDown:be("show"),slideUp:be("hide"),slideToggle:be("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){O.fn[t]=function(t,e,n){return this.animate(r,t,e,n)}}),O.timers=[],O.fx.tick=function(){var t,e=0,n=O.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||O.fx.stop(),he=void 0},O.fx.timer=function(t){O.timers.push(t),O.fx.start()},O.fx.interval=13,O.fx.start=function(){fe||(fe=!0,me())},O.fx.stop=function(){fe=null},O.fx.speeds={slow:600,fast:200,_default:400},O.fn.delay=function(r,t){return r=O.fx&&O.fx.speeds[r]||r,t=t||"fx",this.queue(t,function(t,e){var n=x.setTimeout(t,r);e.stop=function(){x.clearTimeout(n)}})},pe=E.createElement("input"),de=E.createElement("select").appendChild(E.createElement("option")),pe.type="checkbox",v.checkOn=""!==pe.value,v.optSelected=de.selected,(pe=E.createElement("input")).value="t",pe.type="radio",v.radioValue="t"===pe.value;var Se,xe=O.expr.attrHandle;O.fn.extend({attr:function(t,e){return z(this,O.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){O.removeAttr(this,t)})}}),O.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?O.prop(t,e,n):(1===o&&O.isXMLDoc(t)||(i=O.attrHooks[e.toLowerCase()]||(O.expr.match.bool.test(e)?Se:void 0)),void 0!==n?null===n?void O.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):!(i&&"get"in i&&null!==(r=i.get(t,e)))&&null==(r=O.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&P(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(R);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),Se={set:function(t,e,n){return!1===e?O.removeAttr(t,n):t.setAttribute(n,n),n}},O.each(O.expr.match.bool.source.match(/\w+/g),function(t,e){var s=xe[e]||O.find.attr;xe[e]=function(t,e,n){var r,i,o=e.toLowerCase();return n||(i=xe[o],xe[o]=r,r=null!=s(t,e,n)?o:null,xe[o]=i),r}});var Ee=/^(?:input|select|textarea|button)$/i,Oe=/^(?:a|area)$/i;function Ce(t){return(t.match(R)||[]).join(" ")}function Pe(t){return t.getAttribute&&t.getAttribute("class")||""}function Te(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(R)||[]}O.fn.extend({prop:function(t,e){return z(this,O.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[O.propFix[t]||t]})}}),O.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&O.isXMLDoc(t)||(e=O.propFix[e]||e,i=O.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=O.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Oe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(O.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){O.propFix[this.toLowerCase()]=this}),O.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,l=0;if(b(e))return this.each(function(t){O(this).addClass(e.call(this,t,Pe(this)))});if((t=Te(e)).length)for(;n=this[l++];)if(i=Pe(n),r=1===n.nodeType&&" "+Ce(i)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=Ce(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,l=0;if(b(e))return this.each(function(t){O(this).removeClass(e.call(this,t,Pe(this)))});if(!arguments.length)return this.attr("class","");if((t=Te(e)).length)for(;n=this[l++];)if(i=Pe(n),r=1===n.nodeType&&" "+Ce(i)+" "){for(s=0;o=t[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=Ce(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,e){var o=typeof i,s="string"==o||Array.isArray(i);return"boolean"==typeof e&&s?e?this.addClass(i):this.removeClass(i):b(i)?this.each(function(t){O(this).toggleClass(i.call(this,t,Pe(this),e),e)}):this.each(function(){var t,e,n,r;if(s)for(e=0,n=O(this),r=Te(i);t=r[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!=o||((t=Pe(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==i&&X.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+Ce(Pe(n))+" ").indexOf(e))return!0;return!1}});var Me=/\r/g;O.fn.extend({val:function(n){var r,t,i,e=this[0];return arguments.length?(i=b(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=i?n.call(this,t,O(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=O.map(e,function(t){return null==t?"":t+""})),(r=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value")||(this.value=e))})):e?(r=O.valHooks[e.type]||O.valHooks[e.nodeName.toLowerCase()])&&"get"in r&&void 0!==(t=r.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(Me,""):null==t?"":t:void 0}}),O.extend({valHooks:{option:{get:function(t){var e=O.find.attr(t,"value");return null!=e?e:Ce(O.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?o+1:i.length;for(r=o<0?l:s?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(e=O(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=O.makeArray(e),s=i.length;s--;)((r=i[s]).selected=-1<O.inArray(O.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<O.inArray(O(t).val(),e)}},v.checkOn||(O.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in x;function Le(t){t.stopPropagation()}var Ne=/^(?:focusinfocus|focusoutblur)$/;O.extend(O.event,{trigger:function(t,e,n,r){var i,o,s,a,l,u,c,h,f=[n||E],p=m.call(t,"type")?t.type:t,d=m.call(t,"namespace")?t.namespace.split("."):[];if(o=h=s=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Ne.test(p+O.event.triggered)&&(-1<p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),l=p.indexOf(":")<0&&"on"+p,(t=t[O.expando]?t:new O.Event(p,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:O.makeArray(e,[t]),c=O.event.special[p]||{},r||!c.trigger||!1!==c.trigger.apply(n,e))){if(!r&&!c.noBubble&&!y(n)){for(a=c.delegateType||p,Ne.test(a+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(n.ownerDocument||E)&&f.push(s.defaultView||s.parentWindow||x)}for(i=0;(o=f[i++])&&!t.isPropagationStopped();)h=o,t.type=1<i?a:c.bindType||p,(u=(X.get(o,"events")||{})[t.type]&&X.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&J(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(f.pop(),e)||!J(n)||l&&b(n[p])&&!y(n)&&((s=n[l])&&(n[l]=null),O.event.triggered=p,t.isPropagationStopped()&&h.addEventListener(p,Le),n[p](),t.isPropagationStopped()&&h.removeEventListener(p,Le),O.event.triggered=void 0,s&&(n[l]=s)),t.result}},simulate:function(t,e,n){var r=O.extend(new O.Event,n,{type:t,isSimulated:!0});O.event.trigger(r,null,e)}}),O.fn.extend({trigger:function(t,e){return this.each(function(){O.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return O.event.trigger(t,e,n,!0)}}),v.focusin||O.each({focus:"focusin",blur:"focusout"},function(n,r){function i(t){O.event.simulate(r,t.target,O.event.fix(t))}O.event.special[r]={setup:function(){var t=this.ownerDocument||this,e=X.access(t,r);e||t.addEventListener(n,i,!0),X.access(t,r,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=X.access(t,r)-1;e?X.access(t,r,e):(t.removeEventListener(n,i,!0),X.remove(t,r))}}});var ke=x.location,Ae=Date.now(),Ie=/\?/;O.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new x.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||O.error("Invalid XML: "+t),e};var Re=/\[\]$/,je=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function Be(n,t,r,i){var e;if(Array.isArray(t))O.each(t,function(t,e){r||Re.test(n)?i(n,e):Be(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,i)});else if(r||"object"!==w(t))i(n,t);else for(e in t)Be(n+"["+e+"]",t[e],r,i)}O.param=function(t,e){function n(t,e){var n=b(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)}var r,i=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!O.isPlainObject(t))O.each(t,function(){n(this.name,this.value)});else for(r in t)Be(r,t[r],e,n);return i.join("&")},O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=O.prop(this,"elements");return t?O.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!O(this).is(":disabled")&&Fe.test(this.nodeName)&&!De.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var n=O(this).val();return null==n?null:Array.isArray(n)?O.map(n,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:n.replace(je,"\r\n")}}).get()}});var Ge=/%20/g,Ue=/#.*$/,ze=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ve=/^(?:GET|HEAD)$/,He=/^\/\//,We={},Je={},Ye="*/".concat("*"),Xe=E.createElement("a");function Ze(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,r=0,i=t.toLowerCase().match(R)||[];if(b(e))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function Qe(e,i,o,s){var a={},l=e===Je;function u(t){var r;return a[t]=!0,O.each(e[t]||[],function(t,e){var n=e(i,o,s);return"string"!=typeof n||l||a[n]?l?!(r=n):void 0:(i.dataTypes.unshift(n),u(n),!1)}),r}return u(i.dataTypes[0])||!a["*"]&&u("*")}function Ke(t,e){var n,r,i=O.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r=r||{})[n]=e[n]);return r&&O.extend(!0,t,r),t}Xe.href=ke.href,O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ke.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":O.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,O.ajaxSettings),e):Ke(O.ajaxSettings,t)},ajaxPrefilter:Ze(We),ajaxTransport:Ze(Je),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var c,h,f,n,p,r,d,y,i,o,g=O.ajaxSetup({},e),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?O(m):O.event,b=O.Deferred(),_=O.Callbacks("once memory"),w=g.statusCode||{},s={},a={},l="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(d){if(!n)for(n={};e=qe.exec(f);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?f:null},setRequestHeader:function(t,e){return null==d&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==d&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)S.always(t[S.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||l;return c&&c.abort(e),u(0,e),this}};if(b.promise(S),g.url=((t||g.url||ke.href)+"").replace(He,ke.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(R)||[""],null==g.crossDomain){r=E.createElement("a");try{r.href=g.url,r.href=r.href,g.crossDomain=Xe.protocol+"//"+Xe.host!=r.protocol+"//"+r.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=O.param(g.data,g.traditional)),Qe(We,g,e,S),d)return S;for(i in(y=O.event&&g.global)&&0==O.active++&&O.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Ve.test(g.type),h=g.url.replace(Ue,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Ge,"+")):(o=g.url.slice(h.length),g.data&&(g.processData||"string"==typeof g.data)&&(h+=(Ie.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(h=h.replace(ze,"$1"),o=(Ie.test(h)?"&":"?")+"_="+Ae+++o),g.url=h+o),g.ifModified&&(O.lastModified[h]&&S.setRequestHeader("If-Modified-Since",O.lastModified[h]),O.etag[h]&&S.setRequestHeader("If-None-Match",O.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ye+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(m,S,g)||d))return S.abort();if(l="abort",_.add(g.complete),S.done(g.success),S.fail(g.error),c=Qe(Je,g,e,S)){if(S.readyState=1,y&&v.trigger("ajaxSend",[S,g]),d)return S;g.async&&0<g.timeout&&(p=x.setTimeout(function(){S.abort("timeout")},g.timeout));try{d=!1,c.send(s,u)}catch(t){if(d)throw t;u(-1,t)}}else u(-1,"No Transport");function u(t,e,n,r){var i,o,s,a,l,u=e;d||(d=!0,p&&x.clearTimeout(p),c=void 0,f=r||"",S.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var r,i,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,S,n)),a=function(t,e,n,r){var i,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(g,a,S,i),i?(g.ifModified&&((l=S.getResponseHeader("Last-Modified"))&&(O.lastModified[h]=l),(l=S.getResponseHeader("etag"))&&(O.etag[h]=l)),204===t||"HEAD"===g.type?u="nocontent":304===t?u="notmodified":(u=a.state,o=a.data,i=!(s=a.error))):(s=u,!t&&u||(u="error",t<0&&(t=0))),S.status=t,S.statusText=(e||u)+"",i?b.resolveWith(m,[o,u,S]):b.rejectWith(m,[S,u,s]),S.statusCode(w),w=void 0,y&&v.trigger(i?"ajaxSuccess":"ajaxError",[S,g,i?o:s]),_.fireWith(m,[S,u]),y&&(v.trigger("ajaxComplete",[S,g]),--O.active||O.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return O.get(t,e,n,"json")},getScript:function(t,e){return O.get(t,void 0,e,"script")}}),O.each(["get","post"],function(t,i){O[i]=function(t,e,n,r){return b(e)&&(r=r||n,n=e,e=void 0),O.ajax(O.extend({url:t,type:i,dataType:r,data:e,success:n},O.isPlainObject(t)&&t))}}),O._evalUrl=function(t,e){return O.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){O.globalEval(t,e)}})},O.fn.extend({wrapAll:function(t){var e;return this[0]&&(b(t)&&(t=t.call(this[0])),e=O(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return b(n)?this.each(function(t){O(this).wrapInner(n.call(this,t))}):this.each(function(){var t=O(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=b(e);return this.each(function(t){O(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){O(this).replaceWith(this.childNodes)}),this}}),O.expr.pseudos.hidden=function(t){return!O.expr.pseudos.visible(t)},O.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},O.ajaxSettings.xhr=function(){try{return new x.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},tn=O.ajaxSettings.xhr();v.cors=!!tn&&"withCredentials"in tn,v.ajax=tn=!!tn,O.ajaxTransport(function(i){var o,s;if(v.cors||tn&&!i.crossDomain)return{send:function(t,e){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?e(0,"error"):e(r.status,r.statusText):e($e[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&x.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),O.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return O.globalEval(t),t}}}),O.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),O.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){r=O("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){r.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var en,nn=[],rn=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=nn.pop()||O.expando+"_"+Ae++;return this[t]=!0,t}}),O.ajaxPrefilter("json jsonp",function(t,e,n){var r,i,o,s=!1!==t.jsonp&&(rn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&rn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=b(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(rn,"$1"+r):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||O.error(r+" was not called"),o[0]},t.dataTypes[0]="json",i=x[r],x[r]=function(){o=arguments},n.always(function(){void 0===i?O(x).removeProp(r):x[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,nn.push(r)),o&&b(i)&&i(o[0]),o=i=void 0}),"script"}),v.createHTMLDocument=((en=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),O.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,e.head.appendChild(r)):e=E),o=!n&&[],(i=T.exec(t))?[e.createElement(i[1])]:(i=_t([t],e,o),o&&o.length&&O(o).remove(),O.merge([],i.childNodes)));var r,i,o},O.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return-1<a&&(r=Ce(t.slice(a)),t=t.slice(0,a)),b(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<s.length&&O.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?O("<div>").append(O.parseHTML(t)).find(r):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){O.fn[e]=function(t){return this.on(e,t)}}),O.expr.pseudos.animated=function(e){return O.grep(O.timers,function(t){return e===t.elem}).length},O.offset={setOffset:function(t,e,n){var r,i,o,s,a,l,u=O.css(t,"position"),c=O(t),h={};"static"===u&&(t.style.position="relative"),a=c.offset(),o=O.css(t,"top"),l=O.css(t,"left"),i=("absolute"===u||"fixed"===u)&&-1<(o+l).indexOf("auto")?(s=(r=c.position()).top,r.left):(s=parseFloat(o)||0,parseFloat(l)||0),b(e)&&(e=e.call(t,n,O.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):c.css(h)}},O.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){O.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===O.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===O.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=O(t).offset()).top+=O.css(t,"borderTopWidth",!0),i.left+=O.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-O.css(r,"marginTop",!0),left:e.left-i.left-O.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===O.css(t,"position");)t=t.offsetParent;return t||rt})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var o="pageYOffset"===i;O.fn[e]=function(t){return z(this,function(t,e,n){var r;if(y(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[i]:t[e];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):t[e]=n},e,t,arguments.length)}}),O.each(["top","left"],function(t,n){O.cssHooks[n]=Zt(v.pixelPosition,function(t,e){if(e)return e=Xt(t,n),Wt.test(e)?O(t).position()[n]+"px":e})}),O.each({Height:"height",Width:"width"},function(s,a){O.each({padding:"inner"+s,content:a,"":"outer"+s},function(r,o){O.fn[o]=function(t,e){var n=arguments.length&&(r||"boolean"!=typeof t),i=r||(!0===t||!0===e?"margin":"border");return z(this,function(t,e,n){var r;return y(t)?0===o.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+s],r["scroll"+s],t.body["offset"+s],r["offset"+s],r["client"+s])):void 0===n?O.css(t,e,i):O.style(t,e,n,i)},a,n?t:void 0,n)}})}),O.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){O.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),O.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),O.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),O.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),b(t))return r=a.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(a.call(arguments)))}).guid=t.guid=t.guid||O.guid++,i},O.holdReady=function(t){t?O.readyWait++:O.ready(!0)},O.isArray=Array.isArray,O.parseJSON=JSON.parse,O.nodeName=P,O.isFunction=b,O.isWindow=y,O.camelCase=W,O.type=w,O.now=Date.now,O.isNumeric=function(t){var e=O.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return O});var on=x.jQuery,sn=x.$;return O.noConflict=function(t){return x.$===O&&(x.$=sn),t&&x.jQuery===O&&(x.jQuery=on),O},t||(x.jQuery=x.$=O),O}),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Papa=e()}(this,function(){"use strict";function s(t){this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=g(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new n(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&k(this._config.beforeFirstChunk)){var e=this._config.beforeFirstChunk(t);void 0!==e&&(t=e)}this.isFirstChunk=!1;var n=this._partialLine+t;this._partialLine="";var r=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var i=r.meta.cursor;this._finished||(this._partialLine=n.substring(i-this._baseIndex),this._baseIndex=i),r&&r.data&&(this._rowCount+=r.data.length);var o=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(v)m.postMessage({results:r,workerId:S.WORKER_ID,finished:o});else if(k(this._config.chunk)){if(this._config.chunk(r,this._handle),this._paused)return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),!o||!k(this._config.complete)||r&&r.meta.aborted||this._config.complete(this._completeResults,this._input),o||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(t){k(this._config.error)?this._config.error(t):v&&this._config.error&&m.postMessage({workerId:S.WORKER_ID,error:t,finished:!1})}}function o(t){var r;(t=t||{}).chunkSize||(t.chunkSize=S.RemoteChunkSize),s.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),i||(r.onload=p(this._chunkLoaded,this),r.onerror=p(this._chunkError,this)),r.open("GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var e in t)r.setRequestHeader(e,t[e])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+n),r.setRequestHeader("If-None-Match","webkit-no-cache")}try{r.send()}catch(t){this._chunkError(t.message)}i&&0===r.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){if(4==r.readyState){if(r.status<200||400<=r.status)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>(null===(t=r.getResponseHeader("Content-Range"))?-1:parseInt(t.substr(t.lastIndexOf("/")+1))),this.parseChunk(r.responseText)}var t},this._chunkError=function(t){var e=r.statusText||t;this._sendError(e)}}function a(t){(t=t||{}).chunkSize||(t.chunkSize=S.LocalChunkSize),s.call(this,t);var r,i,o="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,o?((r=new FileReader).onload=p(this._chunkLoaded,this),r.onerror=p(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var e=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,e)}var n=r.readAsText(t,this._config.encoding);o||this._chunkLoaded({target:{result:n}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(r.error)}}function l(t){var n;s.call(this,t=t||{}),this.stream=function(t){return n=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,e=t?n.substr(0,t):n;return n=t?n.substr(t):"",this._finished=!n,this.parseChunk(e)}}}function u(t){s.call(this,t=t||{});var e=[],n=!0;this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._nextChunk=function(){e.length?this.parseChunk(e.shift()):n=!0},this._streamData=p(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=p(function(t){this._streamCleanUp(),this._sendError(t.message)},this),this._streamEnd=p(function(){this._streamCleanUp(),this._finished=!0,this._streamData("")},this),this._streamCleanUp=p(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function n(p){function o(){if(d&&u&&(s("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+S.DefaultDelimiter+"'"),u=!1),p.skipEmptyLines)for(var t=0;t<d.data.length;t++)1===d.data[t].length&&""===d.data[t][0]&&d.data.splice(t--,1);return n()&&function(){if(d){for(var t=0;n()&&t<d.data.length;t++)for(var e=0;e<d.data[t].length;e++)f.push(d.data[t][e]);d.data.splice(0,1)}}(),function(){if(!d||!p.header&&!p.dynamicTyping)return d;for(var t=0;t<d.data.length;t++){for(var e=p.header?{}:[],n=0;n<d.data[t].length;n++){var r=n,i=d.data[t][n];p.header&&(r=n>=f.length?"__parsed_extra":f[n]),o=i,i=function(t){return p.dynamicTypingFunction&&void 0===p.dynamicTyping[t]&&(p.dynamicTyping[t]=p.dynamicTypingFunction(t)),!0===(p.dynamicTyping[t]||p.dynamicTyping)}(r)?"true"===o||"TRUE"===o||"false"!==o&&"FALSE"!==o&&function(t){return c.test(t)?parseFloat(t):t}(o):o,"__parsed_extra"===r?(e[r]=e[r]||[],e[r].push(i)):e[r]=i}d.data[t]=e,p.header&&(n>f.length?s("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+n,t):n<f.length&&s("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+n,t))}var o;return p.header&&d.meta&&(d.meta.fields=f),d}()}function n(){return p.header&&0===f.length}function s(t,e,n,r){d.errors.push({type:t,code:e,message:n,row:r})}var a,l,u,c=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,e=this,r=0,h=!1,t=!1,f=[],d={data:[],errors:[],meta:{}};if(k(p.step)){var i=p.step;p.step=function(t){if(d=t,n())o();else{if(o(),0===d.data.length)return;r+=t.data.length,p.preview&&r>p.preview?l.abort():i(d,e)}}}this.parse=function(t,e,n){if(p.newline||(p.newline=function(t){var e=(t=t.substr(0,1048576)).split("\r"),n=t.split("\n"),r=1<n.length&&n[0].length<e[0].length;if(1===e.length||r)return"\n";for(var i=0,o=0;o<e.length;o++)"\n"===e[o][0]&&i++;return i>=e.length/2?"\r\n":"\r"}(t)),u=!1,p.delimiter)k(p.delimiter)&&(p.delimiter=p.delimiter(t),d.meta.delimiter=p.delimiter);else{var r=function(t,e){for(var n,r,i,o=[",","\t","|",";",S.RECORD_SEP,S.UNIT_SEP],s=0;s<o.length;s++){var a=o[s],l=0,u=0;i=void 0;for(var c=new y({delimiter:a,newline:e,preview:10}).parse(t),h=0;h<c.data.length;h++){var f=c.data[h].length;u+=f,void 0!==i?1<f&&(l+=Math.abs(f-i),i=f):i=f}0<c.data.length&&(u/=c.data.length),(void 0===r||l<r)&&1.99<u&&(r=l,n=a)}return{successful:!!(p.delimiter=n),bestDelimiter:n}}(t,p.newline);r.successful?p.delimiter=r.bestDelimiter:(u=!0,p.delimiter=S.DefaultDelimiter),d.meta.delimiter=p.delimiter}var i=g(p);return p.preview&&p.header&&i.preview++,a=t,l=new y(i),d=l.parse(a,e,n),o(),h?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,l.abort(),a=a.substr(l.getCharIndex())},this.resume=function(){h=!1,e.streamer.parseChunk(a)},this.aborted=function(){return t},this.abort=function(){t=!0,l.abort(),d.meta.aborted=!0,k(p.complete)&&p.complete(d),a=""}}function y(t){var x=(t=t||{}).delimiter,E=t.newline,O=t.comments,C=t.step,P=t.preview,T=t.fastMode,M=t.quoteChar||'"';if(("string"!=typeof x||-1<S.BAD_DELIMITERS.indexOf(x))&&(x=","),O===x)throw"Comment character same as delimiter";!0===O?O="#":("string"!=typeof O||-1<S.BAD_DELIMITERS.indexOf(O))&&(O=!1),"\n"!=E&&"\r"!=E&&"\r\n"!=E&&(E="\n");var L=0,N=!1;this.parse=function(e,n,r){function i(t){p.push(t),g=L}function t(t){return r||(void 0===t&&(t=e.substr(L)),y.push(t),L=l,i(y),f&&a()),s()}function o(t){L=t,i(y),y=[],_=e.indexOf(E,L)}function s(t){return{data:p,errors:d,meta:{delimiter:x,linebreak:E,aborted:N,truncated:!!t,cursor:g+(n||0)}}}function a(){C(s()),p=[],d=[]}if("string"!=typeof e)throw"Input must be a string";var l=e.length,u=x.length,c=E.length,h=O.length,f=k(C),p=[],d=[],y=[],g=L=0;if(!e)return s();if(T||!1!==T&&-1===e.indexOf(M)){for(var m=e.split(E),v=0;v<m.length;v++){y=m[v];if(L+=y.length,v!==m.length-1)L+=E.length;else if(r)return s();if(!O||y.substr(0,h)!==O){if(f){if(p=[],i(y.split(x)),a(),N)return s()}else i(y.split(x));if(P&&P<=v)return p=p.slice(0,P),s(!0)}}return s()}for(var b=e.indexOf(x,L),_=e.indexOf(E,L),w=new RegExp(M+M,"g");;)if(e[L]!==M)if(O&&0===y.length&&e.substr(L,h)===O){if(-1===_)return s();L=_+c,_=e.indexOf(E,L),b=e.indexOf(x,L)}else if(-1!==b&&(b<_||-1===_))y.push(e.substring(L,b)),L=b+u,b=e.indexOf(x,L);else{if(-1===_)break;if(y.push(e.substring(L,_)),o(_+c),f&&(a(),N))return s();if(P&&p.length>=P)return s(!0)}else{var S=L;for(L++;;){if(-1===(S=e.indexOf(M,S+1)))return r||d.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:p.length,index:L}),t();if(S===l-1)return t(e.substring(L,S).replace(w,M));if(e[S+1]!==M){if(e[S+1]===x){y.push(e.substring(L,S).replace(w,M)),L=S+1+u,b=e.indexOf(x,L),_=e.indexOf(E,L);break}if(e.substr(S+1,c)===E){if(y.push(e.substring(L,S).replace(w,M)),o(S+1+c),b=e.indexOf(x,L),f&&(a(),N))return s();if(P&&p.length>=P)return s(!0);break}}else S++}}return t()},this.abort=function(){N=!0},this.getCharIndex=function(){return L}}function c(t){var e=t.data,n=_[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var i={abort:function(){r=!0,h(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:f,resume:f};if(k(n.userStep)){for(var o=0;o<e.results.data.length&&(n.userStep({data:[e.results.data[o]],errors:e.results.errors,meta:e.results.meta},i),!r);o++);delete e.results}else k(n.userChunk)&&(n.userChunk(e.results,i,e.file),delete e.results)}e.finished&&!r&&h(e.workerId,e.results)}function h(t,e){var n=_[t];k(n.userComplete)&&n.userComplete(e),n.terminate(),delete _[t]}function f(){throw"Not implemented."}function g(t){if("object"!=typeof t)return t;var e=t instanceof Array?[]:{};for(var n in t)e[n]=g(t[n]);return e}function p(t,e){return function(){t.apply(e,arguments)}}function k(t){return"function"==typeof t}var d,t,m="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==m?m:{},i=!m.document&&!!m.postMessage,v=i&&/(\?|&)papaworker(=|&|$)/.test(m.location.search),b=!1,_={},w=0,S={};if(S.parse=function(t,e){var n=(e=e||{}).dynamicTyping||!1;if(k(n)&&(e.dynamicTypingFunction=n,n={}),e.dynamicTyping=n,e.worker&&S.WORKERS_SUPPORTED){var r=function(){if(!S.WORKERS_SUPPORTED)return!1;if(!b&&null===S.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=S.SCRIPT_PATH||d;t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker";var e=new m.Worker(t);return e.onmessage=c,e.id=w++,_[e.id]=e}();return r.userStep=e.step,r.userChunk=e.chunk,r.userComplete=e.complete,r.userError=e.error,e.step=k(e.step),e.chunk=k(e.chunk),e.complete=k(e.complete),e.error=k(e.error),delete e.worker,void r.postMessage({input:t,config:e,workerId:r.id})}var i=null;return"string"==typeof t?i=new(e.download?o:l)(e):!0===t.readable&&k(t.read)&&k(t.on)?i=new u(e):(m.File&&t instanceof File||t instanceof Object)&&(i=new a(e)),i.stream(t)},S.unparse=function(t,e){function n(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function r(t,e){var n="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var r=t instanceof Array&&0<t.length,i=!(e[0]instanceof Array);if(r&&h){for(var o=0;o<t.length;o++)0<o&&(n+=f),n+=c(t[o],o);0<e.length&&(n+=p)}for(var s=0;s<e.length;s++){for(var a=r?t.length:e[s].length,l=0;l<a;l++){0<l&&(n+=f);var u=r&&i?t[l]:l;n+=c(e[s][u],l)}s<e.length-1&&(n+=p)}return n}function c(t,e){return null==t?"":(t=t.toString().replace(s,o+o),"boolean"==typeof i&&i||i instanceof Array&&i[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(t,S.BAD_DELIMITERS)||-1<t.indexOf(f)||" "===t.charAt(0)||" "===t.charAt(t.length-1)?o+t+o:t)}var i=!1,h=!0,f=",",p="\r\n",o='"';"object"==typeof e&&("string"==typeof e.delimiter&&1===e.delimiter.length&&-1===S.BAD_DELIMITERS.indexOf(e.delimiter)&&(f=e.delimiter),("boolean"==typeof e.quotes||e.quotes instanceof Array)&&(i=e.quotes),"string"==typeof e.newline&&(p=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(h=e.header));var s=new RegExp(o,"g");if("string"==typeof t&&(t=JSON.parse(t)),t instanceof Array){if(!t.length||t[0]instanceof Array)return r(null,t);if("object"==typeof t[0])return r(n(t[0]),t)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data instanceof Array&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=t.data[0]instanceof Array?t.fields:n(t.data[0])),t.data[0]instanceof Array||"object"==typeof t.data[0]||(t.data=[t.data])),r(t.fields||[],t.data||[]);throw"exception: Unable to serialize unrecognized input"},S.RECORD_SEP=String.fromCharCode(30),S.UNIT_SEP=String.fromCharCode(31),S.BYTE_ORDER_MARK="\ufeff",S.BAD_DELIMITERS=["\r","\n",'"',S.BYTE_ORDER_MARK],S.WORKERS_SUPPORTED=!i&&!!m.Worker,S.SCRIPT_PATH=null,S.LocalChunkSize=10485760,S.RemoteChunkSize=5242880,S.DefaultDelimiter=",",S.Parser=y,S.ParserHandle=n,S.NetworkStreamer=o,S.FileStreamer=a,S.StringStreamer=l,S.ReadableStreamStreamer=u,m.jQuery){var x=m.jQuery;x.fn.parse=function(a){function t(){if(0!==u.length){var t,e,n,r,i=u[0];if(k(a.before)){var o=a.before(i.file,i.inputElem);if("object"==typeof o){if("abort"===o.action)return t="AbortError",e=i.file,n=i.inputElem,r=o.reason,void(k(a.error)&&a.error({name:t},e,n,r));if("skip"===o.action)return void l();"object"==typeof o.config&&(i.instanceConfig=x.extend(i.instanceConfig,o.config))}else if("skip"===o)return void l()}var s=i.instanceConfig.complete;i.instanceConfig.complete=function(t){k(s)&&s(t,i.file,i.inputElem),l()},S.parse(i.file,i.instanceConfig)}else k(a.complete)&&a.complete()}function l(){u.splice(0,1),t()}var n=a.config||{},u=[];return this.each(function(t){if(!("INPUT"===x(this).prop("tagName").toUpperCase()&&"file"===x(this).attr("type").toLowerCase()&&m.FileReader)||!this.files||0===this.files.length)return!0;for(var e=0;e<this.files.length;e++)u.push({file:this.files[e],inputElem:this,instanceConfig:x.extend({},n)})}),t(),this}}return v?m.onmessage=function(t){var e=t.data;if(void 0===S.WORKER_ID&&e&&(S.WORKER_ID=e.workerId),"string"==typeof e.input)m.postMessage({workerId:S.WORKER_ID,results:S.parse(e.input,e.config),finished:!0});else if(m.File&&e.input instanceof File||e.input instanceof Object){var n=S.parse(e.input,e.config);n&&m.postMessage({workerId:S.WORKER_ID,results:n,finished:!0})}}:S.WORKERS_SUPPORTED&&(t=document.getElementsByTagName("script"),d=t.length?t[t.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){b=!0},!0):b=!0),(o.prototype=Object.create(s.prototype)).constructor=o,(a.prototype=Object.create(s.prototype)).constructor=a,(l.prototype=Object.create(l.prototype)).constructor=l,(u.prototype=Object.create(s.prototype)).constructor=u,S}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.turf={})}(this,function(t){"use strict";var f=6371008.8,r={meters:f,metres:f,millimeters:1e3*f,millimetres:1e3*f,centimeters:100*f,centimetres:100*f,kilometers:f/1e3,kilometres:f/1e3,miles:f/1609.344,nauticalmiles:f/1852,inches:39.37*f,yards:f/1.0936,feet:3.28084*f,radians:1,degrees:f/111325},e={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/f,degrees:1/111325},o={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function z(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&S(r),i&&x(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r,i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(i&&S(i),t){case"Point":r=q(e).geometry;break;case"LineString":r=V(e).geometry;break;case"Polygon":r=B(e).geometry;break;case"MultiPoint":r=l(e).geometry;break;case"MultiLineString":r=b(e).geometry;break;case"MultiPolygon":r=_(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(r.bbox=i),r}function q(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!W(t[0])||!W(t[1]))throw new Error("coordinates must contain numbers");return z({type:"Point",coordinates:t},e,n)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return H(t.map(function(t){return q(t,e)}),n)}function B(t,e,n){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var i=t[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++){if(0===r&&0===o&&!W(i[0][0])||!W(i[0][1]))throw new Error("coordinates must contain numbers");if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}}return z({type:"Polygon",coordinates:t},e,n)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return H(t.map(function(t){return B(t,e)}),n)}function V(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!W(t[0][1])||!W(t[0][1]))throw new Error("coordinates must contain numbers");return z({type:"LineString",coordinates:t},e,n)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return H(t.map(function(t){return V(t,e)}),n)}function H(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&S(n),r&&x(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function b(t,e,n){if(!t)throw new Error("coordinates is required");return z({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){if(!t)throw new Error("coordinates is required");return z({type:"MultiPoint",coordinates:t},e,n)}function _(t,e,n){if(!t)throw new Error("coordinates is required");return z({type:"MultiPolygon",coordinates:t},e,n)}function u(t,e,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return z({type:"GeometryCollection",geometries:t},e,n)}function c(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=r[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=r[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function h(t,e){return g(y(t,e))}function p(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function g(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function v(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function m(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return d(y(t,e),n||"kilometers")}function w(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var r=o[e||"meters"];if(!r)throw new Error("invalid original units");var i=o[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function W(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function J(t){return!!t&&t.constructor===Object}function S(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!W(t))throw new Error("bbox must only contain numbers")})}function x(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var E=Object.freeze({earthRadius:f,factors:r,unitsFactors:e,areaFactors:o,feature:z,geometry:n,point:q,points:i,polygon:B,polygons:s,lineString:V,lineStrings:a,featureCollection:H,multiLineString:b,multiPoint:l,multiPolygon:_,geometryCollection:u,round:c,radiansToLength:d,lengthToRadians:y,lengthToDegrees:h,bearingToAzimuth:p,radiansToDegrees:g,degreesToRadians:v,convertLength:m,convertArea:w,isNumber:W,isObject:J,validateBBox:S,validateId:x,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}});function O(t,e,n){if(null!==t)for(var r,i,o,s,a,l,u,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,g=d?t.features.length:1,m=0;m<g;m++){a=(c=!!(u=d?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<a;v++){var b=0,_=0;if(null!==(s=c?u.geometries[v]:u)){l=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(l,f,m,b,_),f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++)e(l[r],f,m,b,_),f++,"MultiPoint"===w&&b++;"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++)e(l[r][i],f,m,b,_),f++;"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for("MultiPolygon"===w&&(_=0),i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++)e(l[r][i][o],f,m,b,_),f++;_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)O(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function C(t,o,s,e){var a=s;return O(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)},e),a}function P(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function T(t,n,r){var i=r;return P(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function M(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function L(t,n,r){var i=r;return M(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function N(t){var e=[];return O(t,function(t){e.push(t)}),e}function k(t,e){var n,r,i,o,s,a,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(n=0;n<y;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=l?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,f,u,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],f,u,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,u,c,h);f++}}function A(t,o,s){var a=s;return k(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)}),a}function I(t,a){k(t,function(t,n,r,e,i){var o,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void a(z(t,r,{bbox:e,id:i}),n,0)}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}t.coordinates.forEach(function(t,e){a(z({type:o,coordinates:t},r),n,e)})})}function R(t,r,i){var o=i;return I(t,function(t,e,n){o=0===e&&0===n&&void 0===i?t:r(o,t,e,n)}),o}function j(t,h){I(t,function(a,l,u){var c=0;if(a.geometry){var t=a.geometry.type;"Point"!==t&&"MultiPoint"!==t&&C(a,function(t,e,n,r,i,o){var s=V([t,e],a.properties);return h(s,l,u,o,c),c++,e})}})}function D(t,o,s){var a=s,l=!1;return j(t,function(t,e,n,r,i){a=!1===l&&void 0===s?t:o(a,t,e,n,r,i),l=!0}),a}function F(t,s){if(!t)throw new Error("geojson is required");I(t,function(t,e,n){if(null!==t.geometry){var r=t.geometry.type,i=t.geometry.coordinates;switch(r){case"LineString":s(t,e,n,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)s(V(i[o],t.properties),e,n,o)}}})}function G(t,i,o){var s=o;return F(t,function(t,e,n,r){s=0===e&&void 0===o?t:i(s,t,e,n,r)}),s}var U=Object.freeze({coordEach:O,coordReduce:C,propEach:P,propReduce:T,featureEach:M,featureReduce:L,coordAll:N,geomEach:k,geomReduce:A,flattenEach:I,flattenReduce:R,segmentEach:j,segmentReduce:D,lineEach:F,lineReduce:G});function Y(t){var e=[1/0,1/0,-1/0,-1/0];return O(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function X(t){if(!t)throw new Error("obj is required");var e=Z(t);if(1<e.length&&W(e[0])&&W(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function Z(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return Q(e),e;throw new Error("No valid coordinates")}function Q(t){if(1<t.length&&W(t[0])&&W(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Q(t[0]);throw new Error("coordinates must only contain numbers")}function K(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function $(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function tt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function et(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function nt(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function rt(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}var it=Object.freeze({getCoord:X,getCoords:Z,containsNumber:Q,geojsonType:K,featureOf:$,collectionOf:tt,getGeom:et,getGeomType:nt,getType:rt}),ot={successCallback:null,verbose:!1},st={};function at(t,e,n){n=n||{};for(var r=Object.keys(ot),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:ot[o],st[o]=s}st.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var u,c,h,a=(u=function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,l=t[o+1][s],u=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){a|=e<=l?8:0,a|=e<=u?4:0,a|=e<=c?2:0;var f,p,d,y,g=!1;if(5==(a|=e<=h?1:0)||10===a){var m=(l+u+c+h)/4;5===a&&m<e?(a=10,g=!0):10===a&&m<e&&(a=5,g=!0)}0!==a&&15!==a&&(f=p=d=y=.5,1===a?(d=1-lt(e,l,h),p=1-lt(e,c,h)):2===a?(p=lt(e,h,c),y=1-lt(e,u,c)):3===a?(d=1-lt(e,l,h),y=1-lt(e,u,c)):4===a?(f=lt(e,l,u),y=lt(e,c,u)):5===a?(f=lt(e,l,u),y=lt(e,c,u),p=1-lt(e,c,h),d=1-lt(e,l,h)):6===a?(p=lt(e,h,c),f=lt(e,l,u)):7===a?(d=1-lt(e,l,h),f=lt(e,l,u)):8===a?(d=lt(e,h,l),f=1-lt(e,u,l)):9===a?(p=1-lt(e,c,h),f=1-lt(e,u,l)):10===a?(f=1-lt(e,u,l),y=1-lt(e,u,c),p=lt(e,h,c),d=lt(e,h,l)):11===a?(f=1-lt(e,u,l),y=1-lt(e,u,c)):12===a?(d=lt(e,h,l),y=lt(e,c,u)):13===a?(p=1-lt(e,c,h),y=lt(e,c,u)):14===a?(d=lt(e,h,l),p=lt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:g,top:f,right:y,bottom:p,left:d})}}}return i}(t,e),c=[],h=0,u.rows,u.cols,u.cells.forEach(function(t,l){t.forEach(function(t,e){if(void 0!==t&&5!==t.cval&&10!==t.cval&&!ut(t)){var n=function(t,e,n){var r,i,o,s=t.length,a=[],l=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),f=h.cval,p=ht(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][f]);a.push([n+p[0],e+p[1]]),p=ht(h,o=c[f]),a.push([n+p[0],e+p[1]]),ct(h);for(var d=n+l[f],y=e+u[f],g=f;0<=d&&0<=y&&y<s&&(d!=n||y!=e)&&void 0!==(h=t[y][d]);){if(0===(f=h.cval)||15===f)return{path:a,info:"mergeable"};o=c[f],r=l[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?(r=-1===u[g]?(o="left",-1):(o="right",1),i=0):-1===l[g]&&(o="bottom",r=0,i=-1):10===f&&(h.flipped?i=-1===l[g]?(o="top",r=0,1):(o="bottom",r=0,-1):1===u[g]&&(o="left",r=-1,i=0))),p=ht(h,o),a.push([d+p[0],y+p[1]]),ct(h),d+=r,y+=i,g=f}return{path:a,info:"closed"}}(u.cells,l,e),r=!1;if("mergeable"===n.info)for(var i=n.path[n.path.length-1][0],o=n.path[n.path.length-1][1],s=h-1;0<=s;s--)if(Math.abs(c[s][0][0]-i)<=1e-7&&Math.abs(c[s][0][1]-o)<=1e-7){for(var a=n.path.length-2;0<=a;--a)c[s].unshift(n.path[a]);r=!0;break}r||(c[h++]=n.path)}})}),c);return"function"==typeof st.successCallback&&st.successCallback(a),a}function lt(t,e,n){return(t-e)/(n-e)}function ut(t){return 0===t.cval||15===t.cval}function ct(t){ut(t)||5===t.cval||10===t.cval||(t.cval=15)}function ht(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function ft(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||dt;n<r;){if(600<r-n){var o=r-n+1,s=e-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);ft(t,e,Math.max(n,Math.floor(e-s*l/o+u)),Math.min(r,Math.floor(e+(o-s)*l/o+u)),i)}var c=t[e],h=n,f=r;for(pt(t,n,e),0<i(t[r],c)&&pt(t,n,r);h<f;){for(pt(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;0<i(t[f],c);)f--}0===i(t[n],c)?pt(t,n,f):pt(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function pt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function dt(t,e){return t<e?-1:e<t?1:0}var yt=gt;function gt(t,e){if(!(this instanceof gt))return new gt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function mt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function vt(t,e){bt(t,0,t.children.length,e,t)}function bt(t,e,n,r,i){(i=i||Pt(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],_t(i,t.leaf?r(o):o);return i}function _t(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function wt(t,e){return t.minX-e.minX}function St(t,e){return t.minY-e.minY}function xt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Et(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ot(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ct(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Pt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Tt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,ft(t,o,e,n,i),s.push(e,o,o,n))}function Mt(t,e){return t(e={exports:{}},e.exports),e.exports}gt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ct(t,e))return n;for(var i,o,s,a,l=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Ct(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Ot(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ct(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Ct(t,s=e.leaf?n(o):o)){if(e.leaf||Ot(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Pt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),s.leaf&&-1!==(i=mt(t,s.children,e)))return s.children.splice(i,1),l.push(s),this._condense(l),this;o||s.leaf||!Ot(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:wt,compareMinY:St,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return vt(i=Pt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Pt([])).leaf=!1,i.height=r;var a,l,u,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Tt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(Tt(t,a,u=Math.min(a+f-1,n),h,this.compareMinY),l=a;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return vt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,l,u,c,h,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=xt(s=e.children[i]),f=t,p=s,(u=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<h?(h=u,c=l<c?l:c,a=s):u===h&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),_t(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Pt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,vt(n,this.toBBox),vt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Pt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,vt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,l,u,c,h,f,p,d,y,g;for(l=u=1/0,r=e;r<=n-e;r++)h=i=bt(t,0,r,this.toBBox),f=o=bt(t,r,n,this.toBBox),p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),y=Math.min(h.maxX,f.maxX),g=Math.min(h.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,g-d),a=xt(i)+xt(o),s<l?(l=s,c=r,u=a<u?a:u):s===l&&a<u&&(u=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:wt,i=t.leaf?this.compareMinY:St;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=bt(t,0,e,s),l=bt(t,n-e,n,s),u=Et(a)+Et(l);for(i=e;i<n-e;i++)o=t.children[i],_t(a,t.leaf?s(o):o),u+=Et(a);for(i=n-e-1;e<=i;i--)o=t.children[i],_t(l,t.leaf?s(o):o),u+=Et(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)_t(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():vt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Lt=function(t,e,n){var r=t*e,i=Nt*t,o=i-(i-t),s=t-o,a=Nt*e,l=a-(a-e),u=e-l,c=s*u-(r-o*l-s*l-o*u);return n?(n[0]=c,n[1]=r,n):[c,r]},Nt=+(Math.pow(2,27)+1);function kt(t,e){var n,r,i,o,s,a=0|t.length,l=0|e.length;if(1==a&&1==l)return n=t[0],r=e[0],(s=n-((i=n+r)-(o=i-n))+(r-o))?[s,i]:[i];var u,c,h=new Array(a+l),f=0,p=0,d=0,y=Math.abs,g=t[p],m=y(g),v=e[d],b=y(v);m<b?(c=g,(p+=1)<a&&(m=y(g=t[p]))):(c=v,(d+=1)<l&&(b=y(v=e[d]))),p<a&&m<b||l<=d?(u=g,(p+=1)<a&&(m=y(g=t[p]))):(u=v,(d+=1)<l&&(b=y(v=e[d])));for(var _,w,S=u+c,x=S-u,E=c-x,O=E,C=S;p<a&&d<l;)m<b?(u=g,(p+=1)<a&&(m=y(g=t[p]))):(u=v,(d+=1)<l&&(b=y(v=e[d]))),(E=(c=O)-(x=(S=u+c)-u))&&(h[f++]=E),O=C-((_=C+S)-(w=_-C))+(S-w),C=_;for(;p<a;)(E=(c=O)-(x=(S=(u=g)+c)-u))&&(h[f++]=E),O=C-((_=C+S)-(w=_-C))+(S-w),C=_,(p+=1)<a&&(g=t[p]);for(;d<l;)(E=(c=O)-(x=(S=(u=v)+c)-u))&&(h[f++]=E),O=C-((_=C+S)-(w=_-C))+(S-w),C=_,(d+=1)<l&&(v=e[d]);return O&&(h[f++]=O),C&&(h[f++]=C),f||(h[f++]=0),h.length=f,h}var At=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]};function It(t,e){var n=t.length;if(1===n){var r=Lt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Lt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var l=1;l<n;++l){Lt(t[l],e,s);var u=o[1];At(u,s[0],o),o[0]&&(i[a++]=o[0]);var c=s[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i}function Rt(t,e){var n,r,i,o,s,a=0|t.length,l=0|e.length;if(1==a&&1==l)return n=t[0],r=-e[0],(s=n-((i=n+r)-(o=i-n))+(r-o))?[s,i]:[i];var u,c,h=new Array(a+l),f=0,p=0,d=0,y=Math.abs,g=t[p],m=y(g),v=-e[d],b=y(v);m<b?(c=g,(p+=1)<a&&(m=y(g=t[p]))):(c=v,(d+=1)<l&&(b=y(v=-e[d]))),p<a&&m<b||l<=d?(u=g,(p+=1)<a&&(m=y(g=t[p]))):(u=v,(d+=1)<l&&(b=y(v=-e[d])));for(var _,w,S=u+c,x=S-u,E=c-x,O=E,C=S;p<a&&d<l;)m<b?(u=g,(p+=1)<a&&(m=y(g=t[p]))):(u=v,(d+=1)<l&&(b=y(v=-e[d]))),(E=(c=O)-(x=(S=u+c)-u))&&(h[f++]=E),O=C-((_=C+S)-(w=_-C))+(S-w),C=_;for(;p<a;)(E=(c=O)-(x=(S=(u=g)+c)-u))&&(h[f++]=E),O=C-((_=C+S)-(w=_-C))+(S-w),C=_,(p+=1)<a&&(g=t[p]);for(;d<l;)(E=(c=O)-(x=(S=(u=v)+c)-u))&&(h[f++]=E),O=C-((_=C+S)-(w=_-C))+(S-w),C=_,(d+=1)<l&&(v=-e[d]);return O&&(h[f++]=O),C&&(h[f++]=C),f||(h[f++]=0),h.length=f,h}var jt=Mt(function(o){function c(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function h(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",h(t.slice(0,e)),",",h(t.slice(e)),")"].join("")}function f(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",h(f(c(t,n))),",",1&n?"-":"",t[0][n],")"].join(""));return e}function s(t){for(var e=[],n=[],r=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),i=[],o=0;o<t;++o)0==(1&o)?e.push.apply(e,f(c(r,o))):n.push.apply(n,f(c(r,o))),i.push("m"+o);var s=h(e),a=h(n),l="orientation"+t+"Exact",u=["function ",l,"(",i.join(),"){var p=",s,",n=",a,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",u)(kt,Lt,It,Rt)}var l=s(3),w=s(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(0<i){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(0<=o)return s;r=-(i+o)}var a=33306690738754716e-32*r;return a<=s||s<=-a?s:l(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],l=e[1]-r[1],u=n[1]-r[1],c=t[2]-r[2],h=e[2]-r[2],f=n[2]-r[2],p=o*u,d=s*l,y=s*a,g=i*u,m=i*l,v=o*a,b=c*(p-d)+h*(y-g)+f*(m-v),_=7771561172376103e-31*((Math.abs(p)+Math.abs(d))*Math.abs(c)+(Math.abs(y)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(v))*Math.abs(f));return _<b||_<-b?b:w(t,e,n,r)}];!function(){for(;a.length<=5;)a.push(s(a.length));for(var t=[],e=["slow"],n=0;n<=5;++n)t.push("a"+n),e.push("o"+n);var r=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)r.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(r.join(""));var i=Function.apply(void 0,e);for(o.exports=i.apply(void 0,[function(t){var e=a[t.length];return(e=e||(a[t.length]=s(t.length))).apply(void 0,t)}].concat(a)),n=0;n<=5;++n)o.exports[n]=a[n]}()}),Dt=jt[3],Ft=Gt,Bt=Gt;function Gt(t,e){if(!(this instanceof Gt))return new Gt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Ut,0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function Ut(t,e){return t<e?-1:e<t?1:0}Gt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(a=e[o=s]),0<=n(a,i))break;e[t]=a,t=o}e[t]=i}},Ft.default=Bt;function zt(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],l=e[o][1],u=e[s][0],c=e[s][1];r<l!=r<c&&n<(u-a)*(r-l)/(c-l)+a&&(i=!i)}return i}var qt=jt[3],Vt=Wt,Ht=Wt;function Wt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],l=a.slice();for(o=0;o<t.length;o++)zt(t[o],a)||l.push(t[o]);var u=function(n){var t=n.length;if(t<3){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return 2===t&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:e}var i=new Array(t);for(r=0;r<t;++r)i[r]=r;i.sort(function(t,e){return n[t][0]-n[e][0]||n[t][1]-n[e][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<t;++r){for(var a=i[r],l=n[a],u=o.length;1<u&&Dt(n[o[u-2]],n[o[u-1]],l)<=0;)--u,o.pop();for(o.push(a),u=s.length;1<u&&0<=Dt(n[s[u-2]],n[s[u-1]],l);)--u,s.pop();s.push(a)}e=new Array(s.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)e[c++]=o[r];for(var f=s.length-2;0<f;--f)e[c++]=s[f];return e}(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=yt(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var l=i[a];o.remove(l),r=$t(l,r),s.push(r)}var u=yt(16);for(a=0;a<s.length;a++)u.insert(Kt(s[a]));for(var c=e*e,h=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,y=te(p,d);if(!(y<h)){var g=y/c;(l=Jt(o,f.prev.p,p,d,f.next.next.p,g,u))&&Math.min(te(l,p),te(l,d))<=g&&(s.push(f),s.push($t(l,f)),o.remove(l),u.remove(f),u.insert(Kt(f)),u.insert(Kt(f.next)))}}f=r;for(var m=[];m.push(f.p),(f=f.next)!==r;);return m.push(f.p),m}function Jt(t,e,n,r,i,o,s){for(var a=new Ft(null,Yt),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?ee(c,n,r):Xt(n,r,c);o<h||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=ee(p,e,n),y=ee(p,r,i);if(f.dist<d&&f.dist<y&&Qt(n,p,s)&&Qt(r,p,s))return p}l=(l=a.pop())&&l.node}return null}function Yt(t,e){return t.dist-e.dist}function Xt(t,e,n){if(Zt(t,n)||Zt(e,n))return 0;var r=ne(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=ne(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=ne(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=ne(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function Zt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Qt(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:l,maxX:u,maxY:c}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(s=e)&&i!==o&&0<qt(r,i,o)!=0<qt(r,i,s)&&0<qt(o,s,r)!=0<qt(o,s,i))return;return 1}function Kt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function $t(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,(n.prev=e).next.prev=n,e.next=n):(n.prev=n).next=n,n}function te(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ee(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);1<a?(r=n[0],i=n[1]):0<a&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function ne(t,e,n,r,i,o,s,a){var l,u,c,h,f=n-t,p=r-e,d=s-i,y=a-o,g=t-i,m=e-o,v=f*f+p*p,b=f*d+p*y,_=d*d+y*y,w=f*g+p*m,S=d*g+y*m,x=v*_-b*b,E=x,O=x;0==x?(u=0,E=1,h=S,O=_):(h=v*S-b*w,(u=b*S-_*w)<0?(u=0,h=S,O=_):E<u&&(u=E,h=S+b,O=_)),h<0?-w<(h=0)?u=0:v<-w?u=E:(u=-w,E=v):O<h&&(h=O,b-w<0?u=0:v<b-w?u=E:(u=b-w,E=v));var C=(1-(c=0===h?0:h/O))*i+c*s-((1-(l=0===u?0:u/E))*t+l*n),P=(1-c)*o+c*a-((1-l)*e+l*r);return C*C+P*P}function re(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(O(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=Vt(r,n);return 3<i.length?B([i]):null}function ie(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=X(t),o=Z(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&0==(a[0]<=i[0]&&a[1]<=i[1]&&a[2]>=i[0]&&a[3]>=i[1]))return!1;"Polygon"===s&&(o=[o]);for(var l=0,u=!1;l<o.length&&!u;l++)if(oe(i,o[l][0],r)){for(var c=!1,h=1;h<o[l].length&&!c;)oe(i,o[l][h],!r)&&(c=!0),h++;c||(u=!0)}return u}function oe(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!n;a>t[1]!=u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(r=!r)}return r}function se(t,e){var n=[];return k(e,function(e){M(t,function(t){ie(t,e)&&n.push(t)})}),H(n)}function ae(t,n){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var o=!1;return H(function(t){if(t.length<3)return[];t.sort(ue);for(var e,n,r,i,o,s,a=t.length-1,l=t[a].x,u=t[0].x,c=t[a].y,h=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var f,p=u-l,d=h-c,y=d<p?p:d,g=.5*(u+l),m=.5*(h+c),v=[new le({x:g-20*y,y:m-y,__sentinel:!0},{x:g,y:m+20*y,__sentinel:!0},{x:g+20*y,y:m-y,__sentinel:!0})],b=[],_=[];for(a=t.length;a--;){for(_.length=0,f=v.length;f--;)0<(p=t[a].x-v[f].x)&&p*p>v[f].r?(b.push(v[f]),v.splice(f,1)):p*p+(d=t[a].y-v[f].y)*d>v[f].r||(_.push(v[f].a,v[f].b,v[f].b,v[f].c,v[f].c,v[f].a),v.splice(f,1));for(ce(_),f=_.length;f;)n=_[--f],e=_[--f],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),1e-12<Math.abs(s)&&v.push(new le(e,n,r))}for(Array.prototype.push.apply(b,v),a=b.length;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map(function(t){var e={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return n?e.z=t.properties[n]:3===t.geometry.coordinates.length&&(o=!0,e.z=t.geometry.coordinates[2]),e})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],r=[t.c.x,t.c.y],i={};return o?(e.push(t.a.z),n.push(t.b.z),r.push(t.c.z)):i={a:t.a.z,b:t.b.z,c:t.c.z},B([[e,n,r,e]],i)}))}function le(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(l*u-s*c)/h,this.y=(o*c-a*u)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function ue(t,e){return e.x-t.x}function ce(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function he(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.units,i=X(t),o=X(e),s=v(o[1]-i[1]),a=v(o[0]-i[0]),l=v(i[1]),u=v(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(u);return d(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function fe(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return pe(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return pe(t)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return de(t);default:throw new Error("unknown GeoJSON type")}var e,n}function pe(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(r){var i={};return r&&Object.keys(r).forEach(function(t){var e=r[t];"object"==typeof e?null===e?i[t]=null:e.length?i[t]=e.map(function(t){return t}):i[t]=n(e):i[t]=e}),i}(e.properties),n.geometry=de(e.geometry),n}function de(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return de(t)}):e.coordinates=function e(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return e(t)})}(t.coordinates),e}function ye(t){return t}Vt.default=Ht;var ge=function(t){if(null==t)return ye;var o,s,a=t.scale[0],l=t.scale[1],u=t.translate[0],c=t.translate[1];return function(t,e){e||(o=s=0);var n=2,r=t.length,i=new Array(r);for(i[0]=(o+=t[0])*a+u,i[1]=(s+=t[1])*l+c;n<r;)i[n]=t[n],++n;return i}},me=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n};function ve(t,e){var o=ge(t.transform),s=t.arcs;function i(t,e){e.length&&e.pop();for(var n=s[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(o(n[r],r));t<0&&me(e,i)}function a(t){return o(t)}function l(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function n(t){for(var e=l(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(n)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=l(e.arcs);break;case"MultiLineString":n=e.arcs.map(l);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function be(f,i){var o={},p={},d={},s=[],a=-1;function t(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){o[t<0?~t:t]=1}),s.push(r)}}return i.forEach(function(t,e){var n,r=f.arcs[t<0?~t:t];r.length<3&&!r[1][0]&&!r[1][1]&&(n=i[++a],i[a]=t,i[e]=n)}),i.forEach(function(t){var e,n,r,i,o,s,a=(r=t,o=f.arcs[r<0?~r:r],s=o[0],f.transform?(i=[0,0],o.forEach(function(t){i[0]+=t[0],i[1]+=t[1]})):i=o[o.length-1],r<0?[i,s]:[s,i]),l=a[0],u=a[1];if(e=d[l])if(delete d[e.end],e.push(t),e.end=u,n=p[u]){delete p[n.start];var c=n===e?e:e.concat(n);p[c.start=e.start]=d[c.end=n.end]=c}else p[e.start]=d[e.end]=e;else if(e=p[u])if(delete p[e.start],e.unshift(t),e.start=l,n=d[l]){delete d[n.end];var h=n===e?e:n.concat(e);p[h.start=n.start]=d[h.end=e.end]=h}else p[e.start]=d[e.end]=e;else p[(e=[t]).start=l]=d[e.end=u]=e}),t(d,p),t(p,d),i.forEach(function(t){o[t<0?~t:t]||s.push([t])}),s}function _e(o,s,a,t,l,e){3===arguments.length&&(t=e=Array,l=null);for(var u=new t(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),c=new e(o),h=o-1,n=0;n<o;++n)u[n]=l;return{set:function(t,e){for(var n=s(t)&h,r=u[n],i=0;r!=l;){if(a(r,t))return c[n]=e;if(++i>=o)throw new Error("full hashmap");r=u[n=n+1&h]}return u[n]=t,c[n]=e},maybeSet:function(t,e){for(var n=s(t)&h,r=u[n],i=0;r!=l;){if(a(r,t))return c[n];if(++i>=o)throw new Error("full hashmap");r=u[n=n+1&h]}return u[n]=t,c[n]=e},get:function(t,e){for(var n=s(t)&h,r=u[n],i=0;r!=l;){if(a(r,t))return c[n];if(++i>=o)break;r=u[n=n+1&h]}return e},keys:function(){for(var t=[],e=0,n=u.length;e<n;++e){var r=u[e];r!=l&&t.push(r)}return t}}}function we(t,e){return t[0]===e[0]&&t[1]===e[1]}function Se(t){Oe[0]=t[0],Oe[1]=t[1];var e=Ce[0]^Ce[1];return 2147483647&(e<<5^e>>7^Ce[2]^Ce[3])}function xe(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,l=function(){for(var t=_e(1.4*o.length,w,S,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),u=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)u[e]=c[e]=h[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],y=d[0],g=d[1];for(r=l[y],i=l[++y],++p,f[r]=1;++y<=g;)_(e,r,r=i,i=l[y]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)u[e]=-1;for(e=0,n=a.length;e<n;++e){var m=a[e],v=m[0]+1,b=m[1];for(_(e,l[b-1],r=l[v-1],i=l[v]);++v<=b;)_(e,r,r=i,i=l[v])}function _(t,e,n,r){if(u[n]!==t){u[n]=t;var i=c[n];if(0<=i){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else c[n]=e,h[n]=r}}function w(t){return Se(o[t])}function S(t,e){return we(o[t],o[e])}u=c=h=null;var x,E=function(i,o,s,t,a){3===arguments.length&&(t=Array,a=null);for(var l=new t(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),u=i-1,e=0;e<i;++e)l[e]=a;return{add:function(t){for(var e=o(t)&u,n=l[e],r=0;n!=a;){if(s(n,t))return!0;if(++r>=i)throw new Error("full hashset");n=l[e=e+1&u]}return l[e]=t,!0},has:function(t){for(var e=o(t)&u,n=l[e],r=0;n!=a;){if(s(n,t))return!0;if(++r>=i)break;n=l[e=e+1&u]}return!1},values:function(){for(var t=[],e=0,n=l.length;e<n;++e){var r=l[e];r!=a&&t.push(r)}return t}}}(1.4*p,Se,we);for(e=0,n=o.length;e<n;++e)f[x=l[e]]&&E.add(o[x]);return E}var Ee=new ArrayBuffer(16),Oe=new ArrayBuffer(Ee),Ce=new ArrayBuffer(Ee);function Pe(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Te(t){var e,n=Me(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Me(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Me)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Le(t,y){var g=function(t){var r=1/0,i=1/0,o=-1/0,s=-1/0;function e(t){null!=t&&n.hasOwnProperty(t.type)&&n[t.type](t)}var n={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(u)}};function a(t){var e=t[0],n=t[1];e<r&&(r=e),o<e&&(o=e),n<i&&(i=n),s<n&&(s=n)}function l(t){t.forEach(a)}function u(t){t.forEach(l)}for(var c in t)e(t[c]);return r<=o&&i<=s?[r,i,o,s]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Te)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===n.type?Te:Me)(n);return r}(t)),e=0<y&&g&&function(t){var h=g[0],f=g[1],e=g[2],n=g[3],p=e-h?(y-1)/(e-h):1,d=n-f?(y-1)/(n-f):1;function r(t){return[Math.round((t[0]-h)*p),Math.round((t[1]-f)*d)]}function i(t,e){for(var n,r,i,o,s,a=-1,l=0,u=t.length,c=new Array(u);++a<u;)n=t[a],o=Math.round((n[0]-h)*p),s=Math.round((n[1]-f)*d),o===r&&s===i||(c[l++]=[r=o,i=s]);for(c.length=l;l<e;)l=c.push([c[0][0],c[0][1]]);return c}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function l(t){null!=t&&u.hasOwnProperty(t.type)&&u[t.type](t)}var u={GeometryCollection:function(t){t.geometries.forEach(l)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var c in t)l(t[c]);return{scale:[1/p,1/d],translate:[h,f]}}(t),n=function(t){var e,n,r,i,c=t.coordinates,o=t.lines,s=t.rings,a=o.length+s.length;for(delete t.lines,delete t.rings,r=0,i=o.length;r<i;++r)for(e=o[r];e=e.next;)++a;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++a;var u=_e(2*a*1.4,Se,we),h=t.arcs=[];for(r=0,i=o.length;r<i;++r)for(e=o[r];l(e),e=e.next;);for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)for(;l(n),n=n.next;);else f(n);function l(t){var e,n,r,i,o,s,a,l;if(r=u.get(e=c[t[0]]))for(a=0,l=r.length;a<l;++a)if(p(i=r[a],t))return t[0]=i[0],void(t[1]=i[1]);if(o=u.get(n=c[t[1]]))for(a=0,l=o.length;a<l;++a)if(d(s=o[a],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):u.set(e,[t]),o?o.push(t):u.set(n,[t]),h.push(t)}function f(t){var e,n,r,i,o;if(n=u.get(c[t[0]]))for(i=0,o=n.length;i<o;++i){if(y(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(g(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=u.get(e=c[t[0]+m(t)]))for(i=0,o=n.length;i<o;++i){if(y(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(g(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):u.set(e,[t]),h.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i==r-e[1]){for(;n<=i;++n,++r)if(!we(c[n],c[r]))return;return 1}}function d(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i==r-o){for(;n<=i;++n,--o)if(!we(c[n],c[o]))return;return 1}}function y(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i==e[1]-r){for(var o=m(t),s=m(e),a=0;a<i;++a)if(!we(c[n+(a+o)%i],c[r+(a+s)%i]))return;return 1}}function g(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],s=i-n;if(s==o-r){for(var a=m(t),l=s-m(e),u=0;u<s;++u)if(!we(c[n+(u+a)%s],c[o-(u+l)%s]))return;return 1}}function m(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var s=c[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}return t}(function(t){var e,n,r,i,o,s,a,l=xe(t),u=t.coordinates,c=t.lines,h=t.rings;for(n=0,r=c.length;n<r;++n)for(var f=c[n],p=f[0],d=f[1];++p<d;)l.has(u[p])&&(e={0:p,1:f[1]},f[1]=p,f=f.next=e);for(n=0,r=h.length;n<r;++n)for(var y=h[n],g=y[0],m=g,v=y[1],b=l.has(u[g]);++m<v;)l.has(u[m])&&(b?(e={0:m,1:y[1]},y[1]=m,y=y.next=e):(a=(s=v)-m,Pe(i=u,o=g,s),Pe(i,o,o+a),Pe(i,o+a,s),u[v]=u[g],b=!0,m=g));return t}(function(t){var i=-1,o=[],s=[],a=[];function e(t){t&&n.hasOwnProperty(t.type)&&n[t.type](t)}var n={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function r(t){for(var e=0,n=t.length;e<n;++e)a[++i]=t[e];var r={0:i-n+1,1:i};return o.push(r),r}function l(t){for(var e=0,n=t.length;e<n;++e)a[++i]=t[e];var r={0:i-n+1,1:i};return s.push(r),r}function u(t){return t.map(l)}for(var c in t)e(t[c]);return{type:"Topology",coordinates:a,lines:o,rings:s,objects:t}}(t))),r=n.coordinates,i=_e(1.4*n.arcs.length,Ne,ke);function o(t){t&&s.hasOwnProperty(t.type)&&s[t.type](t)}t=n.objects,n.bbox=g,n.arcs=n.arcs.map(function(t,e){return i.set(t,e),r.slice(t[0],t[1]+1)}),delete n.coordinates,r=null;var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(a)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){var e=[];do{var n=i.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(a)}for(var u in t)o(t[u]);return e&&(n.transform=e,n.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,l=o.length,u=o[0],c=u[0],h=u[1];++s<l;)r=(u=o[s])[0],i=u[1],r===c&&i===h||(o[a++]=[r-c,i-h],c=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(n.arcs)),n}function Ne(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function ke(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Ae(t){return t[0].toString()+","+t[1].toString()}function Ie(n,t){if(!J(t=t||{}))throw new Error("options is invalid");var e=t.mutate;if("FeatureCollection"!==rt(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");!1!==e&&void 0!==e||(n=fe(n));var r=function(){var e={};I(n,function(t){e[t.geometry.type]=!0});var t=Object.keys(e);return 1===t.length?t[0]:null}();if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==rt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=fe(t));var r=[],i=G(t,function(l,t){return function(t){var e,n=l.geometry.coordinates,r=t.geometry.coordinates,i=Ae(n[0]),o=Ae(n[n.length-1]),s=Ae(r[0]),a=Ae(r[r.length-1]);if(i===a)e=r.concat(n.slice(1));else if(s===o)e=n.concat(r.slice(1));else if(i===s)e=n.slice(1).reverse().concat(r);else{if(o!==a)return null;e=n.concat(r.reverse().slice(1))}return V(e)}(t)||(r.push(l),t)});return i&&r.push(i),r.length?1===r.length?r[0]:b(r.map(function(t){return t.coordinates})):null}(n,t);case"Polygon":return function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==rt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=fe(t));var r=[];I(t,function(t){r.push(t.geometry)});var i=Le({geoms:u(r).geometry});return function(t){return ve(t,function(a,t){var l={},n=[],r=[];function i(e){e.forEach(function(t){t.forEach(function(t){(l[t=t<0?~t:t]||(l[t]=[])).push(e)})}),n.push(e)}function u(t){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(ve(a,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}),n.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,r.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){l[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),n.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:r.map(function(t){var e,n=[];if(t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){l[t<0?~t:t].length<2&&n.push(t)})})}),1<(e=(n=be(a,n)).length))for(var r,i,o=1,s=u(n[0]);o<e;++o)(r=u(n[o]))>s&&(i=n[0],n[0]=n[o],n[o]=i,s=r);return n})}}.apply(this,arguments))}(i,i.objects.geoms.geometries)}(n,t);default:throw new Error(r+" is not supported")}}function Re(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=rt(t),i=[];switch(r){case"LineString":i=je(t);break;case"MultiLineString":case"Polygon":Z(t).forEach(function(t){i.push(je(t))});break;case"MultiPolygon":Z(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(je(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};Z(t).forEach(function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):z({type:r,coordinates:i},t.properties,t.bbox,t.id)}function je(t){var e,n,r,i,o,s=Z(t);if(2===s.length&&(e=s[0],n=s[1],e[0]!==n[0]||e[1]!==n[1]))return s;var a,l,u,c,h,f,p,d,y,g,m,v=[],b=s.length-1;v.push(s[0]);for(var _=1;_<b;_++)r=s[_-1],i=s[_],a=r,l=o=s[_+1],0,c=(u=i)[0],h=u[1],f=a[0],p=a[1],d=l[0],y=l[1],0==(c-f)*(m=y-p)-(h-p)*(g=d-f)&&(Math.abs(g)>=Math.abs(m)?0<g?f<=c&&c<=d:d<=c&&c<=f:0<m?p<=h&&h<=y:y<=h&&h<=p)||v.push(i);return v.push(o),v}function De(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);1<a?(r=n.x,i=n.y):0<a&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function Fe(t,e,n){if(t.length<=2)return t;var r,i,o,s,a=void 0!==e?e*e:1;return r=t=n?t:function(t,e){for(var n,r,i,o=t[0],s=[o],a=1,l=t.length;a<l;a++)e<(r=(n=t[a]).x-o.x)*r+(i=n.y-o.y)*i&&(s.push(n),o=n);return o!==n&&s.push(n),s}(t,a),i=a,o=r.length-1,s=[r[0]],function t(e,n,r,i,o){for(var s,a=i,l=n+1;l<r;l++){var u=De(e[l],e[n],e[r]);a<u&&(s=l,a=u)}i<a&&(1<s-n&&t(e,n,s,i,o),o.push(e[s]),1<r-s&&t(e,s,r,i,o))}(r,0,o,i,s),s.push(r[o]),s}function Be(t,e,n){return Fe(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function Ge(t,i,o){return t.map(function(t){var e,n=t.map(function(t){return{x:t[0],y:t[1]}});if(n.length<4)throw new Error("invalid polygon");for(var r=Fe(n,i,o).map(function(t){return[t.x,t.y]});(e=r).length<3||3===e.length&&e[2][0]===e[0][0]&&e[2][1]===e[0][1];)r=Fe(n,i-=.01*i,o).map(function(t){return[t.x,t.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function Ue(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}function ze(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!W(n))throw new Error("resolution must be an number");if(!W(r))throw new Error("sharpness must be an number");for(var i=[],o=new Ue({points:et(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var a=o.pos(s);Math.floor(s/100)%2==0&&i.push([a.x,a.y])}return V(i,t.properties)}function qe(t){S(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[e,n];return B([[o,[r,n],[r,i],[e,i],o]])}function Ve(t){return qe(Y(t))}function He(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=he(t.slice(0,2),[r,n]);if(he(t.slice(0,2),[e,i])<=o){var s=(n+i)/2;return[e,s-(r-e)/2,r,s+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function We(t,e,n,r){if(!J(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties,s=X(t),a=v(s[0]),l=v(s[1]),u=v(n),c=y(e,i),h=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(u));return q([g(a+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(h))),g(h)],o)}function Je(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var o=[],s=0;s<r;s++)o.push(We(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),B([o],i)}function Ye(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return(Ye(e,t)+180)%360;var r=X(t),i=X(e),o=v(r[0]),s=v(i[0]),a=v(r[1]),l=v(i[1]),u=Math.sin(s-o)*Math.cos(l),c=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s-o);return g(Math.atan2(u,c))}function Xe(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=Y(t);return q([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function Ze(t,e){var n=0,r=0,i=0;return O(t,function(t){n+=t[0],r+=t[1],i++},!0),q([n/i,r/i],e)}function Qe(e){var n=[];return"FeatureCollection"===e.type?M(e,function(e){O(e,function(t){n.push(q(t,e.properties))})}):O(e,function(t){n.push(q(t,e.properties))}),H(n)}Ue.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);t<Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))&&(e.push(r),n=i)}return e},Ue.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ue.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(1<=n)return this.points[this.length-1];var r,i,o,s,a,l,u=Math.floor((this.points.length-1)*n),c=(this.length-1)*n-u;return r=this.points[u],i=this.controls[u][1],o=this.controls[u+1][0],l=[(a=c*c)*c,3*a*(1-c),3*c*(1-c)*(1-c),(1-c)*(1-c)*(1-c)],{x:(s=this.points[u+1]).x*l[0]+o.x*l[1]+i.x*l[2]+r.x*l[3],y:s.y*l[0]+o.y*l[1]+i.y*l[2]+r.y*l[3],z:s.z*l[0]+o.z*l[1]+i.z*l[2]+r.z*l[3]}};var Ke=tn,$e=tn;function tn(t,e,n){n=n||2;var r,i,o,s,a,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=en(t,0,h,n,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=en(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(fn(s));for(a.sort(un),i=0;i<a.length;i++)cn(a[i],n),n=nn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<r&&(r=a),(l=t[d+1])<i&&(i=l),o<a&&(o=a),s<l&&(s=l);u=0!==(u=Math.max(o-r,s-i))?1/u:0}return rn(f,p,n,r,i,u),p}function en(t,e,n,r,i){var o,s;if(i===0<Sn(t,e,n,r))for(o=e;o<n;o+=r)s=bn(o,t[o],t[o+1],s);else for(o=n-r;e<=o;o-=r)s=bn(o,t[o],t[o+1],s);return s&&yn(s,s.next)&&(_n(s),s=s.next),s}function nn(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!yn(r,r.next)&&0!==dn(r.prev,r,r.next))r=r.next;else{if(_n(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function rn(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){for(var i=t;null===i.z&&(i.z=hn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,u=1;do{for(n=t,o=t=null,s=0;n;){for(s++,r=n,e=a=0;e<u&&(a++,r=r.nextZ);e++);for(l=u;0<a||0<l&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(n=(i=n).nextZ,a--):(r=(i=r).nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(1<s)}(i)}(t,r,i,o);for(var a,l,u=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?sn(t,r,i,o):on(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),_n(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?rn(t=an(t,e,n),e,n,r,i,o,2):2===s&&ln(t,e,n,r,i,o):rn(nn(t),e,n,r,i,o,1);break}}}function on(t){var e=t.prev,n=t,r=t.next;if(!(0<=dn(e,n,r))){for(var i=t.next.next;i!==t.prev;){if(pn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=dn(i.prev,i,i.next))return;i=i.next}return 1}}function sn(t,e,n,r){var i=t.prev,o=t,s=t.next;if(!(0<=dn(i,o,s))){for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,u=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=hn(a,l,e,n,r),f=hn(u,c,e,n,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&pn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=dn(p.prev,p,p.next))return;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&pn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=dn(p.prev,p,p.next))return;p=p.prevZ}return 1}}function an(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!yn(i,o)&&gn(i,r,r.next,o)&&mn(i,o)&&mn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),_n(r),_n(r.next),r=t=o),r=r.next}while(r!==t);return r}function ln(t,e,n,r,i,o){var s,a,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(a=u,(s=l).next.i!==a.i&&s.prev.i!==a.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&gn(n,n.next,t,e))return 1;n=n.next}while(n!==t)}(s,a)&&mn(s,a)&&mn(a,s)&&function(t){for(var e=t,n=!1,r=(t.x+a.x)/2,i=(t.y+a.y)/2;e.y>i!=e.next.y>i&&e.next.y!==e.y&&r<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(n=!n),(e=e.next)!==t;);return n}(s))){var c=vn(l,u);return l=nn(l,l.next),c=nn(c,c.next),rn(l,e,n,r,i,o),void rn(c,e,n,r,i,o)}u=u.next}l=l.next}while(l!==t)}function un(t,e){return t.x-e.x}function cn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&s<a){if((s=a)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&pn(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&mn(r,t)&&(n=r,f=l),r=r.next;return n}(t,e)){var n=vn(e,t);nn(n,n.next)}}function hn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function fn(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}function pn(t,e,n,r,i,o,s,a){return 0<=(i-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(n-s)*(e-a)&&0<=(n-s)*(o-a)-(i-s)*(r-a)}function dn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function yn(t,e){return t.x===e.x&&t.y===e.y}function gn(t,e,n,r){return yn(t,e)&&yn(n,r)||yn(t,r)&&yn(n,e)||0<dn(t,e,n)!=0<dn(t,e,r)&&0<dn(n,r,t)!=0<dn(n,r,e)}function mn(t,e){return dn(t.prev,t,t.next)<0?0<=dn(t,e,t.next)&&0<=dn(t,t.prev,e):dn(t,e,t.prev)<0||dn(t,t.next,e)<0}function vn(t,e){var n=new wn(t.i,t.x,t.y),r=new wn(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function bn(t,e,n,r){var i=new wn(t,e,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function _n(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function xn(t){var r=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),i=Ke(r.vertices,r.holes,2),e=[],o=[];i.forEach(function(t,e){var n=i[e];o.push([r.vertices[2*n],r.vertices[2*n+1]])});for(var n=0;n<o.length;n+=3){var s=o.slice(n,n+3);s.push(o[n]),e.push(B([s]))}return e}function En(r,t){if(!r)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var i,o=1/0;return M(t,function(t,e){var n=he(r,t);n<o&&((i=fe(t)).properties.featureIndex=e,i.properties.distanceToPoint=n,o=n)}),i}function On(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Cn(t,e){return t<e?-1:e<t?1:0}function Pn(t,e){if(!(this instanceof Pn))return new Pn(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Tn(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Mn(t,e){Ln(t,0,t.children.length,e,t)}function Ln(t,e,n,r,i){(i=i||Fn(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Nn(i,t.leaf?r(o):o);return i}function Nn(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function kn(t,e){return t.minX-e.minX}function An(t,e){return t.minY-e.minY}function In(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Rn(t){return t.maxX-t.minX+(t.maxY-t.minY)}function jn(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Dn(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Fn(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bn(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(a=t,l=o=e+Math.ceil((n-e)/r/2)*r,u=i,function t(e,n,r,i,o){for(;r<i;){if(600<i-r){var s=i-r+1,a=n-r+1,l=Math.log(s),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(s-u)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*u/s+c)),Math.min(i,Math.floor(n+(s-a)*u/s+c)),o)}var h=e[n],f=r,p=i;for(On(e,r,n),0<o(e[i],h)&&On(e,r,i);f<p;){for(On(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;0<o(e[p],h);)p--}0===o(e[r],h)?On(e,r,p):On(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(a,l,e||0,n||a.length-1,u||Cn),s.push(e,o,o,n));var a,l,u}function Gn(t){var e=Pn(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Un(e)).bbox=e}else t.bbox=t.bbox?t.bbox:zn(t);return Pn.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(t){var e=Un(t);e.bbox=t,n.push(e)}):M(t,function(t){t.bbox=t.bbox?t.bbox:zn(t),n.push(t)}),Pn.prototype.load.call(this,n)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Un(e)).bbox=e}return Pn.prototype.remove.call(this,t)},e.clear=function(){return Pn.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Pn.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Pn.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Pn.prototype.all.call(this)}},e.toJSON=function(){return Pn.prototype.toJSON.call(this)},e.fromJSON=function(t){return Pn.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:zn(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Un(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function zn(t){var e=[1/0,1/0,-1/0,-1/0];return O(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function qn(t){if(!t)throw new Error("geojson is required");var e=[];return I(t,function(t){!function(e,n){var t=[],r=e.geometry;switch(r.type){case"Polygon":t=Z(r);break;case"LineString":t=[Z(r)]}t.forEach(function(t){var a,l;a=e.properties,l=[],t.reduce(function(t,e){var n,r,i,o,s=V([t,e],a);return s.bbox=(n=t[0],r=t[1],[n<(i=e[0])?n:i,r<(o=e[1])?r:o,i<n?n:i,o<r?r:o]),l.push(s),e}),l.forEach(function(t){t.id=n.length,n.push(t)})})}(t,e)}),H(e)}function Vn(t,e){var i={},o=[];if("LineString"===t.type&&(t=z(t)),"LineString"===e.type&&(e=z(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=Hn(t,e);return n&&o.push(n),H(o)}var s=Gn();return s.load(qn(e)),M(qn(t),function(r){M(s.search(r),function(t){var e=Hn(r,t);if(e){var n=Z(e).join(",");i[n]||(i[n]=!0,o.push(e))}})}),H(o)}function Hn(t,e){var n=Z(t),r=Z(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],l=r[0][0],u=r[0][1],c=r[1][0],h=r[1][1],f=(h-u)*(s-i)-(c-l)*(a-o);if(0==f)return null;var p=((c-l)*(o-u)-(h-u)*(i-l))/f,d=((s-i)*(o-u)-(a-o)*(i-l))/f;return 0<=p&&p<=1&&0<=d&&d<=1?q([i+p*(s-i),o+p*(a-o)]):null}function Wn(t,f,p){if(!J(p=p||{}))throw new Error("options is invalid");var e=t.geometry?t.geometry.type:t.type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var d=q([1/0,1/0],{dist:1/0}),y=0;return I(t,function(t){for(var e=Z(t),n=0;n<e.length-1;n++){var r=q(e[n]);r.properties.dist=he(f,r,p);var i=q(e[n+1]);i.properties.dist=he(f,i,p);var o=he(r,i,p),s=Math.max(r.properties.dist,i.properties.dist),a=Ye(r,i),l=We(f,s,a+90,p),u=We(f,s,a-90,p),c=Vn(V([l.geometry.coordinates,u.geometry.coordinates]),V([r.geometry.coordinates,i.geometry.coordinates])),h=null;0<c.features.length&&((h=c.features[0]).properties.dist=he(f,h,p),h.properties.location=y+he(r,h,p)),r.properties.dist<d.properties.dist&&((d=r).properties.index=n,d.properties.location=y),i.properties.dist<d.properties.dist&&((d=i).properties.index=n+1,d.properties.location=y+o),h&&h.properties.dist<d.properties.dist&&((d=h).properties.index=n),y+=o}}),d}function Jn(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(r=i?Yn(X(e),X(t)):Yn(X(t),X(e)))?-(360-r):r}function Yn(t,e){var n=v(t[1]),r=v(e[1]),i=v(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(g(Math.atan2(i,o))+360)%360}function Xn(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=X(t),o=X(e);return o[0]+=180<o[0]-i[0]?-360:180<i[0]-o[0]?360:0,m(function(t,e,n){var r=n=void 0===n?f:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),u=1e-11<Math.abs(l)?s/l:Math.cos(i);return Math.sqrt(s*s+u*u*a*a)*r}(i,o),"meters",r)}function Zn(t,e){return Kn(t,"mercator",e)}function Qn(t,e){return Kn(t,"wgs84",e)}function Kn(t,n,e){if(!J(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&W(t[0])?t=("mercator"===n?$n:tr)(t):(!0!==r&&(t=fe(t)),O(t,function(t){var e=("mercator"===n?$n:tr)(t);t[0]=e[0],t[1]=e[1]})),t}function $n(t){var e,n=Math.PI/180,r=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:0<e?1:0))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function tr(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}tn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Sn(t,0,o,n));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;s-=Math.abs(Sn(t,u,c,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+d]-t[1+f]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},tn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},Ke.default=$e,Pn.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Dn(t,e))return n;for(var i,o,s,a,l=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Dn(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):jn(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Dn(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Dn(t,s=e.leaf?n(o):o)){if(e.leaf||jn(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Fn([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),s.leaf&&-1!==(i=Tn(t,s.children,e)))return s.children.splice(i,1),l.push(s),this._condense(l),this;o||s.leaf||!jn(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:kn,compareMinY:An,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Mn(i=Fn(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Fn([])).leaf=!1,i.height=r;var a,l,u,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(Bn(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(Bn(t,a,u=Math.min(a+f-1,n),h,this.compareMinY),l=a;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return Mn(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,l,u,c,h,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=In(s=e.children[i]),f=t,p=s,(u=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<h?(h=u,c=l<c?l:c,a=s):u===h&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Nn(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Fn(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Mn(n,this.toBBox),Mn(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Fn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Mn(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,l,u,c,h,f,p,d,y,g;for(l=u=1/0,r=e;r<=n-e;r++)h=i=Ln(t,0,r,this.toBBox),f=o=Ln(t,r,n,this.toBBox),p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),y=Math.min(h.maxX,f.maxX),g=Math.min(h.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,g-d),a=In(i)+In(o),s<l?(l=s,c=r,u=a<u?a:u):s===l&&a<u&&(u=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:kn,i=t.leaf?this.compareMinY:An;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Ln(t,0,e,s),l=Ln(t,n-e,n,s),u=Rn(a)+Rn(l);for(i=e;i<n-e;i++)o=t.children[i],Nn(a,t.leaf?s(o):o),u+=Rn(a);for(i=n-e-1;e<=i;i--)o=t.children[i],Nn(l,t.leaf?s(o):o),u+=Rn(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)Nn(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Mn(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var er=Object.freeze({toMercator:Zn,toWgs84:Qn});function nr(t,e,i){if(!J(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=q(t):"Point"===t.type?t=z(t):$(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=V(e):"LineString"===e.type?e=z(e):$(e,"LineString","line");var o=1/0,s=t.geometry.coordinates;return j(e,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=function(t,e,n,r){var i=r.mercator,o=(!0!==i?he:rr)(e,t,r),s=p((!0!==i?Ye:Jn)(e,t)),a=p((!0!==i?Ye:Jn)(e,n)),l=Math.abs(s-a);if(90<l)return o;var u=(a+180)%360,c=p((!0!==i?Ye:Jn)(n,t)),h=Math.abs(c-u);return 180<h&&(h=Math.abs(h-360)),90<h?(!0!==i?he:rr)(t,n,r):!0!==i?o*Math.sin(v(l)):function(t,e,n,r){var i=0;(180<=Math.abs(t[0])||180<=Math.abs(e[0])||180<=Math.abs(n[0]))&&(i=0<t[0]||0<e[0]||0<n[0]?-180:180);var o,s,a,l,u,c=q(n),h=Zn([t[0]+i,t[1]]),f=Zn([e[0]+i,e[1]]),p=Zn([n[0]+i,n[1]]),d=Qn((o=h[0],s=h[1],a=f[0]-o,l=f[1]-s,u=((p[0]-o)*a+(p[1]-s)*l)/(a*a+l*l),[o+u*a,s+u*l]));return 0!==i&&(d[0]-=i),Xn(c,d,r)}(e,n,t,r)}(s,e,n,i);r<o&&(o=r)}),o}function rr(t,e,n){var r=n.units,i=0;function o(t){return t*t}180<=Math.abs(t[0])&&(i=0<t[0]?-180:180),180<=Math.abs(e[0])&&(i=0<e[0]?-180:180);var s=Zn([t[0]+i,t[1]]),a=Zn([e[0]+i,e[1]]),l=o(s[0]-a[0])+o(s[1]-a[1]);return m(Math.sqrt(l),"meters",r)}function ir(t){for(var e,n="FeatureCollection"===(e=t).type?e:"Feature"===e.type?H([e]):H([z(e)]),r=Xe(n),i=!1,o=0;!i&&o<n.features.length;){var s,a=n.features[o].geometry,l=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(i=!0);else if("MultiPoint"===a.type){var u=!1;for(s=0;!u&&s<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[s][0]&&r.geometry.coordinates[1]===a.coordinates[s][1]&&(u=i=!0),s++}else if("LineString"===a.type)for(s=0;!l&&s<a.coordinates.length-1;)or(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[s][0],a.coordinates[s][1],a.coordinates[s+1][0],a.coordinates[s+1][1])&&(i=l=!0),s++;else if("MultiLineString"===a.type)for(var c=0;c<a.coordinates.length;){l=!1,s=0;for(var h=a.coordinates[c];!l&&s<h.length-1;)or(r.geometry.coordinates[0],r.geometry.coordinates[1],h[s][0],h[s][1],h[s+1][0],h[s+1][1])&&(i=l=!0),s++;c++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||ie(r,a)&&(i=!0);o++}if(i)return r;var f=H([]);for(o=0;o<n.features.length;o++)f.features=f.features.concat(Qe(n.features[o]).features);return q(En(r,f).geometry.coordinates)}function or(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function sr(t){return A(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return lr(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=lr(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}var ar=6378137;function lr(t){var e=0;if(t&&0<t.length){e+=Math.abs(ur(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ur(t[n]))}return e}function ur(t){var e,n,r,i,o,s,a=0,l=t.length;if(2<l){for(s=0;s<l;s++)o=s===l-2?(r=l-2,i=l-1,0):s===l-1?(r=l-1,i=0,1):(i=(r=s)+1,s+2),e=t[r],n=t[i],a+=(cr(t[o][0])-cr(e[0]))*Math.sin(cr(n[1]));a=a*ar*ar/2}return a}function cr(t){return t*Math.PI/180}function hr(t,r){if(!J(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return D(t,function(t,e){var n=e.geometry.coordinates;return t+he(n[0],n[1],r)},0)}function fr(t,e,n,r){if(!J(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,l,u=0,c=0;c<i.length&&!(u<=e&&c===i.length-1);c++){if(e<u&&0===o.length){if(!(s=e-u))return o.push(i[c]),V(o);a=Ye(i[c],i[c-1])-180,l=We(i[c],s,a,r),o.push(l.geometry.coordinates)}if(n<=u)return(s=n-u)?(a=Ye(i[c],i[c-1])-180,l=We(i[c],s,a,r),o.push(l.geometry.coordinates)):o.push(i[c]),V(o);if(e<=u&&o.push(i[c]),c===i.length-1)return V(o);u+=he(i[c],i[c+1],r)}return V(i[i.length-1])}function pr(t,e,n){var r,i,o,s,a,l,u,c,h,f,p,d,y=(n=n||{}).ignoreEndVertices;if(!J(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var g=X(t),m=Z(e),v=0;v<m.length-1;v++){var b=!1;if(y&&(0===v&&(b="start"),v===m.length-2&&(b="end"),0===v&&v+1===m.length-1&&(b="both")),r=m[v],i=m[v+1],s=b,0,a=(o=g)[0],l=o[1],u=r[0],c=r[1],h=i[0],f=i[1],p=h-u,d=f-c,0==(o[0]-u)*d-(o[1]-c)*p&&(s?"start"===s?Math.abs(p)>=Math.abs(d)?0<p?u<a&&a<=h:h<=a&&a<u:0<d?c<l&&l<=f:f<=l&&l<c:"end"===s?Math.abs(p)>=Math.abs(d)?0<p?u<=a&&a<h:h<a&&a<=u:0<d?c<=l&&l<f:f<l&&l<=c:"both"===s&&(Math.abs(p)>=Math.abs(d)?0<p?u<a&&a<h:h<a&&a<u:0<d?c<l&&l<f:f<l&&l<c):Math.abs(p)>=Math.abs(d)?0<p?u<=a&&a<=h:h<=a&&a<=u:0<d?c<=l&&l<=f:f<=l&&l<=c))return!0}return!1}function dr(t,e){var n=rt(t),r=rt(e),i=et(t),o=et(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(gr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return pr(i,o,{ignoreEndVertices:!0});case"Polygon":return ie(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)gr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!pr(t.coordinates[r],e))return!1;n=n||pr(t.coordinates[r],e,{ignoreEndVertices:!0})}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=ie(t.coordinates[1],e);if(!i){n=!1;break}i=ie(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!pr(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n,r;if(!yr(Y(e),Y(t)))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ie(t.coordinates[o],e))return!1;if(!(i=i||ie(t.coordinates[o],e,{ignoreBoundary:!0})))i=ie((n=t.coordinates[o],r=t.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2]),e,{ignoreBoundary:!0})}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=Y(t);if(!yr(Y(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ie(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function yr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function gr(t,e){return t[0]===e[0]&&t[1]===e[1]}function mr(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.mask,i=n.properties,o=[];if(null==e)throw new Error("cellSide is required");if(!W(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(rt(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],a=t[1],l=t[2],u=t[3],c=e/he([s,a],[l,a],n)*(l-s),h=e/he([s,a],[s,u],n)*(u-a),f=l-s,p=u-a,d=Math.floor(f/c),y=(p-Math.floor(p/h)*h)/2,g=s+(f-d*c)/2;g<=l;){for(var m=a+y;m<=u;){var v=q([g,m],i);r&&!dr(v,r)||o.push(v),m+=h}g+=c}return H(o)}function vr(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return O(t,function(t){!function(t,e){t.length>r&&t.splice(r,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,o)}),t}function br(t,e){if(t&&e&&t.length===e.length){for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!br(t[n],e[n]))return}else if(t[n]!==e[n])return;return 1}}function _r(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];Or(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=function(t,f,e){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===e&&(e=1);var p=t.geometry.coordinates,d=[],y={};if(e){for(var n=[],r=0;r<p.length;r++)for(var i=0;i<p[r].length-1;i++)n.push(h(r,i));var o=yt();o.load(n)}for(var s=0;s<p.length;s++)for(var a=0;a<p[s].length-1;a++)if(e)o.search(h(s,a)).forEach(function(t){var e=t.ring,n=t.edge;c(s,a,e,n)});else for(var l=0;l<p.length;l++)for(var u=0;u<p[l].length-1;u++)c(s,a,l,u);return f||(d={type:"Feature",geometry:{type:"MultiPoint",coordinates:d}}),d;function c(t,e,n,r){var i,o,s=p[t][e],a=p[t][e+1],l=p[n][r],u=p[n][r+1],c=function(t,e,n,r){if(br(t,n)||br(t,r)||br(e,n)||br(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],l=n[0],u=n[1],c=r[0],h=r[1],f=(i-s)*(u-h)-(o-a)*(l-c);return 0==f?null:[((i*a-o*s)*(l-c)-(i-s)*(l*h-u*c))/f,((i*a-o*s)*(u-h)-(o-a)*(l*h-u*c))/f]}(s,a,l,u);if(null!==c&&(i=a[0]!==s[0]?(c[0]-s[0])/(a[0]-s[0]):(c[1]-s[1])/(a[1]-s[1]),o=u[0]!==l[0]?(c[0]-l[0])/(u[0]-l[0]):(c[1]-l[1])/(u[1]-l[1]),!(1<=i||i<=0||1<=o||o<=0))){var h=!y[c];h&&(y[c]=!0),f?d.push(f(c,t,e,s,a,i,n,r,l,u,o,h)):d.push(c)}}function h(t,e){var n,r,i,o,s=p[t][e],a=p[t][e+1];return r=s[0]<a[0]?(n=s[0],a[0]):(n=a[0],s[0]),o=s[1]<a[1]?(i=s[1],a[1]):(i=a[1],s[1]),{minX:n,minY:i,maxX:r,maxY:o,ring:t,edge:e}}}(t,function(t,e,n,r,i,o,s,a,l,u,c,h){return[t,e,n,r,i,o,s,a,l,u,c,h]}),a=s.length;if(0==a){var l=[];for(r=0;r<e;r++)l.push(B([t.geometry.coordinates[r]],{parent:-1,winding:Er(t.geometry.coordinates[r])}));var u=H(l);return j(),D(),u}var c=[],h=[];for(r=0;r<e;r++){c.push([]);for(var f=0;f<t.geometry.coordinates[r].length-1;f++)c[r].push([new wr(t.geometry.coordinates[r][(f+1).modulo(t.geometry.coordinates[r].length-1)],1,[r,f],[r,(f+1).modulo(t.geometry.coordinates[r].length-1)],void 0)]),h.push(new Sr(t.geometry.coordinates[r][f],[r,(f-1).modulo(t.geometry.coordinates[r].length-1)],[r,f],void 0,void 0,!1,!0))}for(r=0;r<a;r++)c[s[r][1]][s[r][2]].push(new wr(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&h.push(new Sr(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var p=h.length;for(r=0;r<c.length;r++)for(f=0;f<c[r].length;f++)c[r][f].sort(function(t,e){return t.param<e.param?-1:1});var d=[];for(r=0;r<p;r++)d.push({minX:h[r].coord[0],minY:h[r].coord[1],maxX:h[r].coord[0],maxY:h[r].coord[1],index:r});var y=yt();for(y.load(d),r=0;r<c.length;r++)for(f=0;f<c[r].length;f++)for(var g=0;g<c[r][f].length;g++){v=g==c[r][f].length-1?c[r][(f+1).modulo(t.geometry.coordinates[r].length-1)][0].coord:c[r][f][g+1].coord;var m=y.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0];c[r][f][g].nxtIsectAlongEdgeIn=m.index}for(r=0;r<c.length;r++)for(f=0;f<c[r].length;f++)for(g=0;g<c[r][f].length;g++){var v=c[r][f][g].coord,b=(m=y.search({minX:v[0],minY:v[1],maxX:v[0],maxY:v[1]})[0]).index;b<o||!Or(h[b].ringAndEdge1,c[r][f][g].ringAndEdgeIn)?h[b].nxtIsectAlongRingAndEdge2=c[r][f][g].nxtIsectAlongEdgeIn:h[b].nxtIsectAlongRingAndEdge1=c[r][f][g].nxtIsectAlongEdgeIn}var _=[];for(f=r=0;f<e;f++){var w=r;for(g=0;g<t.geometry.coordinates[f].length-1;g++)h[r].coord[0]<h[w].coord[0]&&(w=r),r++;var S=h[w].nxtIsectAlongRingAndEdge2;for(g=0;g<h.length;g++)if(h[g].nxtIsectAlongRingAndEdge1==w||h[g].nxtIsectAlongRingAndEdge2==w){var x=g;break}var E=xr([h[x].coord,h[w].coord,h[S].coord],!0)?1:-1;_.push({isect:w,parent:-1,winding:E})}for(_.sort(function(t,e){return h[t.isect].coord>h[e.isect].coord?-1:1}),l=[];0<_.length;){var O=_.pop(),C=O.isect,P=O.parent,T=O.winding,M=l.length,L=[h[C].coord],N=C;if(h[C].ringAndEdge1Walkable)var k=h[C].ringAndEdge1,A=h[C].nxtIsectAlongRingAndEdge1;else k=h[C].ringAndEdge2,A=h[C].nxtIsectAlongRingAndEdge2;for(;!Or(h[C].coord,h[A].coord);){L.push(h[A].coord);var I=void 0;for(r=0;r<_.length;r++)if(_[r].isect==A){I=r;break}if(null!=I&&_.splice(I,1),Or(k,h[A].ringAndEdge1)){if(k=h[A].ringAndEdge2,h[A].ringAndEdge2Walkable=!1,h[A].ringAndEdge1Walkable){var R={isect:A};xr([h[N].coord,h[A].coord,h[h[A].nxtIsectAlongRingAndEdge2].coord],1==T)?(R.parent=P,R.winding=-T):(R.parent=M,R.winding=T),_.push(R)}A=h[N=A].nxtIsectAlongRingAndEdge2}else k=h[A].ringAndEdge1,h[A].ringAndEdge1Walkable=!1,h[A].ringAndEdge2Walkable&&(R={isect:A},xr([h[N].coord,h[A].coord,h[h[A].nxtIsectAlongRingAndEdge1].coord],1==T)?(R.parent=P,R.winding=-T):(R.parent=M,R.winding=T),_.push(R)),A=h[N=A].nxtIsectAlongRingAndEdge1}L.push(h[A].coord),l.push(B([L],{index:M,parent:P,winding:T,netWinding:void 0}))}function j(){for(var t=[],e=0;e<u.features.length;e++)-1==u.features[e].properties.parent&&t.push(e);if(1<t.length)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<u.features.length;r++)t[e]!=r&&ie(u.features[t[e]].geometry.coordinates[0][0],u.features[r],{ignoreBoundary:!0})&&sr(u.features[r])<1/0&&(n=r);u.features[t[e]].properties.parent=n}}function D(){for(var t=0;t<u.features.length;t++)if(-1==u.features[t].properties.parent){var e=u.features[t].properties.winding;F(t,u.features[t].properties.netWinding=e)}}function F(t,e){for(var n=0;n<u.features.length;n++)if(u.features[n].properties.parent==t){var r=e+u.features[n].properties.winding;F(n,u.features[n].properties.netWinding=r)}}return u=H(l),j(),D(),u}function wr(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i}function Sr(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s}function xr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return 0<=(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])==e}function Er(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(xr([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}function Or(t,e){if(t&&e&&t.length==e.length){for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Or(t[n],e[n]))return}else if(t[n]!=e[n])return;return 1}}function Cr(t,e){this.lon=t,this.lat=e,this.x=Pr*t,this.y=Pr*e}Number.prototype.modulo=function(t){return(this%t+t)%t};var Pr=Math.PI/180,Tr=180/Math.PI;function Mr(){this.coords=[],this.length=0}function Lr(t){this.properties=t||{},this.geometries=[]}function Nr(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Cr(t.x,t.y),this.end=new Cr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)}function kr(r,t){var i=[],o=Gn();return I(t,function(t){if(i.forEach(function(t,e){t.id=e}),i.length){var e=o.search(t);if(e.features.length){var n=Ir(t,e);i=i.filter(function(t){return t.id!==n.id}),o.remove(n),M(Ar(n,t),function(t){i.push(t),o.insert(t)})}}else(i=Ar(r,t).features).forEach(function(t){t.bbox||(t.bbox=He(Y(t)))}),o.load(H(i))}),H(i)}function Ar(t,o){var s=[],e=Z(t)[0],n=Z(t)[t.geometry.coordinates.length-1];if(Rr(e,X(o))||Rr(n,X(o)))return H([t]);var r=Gn(),i=qn(t);r.load(i);var a=r.search(o);if(!a.features.length)return H([t]);var l=Ir(o,a),u=L(i,function(t,e,n){var r=Z(e)[1],i=X(o);return n===l.id?(t.push(i),s.push(V(t)),Rr(i,r)?[i]:[i,r]):(t.push(r),t)},[e]);return 1<u.length&&s.push(V(u)),H(s)}function Ir(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,i=1/0;return M(t,function(t){var e=Wn(t,n).properties.dist;e<i&&(r=t,i=e)}),r}function Rr(t,e){return t[0]===e[0]&&t[1]===e[1]}function jr(t,e,n,r,i){if(!J(i=i||{}))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var a=Dr(n),l=Dr(r),u=t.properties;if(a===l)return V(Je(t,e,i).geometry.coordinates[0],u);for(var c=a,h=a<l?l:l+360,f=c,p=[],d=0;f<h;)p.push(We(t,e,f,s).geometry.coordinates),f=c+360*++d/o;return h<f&&p.push(We(t,e,h,s).geometry.coordinates),V(p,u)}function Dr(t){var e=t%360;return e<0&&(e+=360),e}function Fr(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=rt(t),i=Z(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Br(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(Br(t,n))}),H(o);default:throw new Error("geom "+r+" not supported")}}function Br(t,e){return 1<t.length?b(t,e):V(t[0],e)}function Gr(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,rt(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(Z(Ur(t,{},r,i)))}),_(o,n)}return Ur(t,n,r,i)}function Ur(t,e,a,l){e=e||t.properties||{};var n=Z(t),r=rt(t);if(!n.length)throw new Error("line must contain coordinates");switch(r){case"LineString":return a&&(n=zr(n)),B([n],e);case"MultiLineString":var u=[],c=0;return n.forEach(function(t){if(a&&(t=zr(t)),l){var e=(r=(n=Y(V(t)))[0],i=n[1],o=n[2],s=n[3],Math.abs(r-o)*Math.abs(i-s));c<e?(u.unshift(t),c=e):u.push(t)}else u.push(t);var n,r,i,o,s}),B(u,e);default:throw new Error("geometry type "+r+" is not supported")}}function zr(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}Cr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Cr.prototype.antipode=function(){var t=-1*this.lat;return new Cr(this.lon<0?180+this.lon:-1*(180-this.lon),t)},Mr.prototype.move_to=function(t){this.length++,this.coords.push(t)},Lr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Lr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t},Nr.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Tr*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Tr*Math.atan2(i,r),s]},Nr.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,f=360-u,p=1;p<n.length;++p){var d=n[p-1][0],y=n[p][0],g=Math.abs(y-d);f<g&&(c<y&&d<h||c<d&&y<h)?a=!0:l<g&&(l=g)}var m=[];if(a&&l<u){var v=[];m.push(v);for(var b=0;b<n.length;++b){var _=parseFloat(n[b][0]);if(0<b&&Math.abs(_-n[b-1][0])>f){var w=parseFloat(n[b-1][0]),S=parseFloat(n[b-1][1]),x=parseFloat(n[b][0]),E=parseFloat(n[b][1]);if(-180<w&&w<h&&180===x&&b+1<n.length&&-180<n[b-1][0]&&n[b-1][0]<h){v.push([-180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(c<w&&w<180&&-180===x&&b+1<n.length&&n[b-1][0]>c&&n[b-1][0]<180){v.push([180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(w<h&&c<x){var O=w;w=x,x=O;var C=S;S=E,E=C}if(c<w&&x<h&&(x+=360),w<=180&&180<=x&&w<x){var P=(180-w)/(x-w),T=P*E+(1-P)*S;v.push([n[b-1][0]>c?180:-180,T]),(v=[]).push([n[b-1][0]>c?-180:180,T]),m.push(v)}else v=[],m.push(v);v.push([_,n[b][1]])}else v.push([n[b][0],n[b][1]])}}else{var M=[];m.push(M);for(var L=0;L<n.length;++L)M.push([n[L][0],n[L][1]])}for(var N=new Lr(this.properties),k=0;k<m.length;++k){var A=new Mr;N.geometries.push(A);for(var I=m[k],R=0;R<I.length;++R)A.move_to(I[R])}return N};var qr=Vr;function Vr(t,e,n){var r,i,o,s,a,l=t.length,u=Wr(t[0],e),c=[];for(n=n||[],r=1;r<l;r++){for(i=t[r-1],s=a=Wr(o=t[r],e);;){if(!(u|s)){c.push(i),s!==a?(c.push(o),r<l-1&&(n.push(c),c=[])):r===l-1&&c.push(o);break}if(u&s)break;u?u=Wr(i=Hr(i,o,u,e),e):s=Wr(o=Hr(i,o,s,e),e)}u=a}return c.length&&n.push(c),n}function Hr(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Wr(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Jr(t,e){for(var n=[],r=0;r<t.length;r++){var i=qr.polygon(t[r],e);0<i.length&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),4<=i.length&&n.push(i))}return n}(Vr.polyline=Vr).polygon=function(t,e){var n,r,i,o,s,a,l;for(r=1;r<=8;r*=2){for(n=[],o=!(Wr(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(l=!(Wr(a=t[s],e)&r))!==o&&n.push(Hr(i,a,r,e)),l&&n.push(a),i=a,o=l;if(!(t=n).length)break}return n};var Yr=Array.prototype.slice;function Xr(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Zr(t,e,n){return n=n||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Qr(t)||Qr(e))return!1;if(t.prototype!==e.prototype)return!1;if(Xr(t))return!!Xr(e)&&Zr(t=Yr.call(t),e=Yr.call(e),n);if(Kr(t)){if(!Kr(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;0<=r;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;0<=r;r--)if(!Zr(t[i=o[r]],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Qr(t){return null==t}function Kr(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0])}function $r(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var o,s=n.tolerance||0,a=[],l=Gn();return l.load(qn(t)),j(e,function(r){var i=!1;M(l.search(r),function(t){if(!1===i){var e=Z(r).sort(),n=Z(t).sort();Zr(e,n)||(0===s?pr(e[0],t)&&pr(e[1],t):Wn(t,e[0]).properties.dist<=s&&Wn(t,e[1]).properties.dist<=s)?(i=!0,o=o?ti(o,r):r):(0===s?pr(n[0],r)&&pr(n[1],r):Wn(r,n[0]).properties.dist<=s&&Wn(r,n[1]).properties.dist<=s)&&(o=o?ti(o,t):t)}}),!1===i&&o&&(a.push(o),o=void 0)}),o&&a.push(o),H(a)}function ti(t,e){var n=Z(e),r=Z(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Zr(n[0],i)?s.unshift(n[1]):Zr(n[0],o)?s.push(n[1]):Zr(n[1],i)?s.unshift(n[0]):Zr(n[1],o)&&s.push(n[0]),t}function ei(t){var e=t%360;return e<0&&(e+=360),e}function ni(t,e,n,r){if(!J(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");var h=m(e,i,"meters"),s=X(t),a=function(t,e,n){var r=h/(n=void 0===n?f:Number(n)),i=t[0]*Math.PI/180,o=v(t[1]),s=v(e),a=r*Math.cos(s),l=o+a;Math.abs(l)>Math.PI/2&&(l=0<l?Math.PI-l:-Math.PI-l);var u=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=1e-11<Math.abs(u)?a/u:Math.cos(o);return[(180*(i+r*Math.sin(s)/c)/Math.PI+540)%360-180,180*l/Math.PI]}(s,n);return a[0]+=180<a[0]-s[0]?-360:180<s[0]-a[0]?360:0,q(a,o)}function ri(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],l=t[s+1];s===t.length-1&&(l=t[0]),r=ii(a,l,e),n<=0&&0<r?ii(e,a,i)<0||(i=a):0<n&&r<=0&&(0<ii(e,a,o)||(o=a)),n=r}return[i,o]}function ii(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function oi(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=Z(t),o=0,s=1;s<i.length;)n=r||i[0],o+=((r=i[s])[0]-n[0])*(r[1]+n[1]),s++;return 0<o}function si(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return k(t,function(t){si(t,e)}),t;case"LineString":return ai(Z(t),e),t;case"Polygon":return li(Z(t),e),t;case"MultiLineString":return Z(t).forEach(function(t){ai(t,e)}),t;case"MultiPolygon":return Z(t).forEach(function(t){li(t,e)}),t;case"Point":case"MultiPoint":return t}}function ai(t,e){oi(t)===e&&t.reverse()}function li(t,e){oi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)oi(t[n])===e&&t[n].reverse()}var ui={successCallback:null,verbose:!1,polygons:!1},ci={};function hi(t,e,n,r){r=r||{};for(var i=Object.keys(ui),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:ui[s],ci[s]=a}ci.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u,c,h=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var l=0;l<i;++l){var u=0,c=t[a+1][l],h=t[a+1][l+1],f=t[a][l+1],p=t[a][l];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){u|=c<e?0:s<c?128:64,u|=h<e?0:s<h?32:16,u|=f<e?0:s<f?8:4;var d=+(u|=p<e?0:s<p?2:1),y=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var g=(c+h+f+p)/4;y=s<g?2:g<e?0:1,34===u?1===y?u=35:0===y&&(u=136):136===u?1===y?(u=35,y=4):0===y&&(u=34):17===u?1===y?(u=155,y=4):0===y&&(u=153):68===u?1===y?(u=103,y=4):0===y&&(u=102):153===u?1===y&&(u=155):102===u?1===y&&(u=103):152===u?y<2&&(u=156,y=1):137===u?y<2&&(u=139,y=1):98===u?y<2&&(u=99,y=1):38===u?y<2&&(u=39,y=1):18===u?0<y?(u=156,y=4):u=152:33===u?0<y?(u=139,y=4):u=137:72===u?0<y?(u=99,y=4):u=98:132===u&&(0<y?(u=39,y=4):u=38)}if(0!=u&&170!=u){var m,v,b,_,w,S,x,E;m=v=b=_=w=S=x=E=.5;var O=[];1===u?(b=1-ro(e,f,p),E=1-ro(e,c,p),O.push(Qi[u])):169===u?(b=ro(s,p,f),E=ro(s,p,c),O.push(Qi[u])):4===u?(S=1-ro(e,h,f),_=ro(e,p,f),O.push(Xi[u])):166===u?(S=ro(s,f,h),_=1-ro(s,f,p),O.push(Xi[u])):16===u?(w=ro(e,f,h),v=ro(e,c,h),O.push(Yi[u])):154===u?(w=1-ro(s,h,f),v=1-ro(s,h,c),O.push(Yi[u])):64===u?(x=ro(e,p,c),m=1-ro(e,h,c),O.push($i[u])):106===u?(x=1-ro(s,c,p),m=ro(s,c,h),O.push($i[u])):168===u?(_=ro(s,p,f),b=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),O.push(Zi[u]),O.push(Qi[u])):2===u?(_=1-ro(e,f,p),b=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),O.push(Zi[u]),O.push(Qi[u])):162===u?(w=ro(s,f,h),S=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),O.push(Zi[u]),O.push(Qi[u])):8===u?(w=1-ro(e,h,f),S=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),O.push(Yi[u]),O.push(Xi[u])):138===u?(w=1-ro(e,h,f),S=1-ro(s,h,f),m=1-ro(s,h,c),v=1-ro(e,h,c),O.push(Yi[u]),O.push(Xi[u])):32===u?(w=ro(s,f,h),S=ro(e,f,h),m=ro(e,c,h),v=ro(s,c,h),O.push(Yi[u]),O.push(Xi[u])):42===u?(E=1-ro(s,c,p),x=1-ro(e,c,p),m=ro(e,c,h),v=ro(s,c,h),O.push(Ki[u]),O.push($i[u])):128===u&&(E=ro(e,p,c),x=ro(s,p,c),m=1-ro(s,h,c),v=1-ro(e,h,c),O.push(Ki[u]),O.push($i[u])),5===u?(S=1-ro(e,h,f),E=1-ro(e,c,p),O.push(Xi[u])):165===u?(S=ro(s,f,h),E=ro(s,p,c),O.push(Xi[u])):20===u?(_=ro(e,p,f),v=ro(e,c,h),O.push(Zi[u])):150===u?(_=1-ro(s,f,p),v=1-ro(s,h,c),O.push(Zi[u])):80===u?(w=ro(e,f,h),x=ro(e,p,c),O.push(Yi[u])):90===u?(w=1-ro(s,h,f),x=1-ro(s,c,p),O.push(Yi[u])):65===u?(b=1-ro(e,f,p),m=1-ro(e,h,c),O.push(Qi[u])):105===u?(b=ro(s,p,f),m=ro(s,c,h),O.push(Qi[u])):160===u?(w=ro(s,f,h),S=ro(e,f,h),E=ro(e,p,c),x=ro(s,p,c),O.push(Yi[u]),O.push(Xi[u])):10===u?(w=1-ro(e,h,f),S=1-ro(s,h,f),E=1-ro(s,c,p),x=1-ro(e,c,p),O.push(Yi[u]),O.push(Xi[u])):130===u?(_=1-ro(e,f,p),b=1-ro(s,f,p),m=1-ro(s,h,c),v=1-ro(e,h,c),O.push(Zi[u]),O.push(Qi[u])):40===u?(_=ro(s,p,f),b=ro(e,p,f),m=ro(e,c,h),v=ro(s,c,h),O.push(Zi[u]),O.push(Qi[u])):101===u?(S=ro(s,f,h),m=ro(s,c,h),O.push(Xi[u])):69===u?(S=1-ro(e,h,f),m=1-ro(e,h,c),O.push(Xi[u])):149===u?(E=ro(s,p,c),v=1-ro(s,h,c),O.push(Ki[u])):21===u?(E=1-ro(e,c,p),v=ro(e,c,h),O.push(Ki[u])):86===u?(_=1-ro(s,f,p),x=1-ro(s,c,p),O.push(Zi[u])):84===u?(_=ro(e,p,f),x=ro(e,p,c),O.push(Zi[u])):89===u?(w=1-ro(s,h,f),b=ro(s,p,f),O.push(Qi[u])):81===u?(w=ro(e,f,h),b=1-ro(e,f,p),O.push(Qi[u])):96===u?(w=ro(s,f,h),S=ro(e,f,h),x=ro(e,p,c),m=ro(s,c,h),O.push(Yi[u]),O.push(Xi[u])):74===u?(w=1-ro(e,h,f),S=1-ro(s,h,f),x=1-ro(s,c,p),m=1-ro(e,h,c),O.push(Yi[u]),O.push(Xi[u])):24===u?(w=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),v=ro(e,c,h),O.push(Yi[u]),O.push(Qi[u])):146===u?(w=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),v=1-ro(s,h,c),O.push(Yi[u]),O.push(Qi[u])):6===u?(S=1-ro(e,h,f),_=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),O.push(Xi[u]),O.push(Zi[u])):164===u?(S=ro(s,f,h),_=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),O.push(Xi[u]),O.push(Zi[u])):129===u?(b=1-ro(e,f,p),E=ro(s,p,c),m=1-ro(s,h,c),v=1-ro(e,h,c),O.push(Qi[u]),O.push(Ki[u])):41===u?(b=ro(s,p,f),E=1-ro(e,c,p),m=ro(e,c,h),v=ro(s,c,h),O.push(Qi[u]),O.push(Ki[u])):66===u?(_=1-ro(e,f,p),b=1-ro(s,f,p),x=1-ro(s,c,p),m=1-ro(e,h,c),O.push(Zi[u]),O.push(Qi[u])):104===u?(_=ro(s,p,f),b=ro(e,p,f),x=ro(e,p,c),m=ro(s,c,h),O.push(Qi[u]),O.push(to[u])):144===u?(w=ro(e,f,h),E=ro(e,p,c),x=ro(s,p,c),v=1-ro(s,h,c),O.push(Yi[u]),O.push($i[u])):26===u?(w=1-ro(s,h,f),E=1-ro(s,c,p),x=1-ro(e,c,p),v=ro(e,c,h),O.push(Yi[u]),O.push($i[u])):36===u?(S=ro(s,f,h),_=ro(e,p,f),m=ro(e,c,h),v=ro(s,c,h),O.push(Xi[u]),O.push(Zi[u])):134===u?(S=1-ro(e,h,f),_=1-ro(s,f,p),m=1-ro(s,h,c),v=1-ro(e,h,c),O.push(Xi[u]),O.push(Zi[u])):9===u?(w=1-ro(e,h,f),S=1-ro(s,h,f),b=ro(s,p,f),E=1-ro(e,c,p),O.push(Yi[u]),O.push(Xi[u])):161===u?(w=ro(s,f,h),S=ro(e,f,h),b=1-ro(e,f,p),E=ro(s,p,c),O.push(Yi[u]),O.push(Xi[u])):37===u?(S=ro(s,f,h),E=1-ro(e,c,p),m=ro(e,c,h),v=ro(s,c,h),O.push(Xi[u]),O.push(Ki[u])):133===u?(S=1-ro(e,h,f),E=ro(s,p,c),m=1-ro(s,h,c),v=1-ro(e,h,c),O.push(Xi[u]),O.push(Ki[u])):148===u?(_=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),v=1-ro(s,h,c),O.push(Zi[u]),O.push($i[u])):22===u?(_=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),v=ro(e,c,h),O.push(Zi[u]),O.push($i[u])):82===u?(w=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),x=1-ro(s,c,p),O.push(Yi[u]),O.push(Qi[u])):88===u?(w=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),x=ro(e,p,c),O.push(Yi[u]),O.push(Qi[u])):73===u?(w=1-ro(e,h,f),S=1-ro(s,h,f),b=ro(s,p,f),m=1-ro(e,h,c),O.push(Yi[u]),O.push(Xi[u])):97===u?(w=ro(s,f,h),S=ro(e,f,h),b=1-ro(e,f,p),m=ro(s,c,h),O.push(Yi[u]),O.push(Xi[u])):145===u?(w=ro(e,f,h),b=1-ro(e,f,p),E=ro(s,p,c),v=1-ro(s,h,c),O.push(Yi[u]),O.push(Ki[u])):25===u?(w=1-ro(s,h,f),b=ro(s,p,f),E=1-ro(e,c,p),v=ro(e,c,h),O.push(Yi[u]),O.push(Ki[u])):70===u?(S=1-ro(e,h,f),_=1-ro(s,f,p),x=1-ro(s,c,p),m=1-ro(e,h,c),O.push(Xi[u]),O.push(Zi[u])):100===u?(S=ro(s,f,h),_=ro(e,p,f),x=ro(e,p,c),m=ro(s,c,h),O.push(Xi[u]),O.push(Zi[u])):34===u?(v=0===y?(w=1-ro(e,h,f),S=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)):(w=ro(s,f,h),S=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)),O.push(Yi[u]),O.push(Xi[u]),O.push(Ki[u]),O.push($i[u])):35===u?(v=4===y?(w=1-ro(e,h,f),S=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)):(w=ro(s,f,h),S=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)),O.push(Yi[u]),O.push(Xi[u]),O.push(Qi[u]),O.push($i[u])):136===u?(v=0===y?(w=ro(s,f,h),S=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)):(w=1-ro(e,h,f),S=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)),O.push(Yi[u]),O.push(Xi[u]),O.push(Ki[u]),O.push($i[u])):153===u?(v=0===y?(w=ro(e,f,h),b=1-ro(e,f,p),E=1-ro(e,c,p),ro(e,c,h)):(w=1-ro(s,h,f),b=ro(s,p,f),E=ro(s,p,c),1-ro(s,h,c)),O.push(Yi[u]),O.push(Qi[u])):102===u?(m=0===y?(S=1-ro(e,h,f),_=ro(e,p,f),x=ro(e,p,c),1-ro(e,h,c)):(S=ro(s,f,h),_=1-ro(s,f,p),x=1-ro(s,c,p),ro(s,c,h)),O.push(Xi[u]),O.push($i[u])):155===u?(v=4===y?(w=ro(e,f,h),b=1-ro(e,f,p),E=1-ro(e,c,p),ro(e,c,h)):(w=1-ro(s,h,f),b=ro(s,p,f),E=ro(s,p,c),1-ro(s,h,c)),O.push(Yi[u]),O.push(Ki[u])):103===u?(m=4===y?(S=1-ro(e,h,f),_=ro(e,p,f),x=ro(e,p,c),1-ro(e,h,c)):(S=ro(s,f,h),_=1-ro(s,f,p),x=1-ro(s,c,p),ro(s,c,h)),O.push(Xi[u]),O.push(Zi[u])):152===u?(v=0===y?(w=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),ro(e,c,h)):(w=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),1-ro(s,h,c)),O.push(Yi[u]),O.push(Zi[u]),O.push(Qi[u])):156===u?(v=4===y?(w=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),ro(e,c,h)):(w=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),1-ro(s,h,c)),O.push(Yi[u]),O.push(Qi[u]),O.push($i[u])):137===u?(v=0===y?(w=ro(s,f,h),S=ro(e,f,h),b=1-ro(e,f,p),E=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)):(w=1-ro(e,h,f),S=1-ro(s,h,f),b=ro(s,p,f),E=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)),O.push(Yi[u]),O.push(Xi[u]),O.push(Qi[u])):139===u?(v=4===y?(w=ro(s,f,h),S=ro(e,f,h),b=1-ro(e,f,p),E=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)):(w=1-ro(e,h,f),S=1-ro(s,h,f),b=ro(s,p,f),E=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)),O.push(Yi[u]),O.push(Xi[u]),O.push(Ki[u])):98===u?(m=0===y?(w=1-ro(e,h,f),S=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),x=ro(e,p,c),1-ro(e,h,c)):(w=ro(s,f,h),S=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),x=1-ro(s,c,p),ro(s,c,h)),O.push(Yi[u]),O.push(Xi[u]),O.push($i[u])):99===u?(m=4===y?(w=1-ro(e,h,f),S=1-ro(s,h,f),_=ro(s,p,f),b=ro(e,p,f),x=ro(e,p,c),1-ro(e,h,c)):(w=ro(s,f,h),S=ro(e,f,h),_=1-ro(e,f,p),b=1-ro(s,f,p),x=1-ro(s,c,p),ro(s,c,h)),O.push(Yi[u]),O.push(Xi[u]),O.push(Qi[u])):38===u?(v=0===y?(S=1-ro(e,h,f),_=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)):(S=ro(s,f,h),_=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)),O.push(Xi[u]),O.push(Ki[u]),O.push($i[u])):39===u?(v=4===y?(S=1-ro(e,h,f),_=ro(e,p,f),E=ro(e,p,c),x=ro(s,p,c),m=1-ro(s,h,c),1-ro(e,h,c)):(S=ro(s,f,h),_=1-ro(s,f,p),E=1-ro(s,c,p),x=1-ro(e,c,p),m=ro(e,c,h),ro(s,c,h)),O.push(Xi[u]),O.push(Zi[u]),O.push($i[u])):85===u&&(m=E=b=S=0,v=x=_=w=1),(m<0||1<m||v<0||1<v||w<0||1<w||_<0||1<_||E<0||1<E||x<0||1<x)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+c+","+h+","+f+","+p+" "+y+" "+m+" "+v+" "+w+" "+S+" "+_+" "+b+" "+E+" "+x),o.cells[a][l]={cval:u,cval_real:d,flipped:y,topleft:m,topright:v,righttop:w,rightbottom:S,bottomright:_,bottomleft:b,leftbottom:E,lefttop:x,edges:O}}}}}return o}(t,e,n);return l=ci.polygons?(ci.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=[],c=0,h.cells.forEach(function(t,r){t.forEach(function(t,e){if(void 0!==t){var n=no[t.cval](t);"object"==typeof n&&io(n)?"object"==typeof n[0]&&io(n[0])?"object"==typeof n[0][0]&&io(n[0][0])?n.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=r}),u[c++]=t}):(n.forEach(function(t){t[0]+=e,t[1]+=r}),u[c++]=n):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),u):(ci.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&0<t.cells[o][s].edges.length){var a=so(t.cells[o][s]),l=null,u=s,c=o;null!==a&&i.push([a.p[0]+u,a.p[1]+c]);do{if(null===(l=ao(t.cells[c][u],a.x,a.y,a.o)))break;if(i.push([l.p[0]+u,l.p[1]+c]),u+=l.x,(c+=(a=l).y)<0||n<=c||u<0||r<=u||void 0===t.cells[c][u]){var h=oo(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),u=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][u]&&0<t.cells[c][u].edges.length);e.push(i),i=[],0<t.cells[o][s].edges.length&&s--}return e}(h)),"function"==typeof ci.successCallback&&ci.successCallback(l),l}var fi=64,pi=16,di=4,yi=1,gi=[],mi=[],vi=[],bi=[],_i=[],wi=[],Si=[],xi=[],Ei=[],Oi=[],Ci=[],Pi=[],Ti=[],Mi=[],Li=[],Ni=[],ki=[],Ai=[],Ii=[],Ri=[],ji=[],Di=[],Fi=[],Bi=[];function Gi(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]}function Ui(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]}function zi(t){return[[t.topright,1],[1,1],[1,t.righttop]]}function qi(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]}function Vi(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]}function Hi(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]}function Wi(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]}function Ji(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]}Si[85]=Oi[85]=-1,xi[85]=Ci[85]=0,Ei[85]=Pi[85]=1,Ii[85]=Di[85]=1,Ri[85]=Fi[85]=0,ji[85]=Bi[85]=1,gi[85]=bi[85]=0,mi[85]=_i[85]=-1,vi[85]=Li[85]=0,Ni[85]=Ti[85]=0,ki[85]=Mi[85]=1,wi[85]=Ai[85]=1,Di[1]=Di[169]=0,Fi[1]=Fi[169]=-1,Bi[1]=Bi[169]=0,Ti[1]=Ti[169]=-1,Mi[1]=Mi[169]=0,Li[1]=Li[169]=0,Oi[4]=Oi[166]=0,Ci[4]=Ci[166]=-1,Pi[4]=Pi[166]=1,Ni[4]=Ni[166]=1,ki[4]=ki[166]=0,Ai[4]=Ai[166]=0,Si[16]=Si[154]=0,xi[16]=xi[154]=1,Ei[16]=Ei[154]=1,bi[16]=bi[154]=1,_i[16]=_i[154]=0,wi[16]=wi[154]=1,Ii[64]=Ii[106]=0,Ri[64]=Ri[106]=1,ji[64]=ji[106]=0,gi[64]=gi[106]=-1,mi[64]=mi[106]=0,vi[64]=vi[106]=1,Ii[2]=Ii[168]=0,Ri[2]=Ri[168]=-1,ji[2]=ji[168]=1,Di[2]=Di[168]=0,Fi[2]=Fi[168]=-1,Bi[2]=Bi[168]=0,Ti[2]=Ti[168]=-1,Mi[2]=Mi[168]=0,Li[2]=Li[168]=0,Ni[2]=Ni[168]=-1,ki[2]=ki[168]=0,Ai[2]=Ai[168]=1,Si[8]=Si[162]=0,xi[8]=xi[162]=-1,Ei[8]=Ei[162]=0,Oi[8]=Oi[162]=0,Ci[8]=Ci[162]=-1,Pi[8]=Pi[162]=1,Ti[8]=Ti[162]=1,Mi[8]=Mi[162]=0,Li[8]=Li[162]=1,Ni[8]=Ni[162]=1,ki[8]=ki[162]=0,Ai[8]=Ai[162]=0,Si[32]=Si[138]=0,xi[32]=xi[138]=1,Ei[32]=Ei[138]=1,Oi[32]=Oi[138]=0,Ci[32]=Ci[138]=1,Pi[32]=Pi[138]=0,gi[32]=gi[138]=1,mi[32]=mi[138]=0,vi[32]=vi[138]=0,bi[32]=bi[138]=1,_i[32]=_i[138]=0,wi[32]=wi[138]=1,Di[128]=Di[42]=0,Fi[128]=Fi[42]=1,Bi[128]=Bi[42]=1,Ii[128]=Ii[42]=0,Ri[128]=Ri[42]=1,ji[128]=ji[42]=0,gi[128]=gi[42]=-1,mi[128]=mi[42]=0,vi[128]=vi[42]=1,bi[128]=bi[42]=-1,_i[128]=_i[42]=0,wi[128]=wi[42]=0,Oi[5]=Oi[165]=-1,Ci[5]=Ci[165]=0,Pi[5]=Pi[165]=0,Di[5]=Di[165]=1,Fi[5]=Fi[165]=0,Bi[5]=Bi[165]=0,Ni[20]=Ni[150]=0,ki[20]=ki[150]=1,Ai[20]=Ai[150]=1,bi[20]=bi[150]=0,_i[20]=_i[150]=-1,wi[20]=wi[150]=1,Si[80]=Si[90]=-1,xi[80]=xi[90]=0,Ei[80]=Ei[90]=1,Ii[80]=Ii[90]=1,Ri[80]=Ri[90]=0,ji[80]=ji[90]=1,Ti[65]=Ti[105]=0,Mi[65]=Mi[105]=1,Li[65]=Li[105]=0,gi[65]=gi[105]=0,mi[65]=mi[105]=-1,vi[65]=vi[105]=0,Si[160]=Si[10]=-1,xi[160]=xi[10]=0,Ei[160]=Ei[10]=1,Oi[160]=Oi[10]=-1,Ci[160]=Ci[10]=0,Pi[160]=Pi[10]=0,Di[160]=Di[10]=1,Fi[160]=Fi[10]=0,Bi[160]=Bi[10]=0,Ii[160]=Ii[10]=1,Ri[160]=Ri[10]=0,ji[160]=ji[10]=1,Ni[130]=Ni[40]=0,ki[130]=ki[40]=1,Ai[130]=Ai[40]=1,Ti[130]=Ti[40]=0,Mi[130]=Mi[40]=1,Li[130]=Li[40]=0,gi[130]=gi[40]=0,mi[130]=mi[40]=-1,vi[130]=vi[40]=0,bi[130]=bi[40]=0,_i[130]=_i[40]=-1,wi[130]=wi[40]=1,Oi[37]=Oi[133]=0,Ci[37]=Ci[133]=1,Pi[37]=Pi[133]=1,Di[37]=Di[133]=0,Fi[37]=Fi[133]=1,Bi[37]=Bi[133]=0,gi[37]=gi[133]=-1,mi[37]=mi[133]=0,vi[37]=vi[133]=0,bi[37]=bi[133]=1,_i[37]=_i[133]=0,wi[37]=wi[133]=0,Ni[148]=Ni[22]=-1,ki[148]=ki[22]=0,Ai[148]=Ai[22]=0,Di[148]=Di[22]=0,Fi[148]=Fi[22]=-1,Bi[148]=Bi[22]=1,Ii[148]=Ii[22]=0,Ri[148]=Ri[22]=1,ji[148]=ji[22]=1,bi[148]=bi[22]=-1,_i[148]=_i[22]=0,wi[148]=wi[22]=1,Si[82]=Si[88]=0,xi[82]=xi[88]=-1,Ei[82]=Ei[88]=1,Ni[82]=Ni[88]=1,ki[82]=ki[88]=0,Ai[82]=Ai[88]=1,Ti[82]=Ti[88]=-1,Mi[82]=Mi[88]=0,Li[82]=Li[88]=1,Ii[82]=Ii[88]=0,Ri[82]=Ri[88]=-1,ji[82]=ji[88]=0,Si[73]=Si[97]=0,xi[73]=xi[97]=1,Ei[73]=Ei[97]=0,Oi[73]=Oi[97]=0,Ci[73]=Ci[97]=-1,Pi[73]=Pi[97]=0,Ti[73]=Ti[97]=1,Mi[73]=Mi[97]=0,Li[73]=Li[97]=0,gi[73]=gi[97]=1,mi[73]=mi[97]=0,vi[73]=vi[97]=1,Si[145]=Si[25]=0,xi[145]=xi[25]=-1,Ei[145]=Ei[25]=0,Ti[145]=Ti[25]=1,Mi[145]=Mi[25]=0,Li[145]=Li[25]=1,Di[145]=Di[25]=0,Fi[145]=Fi[25]=1,Bi[145]=Bi[25]=1,bi[145]=bi[25]=-1,_i[145]=_i[25]=0,wi[145]=wi[25]=0,Oi[70]=Oi[100]=0,Ci[70]=Ci[100]=1,Pi[70]=Pi[100]=0,Ni[70]=Ni[100]=-1,ki[70]=ki[100]=0,Ai[70]=Ai[100]=1,Ii[70]=Ii[100]=0,Ri[70]=Ri[100]=-1,ji[70]=ji[100]=1,gi[70]=gi[100]=1,mi[70]=mi[100]=0,vi[70]=vi[100]=0,Oi[101]=Oi[69]=0,Ci[101]=Ci[69]=1,Pi[101]=Pi[69]=0,gi[101]=gi[69]=1,mi[101]=mi[69]=0,vi[101]=vi[69]=0,Di[149]=Di[21]=0,Fi[149]=Fi[21]=1,Bi[149]=Bi[21]=1,bi[149]=bi[21]=-1,_i[149]=_i[21]=0,wi[149]=wi[21]=0,Ni[86]=Ni[84]=-1,ki[86]=ki[84]=0,Ai[86]=Ai[84]=1,Ii[86]=Ii[84]=0,Ri[86]=Ri[84]=-1,ji[86]=ji[84]=1,Si[89]=Si[81]=0,xi[89]=xi[81]=-1,Ei[89]=Ei[81]=0,Ti[89]=Ti[81]=1,Mi[89]=Mi[81]=0,Li[89]=Li[81]=1,Si[96]=Si[74]=0,xi[96]=xi[74]=1,Ei[96]=Ei[74]=0,Oi[96]=Oi[74]=-1,Ci[96]=Ci[74]=0,Pi[96]=Pi[74]=1,Ii[96]=Ii[74]=1,Ri[96]=Ri[74]=0,ji[96]=ji[74]=0,gi[96]=gi[74]=1,mi[96]=mi[74]=0,vi[96]=vi[74]=1,Si[24]=Si[146]=0,xi[24]=xi[146]=-1,Ei[24]=Ei[146]=1,Ni[24]=Ni[146]=1,ki[24]=ki[146]=0,Ai[24]=Ai[146]=1,Ti[24]=Ti[146]=0,Mi[24]=Mi[146]=1,Li[24]=Li[146]=1,bi[24]=bi[146]=0,_i[24]=_i[146]=-1,wi[24]=wi[146]=0,Oi[6]=Oi[164]=-1,Ci[6]=Ci[164]=0,Pi[6]=Pi[164]=1,Ni[6]=Ni[164]=-1,ki[6]=ki[164]=0,Ai[6]=Ai[164]=0,Di[6]=Di[164]=0,Fi[6]=Fi[164]=-1,Bi[6]=Bi[164]=1,Ii[6]=Ii[164]=1,Ri[6]=Ri[164]=0,ji[6]=ji[164]=0,Ti[129]=Ti[41]=0,Mi[129]=Mi[41]=1,Li[129]=Li[41]=1,Di[129]=Di[41]=0,Fi[129]=Fi[41]=1,Bi[129]=Bi[41]=0,gi[129]=gi[41]=-1,mi[129]=mi[41]=0,vi[129]=vi[41]=0,bi[129]=bi[41]=0,_i[129]=_i[41]=-1,wi[129]=wi[41]=0,Ni[66]=Ni[104]=0,ki[66]=ki[104]=1,Ai[66]=Ai[104]=0,Ti[66]=Ti[104]=-1,Mi[66]=Mi[104]=0,Li[66]=Li[104]=1,Ii[66]=Ii[104]=0,Ri[66]=Ri[104]=-1,ji[66]=ji[104]=0,gi[66]=gi[104]=0,mi[66]=mi[104]=-1,vi[66]=vi[104]=1,Si[144]=Si[26]=-1,xi[144]=xi[26]=0,Ei[144]=Ei[26]=0,Di[144]=Di[26]=1,Fi[144]=Fi[26]=0,Bi[144]=Bi[26]=1,Ii[144]=Ii[26]=0,Ri[144]=Ri[26]=1,ji[144]=ji[26]=1,bi[144]=bi[26]=-1,_i[144]=_i[26]=0,wi[144]=wi[26]=1,Oi[36]=Oi[134]=0,Ci[36]=Ci[134]=1,Pi[36]=Pi[134]=1,Ni[36]=Ni[134]=0,ki[36]=ki[134]=1,Ai[36]=Ai[134]=0,gi[36]=gi[134]=0,mi[36]=mi[134]=-1,vi[36]=vi[134]=1,bi[36]=bi[134]=1,_i[36]=_i[134]=0,wi[36]=wi[134]=0,Si[9]=Si[161]=-1,xi[9]=xi[161]=0,Ei[9]=Ei[161]=0,Oi[9]=Oi[161]=0,Ci[9]=Ci[161]=-1,Pi[9]=Pi[161]=0,Ti[9]=Ti[161]=1,Mi[9]=Mi[161]=0,Li[9]=Li[161]=0,Di[9]=Di[161]=1,Fi[9]=Fi[161]=0,Bi[9]=Bi[161]=1,Si[136]=0,xi[136]=1,Ei[136]=1,Oi[136]=0,Ci[136]=1,Pi[136]=0,Ni[136]=-1,ki[136]=0,Ai[136]=1,Ti[136]=-1,Mi[136]=0,Li[136]=0,Di[136]=0,Fi[136]=-1,Bi[136]=0,Ii[136]=0,Ri[136]=-1,ji[136]=1,gi[136]=1,mi[136]=0,vi[136]=0,bi[136]=1,_i[136]=0,wi[136]=1,Si[34]=0,xi[34]=-1,Ei[34]=0,Oi[34]=0,Ci[34]=-1,Pi[34]=1,Ni[34]=1,ki[34]=0,Ai[34]=0,Ti[34]=1,Mi[34]=0,Li[34]=1,Di[34]=0,Fi[34]=1,Bi[34]=1,Ii[34]=0,Ri[34]=1,ji[34]=0,gi[34]=-1,mi[34]=0,vi[34]=1,bi[34]=-1,_i[34]=0,wi[34]=0,Si[35]=0,xi[35]=1,Ei[35]=1,Oi[35]=0,Ci[35]=-1,Pi[35]=1,Ni[35]=1,ki[35]=0,Ai[35]=0,Ti[35]=-1,Mi[35]=0,Li[35]=0,Di[35]=0,Fi[35]=-1,Bi[35]=0,Ii[35]=0,Ri[35]=1,ji[35]=0,gi[35]=-1,mi[35]=0,vi[35]=1,bi[35]=1,_i[35]=0,wi[35]=1,Si[153]=0,xi[153]=1,Ei[153]=1,Ti[153]=-1,Mi[153]=0,Li[153]=0,Di[153]=0,Fi[153]=-1,Bi[153]=0,bi[153]=1,_i[153]=0,wi[153]=1,Oi[102]=0,Ci[102]=-1,Pi[102]=1,Ni[102]=1,ki[102]=0,Ai[102]=0,Ii[102]=0,Ri[102]=1,ji[102]=0,gi[102]=-1,mi[102]=0,vi[102]=1,Si[155]=0,xi[155]=-1,Ei[155]=0,Ti[155]=1,Mi[155]=0,Li[155]=1,Di[155]=0,Fi[155]=1,Bi[155]=1,bi[155]=-1,_i[155]=0,wi[155]=0,Oi[103]=0,Ci[103]=1,Pi[103]=0,Ni[103]=-1,ki[103]=0,Ai[103]=1,Ii[103]=0,Ri[103]=-1,ji[103]=1,gi[103]=1,mi[103]=0,vi[103]=0,Si[152]=0,xi[152]=1,Ei[152]=1,Ni[152]=-1,ki[152]=0,Ai[152]=1,Ti[152]=-1,Mi[152]=0,Li[152]=0,Di[152]=0,Fi[152]=-1,Bi[152]=0,Ii[152]=0,Ri[152]=-1,ji[152]=1,bi[152]=1,_i[152]=0,wi[152]=1,Si[156]=0,xi[156]=-1,Ei[156]=1,Ni[156]=1,ki[156]=0,Ai[156]=1,Ti[156]=-1,Mi[156]=0,Li[156]=0,Di[156]=0,Fi[156]=-1,Bi[156]=0,Ii[156]=0,Ri[156]=1,ji[156]=1,bi[156]=-1,_i[156]=0,wi[156]=1,Si[137]=0,xi[137]=1,Ei[137]=1,Oi[137]=0,Ci[137]=1,Pi[137]=0,Ti[137]=-1,Mi[137]=0,Li[137]=0,Di[137]=0,Fi[137]=-1,Bi[137]=0,gi[137]=1,mi[137]=0,vi[137]=0,bi[137]=1,_i[137]=0,wi[137]=1,Si[139]=0,xi[139]=1,Ei[139]=1,Oi[139]=0,Ci[139]=-1,Pi[139]=0,Ti[139]=1,Mi[139]=0,Li[139]=0,Di[139]=0,Fi[139]=1,Bi[139]=0,gi[139]=-1,mi[139]=0,vi[139]=0,bi[139]=1,_i[139]=0,wi[139]=1,Si[98]=0,xi[98]=-1,Ei[98]=0,Oi[98]=0,Ci[98]=-1,Pi[98]=1,Ni[98]=1,ki[98]=0,Ai[98]=0,Ti[98]=1,Mi[98]=0,Li[98]=1,Ii[98]=0,Ri[98]=1,ji[98]=0,gi[98]=-1,mi[98]=0,vi[98]=1,Si[99]=0,xi[99]=1,Ei[99]=0,Oi[99]=0,Ci[99]=-1,Pi[99]=1,Ni[99]=1,ki[99]=0,Ai[99]=0,Ti[99]=-1,Mi[99]=0,Li[99]=1,Ii[99]=0,Ri[99]=-1,ji[99]=0,gi[99]=1,mi[99]=0,vi[99]=1,Oi[38]=0,Ci[38]=-1,Pi[38]=1,Ni[38]=1,ki[38]=0,Ai[38]=0,Di[38]=0,Fi[38]=1,Bi[38]=1,Ii[38]=0,Ri[38]=1,ji[38]=0,gi[38]=-1,mi[38]=0,vi[38]=1,bi[38]=-1,_i[38]=0,wi[38]=0,Oi[39]=0,Ci[39]=1,Pi[39]=1,Ni[39]=-1,ki[39]=0,Ai[39]=0,Di[39]=0,Fi[39]=-1,Bi[39]=1,Ii[39]=0,Ri[39]=1,ji[39]=0,gi[39]=-1,mi[39]=0,vi[39]=1,bi[39]=1,_i[39]=0,wi[39]=0;var Yi=[],Xi=[],Zi=[],Qi=[],Ki=[],$i=[],to=[],eo=[];Qi[1]=Ki[1]=18,Qi[169]=Ki[169]=18,Zi[4]=Xi[4]=12,Zi[166]=Xi[166]=12,Yi[16]=eo[16]=4,Yi[154]=eo[154]=4,$i[64]=to[64]=22,$i[106]=to[106]=22,Zi[2]=$i[2]=17,Qi[2]=Ki[2]=18,Zi[168]=$i[168]=17,Qi[168]=Ki[168]=18,Yi[8]=Qi[8]=9,Xi[8]=Zi[8]=12,Yi[162]=Qi[162]=9,Xi[162]=Zi[162]=12,Yi[32]=eo[32]=4,Xi[32]=to[32]=1,Yi[138]=eo[138]=4,Xi[138]=to[138]=1,Ki[128]=eo[128]=21,$i[128]=to[128]=22,Ki[42]=eo[42]=21,$i[42]=to[42]=22,Xi[5]=Ki[5]=14,Xi[165]=Ki[165]=14,Zi[20]=eo[20]=6,Zi[150]=eo[150]=6,Yi[80]=$i[80]=11,Yi[90]=$i[90]=11,Qi[65]=to[65]=3,Qi[105]=to[105]=3,Yi[160]=$i[160]=11,Xi[160]=Ki[160]=14,Yi[10]=$i[10]=11,Xi[10]=Ki[10]=14,Zi[130]=eo[130]=6,Qi[130]=to[130]=3,Zi[40]=eo[40]=6,Qi[40]=to[40]=3,Xi[101]=to[101]=1,Xi[69]=to[69]=1,Ki[149]=eo[149]=21,Ki[21]=eo[21]=21,Zi[86]=$i[86]=17,Zi[84]=$i[84]=17,Yi[89]=Qi[89]=9,Yi[81]=Qi[81]=9,Yi[96]=to[96]=0,Xi[96]=$i[96]=15,Yi[74]=to[74]=0,Xi[74]=$i[74]=15,Yi[24]=Zi[24]=8,Qi[24]=eo[24]=7,Yi[146]=Zi[146]=8,Qi[146]=eo[146]=7,Xi[6]=$i[6]=15,Zi[6]=Ki[6]=16,Xi[164]=$i[164]=15,Zi[164]=Ki[164]=16,Qi[129]=eo[129]=7,Ki[129]=to[129]=20,Qi[41]=eo[41]=7,Ki[41]=to[41]=20,Zi[66]=to[66]=2,Qi[66]=$i[66]=19,Zi[104]=to[104]=2,Qi[104]=$i[104]=19,Yi[144]=Ki[144]=10,$i[144]=eo[144]=23,Yi[26]=Ki[26]=10,$i[26]=eo[26]=23,Xi[36]=eo[36]=5,Zi[36]=to[36]=2,Xi[134]=eo[134]=5,Zi[134]=to[134]=2,Yi[9]=Ki[9]=10,Xi[9]=Qi[9]=13,Yi[161]=Ki[161]=10,Xi[161]=Qi[161]=13,Xi[37]=eo[37]=5,Ki[37]=to[37]=20,Xi[133]=eo[133]=5,Ki[133]=to[133]=20,Zi[148]=Ki[148]=16,$i[148]=eo[148]=23,Zi[22]=Ki[22]=16,$i[22]=eo[22]=23,Yi[82]=Zi[82]=8,Qi[82]=$i[82]=19,Yi[88]=Zi[88]=8,Qi[88]=$i[88]=19,Yi[73]=to[73]=0,Xi[73]=Qi[73]=13,Yi[97]=to[97]=0,Xi[97]=Qi[97]=13,Yi[145]=Qi[145]=9,Ki[145]=eo[145]=21,Yi[25]=Qi[25]=9,Ki[25]=eo[25]=21,Xi[70]=to[70]=1,Zi[70]=$i[70]=17,Xi[100]=to[100]=1,Zi[100]=$i[100]=17,Yi[34]=Qi[34]=9,Xi[34]=Zi[34]=12,Ki[34]=eo[34]=21,$i[34]=to[34]=22,Yi[136]=eo[136]=4,Xi[136]=to[136]=1,Zi[136]=$i[136]=17,Qi[136]=Ki[136]=18,Yi[35]=eo[35]=4,Xi[35]=Zi[35]=12,Qi[35]=Ki[35]=18,$i[35]=to[35]=22,Yi[153]=eo[153]=4,Qi[153]=Ki[153]=18,Xi[102]=Zi[102]=12,$i[102]=to[102]=22,Yi[155]=Qi[155]=9,Ki[155]=eo[155]=23,Xi[103]=to[103]=1,Zi[103]=$i[103]=17,Yi[152]=eo[152]=4,Zi[152]=$i[152]=17,Qi[152]=Ki[152]=18,Yi[156]=Zi[156]=8,Qi[156]=Ki[156]=18,$i[156]=eo[156]=23,Yi[137]=eo[137]=4,Xi[137]=to[137]=1,Qi[137]=Ki[137]=18,Yi[139]=eo[139]=4,Xi[139]=Qi[139]=13,Ki[139]=to[139]=20,Yi[98]=Qi[98]=9,Xi[98]=Zi[98]=12,$i[98]=to[98]=22,Yi[99]=to[99]=0,Xi[99]=Zi[99]=12,Qi[99]=$i[99]=19,Xi[38]=Zi[38]=12,Ki[38]=eo[38]=21,$i[38]=to[38]=22,Xi[39]=eo[39]=5,Zi[39]=Ki[39]=16,$i[39]=to[39]=22;var no=[];function ro(t,e,n){return(t-e)/(n-e)}function io(t){return-1<t.constructor.toString().indexOf("Array")}function oo(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,l=e+r,u=n+i,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=i,l-=r,a=(s=t.cells[u][l]).cval_real,-1===i)if(0===o)if(a&yi)c.push([l,u]),r=-1,o=i=0;else{if(!(a&di)){c.push([l+s.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l+1,u]),r=1,o=i=0}else{if(!(a&yi)){if(a&di){c.push([l+s.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l+s.bottomleft,u]),i=1,h=!(o=r=0);break}c.push([l,u]),r=-1,o=i=0}else if(1===i)if(0===o){if(!(a&pi)){if(a&fi){c.push([l+s.topleft,u+1]),i=-1,h=!(o=r=0);break}c.push([l+s.topright,u+1]),i=-1,o=1,h=!(r=0);break}c.push([l+1,u+1]),i=0,o=r=1}else c.push([l+1,u+1]),i=0,o=r=1;else if(-1===r)if(0===o){if(!(a&fi)){if(a&yi){c.push([l,u+s.leftbottom]),r=1,h=!(o=i=0);break}c.push([l,u+s.lefttop]),o=r=1,h=!(i=0);break}c.push([l,u+1]),i=1,o=r=0}else{if(!(a&fi)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),i=1,o=r=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&di)){c.push([l+1,u+s.rightbottom]),r=-1,h=!(o=i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}else{if(!(a&di)){if(a&pi){c.push([l+1,u+s.righttop]),r=-1,i=0,o=1;break}c.push([l+1,u+s.rightbottom]),r=-1,h=!(o=i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}}else if(a=(s=t.cells[u][l]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])r=0,i=-1,o=1;else{if(!(a&yi)){c.push([l+s.bottomright,u]),o=i=1,h=!(r=0);break}c.push([l,u])}else{if(!(a&fi)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])i=1,o=r=0;else{if(!(a&pi)){c.push([l+s.topleft,u+1]),i=-1,h=!(o=r=0);break}c.push([l+1,u+1]),i=0,o=r=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])i=0,o=r=1;else{if(!(a&di)){c.push([l+1,u+s.righttop]),r=-1,o=1,h=!(i=0);break}c.push([l+1,u]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])r=-1,o=i=0;else{if(!(a&fi)){c.push([l,u+s.leftbottom]),r=1,h=!(o=i=0);break}c.push([l,u+1]),i=1,o=r=0}}if(u+=i,(l+=r)===e&&u===n)break}return{path:c,i:l,j:u,x:r,y:i,o:o}}function so(t){if(0<t.edges.length){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&pi?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&di?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&di?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&yi?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&pi?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&di?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&di?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&yi?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&di?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&yi?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&yi?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&fi?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&di?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&yi?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&yi?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&fi?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&di?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&fi?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&yi?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&fi?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&fi?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&pi?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&fi?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&pi?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function ao(t,e,n,r){var i,o,s,a,l,u=t.cval;switch(e){case-1:switch(r){case 0:i=Xi[u],s=Oi[u],a=Ci[u],l=Pi[u];break;default:i=Yi[u],s=Si[u],a=xi[u],l=Ei[u]}break;case 1:switch(r){case 0:i=Ki[u],s=Di[u],a=Fi[u],l=Bi[u];break;default:i=$i[u],s=Ii[u],a=Ri[u],l=ji[u]}break;default:switch(n){case-1:switch(r){case 0:i=to[u],s=gi[u],a=mi[u],l=vi[u];break;default:i=eo[u],s=bi[u],a=_i[u],l=wi[u]}break;case 1:switch(r){case 0:i=Qi[u],s=Ti[u],a=Mi[u],l=Li[u];break;default:i=Zi[u],s=Ni[u],a=ki[u],l=Ai[u]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,i){case 0:n=u&pi?(e=t.topleft,1):(e=1,t.righttop);break;case 1:n=u&di?(e=1,t.rightbottom):(e=t.topleft,1);break;case 2:n=u&di?(e=t.topleft,1):(e=t.bottomright,0);break;case 3:n=u&yi?(e=t.bottomleft,0):(e=t.topleft,1);break;case 4:n=u&pi?(e=t.topright,1):(e=1,t.righttop);break;case 5:n=u&di?(e=1,t.rightbottom):(e=t.topright,1);break;case 6:n=u&di?(e=t.topright,1):(e=t.bottomright,0);break;case 7:n=u&yi?(e=t.bottomleft,0):(e=t.topright,1);break;case 8:n=u&di?(e=1,t.righttop):(e=t.bottomright,0);break;case 9:n=u&yi?(e=t.bottomleft,0):(e=1,t.righttop);break;case 10:n=u&yi?(e=1,t.righttop):(e=0,t.leftbottom);break;case 11:n=u&fi?(e=0,t.lefttop):(e=1,t.righttop);break;case 12:n=u&di?(e=1,t.rightbottom):(e=t.bottomright,0);break;case 13:n=u&yi?(e=t.bottomleft,0):(e=1,t.rightbottom);break;case 14:n=u&yi?(e=1,t.rightbottom):(e=0,t.leftbottom);break;case 15:n=u&fi?(e=0,t.lefttop):(e=1,t.rightbottom);break;case 16:n=u&di?(e=0,t.leftbottom):(e=t.bottomright,0);break;case 17:n=u&fi?(e=0,t.lefttop):(e=t.bottomright,0);break;case 18:n=u&yi?(e=t.bottomleft,0):(e=0,t.leftbottom);break;case 19:n=u&fi?(e=0,t.lefttop):(e=t.bottomleft,0);break;case 20:n=u&fi?(e=0,t.leftbottom):(e=t.topleft,1);break;case 21:n=u&pi?(e=t.topright,1):(e=0,t.leftbottom);break;case 22:n=u&fi?(e=0,t.lefttop):(e=t.topleft,1);break;case 23:n=u&pi?(e=t.topright,1):(e=0,t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+l)),{p:[e,n],x:s,y:a,o:l}}function lo(t){var n=[],r=[];t.forEach(function(t){var e=sr(B([t]));r.push(e),n.push({ring:t,area:e})}),r.sort(function(t,e){return e-t});var i=[];return r.forEach(function(t){for(var e=0;e<n.length;e++)if(n[e].area===t){i.push(n[e].ring),n.splice(e,1);break}}),i}function uo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!ho(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=B([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||co(B([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function co(t,e){for(var n=Qe(t),r=0;r<n.features.length;r++)if(!ie(n.features[r],e))return;return 1}function ho(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return;return 1}function fo(t,i,e){if(!J(e=e||{}))throw new Error("options is invalid");var o=e.pivot,n=e.mutate;if(!t)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");return 0===i||(o=o||Ze(t),!1!==n&&void 0!==n||(t=fe(t)),O(t,function(t){var e=Jn(o,t)+i,n=Xn(o,t),r=Z(ni(o,n,e));t[0]=r[0],t[1]=r[1]})),t}function po(n,r,t){if(!J(t=t||{}))throw new Error("options is invalid");var i=t.origin,e=t.mutate;if(!n)throw new Error("geojson required");if("number"!=typeof r||0===r)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==e&&(n=fe(n)),"FeatureCollection"!==n.type||o?yo(n,r,i):(M(n,function(t,e){n.features[e]=yo(t,r,i)}),n)}function yo(t,i,o){var e="Point"===rt(t);return o=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return X(e);var n=t.bbox?t.bbox:Y(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return q([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return q([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return q([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return q([o,s]);case"center":return Xe(t);case void 0:case null:case"centroid":return Ze(t);default:throw new Error("invalid origin")}}(t,o),1===i||e||O(t,function(t){var e=Xn(o,t),n=Jn(o,t),r=Z(ni(o,e*i,n));t[0]=r[0],t[1]=r[1],3===t.length&&(t[2]*=i)}),t}function go(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function mo(t,e){return t[0]*e[1]-e[0]*t[1]}function vo(t,e,n){var _=[],w=h(e,n),S=Z(t),x=[];return S.forEach(function(t,e){if(e!==S.length-1){var n=(d=t,y=S[e+1],g=w,m=Math.sqrt((d[0]-y[0])*(d[0]-y[0])+(d[1]-y[1])*(d[1]-y[1])),v=d[0]+g*(y[1]-d[1])/m,b=y[0]+g*(y[1]-d[1])/m,[[v,d[1]+g*(d[0]-y[0])/m],[b,y[1]+g*(d[0]-y[0])/m]]);if(_.push(n),0<e){var r=_[e-1],i=(s=r,0!==mo(go(o=n),go(s))&&(u=o[0],c=go(o),h=s[0],p=mo(c,f=go(s)),a=[(l=mo([h[0]-u[0],h[1]-u[1]],f)/p)*c[0],l*c[1]],[u[0]+a[0],u[1]+a[1]]));!1!==i&&(r[1]=i,n[0]=i),x.push(r[0]),e===S.length-2&&(x.push(n[0]),x.push(n[1]))}2===S.length&&(x.push(n[0]),x.push(n[1]))}var o,s,a,l,u,c,h,f,p,d,y,g,m,v,b}),V(x,t.properties)}function bo(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(r*s-o*i)}function _o(e,t){return t.geometry.coordinates[0].every(function(t){return ie(q(t),e)})}function wo(t){this.id=wo.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}function So(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}function xo(){this.edges=[],this.polygon=void 0,this.envelope=void 0}no[1]=no[169]=Gi,no[4]=no[166]=Ui,no[16]=no[154]=zi,no[64]=no[106]=qi,no[168]=no[2]=Vi,no[162]=no[8]=Hi,no[138]=no[32]=Wi,no[42]=no[128]=Ji,no[5]=no[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},no[20]=no[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},no[80]=no[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},no[65]=no[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},no[160]=no[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},no[130]=no[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},no[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},no[101]=no[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},no[149]=no[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},no[86]=no[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},no[89]=no[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},no[96]=no[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},no[24]=no[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},no[6]=no[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},no[129]=no[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},no[66]=no[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},no[144]=no[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},no[36]=no[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},no[9]=no[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},no[37]=no[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},no[148]=no[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},no[82]=no[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},no[73]=no[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},no[145]=no[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},no[70]=no[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},no[34]=function(t){return[Ji(t),Hi(t)]},no[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},no[136]=function(t){return[Wi(t),Vi(t)]},no[153]=function(t){return[zi(t),Gi(t)]},no[102]=function(t){return[Ui(t),qi(t)]},no[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},no[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},no[152]=function(t){return[zi(t),Vi(t)]},no[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},no[137]=function(t){return[Wi(t),Gi(t)]},no[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},no[98]=function(t){return[Hi(t),qi(t)]},no[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},no[38]=function(t){return[Ui(t),Ji(t)]},no[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},wo.buildId=function(t){return t.join(",")},wo.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},wo.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},wo.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},wo.prototype.sortOuterEdges=function(){var o=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,e){var n=t.to,r=e.to;if(0<=n.coordinates[0]-o.coordinates[0]&&r.coordinates[0]-o.coordinates[0]<0)return 1;if(n.coordinates[0]-o.coordinates[0]<0&&0<=r.coordinates[0]-o.coordinates[0])return-1;if(n.coordinates[0]-o.coordinates[0]==0&&r.coordinates[0]-o.coordinates[0]==0)return 0<=n.coordinates[1]-o.coordinates[1]||0<=r.coordinates[1]-o.coordinates[1]?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var i=bo(o.coordinates,n.coordinates,r.coordinates);return i<0?1:0<i?-1:Math.pow(n.coordinates[0]-o.coordinates[0],2)+Math.pow(n.coordinates[1]-o.coordinates[1],2)-(Math.pow(r.coordinates[0]-o.coordinates[0],2)+Math.pow(r.coordinates[1]-o.coordinates[1],2))}),this.outerEdgesSorted=!0)},wo.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},wo.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},wo.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},So.prototype.getSymetric=function(){return this.symetric||(this.symetric=new So(this.to,this.from),this.symetric.symetric=this),this.symetric},So.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},So.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},So.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},So.prototype.toLineString=function(){return V([this.from.coordinates,this.to.coordinates])},So.prototype.compareTo=function(t){return bo(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Eo={length:{configurable:!0}};function Oo(){this.edges=[],this.nodes={}}function Co(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(r=t.coordinates[n],i=t.coordinates[n+1],o=e.coordinates,0,s=o[0]-r[0],a=o[1]-r[1],l=i[0]-r[0],u=i[1]-r[1],0==s*u-a*l&&(Math.abs(l)>=Math.abs(u)?0<l?r[0]<=o[0]&&o[0]<=i[0]:i[0]<=o[0]&&o[0]<=r[0]:0<u?r[1]<=o[1]&&o[1]<=i[1]:i[1]<=o[1]&&o[1]<=r[1]))return 1;var r,i,o,s,a,l,u}function Po(t,e){return 0<Vn(e,Fr(t)).features.length}function To(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Mo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Lo(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Ao(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function No(t,e){return 0<Vn(t,Fr(e)).features.length}function ko(t,e){for(var n=!1,r=!1,i=t.coordinates[0].length,o=0;o<i&&n&&r;)ie(q(t.coordinates[0][o]),e)?n=!0:r=!0,o++;return r&&r}function Ao(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?0<s?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<a?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?0<s?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:0<a?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Io(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Go}xo.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},xo.prototype.get=function(t){return this.edges[t]},Eo.length.get=function(){return this.edges.length},xo.prototype.forEach=function(t){this.edges.forEach(t)},xo.prototype.map=function(t){return this.edges.map(t)},xo.prototype.some=function(t){return this.edges.some(t)},xo.prototype.isValid=function(){return!0},xo.prototype.isHole=function(){var r=this,t=this.edges.reduce(function(t,e,n){return e.from.coordinates[1]>r.edges[t].from.coordinates[1]&&(t=n),t},0),e=(0===t?this.length:t)-1,n=(t+1)%this.length,i=bo(this.edges[e].from.coordinates,this.edges[t].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[e].from.coordinates[0]>this.edges[n].from.coordinates[0]:0<i},xo.prototype.toMultiPoint=function(){return l(this.edges.map(function(t){return t.from.coordinates}))},xo.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=B([t])},xo.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Ve(this.toPolygon())},xo.findEdgeRingContaining=function(u,t){var c,h,f=u.getEnvelope();return t.forEach(function(t){var e,n,r,i,o,s,a=t.getEnvelope();if(h&&(c=h.getEnvelope()),n=f,r=(e=a).geometry.coordinates.map(function(t){return t[0]}),i=e.geometry.coordinates.map(function(t){return t[1]}),o=n.geometry.coordinates.map(function(t){return t[0]}),s=n.geometry.coordinates.map(function(t){return t[1]}),(Math.max(null,r)!==Math.max(null,o)||Math.max(null,i)!==Math.max(null,s)||Math.min(null,r)!==Math.min(null,o)||Math.min(null,i)!==Math.min(null,s))&&_o(a,f)){var l=u.map(function(t){return t.from.coordinates}).find(function(n){return!t.some(function(t){return e=t.from.coordinates,n[0]===e[0]&&n[1]===e[1];var e})});l&&t.inside(q(l))&&(h&&!_o(c,a)||(h=t))}}),h},xo.prototype.inside=function(t){return ie(t,this.toPolygon())},Object.defineProperties(xo.prototype,Eo),Oo.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var i=new Oo;return I(t,function(t){$(t,"LineString","Graph::fromGeoJson"),C(t,function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e);i.addEdge(n,r)}return e})}),i},Oo.prototype.getNode=function(t){var e=wo.buildId(t),n=this.nodes[e];return n||(this.nodes[e]=new wo(t))},Oo.prototype.addEdge=function(t,e){var n=new So(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},Oo.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},Oo.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},Oo.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},Oo.prototype._computeNextCWEdges=function(n){var e=this;void 0===n?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):n.getOuterEdges().forEach(function(t,e){n.getOuterEdge((0===e?n.getOuterEdges().length:e)-1).symetric.next=t})},Oo.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;0<=o;--o){var s=i[o],a=s.symetric,l=void 0,u=void 0;s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n=n||l))}r&&(r.next=n)},Oo.prototype._findLabeledEdgeRings=function(){var n=[],r=0;return this.edges.forEach(function(t){if(!(0<=t.label)){n.push(t);for(var e=t;e.label=r,e=e.next,!t.isEqual(e););r++}}),n},Oo.prototype.getEdgeRings=function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){n._findIntersectionNodes(e).forEach(function(t){n._computeNextCCWEdges(t,e.label)})});var e=[];return this.edges.forEach(function(t){t.ring||e.push(n._findEdgeRing(t))}),e},Oo.prototype._findIntersectionNodes=function(n){for(var t=[],r=n,e=function(){var e=0;r.from.getOuterEdges().forEach(function(t){t.label===n.label&&++e}),1<e&&t.push(r.from),r=r.next};e(),!n.isEqual(r););return t},Oo.prototype._findEdgeRing=function(t){for(var e=t,n=new xo;n.push(e),e.ring=n,e=e.next,!t.isEqual(e););return n},Oo.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},Oo.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()};var Ro=Mt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),jo=(Ro.shim,Mt(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),Do=(jo.supported,jo.unsupported,Mt(function(t){var a=Array.prototype.slice,l=t.exports=function(t,e,n){return n=n||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var r,i;if(u(t)||u(e))return!1;if(t.prototype!==e.prototype)return!1;if(jo(t))return!!jo(e)&&(t=a.call(t),e=a.call(e),l(t,e,n));if(c(t)){if(!c(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Ro(t),s=Ro(e)}catch(t){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;0<=r;r--)if(o[r]!=s[r])return!1;for(r=o.length-1;0<=r;r--)if(i=o[r],!l(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))};function u(t){return null==t}function c(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0])}}));function Fo(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function Bo(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Go(t,e){return Do(t,e,{strict:!0})}Io.prototype.compare=function(t,e){if(t.type!==e.type||!Bo(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Fo(t),i=Fo(e);return r.every(function(e){return this.some(function(t){return n.compare(e,t)})},i)}}return!1},Io.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Io.prototype.compareLine=function(t,e,n,r){if(!Bo(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Io.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return 0<=r&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Io.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},Io.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(e){return this.some(function(t){return i.compareLine(e,t,1,!0)})},r)}return!1},Io.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Io.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Io.prototype.removePseudo=function(t){return t};var Uo=Io;function zo(t,n){if(!t)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");var e=rt(t);if(e!==rt(n))throw new Error("features must be of the same type");if("Point"===e)throw new Error("Point geometry not supported");if(new Uo({precision:6}).compare(t,n))return!1;var r=0;switch(e){case"MultiPoint":var i=N(t),o=N(n);i.forEach(function(e){o.forEach(function(t){e[0]===t[0]&&e[1]===t[1]&&r++})});break;case"LineString":case"MultiLineString":j(t,function(e){j(n,function(t){$r(e,t).features.length&&r++})});break;case"Polygon":case"MultiPolygon":j(t,function(e){j(n,function(t){Vn(e,t).features.length&&r++})})}return 0<r}var qo=Mt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Vo=Mt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,l=0;l<c;l++)s[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)s[l]+=this.dataset[u][l];a++}}if(0<a){for(l=0;l<c;l++)s[l]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){for(var t,e,n=this.dataset.length-1;e=Math.round(Math.random()*n),t=this.dataset[e],0<=this.centroids.indexOf(t););return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ho=Mt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?i<e&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Wo=Mt(function(t){if(t.exports)var u=Ho;function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0,o=this.dataset.length;i<o;i++)if(1!==this._processed[i]){this._processed[i]=1,this.clusters.push([i]);var s=this.clusters.length-1;this._orderedList.push(i);var a=new u(null,null,"asc"),l=this._regionQuery(i);void 0!==this._distanceToCore(i)&&(this._updateQueue(i,l,a),this._expandCluster(s,a))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(r,t,i){var o=this;this._coreDistance=this._distanceToCore(r),t.forEach(function(t){if(void 0===o._processed[t]){var e=o.distance(o.dataset[r],o.dataset[t]),n=Math.max(o._coreDistance,e);void 0===o._reachability[t]?(o._reachability[t]=n,i.insert(t,n)):n<o._reachability[t]&&(o._reachability[t]=n,i.remove(t),i.insert(t,n))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Jo=Mt(function(t){t.exports&&(t.exports={DBSCAN:qo,KMEANS:Vo,OPTICS:Wo,PriorityQueue:Ho})});function Yo(t,e,n){var r=Math.abs(t-e);return n?r:r*r}Jo.DBSCAN,Jo.KMEANS,Jo.OPTICS,Jo.PriorityQueue;function Xo(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i}var Zo=Xo,Qo=Xo;function Ko(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function $o(t,e,n,r){var i=[],o=[],s=[],a=[],l=!1,u=r||1e4,c=t.length,h=t[0].length,f=0<h,p=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=0<t[0].length;r.length<e&&0<i--;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;n[l]||(n[l]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Zo:Yo,r=[],i=t.length,o=0<t[0].length,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],l=r.length,u=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<l;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}a[h]=f}for(var y=0;y<i;y++)u+=a[y];for(var g=0;g<i;g++)c[g]={i:g,v:t[g],pr:a[g]/u,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var m=1;m<i;m++)c[m].cs=c[m-1].cs+c[m].pr;for(var v=Math.random(),b=0;b<i-1&&c[b++].cs<v;);r.push(c[b-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var y=Math.floor(Math.random()*c);d[y]||(d[y]=!0,i.push(t[y]))}do{Ko(e,0,p);for(var g=0;g<c;g++){for(var m=1/0,v=0,b=0;b<e;b++)(a=f?Qo(t[g],i[b]):Math.abs(t[g]-i[b]))<=m&&(m=a,v=b);p[s[g]=v]++}for(var _=[],w=(o=[],0);w<e;w++)_[w]=f?Ko(h,0,_[w]):0,o[w]=i[w];if(f){for(var S=0;S<e;S++)i[S]=[];for(var x=0;x<c;x++)for(var E=_[s[x]],O=t[x],C=0;C<h;C++)E[C]+=O[C];l=!0;for(var P=0;P<e;P++){for(var T=i[P],M=_[P],L=o[P],N=p[P],k=0;k<h;k++)T[k]=M[k]/N||0;if(l)for(var A=0;A<h;A++)if(L[A]!=T[A]){l=!1;break}}}else{for(var I=0;I<c;I++)_[s[I]]+=t[I];for(var R=0;R<e;R++)i[R]=_[R]/p[R]||0;l=!0;for(var j=0;j<e;j++)if(o[j]!=i[j]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:e,idxs:s,centroids:i}}function ts(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function es(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var ns={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||ns.heuristics.manhattan,o=r.closest||!1,s=new os(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);0<s.size();){var l=s.pop();if(l===n)return es(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var f=u[c];if(!f.closed&&!f.isWall()){var p=l.g+f.getCost(l),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?es(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return+(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function rs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new is(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function is(t,e,n){this.x=t,this.y=e,this.weight=n}function os(t){this.content=[],this.scoreFunction=t}function ss(t,e){for(var n=0;n<e.features.length;n++)if(ie(t,e.features[n]))return!0;return!1}function as(t){return function(){return t}}function ls(t){return t[0]}function us(t){return t[1]}function cs(){this._=null}function hs(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function fs(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ps(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ds(t){for(;t.L;)t=t.L;return t}function ys(t,e,n,r){var i=[null,null],o=Ds.push(i)-1;return i.left=t,i.right=e,n&&ms(i,t,e,n),r&&ms(i,e,t,r),Rs[t.index].halfedges.push(o),Rs[e.index].halfedges.push(o),i}function gs(t,e,n){var r=[e,n];return r.left=t,r}function ms(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function vs(t,e,n,r,i){var o,s=t[0],a=t[1],l=s[0],u=s[1],c=0,h=1,f=a[0]-l,p=a[1]-u;if(o=e-l,f||!(0<o)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(0<f){if(h<o)return;c<o&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(h<o)return;c<o&&(c=o)}else if(0<f){if(o<c)return;o<h&&(h=o)}if(o=n-u,p||!(0<o)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(0<p){if(h<o)return;c<o&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(h<o)return;c<o&&(c=o)}else if(0<p){if(o<c)return;o<h&&(h=o)}return(0<c||h<1)&&(0<c&&(t[0]=[l+c*f,u+c*p]),h<1&&(t[1]=[l+h*f,u+h*p])),1}}}}}function bs(t,e,n,r,i){var o=t[1];if(o)return 1;var s,a,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],p=c[0],d=c[1],y=(h+p)/2,g=(f+d)/2;if(d===f){if(y<e||r<=y)return;if(p<h){if(l){if(l[1]>=i)return}else l=[y,n];o=[y,i]}else{if(l){if(l[1]<n)return}else l=[y,i];o=[y,n]}}else if(a=g-(s=(h-p)/(d-f))*y,s<-1||1<s)if(p<h){if(l){if(l[1]>=i)return}else l=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(l){if(l[1]<n)return}else l=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(l){if(l[0]>=r)return}else l=[e,s*e+a];o=[r,s*r+a]}else{if(l){if(l[0]<e)return}else l=[r,s*r+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,1}function _s(t,e){return e[+(e.left!==t.site)]}rs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)ns.cleanNode(this.nodes[t])},rs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)ns.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},rs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},rs.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},rs.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},is.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},is.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},is.prototype.isWall=function(){return 0===this.weight},os.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];0<t;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var l=this.content[s];(i=this.scoreFunction(l))<r&&(a=s)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},cs.prototype={constructor:cs,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=ds(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(fs(this,n),n=(t=n).U),n.C=!1,r.C=!0,ps(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ps(this,n),n=(t=n).U),n.C=!1,r.C=!0,fs(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ds(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,((n.L=o).U=n)!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,(n.R=s).U=n):(n.U=i,t=(i=n).R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,fs(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ps(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,fs(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ps(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,fs(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ps(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}};var ws,Ss=[];function xs(){hs(this),this.x=this.y=this.arc=this.site=this.cy=null}function Es(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],l=r[0]-s,u=r[1]-a,c=o[0]-s,h=o[1]-a,f=2*(l*h-u*c);if(!(-Bs<=f)){var p=l*l+u*u,d=c*c+h*h,y=(h*p-u*d)/f,g=(l*d-c*p)/f,m=Ss.pop()||new xs;m.arc=t,m.site=i,m.x=y+s,m.y=(m.cy=g+a)+Math.sqrt(y*y+g*g),t.circle=m;for(var v=null,b=js._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}js.insert(v,m),v||(ws=m)}}}}function Os(t){var e=t.circle;e&&(e.P||(ws=e.N),js.remove(e),Ss.push(e),hs(e),t.circle=null)}var Cs=[];function Ps(){hs(this),this.edge=this.site=this.circle=null}function Ts(t){var e=Cs.pop()||new Ps;return e.site=t,e}function Ms(t){Os(t),Is.remove(t),Cs.push(t),hs(t)}function Ls(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Ms(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Fs&&Math.abs(r-l.circle.cy)<Fs;)o=l.P,a.unshift(l),Ms(l),l=o;a.unshift(l),Os(l);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<Fs&&Math.abs(r-u.circle.cy)<Fs;)s=u.N,a.push(u),Ms(u),u=s;a.push(u),Os(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],ms(u.edge,l.site,u.site,i);l=a[0],(u=a[h-1]).edge=ys(l.site,u.site,null,i),Es(l),Es(u)}function Ns(t){for(var e,n,r,i,o=t[0],s=t[1],a=Is._;a;)if(r=ks(a,s)-o,Fs<r)a=a.L;else{if(i=o-As(a,s),!(Fs<i)){-Fs<r?(e=a.P,n=a):-Fs<i?n=(e=a).N:e=n=a;break}if(!a.R){e=a;break}a=a.R}Rs[t.index]={site:t,halfedges:[]};var l=Ts(t);if(Is.insert(e,l),e||n){if(e===n)return Os(e),n=Ts(e.site),Is.insert(l,n),l.edge=n.edge=ys(e.site,l.site),Es(e),void Es(n);if(n){Os(e),Os(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,p=t[1]-h,d=n.site,y=d[0]-c,g=d[1]-h,m=2*(f*g-p*y),v=f*f+p*p,b=y*y+g*g,_=[(g*v-p*b)/m+c,(f*b-y*v)/m+h];ms(n.edge,u,d,_),l.edge=ys(u,t,null,_),n.edge=ys(t,d,null,_),Es(e),Es(n)}else l.edge=ys(e.site,l.site)}}function ks(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],u=l-e;if(!u)return a;var c=a-r,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+a)/2}function As(t,e){var n=t.N;if(n)return ks(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Is,Rs,js,Ds,Fs=1e-6,Bs=1e-12;function Gs(t,e){return e[1]-t[1]||e[0]-t[0]}function Us(t,e){var n,r,i,o=t.sort(Gs).pop();for(Ds=[],Rs=new Array(t.length),Is=new cs,js=new cs;;)if(i=ws,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ns(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Ls(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Rs.length;i<o;++i)if((t=Rs[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=(l=Ds[e[n]],h=c=void 0,u=t.site,c=l.left,u===(h=l.right)&&(h=c,c=u),h?Math.atan2(h[1]-c[1],h[0]-c[0]):(h=u===c?(c=l[1],l[0]):(c=l[0],l[1]),Math.atan2(c[0]-h[0],h[1]-c[1])));for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}var l,u,c,h}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=Ds.length;o--;)bs(i=Ds[o],t,e,n,r)&&vs(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Fs||Math.abs(i[0][1]-i[1][1])>Fs)||delete Ds[o]}(s,a,l,u),function(t,e,n,r){var i,o,s,a,l,u,c,h,f,p,d,y,g,m=Rs.length,v=!0;for(i=0;i<m;++i)if(o=Rs[i]){for(s=o.site,a=(l=o.halfedges).length;a--;)Ds[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)d=(p=(g=Ds[l[a]])[+(g.left===o.site)])[0],y=p[1],h=(c=_s(o,Ds[l[++a%u]]))[0],f=c[1],(Math.abs(d-h)>Fs||Math.abs(y-f)>Fs)&&(l.splice(a,0,Ds.push(gs(s,p,Math.abs(d-t)<Fs&&Fs<r-y?[t,Math.abs(h-t)<Fs?f:r]:Math.abs(y-r)<Fs&&Fs<n-d?[Math.abs(f-r)<Fs?h:n,r]:Math.abs(d-n)<Fs&&Fs<y-e?[n,Math.abs(h-n)<Fs?f:e]:Math.abs(y-e)<Fs&&Fs<d-t?[Math.abs(f-e)<Fs?h:t,e]:null))-1),++u);u&&(v=!1)}if(v){var b,_,w,S=1/0;for(i=0,v=null;i<m;++i)(o=Rs[i])&&(w=(b=(s=o.site)[0]-t)*b+(_=s[1]-e)*_)<S&&(S=w,v=o);if(v){var x=[t,e],E=[t,r],O=[n,r],C=[n,e];v.halfedges.push(Ds.push(gs(s=v.site,x,E))-1,Ds.push(gs(s,E,O))-1,Ds.push(gs(s,O,C))-1,Ds.push(gs(s,C,x))-1)}}for(i=0;i<m;++i)(o=Rs[i])&&(o.halfedges.length||delete Rs[i])}(s,a,l,u)}this.edges=Ds,this.cells=Rs,Is=js=Ds=Rs=null}function zs(t){return(t=t.slice()).push(t[0]),B([t])}function qs(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!J(r))throw new Error("options must be an object");if(!W(i))throw new Error("steps must be a number");if(!W(s))throw new Error("angle must be a number");var u=X(t);if("degrees"===o)var c=v(s);else e=ni(t,e,90,{units:o}),n=ni(t,n,0,{units:o}),e=X(e)[0]-u[0],n=X(n)[1]-u[1];for(var h=[],f=0;f<i;f+=1){var p=-360*f/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Vs(p),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Vs(p),2));if(p<-90&&-270<=p&&(d=-d),p<-180&&-360<=p&&(y=-y),"degrees"===o){var g=d*Math.cos(c)+y*Math.sin(c),m=y*Math.cos(c)-d*Math.sin(c);d=g,y=m}h.push([d+u[0],y+u[1]])}return h.push(h[0]),"degrees"===o?B([h],l):fo(B([h],l),s,{pivot:a})}function Vs(t){var e=t*Math.PI/180;return Math.tan(e)}function Hs(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return k(t,function(t,e,n){var r=n[i];if(!W(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);0<(r=Number(r))&&O(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),q([o/a,s/a],n)}function Ws(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Js(t){if(J(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?(e=t,[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]):[360*Ks(),180*Ks()];var e}function Ys(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null==t&&(t=1);for(var r=[],i=0;i<t;i++)r.push(q(Js(n)));return H(r)}function Xs(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;null==t&&(t=1),W(r)||(r=10),W(i)||(i=10);for(var o=[],s=0;s<t;s++){var a=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach(u),l.forEach(c),a[a.length-1]=a[0],a=a.map(Qs(Js(n))),o.push(B([a]))}function u(t,e,n){n[e]=0<e?t+n[e-1]:t}function c(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();a.push([e*i*Math.sin(t),e*i*Math.cos(t)])}return H(o)}function Zs(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!W(r)||r<2)&&(r=10),W(i)||(i=1e-4),W(o)||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var l=[Js(n)],u=0;u<r-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;l.push([l[u][0]+h*Math.cos(c),l[u][1]+h*Math.sin(c)])}s.push(V(l))}return H(s)}function Qs(e){return function(t){return[t[0]+e[0],t[1]+e[1]]}}function Ks(){return Math.random()-.5}Us.prototype={constructor:Us,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return _s(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var u=[],c=this.edges;return this.cells.forEach(function(t,e){if(r=(n=t.halfedges).length)for(var n,r,i,o=t.site,s=-1,a=c[n[r-1]],l=a.left===o?a.right:a.left;++s<r;)i=l,l=(a=c[n[s]]).left===o?a.right:a.left,i&&l&&e<i.index&&e<l.index&&(o[0]-l[0])*(i[1]-o[1])-(o[0]-i[0])*(l[1]-o[1])<0&&u.push([o.data,i.data,l.data])}),u},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(s,a,t){for(var e,l,u=this,c=u._found||0,n=u.cells.length;!(l=u.cells[c]);)if(++c>=n)return null;for(var r=s-l.site[0],i=a-l.site[1],h=r*r+i*i;l=u.cells[e=c],c=null,l.halfedges.forEach(function(t){var e=u.edges[t],n=e.left;if(n!==l.site&&n||(n=e.right)){var r=s-n[0],i=a-n[1],o=r*r+i*i;o<h&&(h=o,c=n.index)}}),null!==c;);return u._found=e,null==t||h<=t*t?l.site:null}};var $s=Object.freeze({randomPosition:Js,randomPoint:Ys,randomPolygon:Xs,randomLineString:Zs});function ta(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return M(t,function(t){ia(t.properties,e)&&n.push(t)}),H(n)}function ea(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=ra(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],l=[],u=0;u<a.length;u++)l.push(t.features[a[u]]);n(H(l),s,o)}}function na(t,e,r,i){var o=i;return ea(t,e,function(t,e,n){o=0===n&&void 0===i?t:r(o,t,e,n)}),o}function ra(t,i){var o={};return M(t,function(t,e){var n=t.properties||{};if(n.hasOwnProperty(i)){var r=n[i];o.hasOwnProperty(r)?o[r].push(e):o[r]=[e]}}),o}function ia(t,e){if(void 0===t)return!1;var n=typeof e;if("number"==n||"string"==n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!ia(t,e[r]))return!1;return!0}return oa(t,e)}function oa(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function sa(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}var aa=Object.freeze({getCluster:ta,clusterEach:ea,clusterReduce:na,createBins:ra,applyFilter:ia,propertiesContainsFilter:oa,filterProperties:sa});function la(){}function ua(){}function ca(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t,e,n){if(null==this)throw new TypeError(this+" is not an object");var r=Object(this),i=Math.max(Math.min(r.length,9007199254740991),0)||0,o=1 in arguments&&parseInt(Number(e),10)||0;o=o<0?Math.max(i+o,0):Math.min(o,i);var s=2 in arguments&&void 0!==n?parseInt(Number(n),10)||0:i;for(s=s<0?Math.max(i+n,0):Math.min(s,i);o<s;)r[o]=t,++o;return r},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},la.prototype.interfaces_=function(){return[]},la.prototype.getClass=function(){return la},la.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var ha={MAX_VALUE:{configurable:!0}};function fa(){}function pa(){}function da(){}function ya(){}function ga(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=ga.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=ga.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])}ca.isNaN=function(t){return Number.isNaN(t)},ca.doubleToLongBits=function(t){return t},ca.longBitsToDouble=function(t){return t},ca.isInfinite=function(t){return!Number.isFinite(t)},ha.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(ca,ha);var ma={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ga.prototype.setOrdinate=function(t,e){switch(t){case ga.X:this.x=e;break;case ga.Y:this.y=e;break;case ga.Z:this.z=e;break;default:throw new ua}},ga.prototype.equals2D=function(t,e){if(1===arguments.length)return this.x===t.x&&this.y===t.y;if(2===arguments.length){var n=t,r=e;return!!la.equalsWithTolerance(this.x,n.x,r)&&!!la.equalsWithTolerance(this.y,n.y,r)}},ga.prototype.getOrdinate=function(t){switch(t){case ga.X:return this.x;case ga.Y:return this.y;case ga.Z:return this.z}throw new ua},ga.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||ca.isNaN(this.z))&&ca.isNaN(t.z)},ga.prototype.equals=function(t){return t instanceof ga&&this.equals2D(t)},ga.prototype.equalInZ=function(t,e){return la.equalsWithTolerance(this.z,t.z,e)},ga.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},ga.prototype.clone=function(){},ga.prototype.copy=function(){return new ga(this)},ga.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ga.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},ga.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},ga.prototype.hashCode=function(){var t=17;return 37*(t=37*t+ga.hashCode(this.x))+ga.hashCode(this.y)},ga.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ga.prototype.interfaces_=function(){return[fa,pa,ya]},ga.prototype.getClass=function(){return ga},ga.hashCode=function(t){if(1===arguments.length){var e=ca.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},ma.DimensionalComparator.get=function(){return va},ma.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},ma.NULL_ORDINATE.get=function(){return ca.NaN},ma.X.get=function(){return 0},ma.Y.get=function(){return 1},ma.Z.get=function(){return 2},Object.defineProperties(ga,ma);var va=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){if(2!==t&&3!==t)throw new ua;this._dimensionsToTest=t}};function ba(){}function _a(){}va.prototype.compare=function(t,e){var n=t,r=e,i=va.compare(n.x,r.x);if(0!==i)return i;var o=va.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:va.compare(n.z,r.z)},va.prototype.interfaces_=function(){return[da]},va.prototype.getClass=function(){return va},va.compare=function(t,e){return t<e?-1:e<t?1:ca.isNaN(t)?ca.isNaN(e)?0:-1:ca.isNaN(e)?1:0},ba.prototype.create=function(){},ba.prototype.interfaces_=function(){return[]},ba.prototype.getClass=function(){return ba};var wa={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};function Sa(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function xa(){}_a.prototype.interfaces_=function(){return[]},_a.prototype.getClass=function(){return _a},_a.toLocationSymbol=function(t){switch(t){case _a.EXTERIOR:return"e";case _a.BOUNDARY:return"b";case _a.INTERIOR:return"i";case _a.NONE:return"-"}throw new ua},wa.INTERIOR.get=function(){return 0},wa.BOUNDARY.get=function(){return 1},wa.EXTERIOR.get=function(){return 2},wa.NONE.get=function(){return-1},Object.defineProperties(_a,wa);var Ea={LOG_10:{configurable:!0}};function Oa(t){this.str=t}function Ca(t){this.value=t}function Pa(){}function Ta(){if(this._hi=0,(this._lo=0)===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof Ta){var e=arguments[0];this.init(e)}else"string"==typeof arguments[0]&&Ta.call(this,Ta.parse(arguments[0]));else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n,r)}}xa.prototype.interfaces_=function(){return[]},xa.prototype.getClass=function(){return xa},xa.log10=function(t){var e=Math.log(t);return ca.isInfinite(e)||ca.isNaN(e)?e:e/xa.LOG_10},xa.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},xa.clamp=function(t,e,n){return"number"==typeof n&&"number"==typeof t&&"number"==typeof e||Number.isInteger(n)&&Number.isInteger(t)&&Number.isInteger(e)?t<e?e:n<t?n:t:void 0},xa.wrap=function(t,e){return t<0?e- -t%e:t%e},xa.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return n<t&&(n=t),n<e&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return s<r&&(s=r),s<i&&(s=i),s<o&&(s=o),s}},xa.average=function(t,e){return(t+e)/2},Ea.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(xa,Ea),Oa.prototype.append=function(t){this.str+=t},Oa.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Oa.prototype.toString=function(){return this.str},Ca.prototype.intValue=function(){return this.value},Ca.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Ca.isNaN=function(t){return Number.isNaN(t)},Pa.isWhitespace=function(t){return t<=32&&0<=t||127===t},Pa.toUpperCase=function(t){return t.toUpperCase()};var Ma={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};function La(){}Ta.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Ta.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Ta.magnitude(n._hi),i=Ta.TEN.pow(r);(n=n.divide(i)).gt(Ta.TEN)?(n=n.divide(Ta.TEN),r+=1):n.lt(Ta.ONE)&&(n=n.multiply(Ta.TEN),--r);for(var o=r+1,s=new Oa,a=Ta.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c,h=!1;c=9<u?(h=!0,"9"):"0"+u,s.append(c),n=n.subtract(Ta.valueOf(u)).multiply(Ta.TEN),h&&n.selfAdd(Ta.TEN);var f=!0,p=Ta.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-l&&(f=!1),!f)break}return e[0]=r,s.toString()},Ta.prototype.sqr=function(){return this.multiply(this)},Ta.prototype.doubleValue=function(){return this._hi+this._lo},Ta.prototype.subtract=function(t){if(t instanceof Ta){var e=t;return this.add(e.negate())}if("number"==typeof t){var n=t;return this.add(-n)}},Ta.prototype.equals=function(t){if(1===arguments.length)return this._hi===t._hi&&this._lo===t._lo},Ta.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Ta.prototype.selfSubtract=function(t){if(t instanceof Ta){var e=t;return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof t){var n=t;return this.isNaN()?this:this.selfAdd(-n,0)}},Ta.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Ta.prototype.min=function(t){return this.le(t)?this:t},Ta.prototype.selfDivide=function(t,e){if(1===arguments.length){if(t instanceof Ta)return this.selfDivide(t._hi,t._lo);if("number"==typeof t){var n=t;return this.selfDivide(n,0)}}else if(2===arguments.length){var r,i,o,s,a=e,l=null,u=null,c=null,h=null;return o=this._hi/t,h=(l=(c=Ta.SPLIT*o)-(c-o))*(u=(h=Ta.SPLIT*t)-(h-t))-(s=o*t)+l*(i=t-u)+(r=o-l)*u+r*i,h=o+(c=(this._hi-s-h+this._lo-o*a)/t),this._hi=h,this._lo=o-h+c,this}},Ta.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Ta.prototype.divide=function(t){if(t instanceof Ta){var e,n,r,i,o=null,s=null,a=null,l=null;return e=(r=this._hi/t._hi)-(o=(a=Ta.SPLIT*r)-(a-r)),l=o*(s=(l=Ta.SPLIT*t._hi)-(l-t._hi))-(i=r*t._hi)+o*(n=t._hi-s)+e*s+e*n,new Ta(l=r+(a=(this._hi-i-l+this._lo-r*t._lo)/t._hi),r-l+a)}if("number"==typeof t){var u=t;return ca.isNaN(u)?Ta.createNaN():Ta.copy(this).selfDivide(u,0)}},Ta.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Ta.prototype.pow=function(t){if(0===t)return Ta.valueOf(1);var e=new Ta(this),n=Ta.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Ta.prototype.ceil=function(){if(this.isNaN())return Ta.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Ta(t,e)},Ta.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Ta.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Ta.prototype.setValue=function(t){if(t instanceof Ta){var e=t;return this.init(e),this}if("number"==typeof t){var n=t;return this.init(n),this}},Ta.prototype.max=function(t){return this.ge(t)?this:t},Ta.prototype.sqrt=function(){if(this.isZero())return Ta.valueOf(0);if(this.isNegative())return Ta.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Ta.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Ta.prototype.selfAdd=function(t,e){if(1===arguments.length){if(t instanceof Ta)return this.selfAdd(t._hi,t._lo);if("number"==typeof t){var n,r,i,o,s,a=null;return a=(i=this._hi+t)-(o=i-this._hi),r=(s=(a=t-o+(this._hi-a))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l,u,c,h,f=null,p=null,d=null;c=this._hi+t,u=this._lo+e,p=c-(d=c-this._hi),f=u-(h=u-this._lo);var y=(l=c+(d=(p=t-d+(this._hi-p))+u))+(d=(f=e-h+(this._lo-f))+(d+(c-l))),g=d+(l-y);return this._hi=y,this._lo=g,this}},Ta.prototype.selfMultiply=function(t,e){if(1===arguments.length){if(t instanceof Ta)return this.selfMultiply(t._hi,t._lo);if("number"==typeof t){var n=t;return this.selfMultiply(n,0)}}else if(2===arguments.length){var r,i,o=e,s=null,a=null,l=null,u=null;s=(l=Ta.SPLIT*this._hi)-this._hi,u=Ta.SPLIT*t,s=l-s,r=this._hi-s,a=u-t;var c=(l=this._hi*t)+(u=s*(a=u-a)-l+s*(i=t-a)+r*a+r*i+(this._hi*o+this._lo*t)),h=u+(s=l-c);return this._hi=c,this._lo=h,this}},Ta.prototype.selfSqr=function(){return this.selfMultiply(this)},Ta.prototype.floor=function(){if(this.isNaN())return Ta.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Ta(t,e)},Ta.prototype.negate=function(){return this.isNaN()?this:new Ta(-this._hi,-this._lo)},Ta.prototype.clone=function(){},Ta.prototype.multiply=function(t){if(t instanceof Ta){var e=t;return e.isNaN()?Ta.createNaN():Ta.copy(this).selfMultiply(e)}if("number"==typeof t){var n=t;return ca.isNaN(n)?Ta.createNaN():Ta.copy(this).selfMultiply(n,0)}},Ta.prototype.isNaN=function(){return ca.isNaN(this._hi)},Ta.prototype.intValue=function(){return Math.trunc(this._hi)},Ta.prototype.toString=function(){var t=Ta.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},Ta.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Ta.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Ta.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Ta.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=Ta.SPLIT*n)-(s-n)),o=(a=Ta.SPLIT*this._hi)-this._hi;var l=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Ta(l,n-l+s)},Ta.prototype.toSciNotation=function(){if(this.isZero())return Ta.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Ta.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Ta.prototype.abs=function(){return this.isNaN()?Ta.NaN:this.isNegative()?this.negate():new Ta(this)},Ta.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},Ta.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Ta.prototype.add=function(t){if(t instanceof Ta){var e=t;return Ta.copy(this).selfAdd(e)}if("number"==typeof t){var n=t;return Ta.copy(this).selfAdd(n)}},Ta.prototype.init=function(t,e){if(1===arguments.length){if("number"==typeof t){var n=t;this._hi=n,this._lo=0}else if(t instanceof Ta){var r=t;this._hi=r._hi,this._lo=r._lo}}else if(2===arguments.length){var i=t,o=e;this._hi=i,this._lo=o}},Ta.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Ta.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Ta.prototype.trunc=function(){return this.isNaN()?Ta.NaN:this.isPositive()?this.floor():this.ceil()},Ta.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},Ta.prototype.interfaces_=function(){return[ya,fa,pa]},Ta.prototype.getClass=function(){return Ta},Ta.sqr=function(t){return Ta.valueOf(t).selfMultiply(t)},Ta.valueOf=function(t){return"string"==typeof t?Ta.parse(t):"number"==typeof t?new Ta(t):void 0},Ta.sqrt=function(t){return Ta.valueOf(t).sqrt()},Ta.parse=function(t){for(var e=0,n=t.length;Pa.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Ta,s=0,a=0,l=0;!(n<=e);){var u=t.charAt(e);if(e++,Pa.isDigit(u)){var c=u-"0";o.selfMultiply(Ta.TEN),o.selfAdd(c),s++}else{if("."!==u){if("e"!==u&&"E"!==u)throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t);var h=t.substring(e);try{l=Ca.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}a=s}}var f=o,p=s-a-l;if(0==p)f=o;else if(0<p){var d=Ta.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=Ta.TEN.pow(-p);f=o.multiply(y)}return r?f.negate():f},Ta.createNaN=function(){return new Ta(ca.NaN,ca.NaN)},Ta.copy=function(t){return new Ta(t)},Ta.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Ta.stringOfChar=function(t,e){for(var n=new Oa,r=0;r<e;r++)n.append(t);return n.toString()},Ma.PI.get=function(){return new Ta(3.141592653589793,12246467991473532e-32)},Ma.TWO_PI.get=function(){return new Ta(6.283185307179586,24492935982947064e-32)},Ma.PI_2.get=function(){return new Ta(1.5707963267948966,6123233995736766e-32)},Ma.E.get=function(){return new Ta(2.718281828459045,14456468917292502e-32)},Ma.NaN.get=function(){return new Ta(ca.NaN,ca.NaN)},Ma.EPS.get=function(){return 123259516440783e-46},Ma.SPLIT.get=function(){return 134217729},Ma.MAX_PRINT_DIGITS.get=function(){return 32},Ma.TEN.get=function(){return Ta.valueOf(10)},Ma.ONE.get=function(){return Ta.valueOf(1)},Ma.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ma.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Ta,Ma);var Na={DP_SAFE_EPSILON:{configurable:!0}};function ka(){}La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La},La.orientationIndex=function(t,e,n){var r=La.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Ta.valueOf(e.x).selfAdd(-t.x),o=Ta.valueOf(e.y).selfAdd(-t.y),s=Ta.valueOf(n.x).selfAdd(-e.x),a=Ta.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},La.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},La.intersection=function(t,e,n,r){var i=Ta.valueOf(r.y).selfSubtract(n.y).selfMultiply(Ta.valueOf(e.x).selfSubtract(t.x)),o=Ta.valueOf(r.x).selfSubtract(n.x).selfMultiply(Ta.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=Ta.valueOf(r.x).selfSubtract(n.x).selfMultiply(Ta.valueOf(t.y).selfSubtract(n.y)),l=Ta.valueOf(r.y).selfSubtract(n.y).selfMultiply(Ta.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(s).doubleValue(),c=Ta.valueOf(t.x).selfAdd(Ta.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=Ta.valueOf(e.x).selfSubtract(t.x).selfMultiply(Ta.valueOf(t.y).selfSubtract(n.y)),f=Ta.valueOf(e.y).selfSubtract(t.y).selfMultiply(Ta.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(s).doubleValue();return new ga(c,Ta.valueOf(n.y).selfAdd(Ta.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue())},La.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(0<i){if(o<=0)return La.signum(s);r=i+o}else{if(!(i<0))return La.signum(s);if(0<=o)return La.signum(s);r=-i-o}var a=La.DP_SAFE_EPSILON*r;return a<=s||a<=-s?La.signum(s):2},La.signum=function(t){return 0<t?1:t<0?-1:0},Na.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(La,Na);var Aa={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};function Ia(){}Aa.X.get=function(){return 0},Aa.Y.get=function(){return 1},Aa.Z.get=function(){return 2},Aa.M.get=function(){return 3},ka.prototype.setOrdinate=function(){},ka.prototype.size=function(){},ka.prototype.getOrdinate=function(){},ka.prototype.getCoordinate=function(){},ka.prototype.getCoordinateCopy=function(){},ka.prototype.getDimension=function(){},ka.prototype.getX=function(){},ka.prototype.clone=function(){},ka.prototype.expandEnvelope=function(){},ka.prototype.copy=function(){},ka.prototype.getY=function(){},ka.prototype.toCoordinateArray=function(){},ka.prototype.interfaces_=function(){return[pa]},ka.prototype.getClass=function(){return ka},Object.defineProperties(ka,Aa);var Ra,ja=(Da.__proto__=Ra=Ia,((Da.prototype=Object.create(Ra&&Ra.prototype)).constructor=Da).prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da},Da);function Da(){Ra.call(this,"Projective point not representable on the Cartesian plane.")}function Fa(){}function Ba(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof Ba&&arguments[1]instanceof Ba){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof ga&&arguments[1]instanceof ga){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],l=arguments[1],u=arguments[2];this.x=a,this.y=l,this.w=u}else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3],d=c.y-h.y,y=h.x-c.x,g=c.x*h.y-h.x*c.y,m=f.y-p.y,v=p.x-f.x,b=f.x*p.y-p.x*f.y;this.x=y*b-v*g,this.y=m*g-d*b,this.w=d*v-m*y}}function Ga(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ga){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Ga){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(i,o,s,a)}}Fa.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Fa.getProperty=function(t){return{"line.separator":"\n"}[t]},Ba.prototype.getY=function(){var t=this.y/this.w;if(ca.isNaN(t)||ca.isInfinite(t))throw new ja;return t},Ba.prototype.getX=function(){var t=this.x/this.w;if(ca.isNaN(t)||ca.isInfinite(t))throw new ja;return t},Ba.prototype.getCoordinate=function(){var t=new ga;return t.x=this.getX(),t.y=this.getY(),t},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba},Ba.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-a*o,h=(o*u-l*s)/c,f=(a*s-i*u)/c;if(ca.isNaN(h)||ca.isInfinite(h)||ca.isNaN(f)||ca.isInfinite(f))throw new ja;return new ga(h,f)};var Ua={serialVersionUID:{configurable:!0}};function za(t){this.geometryFactory=t||new Xu}Ga.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ga.prototype.equals=function(t){if(!(t instanceof Ga))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Ga.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Ga;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new Ga(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)},Ga.prototype.isNull=function(){return this._maxx<this._minx},Ga.prototype.getMaxX=function(){return this._maxx},Ga.prototype.covers=function(t,e){if(1===arguments.length){if(t instanceof ga)return this.covers(t.x,t.y);if(t instanceof Ga){var n=t;return!this.isNull()&&!n.isNull()&&(n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy)}}else if(2===arguments.length){var r=t,i=e;return!this.isNull()&&(r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy)}},Ga.prototype.intersects=function(t,e){if(1===arguments.length){if(t instanceof Ga){var n=t;return!this.isNull()&&!n.isNull()&&!(n._minx>this._maxx||n._maxx<this._minx||n._miny>this._maxy||n._maxy<this._miny)}if(t instanceof ga)return this.intersects(t.x,t.y)}else if(2===arguments.length){var r=t,i=e;return!this.isNull()&&!(r>this._maxx||r<this._minx||i>this._maxy||i<this._miny)}},Ga.prototype.getMinY=function(){return this._miny},Ga.prototype.getMinX=function(){return this._minx},Ga.prototype.expandToInclude=function(t,e){if(1===arguments.length){if(t instanceof ga)this.expandToInclude(t.x,t.y);else if(t instanceof Ga){var n=t;if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var r=t,i=e;this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Ga.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Ga.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ga.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Ga.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Ga.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ga.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ga.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ga.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},Ga.prototype.expandBy=function(t,e){if(1===arguments.length)this.expandBy(t,t);else if(2===arguments.length){var n=t,r=e;if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ga.prototype.contains=function(t,e){if(1===arguments.length){if(t instanceof Ga){var n=t;return this.covers(n)}if(t instanceof ga){var r=t;return this.covers(r)}}else if(2===arguments.length){var i=t,o=e;return this.covers(i,o)}},Ga.prototype.centre=function(){return this.isNull()?null:new ga((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ga.prototype.init=function(t,e,n,r){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(t instanceof ga)this.init(t.x,t.x,t.y,t.y);else if(t instanceof Ga){var i=t;this._minx=i._minx,this._maxx=i._maxx,this._miny=i._miny,this._maxy=i._maxy}}else if(2===arguments.length)this.init(t.x,e.x,t.y,e.y);else if(4===arguments.length){var o=t,s=e,a=n,l=r;o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<l?(this._miny=a,this._maxy=l):(this._miny=l,this._maxy=a)}},Ga.prototype.getMaxY=function(){return this._maxy},Ga.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Ga.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+ga.hashCode(this._minx))+ga.hashCode(this._maxx))+ga.hashCode(this._miny))+ga.hashCode(this._maxy)},Ga.prototype.interfaces_=function(){return[fa,ya]},Ga.prototype.getClass=function(){return Ga},Ga.intersects=function(t,e,n,r){if(3===arguments.length)return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y);if(4===arguments.length){var i=t,o=e,s=n,a=r,l=Math.min(s.x,a.x),u=Math.max(s.x,a.x),c=Math.min(i.x,o.x),h=Math.max(i.x,o.x);return!(u<c)&&!(h<l||(l=Math.min(s.y,a.y),u=Math.max(s.y,a.y),c=Math.min(i.y,o.y),h=Math.max(i.y,o.y),u<c||h<l))}},Ua.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Ga,Ua);var qa={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};function Va(t){this.parser=new za(t)}za.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=qa.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=qa.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Wa[n]&&(e=Wa[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},za.prototype.write=function(t){return this.extractGeometry(t)},za.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ha[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ha[e].apply(this,[t])+")"};var Ha={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ha.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ha.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ha.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ha.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ha.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ha.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Ha.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ha.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Wa={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(qa.spaces);return this.geometryFactory.createPoint(new ga(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(qa.trimParens,"$1"),r.push(Wa.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(qa.spaces),r.push(new ga(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(qa.spaces),r.push(new ga(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(qa.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(qa.trimParens,"$1"),r.push(Wa.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(qa.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(qa.trimParens,"$1"),n=Wa.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(qa.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(qa.trimParens,"$1"),r.push(Wa.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};Va.prototype.write=function(t){return this.parser.write(t)},Va.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ja,Ya=((Ja=Error)&&(Xa.__proto__=Ja),(Xa.prototype=Object.create(Ja&&Ja.prototype)).constructor=Xa);function Xa(t){Ja.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new Ja).stack}var Za,Qa=((Za=Ya)&&(Ka.__proto__=Za),((Ka.prototype=Object.create(Za&&Za.prototype)).constructor=Ka).prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka},Ka);function Ka(){if(Za.call(this),0===arguments.length)Za.call(this);else if(1===arguments.length){var t=arguments[0];Za.call(this,t)}}function $a(){}function tl(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ga,this._intPt[1]=new ga,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}$a.prototype.interfaces_=function(){return[]},$a.prototype.getClass=function(){return $a},$a.shouldNeverReachHere=function(t){if(0===arguments.length)$a.shouldNeverReachHere(null);else if(1===arguments.length)throw new Qa("Should never reach here"+(null!==t?": "+t:""))},$a.isTrue=function(t,e){var n;if(1===arguments.length)$a.isTrue(t,null);else if(2===arguments.length&&(n=e,!t))throw null===n?new Qa:new Qa(n)},$a.equals=function(t,e,n){var r,i,o;if(2===arguments.length)$a.equals(r=t,i=e,null);else if(3===arguments.length&&(r=t,o=n,!(i=e).equals(r)))throw new Qa("Expected "+r+" but encountered "+i+(null!==o?": "+o:""))};var el={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};tl.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},tl.prototype.getTopologySummary=function(){var t=new Oa;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},tl.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},tl.prototype.getIntersectionNum=function(){return this._result},tl.prototype.computeIntLineIndex=function(t){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=t,n=this.getEdgeDistance(e,0);this.getEdgeDistance(e,1)<n?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}},tl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},tl.prototype.setPrecisionModel=function(t){this._precisionModel=t},tl.prototype.isInteriorIntersection=function(t){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=t,n=0;n<this._result;n++)if(!this._intPt[n].equals2D(this._inputLines[e][0])&&!this._intPt[n].equals2D(this._inputLines[e][1]))return!0;return!1}},tl.prototype.getIntersection=function(t){return this._intPt[t]},tl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},tl.prototype.hasIntersection=function(){return this._result!==tl.NO_INTERSECTION},tl.prototype.getEdgeDistance=function(t,e){return tl.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},tl.prototype.isCollinear=function(){return this._result===tl.COLLINEAR_INTERSECTION},tl.prototype.toString=function(){return Va.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Va.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},tl.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},tl.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},tl.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i<r?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i<r?s:a)||t.equals(e)||(o=Math.max(s,a))}return $a.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},tl.nonRobustComputeEdgeDistance=function(t,e){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);return $a.isTrue(!(0===i&&!t.equals(e)),"Invalid distance calculation"),i},el.DONT_INTERSECT.get=function(){return 0},el.DO_INTERSECT.get=function(){return 1},el.COLLINEAR.get=function(){return 2},el.NO_INTERSECTION.get=function(){return 0},el.POINT_INTERSECTION.get=function(){return 1},el.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(tl,el);var nl,rl=(il.__proto__=nl=tl,((il.prototype=Object.create(nl&&nl.prototype)).constructor=il).prototype.isInSegmentEnvelopes=function(t){var e=new Ga(this._inputLines[0][0],this._inputLines[0][1]),n=new Ga(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},il.prototype.computeIntersection=function(t,e,n){if(3!==arguments.length)return nl.prototype.computeIntersection.apply(this,arguments);var r=t,i=e,o=n;if(this._isProper=!1,Ga.intersects(i,o,r)&&0===al.orientationIndex(i,o,r)&&0===al.orientationIndex(o,i,r))return this._isProper=!0,(r.equals(i)||r.equals(o))&&(this._isProper=!1),this._result=nl.POINT_INTERSECTION,null;this._result=nl.NO_INTERSECTION},il.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},il.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=Ba.intersection(e,n,r,i)}catch(t){if(!(t instanceof ja))throw t;o=il.nearestEndpoint(e,n,r,i)}return o},il.prototype.intersection=function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new ga(il.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},il.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},il.prototype.checkDD=function(t,e,n,r,i){var o=La.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Fa.out.println("DD in env = "+s+"  --------------------- "+o),1e-4<i.distance(o)&&Fa.out.println("Distance = "+i.distance(o))},il.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new ga(t),o=new ga(e),s=new ga(n),a=new ga(r),l=new ga;this.normalizeToEnvCentre(i,o,s,a,l);var u=this.safeHCoordinateIntersection(i,o,s,a);return u.x+=l.x,u.y+=l.y,u},il.prototype.computeCollinearIntersection=function(t,e,n,r){var i=Ga.intersects(t,e,n),o=Ga.intersects(t,e,r),s=Ga.intersects(n,r,t),a=Ga.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,nl.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,nl.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?nl.COLLINEAR_INTERSECTION:nl.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?nl.COLLINEAR_INTERSECTION:nl.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?nl.COLLINEAR_INTERSECTION:nl.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?nl.COLLINEAR_INTERSECTION:nl.POINT_INTERSECTION):nl.NO_INTERSECTION},il.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((u<o?o:u)+(a<h?a:h))/2,d=((c<s?s:c)+(l<f?l:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},il.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!Ga.intersects(t,e,n,r))return nl.NO_INTERSECTION;var i=al.orientationIndex(t,e,n),o=al.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return nl.NO_INTERSECTION;var s=al.orientationIndex(n,r,t),a=al.orientationIndex(n,r,e);return 0<s&&0<a||s<0&&a<0?nl.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new ga(n):0===o?this._intPt[0]=new ga(r):0===s?this._intPt[0]=new ga(t):0===a&&(this._intPt[0]=new ga(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),nl.POINT_INTERSECTION)},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},il.nearestEndpoint=function(t,e,n,r){var i=t,o=al.distancePointLine(t,n,r),s=al.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=al.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=al.distancePointLine(r,t,e))<o&&(o=s,i=r),i},il);function il(){nl.apply(this,arguments)}function ol(){}function sl(t){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=t;this._p=e}ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ol.signOfDet2x2(r,i,o,s)},ol.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:0<e?0<n?-i:i:0<n?i:-i;if(0===e||0===n)return 0<r?0<t?i:-i:0<t?-i:i;if(0<e?0<r?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):r=e<=-r?(i=-i,n=-n,-r):(o=t,t=-n,n=o,o=e,e=-r,o):0<r?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):r=r<=e?(t=-t,e=-e,n=-n,-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,o),0<t){if(!(0<n))return i;if(!(t<=n))return i}else{if(0<n)return-i;if(!(n<=t))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(e<r)return i;if((n-=s*t)+n<t){if(e<r+r)return i}else{if(r+r<e)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(r<e)return-i;if((t-=s*n)+t<n){if(r<e+e)return-i}else{if(e+e<r)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}},sl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=ol.signOfDet2x2(i,o,s,a);if(0===l)return this._isPointOnSegment=!0,null;a<o&&(l=-l),0<l&&this._crossingCount++}},sl.prototype.isPointInPolygon=function(){return this.getLocation()!==_a.EXTERIOR},sl.prototype.getLocation=function(){return this._isPointOnSegment?_a.BOUNDARY:this._crossingCount%2==1?_a.INTERIOR:_a.EXTERIOR},sl.prototype.isOnSegment=function(){return this._isPointOnSegment},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.locatePointInRing=function(t,e){if(t instanceof ga&&Sa(e,ka)){for(var n=e,r=new sl(t),i=new ga,o=new ga,s=1;s<n.size();s++)if(n.getCoordinate(s,i),n.getCoordinate(s-1,o),r.countSegment(i,o),r.isOnSegment())return r.getLocation();return r.getLocation()}if(t instanceof ga&&e instanceof Array){for(var a=e,l=new sl(t),u=1;u<a.length;u++){var c=a[u],h=a[u-1];if(l.countSegment(c,h),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var al=function(){},ll={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};function ul(){}function cl(t){var e=t;this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()}al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.orientationIndex=function(t,e,n){return La.orientationIndex(t,e,n)},al.signedArea=function(t){if(t instanceof Array){var e=t;if(e.length<3)return 0;for(var n=0,r=e[0].x,i=1;i<e.length-1;i++){var o=e[i].x-r,s=e[i+1].y;n+=o*(e[i-1].y-s)}return n/2}if(Sa(t,ka)){var a=t,l=a.size();if(l<3)return 0;var u=new ga,c=new ga,h=new ga;a.getCoordinate(0,c),a.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<l-1;d++)u.y=c.y,c.x=h.x,c.y=h.y,a.getCoordinate(d+1,h),h.x-=f,p+=c.x*(u.y-h.y);return p/2}},al.distanceLineLine=function(t,e,n,r){if(t.equals(e))return al.distancePointLine(t,n,r);if(n.equals(r))return al.distancePointLine(r,t,e);var i=!1;if(Ga.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0==o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=s/o;(l<0||1<l||a<0||1<a)&&(i=!0)}}else i=!0;return i?xa.min(al.distancePointLine(t,n,r),al.distancePointLine(e,n,r),al.distancePointLine(n,t,e),al.distancePointLine(r,t,e)):0},al.isPointInRing=function(t,e){return al.locatePointInRing(t,e)!==_a.EXTERIOR},al.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new ga;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,l=r.y,u=a-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=a,o=l}return n},al.isCCW=function(t){var e=t.length-1;if(e<3)throw new ua;for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var s=r;--s<0&&(s=e),t[s].equals2D(n)&&s!==r;);for(var a=r;t[a=(a+1)%e].equals2D(n)&&a!==r;);var l=t[s],u=t[a];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=al.computeOrientation(l,n,u);return 0===c?l.x>u.x:0<c},al.locatePointInRing=function(t,e){return sl.locatePointInRing(t,e)},al.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},al.computeOrientation=function(t,e,n){return al.orientationIndex(t,e,n)},al.distancePointLine=function(t,e,n){if(2===arguments.length){var r=t,i=e;if(0===i.length)throw new ua;for(var o=r.distance(i[0]),s=0;s<i.length-1;s++){var a=al.distancePointLine(r,i[s],i[s+1]);a<o&&(o=a)}return o}if(3===arguments.length){var l=t,u=e,c=n;if(u.x===c.x&&u.y===c.y)return l.distance(u);var h=(c.x-u.x)*(c.x-u.x)+(c.y-u.y)*(c.y-u.y),f=((l.x-u.x)*(c.x-u.x)+(l.y-u.y)*(c.y-u.y))/h;if(f<=0)return l.distance(u);if(1<=f)return l.distance(c);var p=((u.y-l.y)*(c.x-u.x)-(u.x-l.x)*(c.y-u.y))/h;return Math.abs(p)*Math.sqrt(h)}},al.isOnLine=function(t,e){for(var n=new rl,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ll.CLOCKWISE.get=function(){return-1},ll.RIGHT.get=function(){return al.CLOCKWISE},ll.COUNTERCLOCKWISE.get=function(){return 1},ll.LEFT.get=function(){return al.COUNTERCLOCKWISE},ll.COLLINEAR.get=function(){return 0},ll.STRAIGHT.get=function(){return al.COLLINEAR},Object.defineProperties(al,ll),ul.prototype.filter=function(){},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var hl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cl.prototype.isGeometryCollection=function(){return this.getSortIndex()===cl.SORTINDEX_GEOMETRYCOLLECTION},cl.prototype.getFactory=function(){return this._factory},cl.prototype.getGeometryN=function(){return this},cl.prototype.getArea=function(){return 0},cl.prototype.isRectangle=function(){return!1},cl.prototype.equals=function(t){if(t instanceof cl)return null!==t&&this.equalsTopo(t);if(t instanceof Object){if(!(t instanceof cl))return!1;var e=t;return this.equalsExact(e)}},cl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cl.prototype.geometryChanged=function(){this.apply(cl.geometryChangedFilter)},cl.prototype.geometryChangedAction=function(){this._envelope=null},cl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cl.prototype.getLength=function(){return 0},cl.prototype.getNumGeometries=function(){return 1},cl.prototype.compareTo=function(t,e){if(1===arguments.length){var n=t,r=n;return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(n)}if(2===arguments.length){var i=t,o=e;return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,o)}},cl.prototype.getUserData=function(){return this._userData},cl.prototype.getSRID=function(){return this._SRID},cl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cl.SORTINDEX_GEOMETRYCOLLECTION)throw new ua},cl.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},cl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Ga(this._envelope)},cl.prototype.setSRID=function(t){this._SRID=t},cl.prototype.setUserData=function(t){this._userData=t},cl.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},cl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cl.SORTINDEX_MULTIPOINT||this.getSortIndex()===cl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cl.SORTINDEX_MULTIPOLYGON},cl.prototype.interfaces_=function(){return[pa,fa,ya]},cl.prototype.getClass=function(){return cl},cl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},hl.serialVersionUID.get=function(){return 0x799ea46522854c00},hl.SORTINDEX_POINT.get=function(){return 0},hl.SORTINDEX_MULTIPOINT.get=function(){return 1},hl.SORTINDEX_LINESTRING.get=function(){return 2},hl.SORTINDEX_LINEARRING.get=function(){return 3},hl.SORTINDEX_MULTILINESTRING.get=function(){return 4},hl.SORTINDEX_POLYGON.get=function(){return 5},hl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},hl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},hl.geometryChangedFilter.get=function(){return fl},Object.defineProperties(cl,hl);var fl=function(){};function pl(){}function dl(){}fl.interfaces_=function(){return[ul]},fl.filter=function(t){t.geometryChangedAction()},pl.prototype.filter=function(){},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl};var yl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dl.prototype.isInBoundary=function(){},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},yl.Mod2BoundaryNodeRule.get=function(){return gl},yl.EndPointBoundaryNodeRule.get=function(){return ml},yl.MultiValentEndPointBoundaryNodeRule.get=function(){return vl},yl.MonoValentEndPointBoundaryNodeRule.get=function(){return bl},yl.MOD2_BOUNDARY_RULE.get=function(){return new gl},yl.ENDPOINT_BOUNDARY_RULE.get=function(){return new ml},yl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vl},yl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new bl},yl.OGC_SFS_BOUNDARY_RULE.get=function(){return dl.MOD2_BOUNDARY_RULE},Object.defineProperties(dl,yl);var gl=function(){};gl.prototype.isInBoundary=function(t){return t%2==1},gl.prototype.interfaces_=function(){return[dl]},gl.prototype.getClass=function(){return gl};var ml=function(){};ml.prototype.isInBoundary=function(t){return 0<t},ml.prototype.interfaces_=function(){return[dl]},ml.prototype.getClass=function(){return ml};var vl=function(){};vl.prototype.isInBoundary=function(t){return 1<t},vl.prototype.interfaces_=function(){return[dl]},vl.prototype.getClass=function(){return vl};var bl=function(){};function _l(){}function wl(){}bl.prototype.isInBoundary=function(t){return 1===t},bl.prototype.interfaces_=function(){return[dl]},bl.prototype.getClass=function(){return bl},_l.prototype.add=function(){},_l.prototype.addAll=function(){},_l.prototype.isEmpty=function(){},_l.prototype.iterator=function(){},_l.prototype.size=function(){},_l.prototype.toArray=function(){},_l.prototype.remove=function(){};var Sl=function(e){function t(t){e.call(this),this.message=t||""}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(t,n),t}(Error);wl.prototype.hasNext=function(){},wl.prototype.next=function(){},wl.prototype.remove=function(){};var xl,El=(Ol.__proto__=xl=_l,((Ol.prototype=Object.create(xl&&xl.prototype)).constructor=Ol).prototype.get=function(){},Ol.prototype.set=function(){},Ol.prototype.isEmpty=function(){},Ol);function Ol(){xl.apply(this,arguments)}function Cl(t){this.message=t||""}(Cl.prototype=new Error).name="NoSuchElementException";var Pl,Tl=((Pl=El)&&(Ml.__proto__=Pl),((Ml.prototype=Object.create(Pl&&Pl.prototype)).constructor=Ml).prototype.ensureCapacity=function(){},Ml.prototype.interfaces_=function(){return[Pl,_l]},Ml.prototype.add=function(t,e){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,e),!0},Ml.prototype.clear=function(){this.array_=[]},Ml.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ml.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},Ml.prototype.iterator=function(){return new Nl(this)},Ml.prototype.get=function(t){if(t<0||t>=this.size())throw new Sl;return this.array_[t]},Ml.prototype.isEmpty=function(){return 0===this.array_.length},Ml.prototype.size=function(){return this.array_.length},Ml.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ml.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},Ml);function Ml(){Pl.call(this),this.array_=[],arguments[0]instanceof _l&&this.addAll(arguments[0])}var Ll,Nl=(kl.__proto__=Ll=wl,((kl.prototype=Object.create(Ll&&Ll.prototype)).constructor=kl).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Cl;return this.arrayList_.get(this.position_++)},kl.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},kl.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},kl.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},kl);function kl(t){Ll.call(this),this.arrayList_=t,this.position_=0}function Al(){}var Il=function(S){function t(){if(S.call(this),0!==arguments.length)if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}S&&(t.__proto__=S),(t.prototype=Object.create(S&&S.prototype)).constructor=t;var e={coordArrayType:{configurable:!0}};return e.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(t){return this.get(t)},t.prototype.addAll=function(t,e){if(2!==arguments.length)return S.prototype.addAll.apply(this,arguments);for(var n=e,r=!1,i=t.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r},t.prototype.clone=function(){for(var t=S.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(t,e,n,r){if(1===arguments.length){var i=t;S.prototype.add.call(this,i)}else if(2===arguments.length){if(t instanceof Array&&"boolean"==typeof e){var o=t,s=e;return this.add(o,s,!0),!0}if(t instanceof ga&&"boolean"==typeof e){var a=t;if(!e&&1<=this.size()&&this.get(this.size()-1).equals2D(a))return null;S.prototype.add.call(this,a)}else if(t instanceof Object&&"boolean"==typeof e){var l=t,u=e;return this.add(l,u),!0}}else if(3===arguments.length){if("boolean"==typeof n&&t instanceof Array&&"boolean"==typeof e){var c=t,h=e;if(n)for(var f=0;f<c.length;f++)this.add(c[f],h);else for(var p=c.length-1;0<=p;p--)this.add(c[p],h);return!0}if("boolean"==typeof n&&Number.isInteger(t)&&e instanceof ga){var d=t,y=e;if(!n){var g=this.size();if(0<g){if(0<d&&this.get(d-1).equals2D(y))return null;if(d<g&&this.get(d).equals2D(y))return null}}S.prototype.add.call(this,d,y)}}else if(4===arguments.length){var m=t,v=e,b=r,_=1;b<n&&(_=-1);for(var w=n;w!==b;w+=_)this.add(m[w],v);return!0}},t.prototype.closeRing=function(){0<this.size()&&this.add(new ga(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,e),t}(Tl),Rl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Rl.ForwardComparator.get=function(){return jl},Rl.BidirectionalComparator.get=function(){return Dl},Rl.coordArrayType.get=function(){return new Array(0).fill(null)},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Al.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Al.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Al.indexOf(r,e)<0)return r}return null},Al.scroll=function(t,e){var n=Al.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Fa.arraycopy(t,n,r,0,t.length-n),Fa.arraycopy(t,0,r,t.length-n,n),Fa.arraycopy(r,0,t,0,t.length)},Al.equals=function(t,e,n){if(2===arguments.length){var r=t,i=e;if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(!r[o].equals(i[o]))return!1;return!0}if(3===arguments.length){var s=t,a=e,l=n;if(s===a)return!0;if(null===s||null===a)return!1;if(s.length!==a.length)return!1;for(var u=0;u<s.length;u++)if(0!==l.compare(s[u],a[u]))return!1;return!0}},Al.intersection=function(t,e){for(var n=new Il,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Al.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Al.removeRepeatedPoints=function(t){return Al.hasRepeatedPoints(t)?new Il(t,!1).toCoordinateArray():t},Al.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Al.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Al.copyDeep=function(t,e,n,r,i){if(1===arguments.length){for(var o=t,s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ga(o[a]);return s}if(5===arguments.length)for(var l=t,u=e,c=n,h=r,f=i,p=0;p<f;p++)c[h+p]=new ga(l[u+p])},Al.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Al.envelope=function(t){for(var e=new Ga,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Al.toCoordinateArray=function(t){return t.toArray(Al.coordArrayType)},Al.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Al.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Al.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Al.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Al.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},Al.extract=function(t,e,n){e=xa.clamp(e,0,t.length);var r=(n=xa.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Al,Rl);var jl=function(){};jl.prototype.compare=function(t,e){return Al.compare(t,e)},jl.prototype.interfaces_=function(){return[da]},jl.prototype.getClass=function(){return jl};var Dl=function(){};function Fl(){}Dl.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Al.compare(n,r);return Al.isEqualReversed(n,r)?0:i},Dl.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Al.increasingDirection(n),o=Al.increasingDirection(r),s=0<i?0:n.length-1,a=0<o?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(r[a]);if(0!==u)return u;s+=i,a+=o}return 0},Dl.prototype.interfaces_=function(){return[da]},Dl.prototype.getClass=function(){return Dl},Fl.prototype.get=function(){},Fl.prototype.put=function(){},Fl.prototype.size=function(){},Fl.prototype.values=function(){},Fl.prototype.entrySet=function(){};var Bl,Gl=(Ul.__proto__=Bl=Fl,(Ul.prototype=Object.create(Bl&&Bl.prototype)).constructor=Ul);function Ul(){Bl.apply(this,arguments)}function zl(t){this.message=t||""}function ql(){}(zl.prototype=new Error).name="OperationNotSupported",(ql.prototype=new _l).contains=function(){};var Vl,Hl=(Wl.__proto__=Vl=ql,((Wl.prototype=Object.create(Vl&&Vl.prototype)).constructor=Wl).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},Wl.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Wl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Wl.prototype.remove=function(){throw new Error},Wl.prototype.size=function(){return this.array_.length},Wl.prototype.isEmpty=function(){return 0===this.array_.length},Wl.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Wl.prototype.iterator=function(){return new Yl(this)},Wl);function Wl(){Vl.call(this),this.array_=[],arguments[0]instanceof _l&&this.addAll(arguments[0])}var Jl,Yl=(Xl.__proto__=Jl=wl,((Xl.prototype=Object.create(Jl&&Jl.prototype)).constructor=Xl).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Cl;return this.hashSet_.array_[this.position_++]},Xl.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Xl.prototype.remove=function(){throw new zl},Xl);function Xl(t){Jl.call(this),this.hashSet_=t,this.position_=0}var Zl=0;function Ql(t){return null===t?Zl:t.color}function Kl(t){return null===t?null:t.parent}function $l(t,e){null!==t&&(t.color=e)}function tu(t){return null===t?null:t.left}function eu(t){return null===t?null:t.right}function nu(){this.root_=null,this.size_=0}function ru(){}function iu(){}function ou(){this.array_=[],arguments[0]instanceof _l&&this.addAll(arguments[0])}(nu.prototype=new Gl).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},nu.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Zl,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Zl,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},nu.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Kl(t)===tu(Kl(Kl(t)))){var e=eu(Kl(Kl(t)));1===Ql(e)?($l(Kl(t),Zl),$l(e,Zl),$l(Kl(Kl(t)),1),t=Kl(Kl(t))):(t===eu(Kl(t))&&(t=Kl(t),this.rotateLeft(t)),$l(Kl(t),Zl),$l(Kl(Kl(t)),1),this.rotateRight(Kl(Kl(t))))}else{var n=tu(Kl(Kl(t)));1===Ql(n)?($l(Kl(t),Zl),$l(n,Zl),$l(Kl(Kl(t)),1),t=Kl(Kl(t))):(t===tu(Kl(t))&&(t=Kl(t),this.rotateRight(t)),$l(Kl(t),Zl),$l(Kl(Kl(t)),1),this.rotateLeft(Kl(Kl(t))))}this.root_.color=Zl},nu.prototype.values=function(){var t=new Tl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=nu.successor(e));)t.add(e.value);return t},nu.prototype.entrySet=function(){var t=new Hl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=nu.successor(e));)t.add(e);return t},nu.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e}},nu.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e}},nu.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},nu.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},nu.prototype.size=function(){return this.size_},ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru},iu.prototype=new ql,(ou.prototype=new iu).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},ou.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},ou.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ou.prototype.remove=function(t){throw new zl},ou.prototype.size=function(){return this.array_.length},ou.prototype.isEmpty=function(){return 0===this.array_.length},ou.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ou.prototype.iterator=function(){return new su(this)};var su=function(t){this.treeSet_=t,this.position_=0};function au(){}function lu(){}su.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Cl;return this.treeSet_.array_[this.position_++]},su.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},su.prototype.remove=function(){throw new zl},au.sort=function(t,e,n,r){var i,o,s,a,l=t;if(1===arguments.length)a=function(t,e){return t.compareTo(e)},l.sort(a);else if(2===arguments.length)s=e,a=function(t,e){return s.compare(t,e)},l.sort(a);else if(3===arguments.length){(o=l.slice(e,n)).sort();var u=l.slice(0,e).concat(o,l.slice(n,l.length));for(l.splice(0,l.length),i=0;i<u.length;i++)l.push(u[i])}else if(4===arguments.length)for(o=l.slice(e,n),s=r,a=function(t,e){return s.compare(t,e)},o.sort(a),u=l.slice(0,e).concat(o,l.slice(n,l.length)),l.splice(0,l.length),i=0;i<u.length;i++)l.push(u[i])},au.asList=function(t){for(var e=new Tl,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var uu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};function cu(){}function hu(){}uu.P.get=function(){return 0},uu.L.get=function(){return 1},uu.A.get=function(){return 2},uu.FALSE.get=function(){return-1},uu.TRUE.get=function(){return-2},uu.DONTCARE.get=function(){return-3},uu.SYM_FALSE.get=function(){return"F"},uu.SYM_TRUE.get=function(){return"T"},uu.SYM_DONTCARE.get=function(){return"*"},uu.SYM_P.get=function(){return"0"},uu.SYM_L.get=function(){return"1"},uu.SYM_A.get=function(){return"2"},lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu},lu.toDimensionSymbol=function(t){switch(t){case lu.FALSE:return lu.SYM_FALSE;case lu.TRUE:return lu.SYM_TRUE;case lu.DONTCARE:return lu.SYM_DONTCARE;case lu.P:return lu.SYM_P;case lu.L:return lu.SYM_L;case lu.A:return lu.SYM_A}throw new ua},lu.toDimensionValue=function(t){switch(Pa.toUpperCase(t)){case lu.SYM_FALSE:return lu.FALSE;case lu.SYM_TRUE:return lu.TRUE;case lu.SYM_DONTCARE:return lu.DONTCARE;case lu.SYM_P:return lu.P;case lu.SYM_L:return lu.L;case lu.SYM_A:return lu.A}throw new ua},Object.defineProperties(lu,uu),cu.prototype.filter=function(){},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},hu.prototype.filter=function(){},hu.prototype.isDone=function(){},hu.prototype.isGeometryChanged=function(){},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu};var fu=function(s){function n(t,e){if(s.call(this,e),this._geometries=t||[],s.hasNullElements(this._geometries))throw new ua}s&&(n.__proto__=s);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(s&&s.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var t=new Ga,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},n.prototype.getGeometryN=function(t){return this._geometries[t]},n.prototype.getSortIndex=function(){return s.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},n.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},n.prototype.equalsExact=function(t,e){if(2!==arguments.length)return s.prototype.equalsExact.apply(this,arguments);var n=t,r=e;if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!this._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0},n.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();au.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var t=lu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},n.prototype.getDimension=function(){for(var t=lu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},n.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},n.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},n.prototype.compareToSameClass=function(t,e){if(1===arguments.length){var n=t,r=new ou(au.asList(this._geometries)),i=new ou(au.asList(n._geometries));return this.compare(r,i)}if(2===arguments.length){for(var o=e,s=t,a=this.getNumGeometries(),l=s.getNumGeometries(),u=0;u<a&&u<l;){var c=this.getGeometryN(u),h=s.getGeometryN(u),f=c.compareToSameClass(h,o);if(0!==f)return f;u++}return u<a?1:u<l?-1:0}},n.prototype.apply=function(t){if(Sa(t,pl))for(var e=t,n=0;n<this._geometries.length;n++)this._geometries[n].apply(e);else if(Sa(t,hu)){var r=t;if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(Sa(t,cu)){var o=t;o.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(o)}else if(Sa(t,ul)){var a=t;a.filter(this);for(var l=0;l<this._geometries.length;l++)this._geometries[l].apply(a)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),$a.shouldNeverReachHere(),null},n.prototype.clone=function(){var t=s.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)t._geometries[e]=this._geometries[e].clone();return t},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,t),n}(cl),pu=function(i){function n(){i.apply(this,arguments)}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.getSortIndex=function(){return cl.SORTINDEX_MULTILINESTRING},n.prototype.equalsExact=function(t,e){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=t,r=e;return!!this.isEquivalentClass(n)&&i.prototype.equalsExact.call(this,n,r)},n.prototype.getBoundaryDimension=function(){return this.isClosed()?lu.FALSE:0},n.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},n.prototype.getDimension=function(){return 1},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},n.prototype.getBoundary=function(){return new du(this).getBoundary()},n.prototype.getGeometryType=function(){return"MultiLineString"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.interfaces_=function(){return[ru]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(n,t),n}(fu),du=function(t,e){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var n=t,r=dl.MOD2_BOUNDARY_RULE;this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}else if(2===arguments.length){var i=t,o=e;this._geom=i,this._geomFact=i.getFactory(),this._bnRule=o}};du.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},du.prototype.getBoundary=function(){return this._geom instanceof Cu?this.boundaryLineString(this._geom):this._geom instanceof pu?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},du.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},du.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},du.prototype.computeBoundaryCoordinates=function(t){var e=new Tl;this._endpointMap=new nu;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Al.toCoordinateArray(e)},du.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new yu,this._endpointMap.put(t,e)),e.count++},du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du},du.getBoundary=function(t,e){return 1===arguments.length?new du(t).getBoundary():2===arguments.length?new du(t,e).getBoundary():void 0};var yu=function(){this.count=null};function gu(){}function mu(){}function vu(){}function bu(){}function _u(){}function wu(){}function Su(){}yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu};var xu={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};function Eu(){}function Ou(){}Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Su.getStackTrace=function(t,e){if(1===arguments.length){var n=new bu,r=new gu;return t.printStackTrace(r),n.toString()}if(2===arguments.length){for(var i=e,o="",s=new wu(new mu(Su.getStackTrace(t))),a=0;a<i;a++)try{o+=s.readLine()+Su.NEWLINE}catch(t){if(!(t instanceof _u))throw t;$a.shouldNeverReachHere()}return o}},Su.split=function(t,e){for(var n=e.length,r=new Tl,i=""+t,o=i.indexOf(e);0<=o;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var a=new Array(r.size()).fill(null),l=0;l<a.length;l++)a[l]=r.get(l);return a},Su.toString=function(t){if(1===arguments.length){var e=t;return Su.SIMPLE_ORDINATE_FORMAT.format(e)}},Su.spaces=function(t){return Su.chars(" ",t)},xu.NEWLINE.get=function(){return Fa.getProperty("line.separator")},xu.SIMPLE_ORDINATE_FORMAT.get=function(){return new vu},Object.defineProperties(Su,xu),Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Eu.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,ka.X)===t.getOrdinate(e-1,ka.X)&&t.getOrdinate(0,ka.Y)===t.getOrdinate(e-1,ka.Y)},Eu.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||ca.isNaN(s)&&ca.isNaN(a)))return!1}return!0},Eu.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Eu.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)Eu.copy(e,i-1,r,o,1);return r},Eu.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Eu.swap(t,r,e-r)},Eu.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Eu.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Eu.copyCoord(t,e+o,n,r+o)},Eu.toString=function(t){if(1===arguments.length){var e=t,n=e.size();if(0===n)return"()";var r=e.getDimension(),i=new Oa;i.append("(");for(var o=0;o<n;o++){0<o&&i.append(" ");for(var s=0;s<r;s++)0<s&&i.append(","),i.append(Su.toString(e.getOrdinate(o,s)))}return i.append(")"),i.toString()}},Eu.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Eu.createClosedRing(t,e,4):e.getOrdinate(0,ka.X)===e.getOrdinate(n-1,ka.X)&&e.getOrdinate(0,ka.Y)===e.getOrdinate(n-1,ka.Y)?e:Eu.createClosedRing(t,e,n+1)},Eu.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Eu.copy(e,0,r,0,i);for(var o=i;o<n;o++)Eu.copy(e,0,r,o,1);return r};var Cu=function(s){function e(t,e){s.call(this,e),this._points=null,this.init(t)}s&&(e.__proto__=s);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(s&&s.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ga:this._points.expandEnvelope(new Ga)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return s.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(t,e){if(2!==arguments.length)return s.prototype.equalsExact.apply(this,arguments);var n=t,r=e;if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!this.equal(this._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&Eu.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?lu.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return al.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Eu.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(t,e){if(1===arguments.length){for(var n=t,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=this._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var s=t;return e.compare(this._points,s._points)}},e.prototype.apply=function(t){if(Sa(t,pl))for(var e=t,n=0;n<this._points.size();n++)e.filter(this._points.getCoordinate(n));else if(Sa(t,hu)){var r=t;if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(this._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else(Sa(t,cu)||Sa(t,ul))&&t.filter(this)},e.prototype.getBoundary=function(){return new du(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var t=s.prototype.clone.call(this);return t._points=this._points.clone(),t},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new ua(t.size());this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[ru]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(cl);function Pu(){}Ou.prototype.interfaces_=function(){return[]},Ou.prototype.getClass=function(){return Ou};var Tu=function(i){function t(t,e){i.call(this,e),this._coordinates=t||null,this.init(this._coordinates)}i&&(t.__proto__=i);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ga;var t=new Ga;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},t.prototype.getSortIndex=function(){return i.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(t,e){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=t,r=e;return!!this.isEquivalentClass(n)&&(!(!this.isEmpty()||!n.isEmpty())||this.isEmpty()===n.isEmpty()&&this.equal(n.getCoordinate(),this.getCoordinate(),r))},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return lu.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(t,e){if(1===arguments.length){var n=t;return this.getCoordinate().compareTo(n.getCoordinate())}if(2===arguments.length){var r=t;return e.compare(this._coordinates,r._coordinates)}},t.prototype.apply=function(t){if(Sa(t,pl)){var e=t;if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(Sa(t,hu)){var n=t;if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else(Sa(t,cu)||Sa(t,ul))&&t.filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=i.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),$a.isTrue(t.size()<=1),this._coordinates=t},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Ou]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,e),t}(cl);function Mu(t){this._factory=t||null,this._isUserDataCopied=!1}Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu};var Lu=function(l){function r(t,e,n){if(l.call(this,n),this._shell=null,(this._holes=null)===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),l.hasNullElements(e))throw new ua;if(t.isEmpty()&&l.hasNonEmptyElements(e))throw new ua;this._shell=t,this._holes=e}l&&(r.__proto__=l);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(l&&l.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return l.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},r.prototype.getArea=function(){var t=0;t+=Math.abs(al.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(al.signedArea(this._holes[e].getCoordinateSequence()));return t},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o==(u!==s))return!1;o=l,s=u}return!0},r.prototype.equalsExact=function(t,e){if(2!==arguments.length)return l.prototype.equalsExact.apply(this,arguments);var n=t,r=e;if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(i._holes[a],r))return!1;return!0},r.prototype.normalize=function(t,e){if(0===arguments.length){this.normalize(this._shell,!0);for(var n=0;n<this._holes.length;n++)this.normalize(this._holes[n],!1);au.sort(this._holes)}else if(2===arguments.length){var r=t,i=e;if(r.isEmpty())return null;var o=new Array(r.getCoordinates().length-1).fill(null);Fa.arraycopy(r.getCoordinates(),0,o,0,o.length);var s=Al.minCoordinate(r.getCoordinates());Al.scroll(o,s),Fa.arraycopy(o,0,r.getCoordinates(),0,o.length),r.getCoordinates()[o.length]=o[0],al.isCCW(r.getCoordinates())===i&&Al.reverse(r.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},r.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},r.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(t,e){if(1===arguments.length){var n=t,r=this._shell,i=n._shell;return r.compareToSameClass(i)}if(2===arguments.length){var o=e,s=t,a=this._shell,l=s._shell,u=a.compareToSameClass(l,o);if(0!==u)return u;for(var c=this.getNumInteriorRing(),h=s.getNumInteriorRing(),f=0;f<c&&f<h;){var p=this.getInteriorRingN(f),d=s.getInteriorRingN(f),y=p.compareToSameClass(d,o);if(0!==y)return y;f++}return f<c?1:f<h?-1:0}},r.prototype.apply=function(t){if(Sa(t,pl)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Sa(t,hu)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Sa(t,cu))t.filter(this);else if(Sa(t,ul)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},r.prototype.clone=function(){var t=l.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].clone();return t},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<e.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(t){return this._holes[t]},r.prototype.interfaces_=function(){return[Pu]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,t),r}(cl),Nu=function(i){function n(){i.apply(this,arguments)}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.getSortIndex=function(){return cl.SORTINDEX_MULTIPOINT},n.prototype.isValid=function(){return!0},n.prototype.equalsExact=function(t,e){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=t,r=e;return!!this.isEquivalentClass(n)&&i.prototype.equalsExact.call(this,n,r)},n.prototype.getCoordinate=function(t){if(1!==arguments.length)return i.prototype.getCoordinate.apply(this,arguments);var e=t;return this._geometries[e].getCoordinate()},n.prototype.getBoundaryDimension=function(){return lu.FALSE},n.prototype.getDimension=function(){return 0},n.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},n.prototype.getGeometryType=function(){return"MultiPoint"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.interfaces_=function(){return[Ou]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(n,t),n}(fu),ku=function(n){function t(t,e){t instanceof ga&&e instanceof Xu&&(t=e.getCoordinateSequenceFactory().create(t)),n.call(this,t,e),this.validateConstruction()}n&&(t.__proto__=n);var e={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getSortIndex=function(){return cl.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return lu.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var t=this._points.copy();return Eu.reverse(t),this.getFactory().createLinearRing(t)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new ua;if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ua(this.getCoordinateSequence().size())},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},e.MINIMUM_VALID_SIZE.get=function(){return 4},e.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,e),t}(Cu),Au=function(i){function n(){i.apply(this,arguments)}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.getSortIndex=function(){return cl.SORTINDEX_MULTIPOLYGON},n.prototype.equalsExact=function(t,e){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var n=t,r=e;return!!this.isEquivalentClass(n)&&i.prototype.equalsExact.call(this,n,r)},n.prototype.getBoundaryDimension=function(){return 1},n.prototype.getDimension=function(){return 2},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},n.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Tl,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},n.prototype.getGeometryType=function(){return"MultiPolygon"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.interfaces_=function(){return[Pu]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(n,t),n}(fu),Iu={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Mu.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Mu.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Mu.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof fu?this.editGeometryCollection(t,e):t instanceof Lu?this.editPolygon(t,e):t instanceof Tu||t instanceof Cu?e.edit(t,this._factory):($a.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Mu.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Tl,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Nu?this._factory.createMultiPoint(r.toArray([])):n.getClass()===pu?this._factory.createMultiLineString(r.toArray([])):n.getClass()===Au?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Mu.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Tl,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},Mu.prototype.interfaces_=function(){return[]},Mu.prototype.getClass=function(){return Mu},Mu.GeometryEditorOperation=function(){},Iu.NoOpGeometryOperation.get=function(){return Ru},Iu.CoordinateOperation.get=function(){return ju},Iu.CoordinateSequenceOperation.get=function(){return Du},Object.defineProperties(Mu,Iu);var Ru=function(){};Ru.prototype.edit=function(t){return t},Ru.prototype.interfaces_=function(){return[Mu.GeometryEditorOperation]},Ru.prototype.getClass=function(){return Ru};var ju=function(){};ju.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ku?e.createLinearRing(n):t instanceof Cu?e.createLineString(n):t instanceof Tu?0<n.length?e.createPoint(n[0]):e.createPoint():t},ju.prototype.interfaces_=function(){return[Mu.GeometryEditorOperation]},ju.prototype.getClass=function(){return ju};var Du=function(){};function Fu(t,e){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(t instanceof Array)this._coordinates=t,this._dimension=3;else if(Number.isInteger(t)){var n=t;this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)this._coordinates[r]=new ga}else if(Sa(t,ka)){var i=t;if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=i.getCoordinateCopy(o)}}else if(2===arguments.length)if(t instanceof Array&&Number.isInteger(e)){var s=t,a=e;this._coordinates=s,this._dimension=a,null===s&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(t)&&Number.isInteger(e)){var l=t,u=e;this._coordinates=new Array(l).fill(null),this._dimension=u;for(var c=0;c<l;c++)this._coordinates[c]=new ga}}Du.prototype.edit=function(t,e){return t instanceof ku?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Cu?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Tu?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Du.prototype.interfaces_=function(){return[Mu.GeometryEditorOperation]},Du.prototype.getClass=function(){return Du};var Bu={serialVersionUID:{configurable:!0}};function Gu(){}Fu.prototype.setOrdinate=function(t,e,n){switch(e){case ka.X:this._coordinates[t].x=n;break;case ka.Y:this._coordinates[t].y=n;break;case ka.Z:this._coordinates[t].z=n;break;default:throw new ua}},Fu.prototype.size=function(){return this._coordinates.length},Fu.prototype.getOrdinate=function(t,e){switch(e){case ka.X:return this._coordinates[t].x;case ka.Y:return this._coordinates[t].y;case ka.Z:return this._coordinates[t].z}return ca.NaN},Fu.prototype.getCoordinate=function(t,e){if(1===arguments.length){var n=t;return this._coordinates[n]}if(2===arguments.length){var r=t,i=e;i.x=this._coordinates[r].x,i.y=this._coordinates[r].y,i.z=this._coordinates[r].z}},Fu.prototype.getCoordinateCopy=function(t){return new ga(this._coordinates[t])},Fu.prototype.getDimension=function(){return this._dimension},Fu.prototype.getX=function(t){return this._coordinates[t].x},Fu.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Fu(t,this._dimension)},Fu.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Fu.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Fu(t,this._dimension)},Fu.prototype.toString=function(){if(0<this._coordinates.length){var t=new Oa(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Fu.prototype.getY=function(t){return this._coordinates[t].y},Fu.prototype.toCoordinateArray=function(){return this._coordinates},Fu.prototype.interfaces_=function(){return[ka,ya]},Fu.prototype.getClass=function(){return Fu},Bu.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Fu,Bu);var Uu={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Gu.prototype.readResolve=function(){return Gu.instance()},Gu.prototype.create=function(t,e){if(1===arguments.length){if(t instanceof Array)return new Fu(t);if(Sa(t,ka))return new Fu(t)}else if(2===arguments.length){var n=t,r=e;return 3<r&&(r=3),r<2?new Fu(n):new Fu(n,r)}},Gu.prototype.interfaces_=function(){return[ba,ya]},Gu.prototype.getClass=function(){return Gu},Gu.instance=function(){return Gu.instanceObject},Uu.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Uu.instanceObject.get=function(){return new Gu},Object.defineProperties(Gu,Uu);var zu,qu=(Vu.__proto__=zu=Fl,((Vu.prototype=Object.create(zu&&zu.prototype)).constructor=Vu).prototype.get=function(t){return this.map_.get(t)||null},Vu.prototype.put=function(t,e){return this.map_.set(t,e),e},Vu.prototype.values=function(){for(var t=new Tl,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Vu.prototype.entrySet=function(){var e=new Hl;return this.map_.entries().forEach(function(t){return e.add(t)}),e},Vu.prototype.size=function(){return this.map_.size()},Vu);function Vu(){zu.call(this),this.map_=new Map}function Hu(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Hu.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ju){var t=arguments[0];(this._modelType=t)===Hu.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=Hu.FIXED,this.setScale(e)}else if(arguments[0]instanceof Hu){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}var Wu={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Hu.prototype.equals=function(t){return t instanceof Hu&&(this._modelType===t._modelType&&this._scale===t._scale)},Hu.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Ca(n).compareTo(new Ca(r))},Hu.prototype.getScale=function(){return this._scale},Hu.prototype.isFloating=function(){return this._modelType===Hu.FLOATING||this._modelType===Hu.FLOATING_SINGLE},Hu.prototype.getType=function(){return this._modelType},Hu.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Hu.FLOATING?t="Floating":this._modelType===Hu.FLOATING_SINGLE?t="Floating-Single":this._modelType===Hu.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Hu.prototype.makePrecise=function(t){if("number"==typeof t){var e=t;return!ca.isNaN(e)&&this._modelType!==Hu.FLOATING_SINGLE&&this._modelType===Hu.FIXED?Math.round(e*this._scale)/this._scale:e}if(t instanceof ga){var n=t;if(this._modelType===Hu.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},Hu.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Hu.FLOATING?t=16:this._modelType===Hu.FLOATING_SINGLE?t=6:this._modelType===Hu.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Hu.prototype.setScale=function(t){this._scale=Math.abs(t)},Hu.prototype.interfaces_=function(){return[ya,fa]},Hu.prototype.getClass=function(){return Hu},Hu.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},Wu.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Wu.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Hu,Wu);var Ju=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Yu={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ju.prototype.readResolve=function(){return Ju.nameToTypeMap.get(this._name)},Ju.prototype.toString=function(){return this._name},Ju.prototype.interfaces_=function(){return[ya]},Ju.prototype.getClass=function(){return Ju},Yu.serialVersionUID.get=function(){return-552860263173159e4},Yu.nameToTypeMap.get=function(){return new qu},Object.defineProperties(Ju,Yu),Hu.Type=Ju,Hu.FIXED=new Ju("FIXED"),Hu.FLOATING=new Ju("FLOATING"),Hu.FLOATING_SINGLE=new Ju("FLOATING SINGLE");var Xu=function t(){this._precisionModel=new Hu,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Sa(arguments[0],ba)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Hu&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Zu={serialVersionUID:{configurable:!0}};function Qu(t){this.geometryFactory=t||new Xu}Xu.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ga(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ga(t.getMinX(),t.getMinY()),new ga(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ga(t.getMinX(),t.getMinY()),new ga(t.getMinX(),t.getMaxY()),new ga(t.getMaxX(),t.getMaxY()),new ga(t.getMaxX(),t.getMinY()),new ga(t.getMinX(),t.getMinY())]),null)},Xu.prototype.createLineString=function(t){return t?t instanceof Array?new Cu(this.getCoordinateSequenceFactory().create(t),this):Sa(t,ka)?new Cu(t,this):void 0:new Cu(this.getCoordinateSequenceFactory().create([]),this)},Xu.prototype.createMultiLineString=function(t){return 0===arguments.length?new pu(null,this):1===arguments.length?new pu(t,this):void 0},Xu.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Xu.toGeometryArray(t));var a=t.iterator().next();if(1<t.size()){if(a instanceof Lu)return this.createMultiPolygon(Xu.toPolygonArray(t));if(a instanceof Cu)return this.createMultiLineString(Xu.toLineStringArray(t));if(a instanceof Tu)return this.createMultiPoint(Xu.toPointArray(t));$a.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Xu.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Xu.prototype.createPoint=function(t){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(t instanceof ga){var e=t;return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(Sa(t,ka))return new Tu(t,this)}},Xu.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Xu.prototype.createPolygon=function(t,e){if(0===arguments.length)return new Lu(null,null,this);if(1===arguments.length){if(Sa(t,ka)){var n=t;return this.createPolygon(this.createLinearRing(n))}if(t instanceof Array){var r=t;return this.createPolygon(this.createLinearRing(r))}if(t instanceof ku){var i=t;return this.createPolygon(i,null)}}else if(2===arguments.length)return new Lu(t,e,this)},Xu.prototype.getSRID=function(){return this._SRID},Xu.prototype.createGeometryCollection=function(t){return 0===arguments.length?new fu(null,this):1===arguments.length?new fu(t,this):void 0},Xu.prototype.createGeometry=function(t){return new Mu(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Xu.prototype.getPrecisionModel=function(){return this._precisionModel},Xu.prototype.createLinearRing=function(t){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(t instanceof Array){var e=t;return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Sa(t,ka))return new ku(t,this)}},Xu.prototype.createMultiPolygon=function(t){return 0===arguments.length?new Au(null,this):1===arguments.length?new Au(t,this):void 0},Xu.prototype.createMultiPoint=function(t){if(0===arguments.length)return new Nu(null,this);if(1===arguments.length){if(t instanceof Array)return new Nu(t,this);if(t instanceof Array){var e=t;return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Sa(t,ka)){var n=t;if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Eu.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},Xu.prototype.interfaces_=function(){return[ya]},Xu.prototype.getClass=function(){return Xu},Xu.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.getDefaultCoordinateSequenceFactory=function(){return Gu.instance()},Xu.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Xu.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Zu.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Xu,Zu);var Ku=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];Qu.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!$u[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Ku.indexOf(n)?$u[n].apply(this,[e.coordinates]):"GeometryCollection"===n?$u[n].apply(this,[e.geometries]):$u[n].apply(this,[e])},Qu.prototype.write=function(t){var e=t.getGeometryType();if(!tc[e])throw new Error("Geometry is not supported");return tc[e].apply(this,[t])};var $u={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!$u[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=$u.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new ga(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ga(t[0],t[1]),new ga(t[2],t[1]),new ga(t[2],t[3]),new ga(t[0],t[3]),new ga(t[0],t[1])])},Point:function(t){var e=new ga(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push($u.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=$u.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push($u.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=$u.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=$u.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push($u.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},tc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:tc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=tc.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(tc.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=tc.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=tc.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=tc.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=tc.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(tc[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},ec=function(t){this.geometryFactory=t||new Xu,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Qu(this.geometryFactory)};ec.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Hu.FIXED&&this.reducePrecision(e),e},ec.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var nc=function(){this.parser=new Qu(this.geometryFactory)};function rc(){}nc.prototype.write=function(t){return this.parser.write(t)};var ic={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function oc(t){this.message=t||""}function sc(){this.array_=[]}function ac(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc},rc.opposite=function(t){return t===rc.LEFT?rc.RIGHT:t===rc.RIGHT?rc.LEFT:t},ic.ON.get=function(){return 0},ic.LEFT.get=function(){return 1},ic.RIGHT.get=function(){return 2},Object.defineProperties(rc,ic),(oc.prototype=new Error).name="EmptyStackException",(sc.prototype=new El).add=function(t){return this.array_.push(t),!0},sc.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},sc.prototype.push=function(t){return this.array_.push(t),t},sc.prototype.pop=function(t){if(0===this.array_.length)throw new oc;return this.array_.pop()},sc.prototype.peek=function(){if(0===this.array_.length)throw new oc;return this.array_[this.array_.length-1]},sc.prototype.empty=function(){return 0===this.array_.length},sc.prototype.isEmpty=function(){return this.empty()},sc.prototype.search=function(t){return this.array_.indexOf(t)},sc.prototype.size=function(){return this.array_.length},sc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ac.prototype.getCoordinate=function(){return this._minCoord},ac.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},ac.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();$a.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=al.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===al.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===al.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},ac.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=rc.LEFT;return n[e].y<n[e+1].y&&(r=rc.RIGHT),r},ac.prototype.getEdge=function(){return this._orientedDe},ac.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},ac.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},ac.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}$a.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===rc.LEFT&&(this._orientedDe=this._minDe.getSym())},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var lc,uc=((lc=Ya)&&(cc.__proto__=lc),((cc.prototype=Object.create(lc&&lc.prototype)).constructor=cc).prototype.getCoordinate=function(){return this.pt},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc},cc.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},cc);function cc(t,e){lc.call(this,cc.msgWithCoord(t,e)),this.pt=e?new ga(e):null,this.name="TopologyException"}function hc(){this.array_=[]}function fc(){this._finder=null,this._dirEdgeList=new Tl,this._nodes=new Tl,this._rightMostCoord=null,this._env=null,this._finder=new ac}function pc(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[rc.ON]=e}else if(arguments[0]instanceof pc){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[rc.ON]=i,this.location[rc.LEFT]=o,this.location[rc.RIGHT]=s}}function dc(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new pc(t),this.elt[1]=new pc(t)}else if(arguments[0]instanceof dc){var e=arguments[0];this.elt[0]=new pc(e.elt[0]),this.elt[1]=new pc(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new pc(_a.NONE),this.elt[1]=new pc(_a.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new pc(i,o,s),this.elt[1]=new pc(i,o,s)}else if(4===arguments.length){var a=arguments[0],l=arguments[1],u=arguments[2],c=arguments[3];this.elt[0]=new pc(_a.NONE,_a.NONE,_a.NONE),this.elt[1]=new pc(_a.NONE,_a.NONE,_a.NONE),this.elt[a].setLocations(l,u,c)}}function yc(t,e){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Tl,this._pts=new Tl,this._label=new dc(_a.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Tl,this._geometryFactory=null;var n=t,r=e;this._geometryFactory=r,this.computePoints(n),this.computeRing()}hc.prototype.addLast=function(t){this.array_.push(t)},hc.prototype.removeFirst=function(){return this.array_.shift()},hc.prototype.isEmpty=function(){return 0===this.array_.length},fc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},fc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},fc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new uc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},fc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(rc.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},fc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},fc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(rc.RIGHT)&&e.getDepth(rc.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},fc.prototype.computeDepths=function(t){var e=new Hl,n=new hc,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},fc.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},fc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Ga,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},fc.prototype.addReachable=function(t){var e=new sc;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},fc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(rc.LEFT,t.getDepth(rc.RIGHT)),e.setDepth(rc.RIGHT,t.getDepth(rc.LEFT))},fc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},fc.prototype.getNodes=function(){return this._nodes},fc.prototype.getDirectedEdges=function(){return this._dirEdgeList},fc.prototype.interfaces_=function(){return[fa]},fc.prototype.getClass=function(){return fc},pc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},pc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==_a.NONE)return!1;return!0},pc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===_a.NONE&&(this.location[e]=t)},pc.prototype.isLine=function(){return 1===this.location.length},pc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[rc.ON]=this.location[rc.ON],e[rc.LEFT]=_a.NONE,e[rc.RIGHT]=_a.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===_a.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},pc.prototype.getLocations=function(){return this.location},pc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[rc.LEFT];this.location[rc.LEFT]=this.location[rc.RIGHT],this.location[rc.RIGHT]=t},pc.prototype.toString=function(){var t=new Oa;return 1<this.location.length&&t.append(_a.toLocationSymbol(this.location[rc.LEFT])),t.append(_a.toLocationSymbol(this.location[rc.ON])),1<this.location.length&&t.append(_a.toLocationSymbol(this.location[rc.RIGHT])),t.toString()},pc.prototype.setLocations=function(t,e,n){this.location[rc.ON]=t,this.location[rc.LEFT]=e,this.location[rc.RIGHT]=n},pc.prototype.get=function(t){return t<this.location.length?this.location[t]:_a.NONE},pc.prototype.isArea=function(){return 1<this.location.length},pc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===_a.NONE)return!0;return!1},pc.prototype.setLocation=function(t,e){if(1===arguments.length){var n=t;this.setLocation(rc.ON,n)}else if(2===arguments.length){var r=t,i=e;this.location[r]=i}},pc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(_a.NONE)},pc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},pc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},dc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},dc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},dc.prototype.isNull=function(t){return this.elt[t].isNull()},dc.prototype.setAllLocationsIfNull=function(t,e){if(1===arguments.length){var n=t;this.setAllLocationsIfNull(0,n),this.setAllLocationsIfNull(1,n)}else if(2===arguments.length){var r=t,i=e;this.elt[r].setAllLocationsIfNull(i)}},dc.prototype.isLine=function(t){return this.elt[t].isLine()},dc.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new pc(t.elt[e]):this.elt[e].merge(t.elt[e])},dc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},dc.prototype.getLocation=function(t,e){if(1===arguments.length){var n=t;return this.elt[n].get(rc.ON)}if(2===arguments.length){var r=t,i=e;return this.elt[r].get(i)}},dc.prototype.toString=function(){var t=new Oa;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},dc.prototype.isArea=function(t){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=t;return this.elt[e].isArea()}},dc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},dc.prototype.setLocation=function(t,e,n){if(2===arguments.length){var r=t,i=e;this.elt[r].setLocation(rc.ON,i)}else if(3===arguments.length){var o=t,s=e,a=n;this.elt[o].setLocation(s,a)}},dc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},dc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},dc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new pc(this.elt[t].location[0]))},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc},dc.toLineLabel=function(t){for(var e=new dc(_a.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},yc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=al.isCCW(this._ring.getCoordinates())},yc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},yc.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new uc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new uc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();$a.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},yc.prototype.getLinearRing=function(){return this._ring},yc.prototype.getCoordinate=function(t){return this._pts.get(t)},yc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},yc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;0<=a;a--)this._pts.add(r[a])}},yc.prototype.isHole=function(){return this._isHole},yc.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this._startDe;);},yc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!al.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},yc.prototype.addHole=function(t){this._holes.add(t)},yc.prototype.isShell=function(){return null===this._shell},yc.prototype.getLabel=function(){return this._label},yc.prototype.getEdges=function(){return this._edges},yc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},yc.prototype.getShell=function(){return this._shell},yc.prototype.mergeLabel=function(t,e){if(1===arguments.length){var n=t;this.mergeLabel(n,0),this.mergeLabel(n,1)}else if(2===arguments.length){var r=e,i=t.getLocation(r,rc.RIGHT);if(i===_a.NONE)return null;if(this._label.getLocation(r)===_a.NONE)return this._label.setLocation(r,i),null}},yc.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},yc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var gc,mc=(vc.__proto__=gc=yc,((vc.prototype=Object.create(gc&&gc.prototype)).constructor=vc).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},vc.prototype.getNext=function(t){return t.getNextMin()},vc.prototype.interfaces_=function(){return[]},vc.prototype.getClass=function(){return vc},vc);function vc(){var t=arguments[0],e=arguments[1];gc.call(this,t,e)}var bc,_c=(wc.__proto__=bc=yc,((wc.prototype=Object.create(bc&&bc.prototype)).constructor=wc).prototype.buildMinimalRings=function(){var t=new Tl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new mc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},wc.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},wc.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this._startDe;);},wc.prototype.getNext=function(t){return t.getNext()},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc},wc);function wc(){var t=arguments[0],e=arguments[1];bc.call(this,t,e)}function Sc(t){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length){var e=t;this._label=e}}Sc.prototype.setVisited=function(t){this._isVisited=t},Sc.prototype.setInResult=function(t){this._isInResult=t},Sc.prototype.isCovered=function(){return this._isCovered},Sc.prototype.isCoveredSet=function(){return this._isCoveredSet},Sc.prototype.setLabel=function(t){this._label=t},Sc.prototype.getLabel=function(){return this._label},Sc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Sc.prototype.updateIM=function(t){$a.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},Sc.prototype.isInResult=function(){return this._isInResult},Sc.prototype.isVisited=function(){return this._isVisited},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var xc,Ec=(Oc.__proto__=xc=Sc,((Oc.prototype=Object.create(xc&&xc.prototype)).constructor=Oc).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},Oc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Oc.prototype.getCoordinate=function(){return this._coord},Oc.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},Oc.prototype.computeIM=function(){},Oc.prototype.computeMergedLocation=function(t,e){var n=_a.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==_a.BOUNDARY&&(n=r)}return n},Oc.prototype.setLabel=function(t,e){if(2!==arguments.length)return xc.prototype.setLabel.apply(this,arguments);var n=t,r=e;null===this._label?this._label=new dc(n,r):this._label.setLocation(n,r)},Oc.prototype.getEdges=function(){return this._edges},Oc.prototype.mergeLabel=function(t){if(t instanceof Oc){var e=t;this.mergeLabel(e._label)}else if(t instanceof dc)for(var n=t,r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===_a.NONE&&this._label.setLocation(r,i)}},Oc.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},Oc.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=_a.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case _a.BOUNDARY:n=_a.INTERIOR;break;case _a.INTERIOR:default:n=_a.BOUNDARY}this._label.setLocation(t,n)},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc},Oc);function Oc(){xc.call(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new dc(0,_a.NONE)}function Cc(t){this.nodeMap=new nu,this.nodeFact=null;var e=t;this.nodeFact=e}function Pc(){}Cc.prototype.find=function(t){return this.nodeMap.get(t)},Cc.prototype.addNode=function(t){if(t instanceof ga){var e=t,n=this.nodeMap.get(e);return null===n&&(n=this.nodeFact.createNode(e),this.nodeMap.put(e,n)),n}if(t instanceof Ec){var r=t,i=this.nodeMap.get(r.getCoordinate());return null===i?(this.nodeMap.put(r.getCoordinate(),r),r):(i.mergeLabel(r),i)}},Cc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Cc.prototype.iterator=function(){return this.nodeMap.values().iterator()},Cc.prototype.values=function(){return this.nodeMap.values()},Cc.prototype.getBoundaryNodes=function(t){for(var e=new Tl,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===_a.BOUNDARY&&e.add(r)}return e},Cc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc};var Tc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};function Mc(t,e,n,r){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var i=t;this._edge=i}else if(3===arguments.length){var o=t,s=e,a=n;this._edge=o,this.init(s,a),this._label=null}else if(4===arguments.length){var l=t,u=e,c=n,h=r;this._edge=l,this.init(u,c),this._label=h}}Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.isNorthern=function(t){return t===Pc.NE||t===Pc.NW},Pc.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Pc.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},Pc.isInHalfPlane=function(t,e){return e===Pc.SE?t===Pc.SE||t===Pc.SW:t===e||t===e+1},Pc.quadrant=function(t,e){if("number"==typeof t&&"number"==typeof e){if(0===t&&0===e)throw new ua;return 0<=t?0<=e?Pc.NE:Pc.SE:0<=e?Pc.NW:Pc.SW}if(t instanceof ga&&e instanceof ga){if(e.x===t.x&&e.y===t.y)throw new ua;return e.x>=t.x?e.y>=t.y?Pc.NE:Pc.SE:e.y>=t.y?Pc.NW:Pc.SW}},Tc.NE.get=function(){return 0},Tc.NW.get=function(){return 1},Tc.SW.get=function(){return 2},Tc.SE.get=function(){return 3},Object.defineProperties(Pc,Tc),Mc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:al.computeOrientation(t._p0,t._p1,this._p1)},Mc.prototype.getDy=function(){return this._dy},Mc.prototype.getCoordinate=function(){return this._p0},Mc.prototype.setNode=function(t){this._node=t},Mc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Mc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Mc.prototype.getDirectedCoordinate=function(){return this._p1},Mc.prototype.getDx=function(){return this._dx},Mc.prototype.getLabel=function(){return this._label},Mc.prototype.getEdge=function(){return this._edge},Mc.prototype.getQuadrant=function(){return this._quadrant},Mc.prototype.getNode=function(){return this._node},Mc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Mc.prototype.computeLabel=function(){},Mc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Pc.quadrant(this._dx,this._dy),$a.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Mc.prototype.interfaces_=function(){return[fa]},Mc.prototype.getClass=function(){return Mc};var Lc,Nc=(kc.__proto__=Lc=Mc,((kc.prototype=Object.create(Lc&&Lc.prototype)).constructor=kc).prototype.getNextMin=function(){return this._nextMin},kc.prototype.getDepth=function(t){return this._depth[t]},kc.prototype.setVisited=function(t){this._isVisited=t},kc.prototype.computeDirectedLabel=function(){this._label=new dc(this._edge.getLabel()),this._isForward||this._label.flip()},kc.prototype.getNext=function(){return this._next},kc.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new uc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},kc.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,rc.LEFT)===_a.INTERIOR&&this._label.getLocation(e,rc.RIGHT)===_a.INTERIOR||(t=!1);return t},kc.prototype.setNextMin=function(t){this._nextMin=t},kc.prototype.print=function(t){Lc.prototype.print.call(this,t),t.print(" "+this._depth[rc.LEFT]+"/"+this._depth[rc.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},kc.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},kc.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,_a.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,_a.EXTERIOR);return t&&e&&n},kc.prototype.setEdgeRing=function(t){this._edgeRing=t},kc.prototype.getMinEdgeRing=function(){return this._minEdgeRing},kc.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},kc.prototype.setInResult=function(t){this._isInResult=t},kc.prototype.getSym=function(){return this._sym},kc.prototype.isForward=function(){return this._isForward},kc.prototype.getEdge=function(){return this._edge},kc.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},kc.prototype.setSym=function(t){this._sym=t},kc.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},kc.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===rc.LEFT&&(r=-1);var i=rc.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},kc.prototype.getEdgeRing=function(){return this._edgeRing},kc.prototype.isInResult=function(){return this._isInResult},kc.prototype.setNext=function(t){this._next=t},kc.prototype.isVisited=function(){return this._isVisited},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.depthFactor=function(t,e){return t===_a.EXTERIOR&&e===_a.INTERIOR?1:t===_a.INTERIOR&&e===_a.EXTERIOR?-1:0},kc);function kc(){var t=arguments[0],e=arguments[1];if(Lc.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function Ac(){}function Ic(t){if(this._edges=new Tl,this._nodes=null,this._edgeEndList=new Tl,0===arguments.length)this._nodes=new Cc(new Ac);else if(1===arguments.length){var e=t;this._nodes=new Cc(e)}}function Rc(t){this._geometryFactory=null,this._shellList=new Tl;var e=t;this._geometryFactory=e}function jc(){}function Dc(t,e){this._bounds=null,this._item=null;var n=t,r=e;this._bounds=n,this._item=r}function Fc(){this._size=null,this._items=null,this._size=0,this._items=new Tl,this._items.add(null)}function Bc(){}function Gc(){}function Uc(t){if(this._childBoundables=new Tl,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length){var e=t;this._level=e}}Ac.prototype.createNode=function(t){return new Ec(t,null)},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ic.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ic.prototype.find=function(t){return this._nodes.find(t)},Ic.prototype.addNode=function(t){if(t instanceof Ec){var e=t;return this._nodes.addNode(e)}if(t instanceof ga){var n=t;return this._nodes.addNode(n)}},Ic.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ic.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ic.prototype.debugPrintln=function(t){Fa.out.println(t)},Ic.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===_a.BOUNDARY},Ic.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ic.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&al.computeOrientation(t,e,r)===al.COLLINEAR&&Pc.quadrant(t,e)===Pc.quadrant(n,r)},Ic.prototype.getEdgeEnds=function(){return this._edgeEndList},Ic.prototype.debugPrint=function(t){Fa.out.print(t)},Ic.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ic.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ic.prototype.insertEdge=function(t){this._edges.add(t)},Ic.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ic.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Nc(n,!0),i=new Nc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ic.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ic.prototype.getNodes=function(){return this._nodes.values()},Ic.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()},Rc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Rc.prototype.computePolygons=function(t){for(var e=new Tl,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Rc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new uc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Rc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Tl,i=t.iterator();i.hasNext();){var o=i.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Rc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Rc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Tl,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new _c(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Rc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Rc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Rc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&al.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null!==o&&!s.contains(c)||(o=l))}return o},Rc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return $a.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Rc.prototype.add=function(t,e){if(1===arguments.length){var n=t;this.add(n.getEdgeEnds(),n.getNodes())}else if(2===arguments.length){var r=t;Ic.linkResultDirectedEdges(e);var i=this.buildMaximalEdgeRings(r),o=new Tl,s=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(s,this._shellList,o),this.placeFreeHoles(this._shellList,o)}},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc},jc.prototype.getBounds=function(){},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},Dc.prototype.getItem=function(){return this._item},Dc.prototype.getBounds=function(){return this._bounds},Dc.prototype.interfaces_=function(){return[jc,ya]},Dc.prototype.getClass=function(){return Dc},Fc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),--this._size,this.reorder(1),t},Fc.prototype.size=function(){return this._size},Fc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Fc.prototype.clear=function(){this._size=0,this._items.clear()},Fc.prototype.isEmpty=function(){return 0===this._size},Fc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc},Bc.prototype.visitItem=function(){},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Gc.prototype.insert=function(){},Gc.prototype.remove=function(){},Gc.prototype.query=function(){},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var zc={serialVersionUID:{configurable:!0}};function qc(){}function Vc(t,e,n){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var r=t,i=e,o=n;this._boundable1=r,this._boundable2=i,this._itemDistance=o,this._distance=this.distance()}function Hc(){if(this._root=null,this._built=!1,this._itemBoundables=new Tl,this._nodeCapacity=null,0===arguments.length){var t=Hc.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(1===arguments.length){var e=arguments[0];$a.isTrue(1<e,"Node capacity must be greater than 1"),this._nodeCapacity=e}}Uc.prototype.getLevel=function(){return this._level},Uc.prototype.size=function(){return this._childBoundables.size()},Uc.prototype.getChildBoundables=function(){return this._childBoundables},Uc.prototype.addChildBoundable=function(t){$a.isTrue(null===this._bounds),this._childBoundables.add(t)},Uc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Uc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Uc.prototype.interfaces_=function(){return[jc,ya]},Uc.prototype.getClass=function(){return Uc},zc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Uc,zc),qc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},qc.min=function(t){return qc.sort(t),t.get(0)},qc.sort=function(t,e){var n=t.toArray();e?au.sort(n,e):au.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},qc.singletonList=function(t){var e=new Tl;return e.add(t),e},Vc.prototype.expandToQueue=function(t,e){var n=Vc.isComposite(this._boundable1),r=Vc.isComposite(this._boundable2);if(n&&r)return Vc.area(this._boundable1)>Vc.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new ua},Vc.prototype.isLeaves=function(){return!(Vc.isComposite(this._boundable1)||Vc.isComposite(this._boundable2))},Vc.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Vc.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=new Vc(i.next(),e,this._itemDistance);o.getDistance()<r&&n.add(o)}},Vc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Vc.prototype.getDistance=function(){return this._distance},Vc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Vc.prototype.interfaces_=function(){return[fa]},Vc.prototype.getClass=function(){return Vc},Vc.area=function(t){return t.getBounds().getArea()},Vc.isComposite=function(t){return t instanceof Uc};var Wc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};function Jc(){}Hc.prototype.getNodeCapacity=function(){return this._nodeCapacity},Hc.prototype.lastNode=function(t){return t.get(t.size()-1)},Hc.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Uc?t+=this.size(n):n instanceof Dc&&(t+=1)}return t}},Hc.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Dc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Hc.prototype.itemsTree=function(t){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new Tl:e}if(1===arguments.length){for(var n=t,r=new Tl,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Uc){var s=this.itemsTree(o);null!==s&&r.add(s)}else o instanceof Dc?r.add(o.getItem()):$a.shouldNeverReachHere()}return r.size()<=0?null:r}},Hc.prototype.insert=function(t,e){$a.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Dc(t,e))},Hc.prototype.boundablesAtLevel=function(t,e,n){if(1===arguments.length){var r=t,i=new Tl;return this.boundablesAtLevel(r,this._root,i),i}if(3===arguments.length){var o=t,s=e,a=n;if($a.isTrue(-2<o),s.getLevel()===o)return a.add(s),null;for(var l=s.getChildBoundables().iterator();l.hasNext();){var u=l.next();u instanceof Uc?this.boundablesAtLevel(o,u,a):($a.isTrue(u instanceof Dc),-1===o&&a.add(u))}return null}},Hc.prototype.query=function(t,e,n){if(1===arguments.length){var r=t;this.build();var i=new Tl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i),i}if(2===arguments.length){var o=t,s=e;if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),o)&&this.query(o,this._root,s)}else if(3===arguments.length)if(Sa(n,Bc)&&t instanceof Object&&e instanceof Uc)for(var a=t,l=n,u=e.getChildBoundables(),c=0;c<u.size();c++){var h=u.get(c);this.getIntersectsOp().intersects(h.getBounds(),a)&&(h instanceof Uc?this.query(a,h,l):h instanceof Dc?l.visitItem(h.getItem()):$a.shouldNeverReachHere())}else if(Sa(n,El)&&t instanceof Object&&e instanceof Uc)for(var f=t,p=n,d=e.getChildBoundables(),y=0;y<d.size();y++){var g=d.get(y);this.getIntersectsOp().intersects(g.getBounds(),f)&&(g instanceof Uc?this.query(f,g,p):g instanceof Dc?p.add(g.getItem()):$a.shouldNeverReachHere())}},Hc.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Hc.prototype.getRoot=function(){return this.build(),this._root},Hc.prototype.remove=function(t,e,n){if(2===arguments.length){var r=t,i=e;return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.remove(r,this._root,i)}if(3===arguments.length){var o=t,s=e,a=n,l=this.removeItem(s,a);if(l)return!0;for(var u=null,c=s.getChildBoundables().iterator();c.hasNext();){var h=c.next();if(this.getIntersectsOp().intersects(h.getBounds(),o)&&h instanceof Uc&&(l=this.remove(o,h,a))){u=h;break}}return null!==u&&u.getChildBoundables().isEmpty()&&s.getChildBoundables().remove(u),l}},Hc.prototype.createHigherLevels=function(t,e){$a.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Hc.prototype.depth=function(t){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof Uc){var i=this.depth(r);e<i&&(e=i)}}return e+1}},Hc.prototype.createParentBoundables=function(t,e){$a.isTrue(!t.isEmpty());var n=new Tl;n.add(this.createNode(e));var r=new Tl(t);qc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},Hc.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Hc.prototype.interfaces_=function(){return[ya]},Hc.prototype.getClass=function(){return Hc},Hc.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},Wc.IntersectsOp.get=function(){return Yc},Wc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Wc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Hc,Wc);var Yc=function(){};Jc.prototype.distance=function(){},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc};var Xc,Zc=function(f){function v(t){t=t||v.DEFAULT_NODE_CAPACITY,f.call(this,t)}f&&(v.__proto__=f);var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((v.prototype=Object.create(f&&f.prototype)).constructor=v).prototype.createParentBoundablesFromVerticalSlices=function(t,e){$a.isTrue(0<t.length);for(var n=new Tl,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},v.prototype.createNode=function(t){return new Qc(t)},v.prototype.size=function(){return 0===arguments.length?f.prototype.size.call(this):f.prototype.size.apply(this,arguments)},v.prototype.insert=function(t,e){if(2!==arguments.length)return f.prototype.insert.apply(this,arguments);var n=t,r=e;if(n.isNull())return null;f.prototype.insert.call(this,n,r)},v.prototype.getIntersectsOp=function(){return v.intersectsOp},v.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Tl;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},v.prototype.query=function(t,e,n){if(1===arguments.length){var r=t;return f.prototype.query.call(this,r)}if(2===arguments.length){var i=t,o=e;f.prototype.query.call(this,i,o)}else if(3===arguments.length)if(Sa(n,Bc)&&t instanceof Object&&e instanceof Uc){var s=t,a=e,l=n;f.prototype.query.call(this,s,a,l)}else if(Sa(n,El)&&t instanceof Object&&e instanceof Uc){var u=t,c=e,h=n;f.prototype.query.call(this,u,c,h)}},v.prototype.getComparator=function(){return v.yComparator},v.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return f.prototype.createParentBoundables.call(this,t,e)},v.prototype.remove=function(t,e){if(2!==arguments.length)return f.prototype.remove.apply(this,arguments);var n=t,r=e;return f.prototype.remove.call(this,n,r)},v.prototype.depth=function(){return 0===arguments.length?f.prototype.depth.call(this):f.prototype.depth.apply(this,arguments)},v.prototype.createParentBoundables=function(t,e){$a.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Tl(t);qc.sort(r,v.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)},v.prototype.nearestNeighbour=function(t,e,n){if(1===arguments.length){if(Sa(t,Jc)){var r=t,i=new Vc(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}if(t instanceof Vc){var o=t;return this.nearestNeighbour(o,ca.POSITIVE_INFINITY)}}else if(2===arguments.length){if(t instanceof v&&Sa(e,Jc)){var s=t,a=e,l=new Vc(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(l)}if(t instanceof Vc&&"number"==typeof e){var u=t,c=e,h=null,f=new Fc;for(f.add(u);!f.isEmpty()&&0<c;){var p=f.poll(),d=p.getDistance();if(c<=d)break;p.isLeaves()?(c=d,h=p):p.expandToQueue(f,c)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var y=n,g=new Dc(t,e),m=new Vc(this.getRoot(),g,y);return this.nearestNeighbour(m)[0]}},v.prototype.interfaces_=function(){return[Gc,ya]},v.prototype.getClass=function(){return v},v.centreX=function(t){return v.avg(t.getMinX(),t.getMaxX())},v.avg=function(t,e){return(t+e)/2},v.centreY=function(t){return v.avg(t.getMinY(),t.getMaxY())},t.STRtreeNode.get=function(){return Qc},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[da]},compare:function(t,e){return f.compareDoubles(v.centreX(t.getBounds()),v.centreX(e.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[da]},compare:function(t,e){return f.compareDoubles(v.centreY(t.getBounds()),v.centreY(e.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[f.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(v,t),v}(Hc),Qc=(Kc.__proto__=Xc=Uc,((Kc.prototype=Object.create(Xc&&Xc.prototype)).constructor=Kc).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Ga(n.getBounds()):t.expandToInclude(n.getBounds())}return t},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Kc);function Kc(){var t=arguments[0];Xc.call(this,t)}function $c(){}function th(t,e,n,r){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=t,o=e,s=n,a=r;this._segString=i,this.coord=new ga(o),this.segmentIndex=s,this._segmentOctant=a,this._isInterior=!o.equals2D(i.getCoordinate(s))}function eh(t){this._nodeMap=new nu,this._edge=null;var e=t;this._edge=e}function nh(){}function rh(){}function ih(){}$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c},$c.relativeSign=function(t,e){return t<e?-1:e<t?1:0},$c.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=$c.relativeSign(e.x,n.x),i=$c.relativeSign(e.y,n.y);switch(t){case 0:return $c.compareValue(r,i);case 1:return $c.compareValue(i,r);case 2:return $c.compareValue(i,-r);case 3:return $c.compareValue(-r,i);case 4:return $c.compareValue(-r,-i);case 5:return $c.compareValue(-i,-r);case 6:return $c.compareValue(-i,r);case 7:return $c.compareValue(r,-i)}return $a.shouldNeverReachHere("invalid octant value"),0},$c.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0},th.prototype.getCoordinate=function(){return this.coord},th.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},th.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:$c.compare(this._segmentOctant,this.coord,e.coord)},th.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},th.prototype.isInterior=function(){return this._isInterior},th.prototype.interfaces_=function(){return[fa]},th.prototype.getClass=function(){return th},eh.prototype.getSplitCoordinates=function(){var t=new Il;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},eh.prototype.addCollapsedNodes=function(){var t=new Tl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},eh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},eh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Ca(e+1))}},eh.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new ga(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new ga(e.coord))},eh.prototype.iterator=function(){return this._nodeMap.values().iterator()},eh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},eh.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},eh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Ca(e[0])),r=i}},eh.prototype.getEdge=function(){return this._edge},eh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},eh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new ga(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ga(e.coord)),new oh(o,this._edge.getData())},eh.prototype.add=function(t,e){var n=new th(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?($a.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},eh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Ya("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Ya("bad split edge end point at "+i)},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},nh.octant=function(t,e){if("number"==typeof t&&"number"==typeof e){var n=t,r=e;if(0===n&&0===r)throw new ua;var i=Math.abs(n),o=Math.abs(r);return 0<=n?0<=r?o<=i?0:1:o<=i?7:6:0<=r?o<=i?3:2:o<=i?4:5}if(t instanceof ga&&e instanceof ga){var s=e.x-t.x,a=e.y-t.y;if(0==s&&0==a)throw new ua;return nh.octant(s,a)}},rh.prototype.getCoordinates=function(){},rh.prototype.size=function(){},rh.prototype.getCoordinate=function(){},rh.prototype.isClosed=function(){},rh.prototype.setData=function(){},rh.prototype.getData=function(){},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh},ih.prototype.addIntersection=function(){},ih.prototype.interfaces_=function(){return[rh]},ih.prototype.getClass=function(){return ih};var oh=function(t,e){this._nodeList=new eh(this),this._pts=null,this._data=null;var n=t,r=e;this._pts=n,this._data=r};function sh(t,e,n,r){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ga,this.p1=new ga;else if(1===arguments.length){var i=t;this.p0=new ga(i.p0),this.p1=new ga(i.p1)}else if(2===arguments.length)this.p0=t,this.p1=e;else if(4===arguments.length){var o=t,s=e,a=n,l=r;this.p0=new ga(o,s),this.p1=new ga(a,l)}}oh.prototype.getCoordinates=function(){return this._pts},oh.prototype.size=function(){return this._pts.length},oh.prototype.getCoordinate=function(t){return this._pts[t]},oh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},oh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},oh.prototype.setData=function(t){this._data=t},oh.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:nh.octant(t,e)},oh.prototype.getData=function(){return this._data},oh.prototype.addIntersection=function(t,e,n,r){if(2===arguments.length){var i=t,o=e;this.addIntersectionNode(i,o)}else if(4===arguments.length){var s=e,a=r,l=new ga(t.getIntersection(a));this.addIntersection(l,s)}},oh.prototype.toString=function(){return Va.toLineString(new Fu(this._pts))},oh.prototype.getNodeList=function(){return this._nodeList},oh.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},oh.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},oh.prototype.interfaces_=function(){return[ih]},oh.prototype.getClass=function(){return oh},oh.getNodedSubstrings=function(t,e){if(1===arguments.length){var n=t,r=new Tl;return oh.getNodedSubstrings(n,r),r}if(2===arguments.length)for(var i=e,o=t.iterator();o.hasNext();)o.next().getNodeList().addSplitEdges(i)};var ah={serialVersionUID:{configurable:!0}};function lh(){this.tempEnv1=new Ga,this.tempEnv2=new Ga,this._overlapSeg1=new sh,this._overlapSeg2=new sh}function uh(t,e,n,r){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=t,o=e,s=n,a=r;this._pts=i,this._start=o,this._end=s,this._context=a}function ch(){}function hh(){}function fh(t){if(this._segInt=null,0!==arguments.length&&1===arguments.length){var e=t;this.setSegmentIntersector(e)}}sh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},sh.prototype.orientationIndex=function(t){if(t instanceof sh){var e=t,n=al.orientationIndex(this.p0,this.p1,e.p0),r=al.orientationIndex(this.p0,this.p1,e.p1);return 0<=n&&0<=r||n<=0&&r<=0?Math.max(n,r):0}if(t instanceof ga){var i=t;return al.orientationIndex(this.p0,this.p1,i)}},sh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},sh.prototype.isVertical=function(){return this.p0.x===this.p1.x},sh.prototype.equals=function(t){if(!(t instanceof sh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},sh.prototype.intersection=function(t){var e=new rl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},sh.prototype.project=function(t){if(t instanceof ga){var e=t;if(e.equals(this.p0)||e.equals(this.p1))return new ga(e);var n=this.projectionFactor(e),r=new ga;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}if(t instanceof sh){var i=t,o=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(1<=o&&1<=s)return null;if(o<=0&&s<=0)return null;var a=this.project(i.p0);o<0&&(a=this.p0),1<o&&(a=this.p1);var l=this.project(i.p1);return s<0&&(l=this.p0),1<s&&(l=this.p1),new sh(a,l)}},sh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},sh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},sh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},sh.prototype.distancePerpendicular=function(t){return al.distancePointLinePerpendicular(t,this.p0,this.p1)},sh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},sh.prototype.midPoint=function(){return sh.midPoint(this.p0,this.p1)},sh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?ca.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},sh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=ca.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},sh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},sh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},sh.prototype.getLength=function(){return this.p0.distance(this.p1)},sh.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},sh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},sh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},sh.prototype.lineIntersection=function(t){try{return Ba.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof ja))throw t}return null},sh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},sh.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,l=e*o/s}return new ga(n-l,r+a)},sh.prototype.setCoordinates=function(t,e){if(1===arguments.length)this.setCoordinates(t.p0,t.p1);else if(2===arguments.length){var n=t,r=e;this.p0.x=n.x,this.p0.y=n.y,this.p1.x=r.x,this.p1.y=r.y}},sh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||ca.isNaN(e))&&(e=1),e},sh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},sh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},sh.prototype.distance=function(t){if(t instanceof sh)return al.distanceLineLine(this.p0,this.p1,t.p0,t.p1);if(t instanceof ga){var e=t;return al.distancePointLine(e,this.p0,this.p1)}},sh.prototype.pointAlong=function(t){var e=new ga;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},sh.prototype.hashCode=function(){var t=ca.doubleToLongBits(this.p0.x);t^=31*ca.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=ca.doubleToLongBits(this.p1.x);return n^=31*ca.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},sh.prototype.interfaces_=function(){return[fa,ya]},sh.prototype.getClass=function(){return sh},sh.midPoint=function(t,e){return new ga((t.x+e.x)/2,(t.y+e.y)/2)},ah.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(sh,ah),lh.prototype.overlap=function(t,e,n,r){if(2!==arguments.length&&4===arguments.length){var i=e,o=n,s=r;t.getLineSegment(i,this._overlapSeg1),o.getLineSegment(s,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},uh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},uh.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},uh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},uh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},uh.prototype.setId=function(t){this._id=t},uh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},uh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Ga(t,e)}return this._env},uh.prototype.getEndIndex=function(){return this._end},uh.prototype.getStartIndex=function(){return this._start},uh.prototype.getContext=function(){return this._context},uh.prototype.getId=function(){return this._id},uh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch},ch.getChainStartIndices=function(t){var e=0,n=new Tl;n.add(new Ca(e));do{var r=ch.findChainEnd(t,e);n.add(new Ca(r)),e=r}while(e<t.length-1);return ch.toIntArray(n)},ch.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Pc.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Pc.quadrant(t[i-1],t[i])===r);)i++;return i-1},ch.getChains=function(t,e){if(1===arguments.length)return ch.getChains(t,null);if(2===arguments.length){for(var n=t,r=e,i=new Tl,o=ch.getChainStartIndices(n),s=0;s<o.length-1;s++){var a=new uh(n,o[s],o[s+1],r);i.add(a)}return i}},ch.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},hh.prototype.computeNodes=function(){},hh.prototype.getNodedSubstrings=function(){},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh},fh.prototype.setSegmentIntersector=function(t){this._segInt=t},fh.prototype.interfaces_=function(){return[hh]},fh.prototype.getClass=function(){return fh};var ph,dh=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new Tl,this._index=new Zc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e);var n={SegmentOverlapAction:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return oh.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(t){for(var e=ch.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var t=new yh(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return yh},Object.defineProperties(t,n),t}(fh),yh=(gh.__proto__=ph=lh,((gh.prototype=Object.create(ph&&ph.prototype)).constructor=gh).prototype.overlap=function(t,e,n,r){if(4!==arguments.length)return ph.prototype.overlap.apply(this,arguments);var i=e,o=n,s=r,a=t.getContext(),l=o.getContext();this._si.processIntersections(a,i,l,s)},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh},gh);function gh(){ph.call(this),this._si=null;var t=arguments[0];this._si=t}function mh(){if(this._quadrantSegments=mh.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=mh.CAP_ROUND,this._joinStyle=mh.JOIN_ROUND,this._mitreLimit=mh.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=mh.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(i),this.setJoinStyle(o),this.setMitreLimit(s)}}var vh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};function bh(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=al.COUNTERCLOCKWISE,this._inputLine=t||null}mh.prototype.getEndCapStyle=function(){return this._endCapStyle},mh.prototype.isSingleSided=function(){return this._isSingleSided},mh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=mh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=mh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==mh.JOIN_ROUND&&(this._quadrantSegments=mh.DEFAULT_QUADRANT_SEGMENTS)},mh.prototype.getJoinStyle=function(){return this._joinStyle},mh.prototype.setJoinStyle=function(t){this._joinStyle=t},mh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},mh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},mh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},mh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},mh.prototype.getMitreLimit=function(){return this._mitreLimit},mh.prototype.setMitreLimit=function(t){this._mitreLimit=t},mh.prototype.setSingleSided=function(t){this._isSingleSided=t},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh},mh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},vh.CAP_ROUND.get=function(){return 1},vh.CAP_FLAT.get=function(){return 2},vh.CAP_SQUARE.get=function(){return 3},vh.JOIN_ROUND.get=function(){return 1},vh.JOIN_MITRE.get=function(){return 2},vh.JOIN_BEVEL.get=function(){return 3},vh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},vh.DEFAULT_MITRE_LIMIT.get=function(){return 5},vh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(mh,vh);var _h={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};function wh(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Tl}bh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},bh.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=bh.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},bh.prototype.isShallowConcavity=function(t,e,n,r){return al.computeOrientation(t,e,n)===this._angleOrientation&&al.distancePointLine(e,t,n)<r},bh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/bh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},bh.prototype.isConcave=function(t,e,n){return al.computeOrientation(t,e,n)===this._angleOrientation},bh.prototype.simplify=function(t){for(this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=al.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);this.deleteShallowConcavities(););return this.collapseLine()},bh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===bh.DELETE;)e++;return e},bh.prototype.isShallow=function(t,e,n,r){return al.distancePointLine(e,t,n)<r},bh.prototype.collapseLine=function(){for(var t=new Il,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==bh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},bh.simplify=function(t,e){return new bh(t).simplify(e)},_h.INIT.get=function(){return 0},_h.DELETE.get=function(){return 1},_h.KEEP.get=function(){return 1},_h.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(bh,_h);var Sh={COORDINATE_ARRAY_TYPE:{configurable:!0}};function xh(){}wh.prototype.getCoordinates=function(){return this._ptList.toArray(wh.COORDINATE_ARRAY_TYPE)},wh.prototype.setPrecisionModel=function(t){this._precisionModel=t},wh.prototype.addPt=function(t){var e=new ga(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},wh.prototype.revere=function(){},wh.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},wh.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},wh.prototype.toString=function(){return(new Xu).createLineString(this.getCoordinates()).toString()},wh.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ga(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},wh.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},Sh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(wh,Sh);var Eh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};function Oh(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new sh,this._seg1=new sh,this._offset0=new sh,this._offset1=new sh,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new rl,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),8<=e.getQuadrantSegments()&&e.getJoinStyle()===mh.JOIN_ROUND&&(this._closingSegLengthFactor=Oh.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh},xh.toDegrees=function(t){return 180*t/Math.PI},xh.normalize=function(t){for(;t>Math.PI;)t-=xh.PI_TIMES_2;for(;t<=-Math.PI;)t+=xh.PI_TIMES_2;return t},xh.angle=function(t,e){if(1===arguments.length)return Math.atan2(t.y,t.x);if(2===arguments.length){var n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)}},xh.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},xh.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},xh.interiorAngle=function(t,e,n){var r=xh.angle(e,t),i=xh.angle(e,n);return Math.abs(i-r)},xh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=xh.PI_TIMES_2;xh.PI_TIMES_2<=t&&(t=0)}else{for(;xh.PI_TIMES_2<=t;)t-=xh.PI_TIMES_2;t<0&&(t=0)}return t},xh.angleBetween=function(t,e,n){var r=xh.angle(e,t),i=xh.angle(e,n);return xh.diff(r,i)},xh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},xh.toRadians=function(t){return t*Math.PI/180},xh.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?xh.COUNTERCLOCKWISE:n<0?xh.CLOCKWISE:xh.NONE},xh.angleBetweenOriented=function(t,e,n){var r=xh.angle(e,t),i=xh.angle(e,n)-r;return i<=-Math.PI?i+xh.PI_TIMES_2:i>Math.PI?i-xh.PI_TIMES_2:i},Eh.PI_TIMES_2.get=function(){return 2*Math.PI},Eh.PI_OVER_2.get=function(){return Math.PI/2},Eh.PI_OVER_4.get=function(){return Math.PI/4},Eh.COUNTERCLOCKWISE.get=function(){return al.COUNTERCLOCKWISE},Eh.CLOCKWISE.get=function(){return al.CLOCKWISE},Eh.NONE.get=function(){return al.COLLINEAR},Object.defineProperties(xh,Eh);var Ch={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};function Ph(t,e){this._distance=0,this._precisionModel=null,this._bufParams=null;var n=t,r=e;this._precisionModel=n,this._bufParams=r}function Th(t){this._subgraphs=null,this._seg=new sh,this._cga=new al;var e=t;this._subgraphs=e}Oh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=al.computeOrientation(this._s0,this._s1,this._s2),r=n===al.CLOCKWISE&&this._side===rc.LEFT||n===al.COUNTERCLOCKWISE&&this._side===rc.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Oh.prototype.addLineEndCap=function(t,e){var n=new sh(t,e),r=new sh;this.computeOffsetSegment(n,rc.LEFT,this._distance,r);var i=new sh;this.computeOffsetSegment(n,rc.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case mh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,al.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case mh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case mh.CAP_SQUARE:var l=new ga;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new ga(r.p1.x+l.x,r.p1.y+l.y),c=new ga(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Oh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Oh.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Ba.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof ja))throw t;o=new ga(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Oh.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===al.CLOCKWISE?a<=c&&(a+=2*Math.PI):c<=a&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)},Oh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Oh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===mh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===mh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Oh.prototype.createSquare=function(t){this._segList.addPt(new ga(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ga(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ga(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ga(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Oh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Oh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Oh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Oh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Oh.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=xh.angle(i,this._seg0.p0),s=xh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=xh.normalize(o+s),l=xh.normalize(a+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(s)),h=new sh(i,new ga(i.x+u*Math.cos(l),i.y+u*Math.sin(l))),f=h.pointAlongOffset(1,c),p=h.pointAlongOffset(1,-c);this._side===rc.LEFT?(this._segList.addPt(f),this._segList.addPt(p)):(this._segList.addPt(p),this._segList.addPt(f))},Oh.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===rc.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=i*n*o/a,u=i*n*s/a;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Oh.prototype.addFilletArc=function(t,e,n,r,i){var o=r===al.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=0,c=new ga;u<s;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Oh.prototype.addInsideTurn=function(){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Oh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor){var t=new ga((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(t);var e=new ga((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(e)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Oh.prototype.createCircle=function(t){var e=new ga(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Oh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Oh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new wh,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Oh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Oh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===mh.JOIN_BEVEL||this._bufParams.getJoinStyle()===mh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,al.CLOCKWISE,this._distance))},Oh.prototype.closeRing=function(){this._segList.closeRing()},Oh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},Ch.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ch.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ch.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ch.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Oh,Ch),Ph.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Al.reverse(o),o},Ph.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=bh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],rc.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=bh.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],rc.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},Ph.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===rc.RIGHT&&(r=-r);var i=bh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Ph.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=bh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],rc.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=bh.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],rc.LEFT);for(var l=a-2;0<=l;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ph.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case mh.CAP_ROUND:e.createCircle(t);break;case mh.CAP_SQUARE:e.createSquare(t)}},Ph.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Ph.prototype.getBufferParameters=function(){return this._bufParams},Ph.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ph.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ph.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Ph.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=bh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],rc.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{var a=bh.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],rc.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},Ph.prototype.getSegGen=function(t){return new Oh(this._precisionModel,this._bufParams,t)},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new ga(t[n]);return e};var Mh={DepthSegment:{configurable:!0}};Th.prototype.findStabbedSegments=function(t,e,n){var r=this;if(1===arguments.length){for(var i=t,o=new Tl,s=this._subgraphs.iterator();s.hasNext();){var a=s.next(),l=a.getEnvelope();i.y<l.getMinY()||i.y>l.getMaxY()||r.findStabbedSegments(i,a.getDirectedEdges(),o)}return o}if(3===arguments.length)if(Sa(n,El)&&t instanceof ga&&e instanceof Nc){for(var u=t,c=e,h=n,f=c.getEdge().getCoordinates(),p=0;p<f.length-1;p++)if(r._seg.p0=f[p],r._seg.p1=f[p+1],r._seg.p0.y>r._seg.p1.y&&r._seg.reverse(),!(Math.max(r._seg.p0.x,r._seg.p1.x)<u.x||r._seg.isHorizontal()||u.y<r._seg.p0.y||u.y>r._seg.p1.y||al.computeOrientation(r._seg.p0,r._seg.p1,u)===al.RIGHT)){var d=c.getDepth(rc.LEFT);r._seg.p0.equals(f[p])||(d=c.getDepth(rc.RIGHT));var y=new Lh(r._seg,d);h.add(y)}}else if(Sa(n,El)&&t instanceof ga&&Sa(e,El))for(var g=t,m=n,v=e.iterator();v.hasNext();){var b=v.next();b.isForward()&&r.findStabbedSegments(g,b,m)}},Th.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:qc.min(e)._leftDepth},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},Mh.DepthSegment.get=function(){return Lh},Object.defineProperties(Th,Mh);var Lh=function(t,e){this._upwardSeg=null,this._leftDepth=null;var n=t,r=e;this._upwardSeg=new sh(n),this._leftDepth=r};function Nh(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null}function kh(t,e,n){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Tl;var r=t,i=e,o=n;this._inputGeom=r,this._distance=i,this._curveBuilder=o}function Ah(){}function Ih(t){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=t;this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}function Rh(t){this._geom=null;var e=t;this._geom=e}function jh(){this._edgeMap=new nu,this._edgeList=null,this._ptInAreaLocation=[_a.NONE,_a.NONE]}Lh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Lh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Lh.prototype.toString=function(){return this._upwardSeg.toString()},Lh.prototype.interfaces_=function(){return[fa]},Lh.prototype.getClass=function(){return Lh},Nh.prototype.area=function(){return Nh.area(this.p0,this.p1,this.p2)},Nh.prototype.signedArea=function(){return Nh.signedArea(this.p0,this.p1,this.p2)},Nh.prototype.interpolateZ=function(t){if(null===t)throw new ua;return Nh.interpolateZ(t,this.p0,this.p1,this.p2)},Nh.prototype.longestSideLength=function(){return Nh.longestSideLength(this.p0,this.p1,this.p2)},Nh.prototype.isAcute=function(){return Nh.isAcute(this.p0,this.p1,this.p2)},Nh.prototype.circumcentre=function(){return Nh.circumcentre(this.p0,this.p1,this.p2)},Nh.prototype.area3D=function(){return Nh.area3D(this.p0,this.p1,this.p2)},Nh.prototype.centroid=function(){return Nh.centroid(this.p0,this.p1,this.p2)},Nh.prototype.inCentre=function(){return Nh.inCentre(this.p0,this.p1,this.p2)},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Nh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Nh.det=function(t,e,n,r){return t*r-e*n},Nh.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,l=n.y-o,u=r.y-o,c=s*u-a*l,h=t.x-i,f=t.y-o,p=(u*h-a*f)/c,d=(-l*h+s*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Nh.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return s<i&&(s=i),s<o&&(s=o),s},Nh.isAcute=function(t,e,n){return!!xh.isAcute(t,e,n)&&!!xh.isAcute(e,n,t)&&!!xh.isAcute(n,t,e)},Nh.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,l=e.y-i,u=2*Nh.det(o,s,a,l);return new ga(r-Nh.det(s,o*o+s*s,l,a*a+l*l)/u,i+Nh.det(o,o*o+s*s,a,a*a+l*l)/u)},Nh.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Ba(t.x+n/2,t.y+r/2,1),o=new Ba(t.x-r+n/2,t.y+n+r/2,1);return new Ba(i,o)},Nh.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new ga(t.x+i*o,t.y+i*s)},Nh.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=i*l-o*a,c=o*s-r*l,h=r*a-i*s,f=u*u+c*c+h*h;return Math.sqrt(f)/2},Nh.centroid=function(t,e,n){return new ga((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Nh.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o;return new ga((r*t.x+i*e.x+o*n.x)/s,(r*t.y+i*e.y+o*n.y)/s)},kh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,_a.EXTERIOR,_a.INTERIOR)},kh.prototype.addPolygon=function(t){var e=this._distance,n=rc.LEFT;this._distance<0&&(e=-this._distance,n=rc.RIGHT);var r=t.getExteriorRing(),i=Al.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,_a.EXTERIOR,_a.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Al.removeRepeatedPoints(s.getCoordinates());0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,rc.opposite(n),_a.INTERIOR,_a.EXTERIOR)}},kh.prototype.isTriangleErodedCompletely=function(t,e){var n=new Nh(t[0],t[1],t[2]),r=n.inCentre();return al.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},kh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Al.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,_a.EXTERIOR,_a.INTERIOR)},kh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new oh(t,new dc(0,_a.BOUNDARY,e,n));this._curveList.add(r)},kh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},kh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ku.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=ku.MINIMUM_VALID_SIZE&&al.isCCW(t)&&(o=i,s=r,n=rc.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},kh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Lu?this.addPolygon(t):t instanceof Cu?this.addLineString(t):t instanceof Tu?this.addPoint(t):(t instanceof Nu||t instanceof pu||t instanceof Au||t instanceof fu)&&this.addCollection(t)},kh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},kh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},Ah.prototype.locate=function(){},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Ih.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ih.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Cl;var t=this._parent.getGeometryN(this._index++);return t instanceof fu?(this._subcollectionIterator=new Ih(t),this._subcollectionIterator.next()):t},Ih.prototype.remove=function(){throw new Error(this.getClass().getName())},Ih.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ih.prototype.interfaces_=function(){return[wl]},Ih.prototype.getClass=function(){return Ih},Ih.isAtomic=function(t){return!(t instanceof fu)},Rh.prototype.locate=function(t){return Rh.locate(t,this._geom)},Rh.prototype.interfaces_=function(){return[Ah]},Rh.prototype.getClass=function(){return Rh},Rh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&al.isPointInRing(t,e.getCoordinates())},Rh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Rh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Rh.isPointInRing(t,i))return!1}return!0},Rh.containsPoint=function(t,e){if(e instanceof Lu)return Rh.containsPointInPolygon(t,e);if(e instanceof fu)for(var n=new Ih(e);n.hasNext();){var r=n.next();if(r!==e&&Rh.containsPoint(t,r))return!0}return!1},Rh.locate=function(t,e){return!e.isEmpty()&&Rh.containsPoint(t,e)?_a.INTERIOR:_a.EXTERIOR},jh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},jh.prototype.propagateSideLabels=function(t){for(var e=_a.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,rc.LEFT)!==_a.NONE&&(e=r.getLocation(t,rc.LEFT))}if(e===_a.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,rc.ON)===_a.NONE&&a.setLocation(t,rc.ON,i),a.isArea(t)){var l=a.getLocation(t,rc.LEFT),u=a.getLocation(t,rc.RIGHT);if(u!==_a.NONE){if(u!==i)throw new uc("side location conflict",s.getCoordinate());l===_a.NONE&&$a.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=l}else $a.isTrue(a.getLocation(t,rc.LEFT)===_a.NONE,"found single null side"),a.setLocation(t,rc.RIGHT,i),a.setLocation(t,rc.LEFT,i)}}},jh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},jh.prototype.print=function(t){Fa.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},jh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,rc.LEFT);$a.isTrue(r!==_a.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();$a.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,rc.LEFT),l=s.getLocation(t,rc.RIGHT);if(a===l)return!1;if(l!==i)return!1;i=a}return!0},jh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},jh.prototype.iterator=function(){return this.getEdges().iterator()},jh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Tl(this._edgeMap.values())),this._edgeList},jh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===_a.NONE&&(this._ptInAreaLocation[t]=Rh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},jh.prototype.toString=function(){var t=new Oa;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},jh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},jh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===_a.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=_a.NONE;if(e[l])u=_a.EXTERIOR;else{var c=s.getCoordinate();u=this.getLocation(l,c,t)}a.setAllLocationsIfNull(l,u)}},jh.prototype.getDegree=function(){return this._edgeMap.size()},jh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh};var Dh,Fh=(Bh.__proto__=Dh=jh,((Bh.prototype=Object.create(Dh&&Dh.prototype)).constructor=Bh).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new uc("no outgoing dirEdge found",this.getCoordinate());$a.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},Bh.prototype.insert=function(t){this.insertEdgeEnd(t,t)},Bh.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Pc.isNorthern(i)&&Pc.isNorthern(o)?n:Pc.isNorthern(i)||Pc.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:($a.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},Bh.prototype.print=function(t){Fa.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},Bh.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Tl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},Bh.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},Bh.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},Bh.prototype.computeDepths=function(t,e,n){if(1===arguments.length){var r=t,i=this.findIndex(r),o=r.getDepth(rc.LEFT),s=r.getDepth(rc.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o);if(this.computeDepths(0,i,a)!==s)throw new uc("depth mismatch at "+r.getCoordinate())}else if(3===arguments.length){for(var l=e,u=n,c=t;c<l;c++){var h=this._edgeList.get(c);h.setEdgeDepths(rc.RIGHT,u),u=h.getDepth(rc.LEFT)}return u}},Bh.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},Bh.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&($a.isTrue(null!==e,"found null for first outgoing dirEdge"),$a.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},Bh.prototype.getOutgoingDegree=function(t){if(0===arguments.length){for(var e=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&e++;return e}if(1===arguments.length){for(var r=t,i=0,o=this.iterator();o.hasNext();)o.next().getEdgeRing()===r&&i++;return i}},Bh.prototype.getLabel=function(){return this._label},Bh.prototype.findCoveredLineEdges=function(){for(var t=_a.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=_a.INTERIOR;break}if(r.isInResult()){t=_a.EXTERIOR;break}}}if(t===_a.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===_a.INTERIOR):(s.isInResult()&&(i=_a.EXTERIOR),a.isInResult()&&(i=_a.INTERIOR))}},Bh.prototype.computeLabelling=function(t){Dh.prototype.computeLabelling.call(this,t),this._label=new dc(_a.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==_a.INTERIOR&&i!==_a.BOUNDARY||this._label.setLocation(r,_a.INTERIOR)}},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh);function Bh(){Dh.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}var Gh,Uh=(zh.__proto__=Gh=Ac,((zh.prototype=Object.create(Gh&&Gh.prototype)).constructor=zh).prototype.createNode=function(t){return new Ec(t,new Fh)},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh);function zh(){Gh.apply(this,arguments)}function qh(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=qh.orientation(t)}function Vh(){this._edges=new Tl,this._ocaMap=new nu}function Hh(){}function Wh(t){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=t;this._li=e}function Jh(t,e,n){this.coord=null,this.segmentIndex=null,this.dist=null;var r=t,i=e,o=n;this.coord=new ga(r),this.segmentIndex=i,this.dist=o}function Yh(t){this._nodeMap=new nu,this.edge=null;var e=t;this.edge=e}function Xh(){}function Zh(t){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ga,this.env2=new Ga;var e=t;this.e=e,this.pts=e.getCoordinates();var n=new Xh;this.startIndex=n.getChainStartIndices(this.pts)}function Qh(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=Qh.NULL_VALUE}qh.prototype.compareTo=function(t){return qh.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},qh.prototype.interfaces_=function(){return[fa]},qh.prototype.getClass=function(){return qh},qh.orientation=function(t){return 1===Al.increasingDirection(t)},qh.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===s,f=(u+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}},Vh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Vh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Vh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Vh.prototype.iterator=function(){return this._edges.iterator()},Vh.prototype.getEdges=function(){return this._edges},Vh.prototype.get=function(t){return this._edges.get(t)},Vh.prototype.findEqualEdge=function(t){var e=new qh(t.getCoordinates());return this._ocaMap.get(e)},Vh.prototype.add=function(t){this._edges.add(t);var e=new qh(t.getCoordinates());this._ocaMap.put(e,t)},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Hh.prototype.processIntersections=function(){},Hh.prototype.isDone=function(){},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Wh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Wh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wh.prototype.getLineIntersector=function(){return this._li},Wh.prototype.hasProperIntersection=function(){return this._hasProper},Wh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Wh.prototype.hasIntersection=function(){return this._hasIntersection},Wh.prototype.isDone=function(){return!1},Wh.prototype.hasInteriorIntersection=function(){return this._hasInterior},Wh.prototype.interfaces_=function(){return[Hh]},Wh.prototype.getClass=function(){return Wh},Wh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},Jh.prototype.getSegmentIndex=function(){return this.segmentIndex},Jh.prototype.getCoordinate=function(){return this.coord},Jh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Jh.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Jh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Jh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Jh.prototype.getDistance=function(){return this.dist},Jh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Jh.prototype.interfaces_=function(){return[fa]},Jh.prototype.getClass=function(){return Jh},Yh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Yh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Yh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Yh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Yh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new ga(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new tf(o,new dc(this.edge._label))},Yh.prototype.add=function(t,e,n){var r=new Jh(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Yh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Xh.prototype.getChainStartIndices=function(t){var e=0,n=new Tl;n.add(new Ca(e));do{var r=this.findChainEnd(t,e);n.add(new Ca(r)),e=r}while(e<t.length-1);return Xh.toIntArray(n)},Xh.prototype.findChainEnd=function(t,e){for(var n=Pc.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Pc.quadrant(t[r-1],t[r])===n;)r++;return r-1},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},Xh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},Zh.prototype.getCoordinates=function(){return this.pts},Zh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},Zh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Zh.prototype.computeIntersectsForChain=function(t,e,n,r,i,o){if(4===arguments.length){var s=r;this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],s)}else if(6===arguments.length){var a=t,l=e,u=n,c=r,h=i,f=o,p=this.pts[a],d=this.pts[l],y=u.pts[c],g=u.pts[h];if(l-a==1&&h-c==1)return f.addIntersections(this.e,a,u.e,c),null;if(this.env1.init(p,d),this.env2.init(y,g),!this.env1.intersects(this.env2))return null;var m=Math.trunc((a+l)/2),v=Math.trunc((c+h)/2);a<m&&(c<v&&this.computeIntersectsForChain(a,m,u,c,v,f),v<h&&this.computeIntersectsForChain(a,m,u,v,h,f)),m<l&&(c<v&&this.computeIntersectsForChain(m,l,u,c,v,f),v<h&&this.computeIntersectsForChain(m,l,u,v,h,f))}},Zh.prototype.getStartIndexes=function(){return this.startIndex},Zh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Kh={NULL_VALUE:{configurable:!0}};Qh.prototype.getDepth=function(t,e){return this._depth[t][e]},Qh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Qh.prototype.isNull=function(t,e){if(0===arguments.length){for(var n=0;n<2;n++)for(var r=0;r<3;r++)if(this._depth[n][r]!==Qh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=t;return this._depth[i][1]===Qh.NULL_VALUE}if(2===arguments.length){var o=t,s=e;return this._depth[o][s]===Qh.NULL_VALUE}},Qh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Qh.prototype.getDelta=function(t){return this._depth[t][rc.RIGHT]-this._depth[t][rc.LEFT]},Qh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?_a.EXTERIOR:_a.INTERIOR},Qh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Qh.prototype.add=function(t,e,n){if(1===arguments.length)for(var r=t,i=0;i<2;i++)for(var o=1;o<3;o++){var s=r.getLocation(i,o);s!==_a.EXTERIOR&&s!==_a.INTERIOR||(this.isNull(i,o)?this._depth[i][o]=Qh.depthAtLocation(s):this._depth[i][o]+=Qh.depthAtLocation(s))}else if(3===arguments.length){var a=t,l=e;n===_a.INTERIOR&&this._depth[a][l]++}},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.depthAtLocation=function(t){return t===_a.EXTERIOR?0:t===_a.INTERIOR?1:Qh.NULL_VALUE},Kh.NULL_VALUE.get=function(){return-1},Object.defineProperties(Qh,Kh);var $h,tf=(ef.__proto__=$h=Sc,((ef.prototype=Object.create($h&&$h.prototype)).constructor=ef).prototype.getDepth=function(){return this._depth},ef.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new ef(t,dc.toLineLabel(this._label))},ef.prototype.isIsolated=function(){return this._isIsolated},ef.prototype.getCoordinates=function(){return this.pts},ef.prototype.setIsolated=function(t){this._isIsolated=t},ef.prototype.setName=function(t){this._name=t},ef.prototype.equals=function(t){if(!(t instanceof ef))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},ef.prototype.getCoordinate=function(t){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var e=t;return this.pts[e]}},ef.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},ef.prototype.computeIM=function(t){ef.updateIM(this._label,t)},ef.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},ef.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},ef.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},ef.prototype.getDepthDelta=function(){return this._depthDelta},ef.prototype.getNumPoints=function(){return this.pts.length},ef.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},ef.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Zh(this)),this._mce},ef.prototype.getEnvelope=function(){if(null===this._env){this._env=new Ga;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},ef.prototype.addIntersection=function(t,e,n,r){var i=new ga(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var l=this.pts[a];i.equals2D(l)&&(o=a,s=0)}this.eiList.add(i,o,s)},ef.prototype.toString=function(){var t=new Oa;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},ef.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},ef.prototype.setDepthDelta=function(t){this._depthDelta=t},ef.prototype.getEdgeIntersectionList=function(){return this.eiList},ef.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.updateIM=function(t,e){if(2!==arguments.length)return $h.prototype.updateIM.apply(this,arguments);var n=t,r=e;r.setAtLeastIfValid(n.getLocation(0,rc.ON),n.getLocation(1,rc.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,rc.LEFT),n.getLocation(1,rc.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,rc.RIGHT),n.getLocation(1,rc.RIGHT),2))},ef);function ef(){if($h.call(this),this.pts=null,this._env=null,this.eiList=new Yh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qh,this._depthDelta=0,1===arguments.length)ef.call(this,arguments[0],null);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.pts=t,this._label=e}}function nf(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Vh,this._bufParams=t||null}function rf(t,e,n,r){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var i=t,o=e;this._noder=i,this._scaleFactor=o,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var s=t,a=e,l=n,u=r;this._noder=s,this._scaleFactor=a,this._offsetX=l,this._offsetY=u,this._isScaled=!this.isIntegerPrecision()}}function of(t){this._li=new rl,this._segStrings=null;var e=t;this._segStrings=e}nf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},nf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new dc(t.getLabel())).flip(),n.merge(r);var i=nf.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(nf.depthDelta(t.getLabel()))},nf.prototype.buildSubgraphs=function(t,e){for(var n=new Tl,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Th(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},nf.prototype.createSubgraphs=function(t){for(var e=new Tl,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new fc;i.create(r),e.add(i)}}return qc.sort(e,qc.reverseOrder()),e},nf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},nf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new dh,n=new rl;return n.setPrecisionModel(t),e.setSegmentIntersector(new Wh(n)),e},nf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new kh(t,e,new Ph(n,this._bufParams)).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Ic(new Uh),this._graph.addEdges(this._edgeList.getEdges());var i=this.createSubgraphs(this._graph),o=new Rc(this._geomFact);this.buildSubgraphs(i,o);var s=o.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},nf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new tf(i.getCoordinates(),new dc(s));this.insertUniqueEdge(a)}}},nf.prototype.setNoder=function(t){this._workingNoder=t},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.depthDelta=function(t){var e=t.getLocation(0,rc.LEFT),n=t.getLocation(0,rc.RIGHT);return e===_a.INTERIOR&&n===_a.EXTERIOR?1:e===_a.EXTERIOR&&n===_a.INTERIOR?-1:0},nf.convertSegStrings=function(t){for(var e=new Xu,n=new Tl;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)},rf.prototype.rescale=function(t){if(Sa(t,_l))for(var e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(t instanceof Array){for(var r=t,i=0;i<r.length;i++)r[i].x=r[i].x/this._scaleFactor+this._offsetX,r[i].y=r[i].y/this._scaleFactor+this._offsetY;2===r.length&&r[0].equals2D(r[1])&&Fa.out.println(r)}},rf.prototype.scale=function(t){if(Sa(t,_l)){for(var e=t,n=new Tl,r=e.iterator();r.hasNext();){var i=r.next();n.add(new oh(this.scale(i.getCoordinates()),i.getData()))}return n}if(t instanceof Array){for(var o=t,s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ga(Math.round((o[a].x-this._offsetX)*this._scaleFactor),Math.round((o[a].y-this._offsetY)*this._scaleFactor),o[a].z);return Al.removeRepeatedPoints(s)}},rf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rf.prototype.interfaces_=function(){return[hh]},rf.prototype.getClass=function(){return rf};var sf={fact:{configurable:!0}};function af(t,e,n){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var r=t,i=e,o=n;if(this._originalPt=r,this._pt=r,this._scaleFactor=i,this._li=o,i<=0)throw new ua;1!==i&&(this._pt=new ga(this.scale(r.x),this.scale(r.y)),this._p0Scaled=new ga,this._p1Scaled=new ga),this.initCorners(this._pt)}of.prototype.checkEndPtVertexIntersections=function(t,e){if(0===arguments.length)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next().getCoordinates();this.checkEndPtVertexIntersections(r[0],this._segStrings),this.checkEndPtVertexIntersections(r[r.length-1],this._segStrings)}else if(2===arguments.length)for(var i=t,o=e.iterator();o.hasNext();)for(var s=o.next().getCoordinates(),a=1;a<s.length-1;a++)if(s[a].equals(i))throw new Ya("found endpt/interior pt intersection at index "+a+" :pt "+i)},of.prototype.checkInteriorIntersections=function(t,e,n,r){if(0===arguments.length)for(var i=this._segStrings.iterator();i.hasNext();)for(var o=i.next(),s=this._segStrings.iterator();s.hasNext();){var a=s.next();this.checkInteriorIntersections(o,a)}else if(2===arguments.length)for(var l=t,u=e,c=l.getCoordinates(),h=u.getCoordinates(),f=0;f<c.length-1;f++)for(var p=0;p<h.length-1;p++)this.checkInteriorIntersections(l,f,u,p);else if(4===arguments.length){var d=t,y=e,g=n,m=r;if(d===g&&y===m)return null;var v=d.getCoordinates()[y],b=d.getCoordinates()[y+1],_=g.getCoordinates()[m],w=g.getCoordinates()[m+1];if(this._li.computeIntersection(v,b,_,w),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,v,b)||this.hasInteriorIntersection(this._li,_,w)))throw new Ya("found non-noded intersection at "+v+"-"+b+" and "+_+"-"+w)}},of.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},of.prototype.checkCollapses=function(t){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();this.checkCollapses(n)}else if(1===arguments.length)for(var r=t.getCoordinates(),i=0;i<r.length-2;i++)this.checkCollapse(r[i],r[i+1],r[i+2])},of.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},of.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Ya("found non-noded collapse at "+of.fact.createLineString([t,e,n]))},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},sf.fact.get=function(){return new Xu},Object.defineProperties(of,sf);var lf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};function uf(){this.tempEnv1=new Ga,this.selectedSegment=new sh}function cf(t){this._index=null;var e=t;this._index=e}af.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return $a.isTrue(!(s&&a),"Found bad envelope test"),a},af.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new ga(this._maxx,this._maxy),this._corner[1]=new ga(this._minx,this._maxy),this._corner[2]=new ga(this._minx,this._miny),this._corner[3]=new ga(this._maxx,this._miny)},af.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},af.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},af.prototype.getCoordinate=function(){return this._originalPt},af.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},af.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=af.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ga(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},af.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},af.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},af.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},lf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(af,lf),uf.prototype.select=function(t,e){if(1!==arguments.length&&2===arguments.length){var n=e;t.getLineSegment(n,this.selectedSegment),this.select(this.selectedSegment)}},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var hf={HotPixelSnapAction:{configurable:!0}};cf.prototype.snap=function(t,e,n){if(1===arguments.length){var r=t;return this.snap(r,null,-1)}if(3===arguments.length){var i=t,o=e,s=n,a=i.getSafeEnvelope(),l=new pf(i,o,s);return this._index.query(a,{interfaces_:function(){return[Bc]},visitItem:function(t){t.select(a,l)}}),l.isNodeAdded()}},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},hf.HotPixelSnapAction.get=function(){return pf},Object.defineProperties(cf,hf);var ff,pf=(df.__proto__=ff=uf,((df.prototype=Object.create(ff&&ff.prototype)).constructor=df).prototype.isNodeAdded=function(){return this._isNodeAdded},df.prototype.select=function(t,e){if(2!==arguments.length)return ff.prototype.select.apply(this,arguments);var n=e,r=t.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df);function df(){ff.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}function yf(t){this._li=null,this._interiorIntersections=null;var e=t;this._li=e,this._interiorIntersections=new Tl}function gf(t){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=t;this._pm=e,this._li=new rl,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()}yf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},yf.prototype.isDone=function(){return!1},yf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},yf.prototype.interfaces_=function(){return[Hh]},yf.prototype.getClass=function(){return yf},gf.prototype.checkCorrectness=function(t){var e=new of(oh.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof Ia))throw t;t.printStackTrace()}},gf.prototype.getNodedSubstrings=function(){return oh.getNodedSubstrings(this._nodedSegStrings)},gf.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},gf.prototype.findInteriorIntersections=function(t,e){var n=new yf(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},gf.prototype.computeVertexSnaps=function(t){if(Sa(t,_l))for(var e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(t instanceof oh)for(var r=t,i=r.getCoordinates(),o=0;o<i.length;o++){var s=new af(i[o],this._scaleFactor,this._li);this._pointSnapper.snap(s,r,o)&&r.addIntersection(i[o],o)}},gf.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new dh,this._pointSnapper=new cf(this._noder.getIndex()),this.snapRound(t,this._li)},gf.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=new af(e.next(),this._scaleFactor,this._li);this._pointSnapper.snap(n)}},gf.prototype.interfaces_=function(){return[hh]},gf.prototype.getClass=function(){return gf};var mf=function(t,e){if(this._argGeom=null,this._distance=null,this._bufParams=new mh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var n=t;this._argGeom=n}else if(2===arguments.length){var r=t,i=e;this._argGeom=r,this._bufParams=i}},vf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};function bf(){this._pt=[new ga,new ga],this._distance=ca.NaN,this._isNull=!0}function _f(){}function wf(t){this._maxPtDist=new bf,this._inputGeom=t||null}mf.prototype.bufferFixedPrecision=function(t){var e=new rf(new gf(new Hu(1)),t.getScale()),n=new nf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mf.prototype.bufferReducedPrecision=function(t){if(0===arguments.length){for(var e=mf.MAX_PRECISION_DIGITS;0<=e;e--){try{this.bufferReducedPrecision(e)}catch(t){if(!(t instanceof uc))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=t,r=new Hu(mf.precisionScaleFactor(this._argGeom,this._distance,n));this.bufferFixedPrecision(r)}},mf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Hu.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mf.prototype.bufferOriginalPrecision=function(){try{var t=new nf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ya))throw t;this._saveException=t}},mf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},mf.bufferOp=function(t,e,n,r){if(2===arguments.length){var i=e;return new mf(t).getResultGeometry(i)}if(3===arguments.length){if(Number.isInteger(n)&&t instanceof cl&&"number"==typeof e){var o=e,s=n,a=new mf(t);return a.setQuadrantSegments(s),a.getResultGeometry(o)}if(n instanceof mh&&t instanceof cl&&"number"==typeof e){var l=e;return new mf(t,n).getResultGeometry(l)}}else if(4===arguments.length){var u=e,c=n,h=r,f=new mf(t);return f.setQuadrantSegments(c),f.setEndCapStyle(h),f.getResultGeometry(u)}},mf.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=xa.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},vf.CAP_ROUND.get=function(){return mh.CAP_ROUND},vf.CAP_BUTT.get=function(){return mh.CAP_FLAT},vf.CAP_FLAT.get=function(){return mh.CAP_FLAT},vf.CAP_SQUARE.get=function(){return mh.CAP_SQUARE},vf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mf,vf),bf.prototype.getCoordinates=function(){return this._pt},bf.prototype.getCoordinate=function(t){return this._pt[t]},bf.prototype.setMinimum=function(t,e){if(1===arguments.length)this.setMinimum(t._pt[0],t._pt[1]);else if(2===arguments.length){var n=t,r=e;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}},bf.prototype.initialize=function(t,e,n){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var r=t,i=e;this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=r.distance(i),this._isNull=!1}else if(3===arguments.length){var o=t,s=e,a=n;this._pt[0].setCoordinate(o),this._pt[1].setCoordinate(s),this._distance=a,this._isNull=!1}},bf.prototype.getDistance=function(){return this._distance},bf.prototype.setMaximum=function(t,e){if(1===arguments.length)this.setMaximum(t._pt[0],t._pt[1]);else if(2===arguments.length){var n=t,r=e;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},_f.computeDistance=function(t,e,n){if(n instanceof bf&&t instanceof Cu&&e instanceof ga)for(var r=e,i=n,o=t.getCoordinates(),s=new sh,a=0;a<o.length-1;a++){s.setCoordinates(o[a],o[a+1]);var l=s.closestPoint(r);i.setMinimum(l,r)}else if(n instanceof bf&&t instanceof Lu&&e instanceof ga){var u=t,c=e,h=n;_f.computeDistance(u.getExteriorRing(),c,h);for(var f=0;f<u.getNumInteriorRing();f++)_f.computeDistance(u.getInteriorRingN(f),c,h)}else if(n instanceof bf&&t instanceof cl&&e instanceof ga){var p=t,d=e,y=n;if(p instanceof Cu)_f.computeDistance(p,d,y);else if(p instanceof Lu)_f.computeDistance(p,d,y);else if(p instanceof fu)for(var g=p,m=0;m<g.getNumGeometries();m++){var v=g.getGeometryN(m);_f.computeDistance(v,d,y)}else y.setMinimum(p.getCoordinate(),d)}else if(n instanceof bf&&t instanceof sh&&e instanceof ga){var b=e,_=n,w=t.closestPoint(b);_.setMinimum(w,b)}};var Sf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};wf.prototype.computeMaxMidpointDistance=function(t){var e=new Ef(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wf.prototype.computeMaxVertexDistance=function(t){var e=new xf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},wf.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},wf.prototype.getDistancePoints=function(){return this._maxPtDist},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},Sf.MaxPointDistanceFilter.get=function(){return xf},Sf.MaxMidpointDistanceFilter.get=function(){return Ef},Object.defineProperties(wf,Sf);var xf=function(t){this._maxPtDist=new bf,this._minPtDist=new bf,this._geom=t||null};xf.prototype.filter=function(t){this._minPtDist.initialize(),_f.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xf.prototype.getMaxPointDistance=function(){return this._maxPtDist},xf.prototype.interfaces_=function(){return[pl]},xf.prototype.getClass=function(){return xf};var Ef=function(t){this._maxPtDist=new bf,this._minPtDist=new bf,this._geom=t||null};function Of(t){this._comps=t||null}function Cf(t,e){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var n=t;this._lines=n}else if(2===arguments.length){var r=t,i=e;this._lines=r,this._isForcedToLineString=i}}function Pf(t){if(this._boundaryRule=dl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){if(null===t)throw new ua;this._boundaryRule=t}}function Tf(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)Tf.call(this,arguments[0],Tf.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this._component=t,this._segIndex=e,this._pt=n}}Ef.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new ga((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_f.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ef.prototype.isDone=function(){return!1},Ef.prototype.isGeometryChanged=function(){return!1},Ef.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ef.prototype.interfaces_=function(){return[hu]},Ef.prototype.getClass=function(){return Ef},Of.prototype.filter=function(t){t instanceof Lu&&this._comps.add(t)},Of.prototype.interfaces_=function(){return[cu]},Of.prototype.getClass=function(){return Of},Of.getPolygons=function(t,e){if(1===arguments.length)return Of.getPolygons(t,new Tl);if(2===arguments.length){var n=t,r=e;return n instanceof Lu?r.add(n):n instanceof fu&&n.apply(new Of(r)),r}},Cf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ku){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Cu&&this._lines.add(t)},Cf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Cf.prototype.interfaces_=function(){return[ul]},Cf.prototype.getClass=function(){return Cf},Cf.getGeometry=function(t,e){if(1===arguments.length){var n=t;return n.getFactory().buildGeometry(Cf.getLines(n))}if(2===arguments.length){var r=t,i=e;return r.getFactory().buildGeometry(Cf.getLines(r,i))}},Cf.getLines=function(t,e,n){if(1===arguments.length)return Cf.getLines(t,!1);if(2===arguments.length){if(Sa(t,_l)&&Sa(e,_l)){for(var r=e,i=t.iterator();i.hasNext();){var o=i.next();Cf.getLines(o,r)}return r}if(t instanceof cl&&"boolean"==typeof e){var s=t,a=e,l=new Tl;return s.apply(new Cf(l,a)),l}if(t instanceof cl&&Sa(e,_l)){var u=t,c=e;return u instanceof Cu?c.add(u):u.apply(new Cf(c)),c}}else if(3===arguments.length){if("boolean"==typeof n&&Sa(t,_l)&&Sa(e,_l)){for(var h=e,f=n,p=t.iterator();p.hasNext();){var d=p.next();Cf.getLines(d,h,f)}return h}if("boolean"==typeof n&&t instanceof cl&&Sa(e,_l)){var y=e,g=n;return t.apply(new Cf(y,g)),y}}},Pf.prototype.locateInternal=function(t,e){if(t instanceof ga&&e instanceof Lu){var n=t,r=e;if(r.isEmpty())return _a.EXTERIOR;var i=r.getExteriorRing(),o=this.locateInPolygonRing(n,i);if(o===_a.EXTERIOR)return _a.EXTERIOR;if(o===_a.BOUNDARY)return _a.BOUNDARY;for(var s=0;s<r.getNumInteriorRing();s++){var a=r.getInteriorRingN(s),l=this.locateInPolygonRing(n,a);if(l===_a.INTERIOR)return _a.EXTERIOR;if(l===_a.BOUNDARY)return _a.BOUNDARY}return _a.INTERIOR}if(t instanceof ga&&e instanceof Cu){var u=t,c=e;if(!c.getEnvelopeInternal().intersects(u))return _a.EXTERIOR;var h=c.getCoordinates();return c.isClosed()||!u.equals(h[0])&&!u.equals(h[h.length-1])?al.isOnLine(u,h)?_a.INTERIOR:_a.EXTERIOR:_a.BOUNDARY}if(t instanceof ga&&e instanceof Tu){var f=t;return e.getCoordinate().equals2D(f)?_a.INTERIOR:_a.EXTERIOR}},Pf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?al.locatePointInRing(t,e.getCoordinates()):_a.EXTERIOR},Pf.prototype.intersects=function(t,e){return this.locate(t,e)!==_a.EXTERIOR},Pf.prototype.updateLocationInfo=function(t){t===_a.INTERIOR&&(this._isIn=!0),t===_a.BOUNDARY&&this._numBoundaries++},Pf.prototype.computeLocation=function(t,e){if(e instanceof Tu&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Cu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Lu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof pu)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof Au)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof fu)for(var l=new Ih(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Pf.prototype.locate=function(t,e){return e.isEmpty()?_a.EXTERIOR:e instanceof Cu||e instanceof Lu?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?_a.BOUNDARY:0<this._numBoundaries||this._isIn?_a.INTERIOR:_a.EXTERIOR)},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf};var Mf={INSIDE_AREA:{configurable:!0}};function Lf(t){this._pts=t||null}function Nf(t){this._locations=null;var e=t;this._locations=e}function kf(t,e,n){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Pf,this._minDistanceLocation=null,this._minDistance=ca.MAX_VALUE,2===arguments.length){var r=t,i=e;this._geom=[r,i],this._terminateDistance=0}else if(3===arguments.length){var o=t,s=e,a=n;this._geom=new Array(2).fill(null),this._geom[0]=o,this._geom[1]=s,this._terminateDistance=a}}function Af(){this._pt=[new ga,new ga],this._distance=ca.NaN,this._isNull=!0}function If(){}function Rf(t,e){this._g0=null,this._g1=null,this._ptDist=new Af,this._densifyFrac=0;var n=t,r=e;this._g0=n,this._g1=r}Tf.prototype.isInsideArea=function(){return this._segIndex===Tf.INSIDE_AREA},Tf.prototype.getCoordinate=function(){return this._pt},Tf.prototype.getGeometryComponent=function(){return this._component},Tf.prototype.getSegmentIndex=function(){return this._segIndex},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Mf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tf,Mf),Lf.prototype.filter=function(t){t instanceof Tu&&this._pts.add(t)},Lf.prototype.interfaces_=function(){return[cu]},Lf.prototype.getClass=function(){return Lf},Lf.getPoints=function(t,e){if(1===arguments.length){var n=t;return n instanceof Tu?qc.singletonList(n):Lf.getPoints(n,new Tl)}if(2===arguments.length){var r=t,i=e;return r instanceof Tu?i.add(r):r instanceof fu&&r.apply(new Lf(i)),i}},Nf.prototype.filter=function(t){(t instanceof Tu||t instanceof Cu||t instanceof Lu)&&this._locations.add(new Tf(t,0,t.getCoordinate()))},Nf.prototype.interfaces_=function(){return[cu]},Nf.prototype.getClass=function(){return Nf},Nf.getLocations=function(t){var e=new Tl;return t.apply(new Nf(e)),e},kf.prototype.computeContainmentDistance=function(t,e,n){if(0===arguments.length){var r=new Array(2).fill(null);if(this.computeContainmentDistance(0,r),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,r)}else if(2===arguments.length){var i=t,o=e,s=1-i,a=Of.getPolygons(this._geom[i]);if(0<a.size()){var l=Nf.getLocations(this._geom[s]);if(this.computeContainmentDistance(l,a,o),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[s]=o[0],this._minDistanceLocation[i]=o[1],null}}else if(3===arguments.length)if(n instanceof Array&&Sa(t,El)&&Sa(e,El)){for(var u=t,c=e,h=n,f=0;f<u.size();f++)for(var p=u.get(f),d=0;d<c.size();d++)if(this.computeContainmentDistance(p,c.get(d),h),this._minDistance<=this._terminateDistance)return null}else if(n instanceof Array&&t instanceof Tf&&e instanceof Lu){var y=t,g=e,m=n,v=y.getCoordinate();if(_a.EXTERIOR!==this._ptLocator.locate(v,g))return m[this._minDistance=0]=y,m[1]=new Tf(g,v),null}},kf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},kf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Cf.getLines(this._geom[0]),n=Cf.getLines(this._geom[1]),r=Lf.getPoints(this._geom[0]),i=Lf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},kf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},kf.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},kf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},kf.prototype.computeMinDistance=function(t,e,n){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(n instanceof Array&&t instanceof Cu&&e instanceof Tu){var r=t,i=e,o=n;if(r.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this._minDistance)return null;for(var s=r.getCoordinates(),a=i.getCoordinate(),l=0;l<s.length-1;l++){var u=al.distancePointLine(a,s[l],s[l+1]);if(u<this._minDistance){this._minDistance=u;var c=new sh(s[l],s[l+1]).closestPoint(a);o[0]=new Tf(r,l,c),o[1]=new Tf(i,0,a)}if(this._minDistance<=this._terminateDistance)return null}}else if(n instanceof Array&&t instanceof Cu&&e instanceof Cu){var h=t,f=e,p=n;if(h.getEnvelopeInternal().distance(f.getEnvelopeInternal())>this._minDistance)return null;for(var d=h.getCoordinates(),y=f.getCoordinates(),g=0;g<d.length-1;g++)for(var m=0;m<y.length-1;m++){var v=al.distanceLineLine(d[g],d[g+1],y[m],y[m+1]);if(v<this._minDistance){this._minDistance=v;var b=new sh(d[g],d[g+1]),_=new sh(y[m],y[m+1]),w=b.closestPoints(_);p[0]=new Tf(h,g,w[0]),p[1]=new Tf(f,m,w[1])}if(this._minDistance<=this._terminateDistance)return null}}},kf.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Tf(i,0,i.getCoordinate()),n[1]=new Tf(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},kf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ua;return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},kf.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.distance=function(t,e){return new kf(t,e).distance()},kf.isWithinDistance=function(t,e,n){return new kf(t,e,n).distance()<=n},kf.nearestPoints=function(t,e){return new kf(t,e).nearestPoints()},Af.prototype.getCoordinates=function(){return this._pt},Af.prototype.getCoordinate=function(t){return this._pt[t]},Af.prototype.setMinimum=function(t,e){if(1===arguments.length)this.setMinimum(t._pt[0],t._pt[1]);else if(2===arguments.length){var n=t,r=e;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}},Af.prototype.initialize=function(t,e,n){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var r=t,i=e;this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=r.distance(i),this._isNull=!1}else if(3===arguments.length){var o=t,s=e,a=n;this._pt[0].setCoordinate(o),this._pt[1].setCoordinate(s),this._distance=a,this._isNull=!1}},Af.prototype.toString=function(){return Va.toLineString(this._pt[0],this._pt[1])},Af.prototype.getDistance=function(){return this._distance},Af.prototype.setMaximum=function(t,e){if(1===arguments.length)this.setMaximum(t._pt[0],t._pt[1]);else if(2===arguments.length){var n=t,r=e;if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If},If.computeDistance=function(t,e,n){if(n instanceof Af&&t instanceof Cu&&e instanceof ga)for(var r=t,i=e,o=n,s=new sh,a=r.getCoordinates(),l=0;l<a.length-1;l++){s.setCoordinates(a[l],a[l+1]);var u=s.closestPoint(i);o.setMinimum(u,i)}else if(n instanceof Af&&t instanceof Lu&&e instanceof ga){var c=t,h=e,f=n;If.computeDistance(c.getExteriorRing(),h,f);for(var p=0;p<c.getNumInteriorRing();p++)If.computeDistance(c.getInteriorRingN(p),h,f)}else if(n instanceof Af&&t instanceof cl&&e instanceof ga){var d=t,y=e,g=n;if(d instanceof Cu)If.computeDistance(d,y,g);else if(d instanceof Lu)If.computeDistance(d,y,g);else if(d instanceof fu)for(var m=d,v=0;v<m.getNumGeometries();v++){var b=m.getGeometryN(v);If.computeDistance(b,y,g)}else g.setMinimum(d.getCoordinate(),y)}else if(n instanceof Af&&t instanceof sh&&e instanceof ga){var _=e,w=n,S=t.closestPoint(_);w.setMinimum(S,_)}};var jf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Rf.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Rf.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new ua;this._densifyFrac=t},Rf.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Rf.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Rf.prototype.computeOrientedDistance=function(t,e,n){var r=new Df(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac){var i=new Ff(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Rf.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.distance=function(t,e,n){if(2===arguments.length)return new Rf(t,e).distance();if(3===arguments.length){var r=n,i=new Rf(t,e);return i.setDensifyFraction(r),i.distance()}},jf.MaxPointDistanceFilter.get=function(){return Df},jf.MaxDensifiedByFractionDistanceFilter.get=function(){return Ff},Object.defineProperties(Rf,jf);var Df=function(t){this._maxPtDist=new Af,this._minPtDist=new Af,this._euclideanDist=new If,this._geom=null;var e=t;this._geom=e};Df.prototype.filter=function(t){this._minPtDist.initialize(),If.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Df.prototype.getMaxPointDistance=function(){return this._maxPtDist},Df.prototype.interfaces_=function(){return[pl]},Df.prototype.getClass=function(){return Df};var Ff=function(t,e){this._maxPtDist=new Af,this._minPtDist=new Af,this._geom=null,this._numSubSegs=0;var n=t,r=e;this._geom=n,this._numSubSegs=Math.trunc(Math.round(1/r))};function Bf(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null}Ff.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=new ga(n.x+s*i,n.y+s*o);this._minPtDist.initialize(),If.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ff.prototype.isDone=function(){return!1},Ff.prototype.isGeometryChanged=function(){return!1},Ff.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ff.prototype.interfaces_=function(){return[hu]},Ff.prototype.getClass=function(){return Ff};var Gf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};function Uf(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null}Bf.prototype.checkMaximumDistance=function(t,e,n){var r=new Rf(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Va.toLineString(i[0],i[1])+")"}},Bf.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Bf.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),Bf.VERBOSE&&Fa.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Bf.prototype.checkNegativeValid=function(){if(!(this._input instanceof Lu||this._input instanceof Au||this._input instanceof fu))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Bf.prototype.getErrorIndicator=function(){return this._errorIndicator},Bf.prototype.checkMinimumDistance=function(t,e,n){var r=new kf(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Va.toLineString(i[0],i[1])+" )"}},Bf.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Bf.prototype.getErrorLocation=function(){return this._errorLocation},Bf.prototype.getPolygonLines=function(t){for(var e=new Tl,n=new Cf(e),r=Of.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Bf.prototype.getErrorMessage=function(){return this._errMsg},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},Gf.VERBOSE.get=function(){return!1},Gf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bf,Gf);var zf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};function qf(t,e){this._pts=null,this._data=null;var n=t,r=e;this._pts=n,this._data=r}function Vf(t){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Tl,this._intersectionCount=0,this._keepIntersections=!0;var e=t;this._li=e,this._interiorIntersection=null}function Hf(t){this._li=new rl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=t;this._segStrings=e}function Wf(){this._nv=null;var t=arguments[0];this._nv=new Hf(Wf.toSegmentStrings(t))}function Jf(t){this._mapOp=t}function Yf(t,e,n){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Tl,this._resultLineList=new Tl;var r=t,i=e,o=n;this._op=r,this._geometryFactory=i,this._ptLocator=o}function Xf(t,e){this._op=null,this._geometryFactory=null,this._resultPointList=new Tl;var n=t,r=e;this._op=n,this._geometryFactory=r}function Zf(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}function Qf(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new sh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Cu&&"number"==typeof arguments[1]){var t=arguments[1];Qf.call(this,arguments[0].getCoordinates(),t)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this._srcPts=e,this._isClosed=Qf.isClosed(e),this._snapTolerance=n}}function Kf(t){this._srcGeom=t||null}Uf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},Uf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Uf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Ga(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Ga(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Uf.prototype.checkDistance=function(){var t=new Bf(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Uf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Uf.prototype.checkPolygonal=function(){this._result instanceof Lu||this._result instanceof Au||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Uf.prototype.getErrorIndicator=function(){return this._errorIndicator},Uf.prototype.getErrorLocation=function(){return this._errorLocation},Uf.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()||0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Uf.prototype.report=function(t){if(!Uf.VERBOSE)return null;Fa.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Uf.prototype.getErrorMessage=function(){return this._errorMsg},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.isValidMsg=function(t,e,n){var r=new Uf(t,e,n);return r.isValid()?null:r.getErrorMessage()},Uf.isValid=function(t,e,n){return!!new Uf(t,e,n).isValid()},zf.VERBOSE.get=function(){return!1},zf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Uf,zf),qf.prototype.getCoordinates=function(){return this._pts},qf.prototype.size=function(){return this._pts.length},qf.prototype.getCoordinate=function(t){return this._pts[t]},qf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},qf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:nh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},qf.prototype.setData=function(t){this._data=t},qf.prototype.getData=function(){return this._data},qf.prototype.toString=function(){return Va.toLineString(new Fu(this._pts))},qf.prototype.interfaces_=function(){return[rh]},qf.prototype.getClass=function(){return qf},Vf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Vf.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Vf.prototype.getIntersectionSegments=function(){return this._intSegments},Vf.prototype.count=function(){return this._intersectionCount},Vf.prototype.getIntersections=function(){return this._intersections},Vf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vf.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Vf.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Vf.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Vf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Vf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Vf.prototype.interfaces_=function(){return[Hh]},Vf.prototype.getClass=function(){return Vf},Vf.createAllIntersectionsFinder=function(t){var e=new Vf(t);return e.setFindAllIntersections(!0),e},Vf.createAnyIntersectionFinder=function(t){return new Vf(t)},Vf.createIntersectionCounter=function(t){var e=new Vf(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},Hf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Hf.prototype.getIntersections=function(){return this._segInt.getIntersections()},Hf.prototype.isValid=function(){return this.execute(),this._isValid},Hf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Vf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new dh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Hf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new uc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Hf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Va.toLineString(t[0],t[1])+" and "+Va.toLineString(t[2],t[3])},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf},Hf.computeIntersections=function(t){var e=new Hf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},Wf.prototype.checkValid=function(){this._nv.checkValid()},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.toSegmentStrings=function(t){for(var e=new Tl,n=t.iterator();n.hasNext();){var r=n.next();e.add(new qf(r.getCoordinates(),r))}return e},Wf.checkValid=function(t){new Wf(t).checkValid()},Jf.prototype.map=function(t){for(var e=new Tl,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Xu.toGeometryArray(e))},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.map=function(t,e){return new Jf(e).map(t)},Yf.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Yf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Yf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yf.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Bp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Yf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Yf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Yf.prototype.buildLines=function(){for(var t=this._lineEdgesList.iterator();t.hasNext();){var e=t.next(),n=this._geometryFactory.createLineString(e.getCoordinates());this._resultLineList.add(n),e.setInResult(!0)}},Yf.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:($a.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Bp.isResultOfOp(r,e)&&e===Bp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf},Xf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Bp.INTERSECTION)){var r=n.getLabel();Bp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf},Zf.prototype.transformPoint=function(t){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Zf.prototype.transformPolygon=function(t){var e=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof ku&&!n.isEmpty()||(e=!1);for(var r=new Tl,i=0;i<t.getNumInteriorRing();i++){var o=this.transformLinearRing(t.getInteriorRingN(i),t);null===o||o.isEmpty()||(o instanceof ku||(e=!1),r.add(o))}if(e)return this._factory.createPolygon(n,r.toArray([]));var s=new Tl;return null!==n&&s.add(n),s.addAll(r),this._factory.buildGeometry(s)},Zf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Zf.prototype.getInputGeometry=function(){return this._inputGeom},Zf.prototype.transformMultiLineString=function(t){for(var e=new Tl,n=0;n<t.getNumGeometries();n++){var r=this.transformLineString(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||e.add(r))}return this._factory.buildGeometry(e)},Zf.prototype.transformCoordinates=function(t){return this.copy(t)},Zf.prototype.transformLineString=function(t){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Zf.prototype.transformMultiPoint=function(t){for(var e=new Tl,n=0;n<t.getNumGeometries();n++){var r=this.transformPoint(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||e.add(r))}return this._factory.buildGeometry(e)},Zf.prototype.transformMultiPolygon=function(t){for(var e=new Tl,n=0;n<t.getNumGeometries();n++){var r=this.transformPolygon(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||e.add(r))}return this._factory.buildGeometry(e)},Zf.prototype.copy=function(t){return t.copy()},Zf.prototype.transformGeometryCollection=function(t){for(var e=new Tl,n=0;n<t.getNumGeometries();n++){var r=this.transform(t.getGeometryN(n));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||e.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Xu.toGeometryArray(e)):this._factory.buildGeometry(e)},Zf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Tu)return this.transformPoint(t,null);if(t instanceof Nu)return this.transformMultiPoint(t,null);if(t instanceof ku)return this.transformLinearRing(t,null);if(t instanceof Cu)return this.transformLineString(t,null);if(t instanceof pu)return this.transformMultiLineString(t,null);if(t instanceof Lu)return this.transformPolygon(t,null);if(t instanceof Au)return this.transformMultiPolygon(t,null);if(t instanceof fu)return this.transformGeometryCollection(t,null);throw new ua(t.getClass().getName())},Zf.prototype.transformLinearRing=function(t){var e=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===e)return this._factory.createLinearRing(null);var n=e.size();return 0<n&&n<4&&!this._preserveType?this._factory.createLineString(e):this._factory.createLinearRing(e)},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Qf.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new ga(o)),0===r&&this._isClosed&&t.set(t.size()-1,new ga(o)))}},Qf.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Qf.prototype.snapTo=function(t){var e=new Il(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Qf.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new ga(i),!1)}},Qf.prototype.findSegmentIndexToSnap=function(t,e){for(var n=ca.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Qf.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf},Qf.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $f={SNAP_PRECISION_FACTOR:{configurable:!0}};Kf.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new ep(e,n).transform(this._srcGeom)},Kf.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new ep(t,n,!0).transform(this._srcGeom),i=r;return e&&Sa(i,Pu)&&(i=r.buffer(0)),i},Kf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Kf.prototype.extractTargetCoordinates=function(t){for(var e=new ou,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Kf.prototype.computeMinimumSegmentLength=function(t){for(var e=ca.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Kf.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Kf(t);r[0]=i.snapTo(e,n);var o=new Kf(e);return r[1]=o.snapTo(r[0],n),r},Kf.computeOverlaySnapTolerance=function(t,e){if(1===arguments.length){var n=t,r=Kf.computeSizeBasedSnapTolerance(n),i=n.getPrecisionModel();if(i.getType()===Hu.FIXED){var o=1/i.getScale()*2/1.415;r<o&&(r=o)}return r}if(2===arguments.length){var s=t,a=e;return Math.min(Kf.computeOverlaySnapTolerance(s),Kf.computeOverlaySnapTolerance(a))}},Kf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Kf.SNAP_PRECISION_FACTOR},Kf.snapToSelf=function(t,e,n){return new Kf(t).snapToSelf(e,n)},$f.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Kf,$f);var tp,ep=(np.__proto__=tp=Zf,((np.prototype=Object.create(tp&&tp.prototype)).constructor=np).prototype.snapLine=function(t,e){var n=new Qf(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},np.prototype.transformCoordinates=function(t){var e=t.toCoordinateArray(),n=this.snapLine(e,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np},np);function np(t,e,n){tp.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n}function rp(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}function ip(){this._commonCoord=null,this._ccFilter=new sp}rp.prototype.getCommon=function(){return ca.longBitsToDouble(this._commonBits)},rp.prototype.add=function(t){var e=ca.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=rp.signExpBits(this._commonBits),this._isFirst=!1,null):rp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=rp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=rp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},rp.prototype.toString=function(t){if(1===arguments.length){var e=t,n=ca.longBitsToDouble(e),r="0000000000000000000000000000000000000000000000000000000000000000"+ca.toBinaryString(e),i=r.substring(r.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+n+" ]"}},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},rp.signExpBits=function(t){return t>>52},rp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},rp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(rp.getBit(t,r)!==rp.getBit(e,r))return n;n++}return 52};var op={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ip.prototype.addCommonBits=function(t){var e=new ap(this._commonCoord);t.apply(e),t.geometryChanged()},ip.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ga(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ap(e);return t.apply(n),t.geometryChanged(),t},ip.prototype.getCommonCoordinate=function(){return this._commonCoord},ip.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},op.CommonCoordinateFilter.get=function(){return sp},op.Translater.get=function(){return ap},Object.defineProperties(ip,op);var sp=function(){this._commonBitsX=new rp,this._commonBitsY=new rp};sp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},sp.prototype.getCommonCoordinate=function(){return new ga(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},sp.prototype.interfaces_=function(){return[pl]},sp.prototype.getClass=function(){return sp};var ap=function(t){this.trans=null;var e=t;this.trans=e};function lp(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}function up(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}function cp(t,e){this.mce=null,this.chainIndex=null;var n=t,r=e;this.mce=n,this.chainIndex=r}function hp(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._eventType=hp.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._eventType=hp.INSERT,this._label=n,this._xValue=r,this._obj=i}}ap.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ap.prototype.isDone=function(){return!1},ap.prototype.isGeometryChanged=function(){return!0},ap.prototype.interfaces_=function(){return[hu]},ap.prototype.getClass=function(){return ap},lp.prototype.selfSnap=function(t){return new Kf(t).snapTo(t,this._snapTolerance)},lp.prototype.removeCommonBits=function(t){this._cbr=new ip,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},lp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},lp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Bp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},lp.prototype.checkValid=function(t){t.isValid()||Fa.out.println("Snapped geometry is invalid")},lp.prototype.computeSnapTolerance=function(){this._snapTolerance=Kf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},lp.prototype.snap=function(t){var e=this.removeCommonBits(t);return Kf.snap(e[0],e[1],this._snapTolerance)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.overlayOp=function(t,e,n){return new lp(t,e).getResultGeometry(n)},lp.union=function(t,e){return lp.overlayOp(t,e,Bp.UNION)},lp.intersection=function(t,e){return lp.overlayOp(t,e,Bp.INTERSECTION)},lp.symDifference=function(t,e){return lp.overlayOp(t,e,Bp.SYMDIFFERENCE)},lp.difference=function(t,e){return lp.overlayOp(t,e,Bp.DIFFERENCE)},up.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Bp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Ya))throw t;r=t}if(!n)try{e=lp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ya?r:t}return e},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.overlayOp=function(t,e,n){return new up(t,e).getResultGeometry(n)},up.union=function(t,e){return up.overlayOp(t,e,Bp.UNION)},up.intersection=function(t,e){return up.overlayOp(t,e,Bp.INTERSECTION)},up.symDifference=function(t,e){return up.overlayOp(t,e,Bp.SYMDIFFERENCE)},up.difference=function(t,e){return up.overlayOp(t,e,Bp.DIFFERENCE)},cp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var fp={INSERT:{configurable:!0},DELETE:{configurable:!0}};function pp(){}function dp(t,e,n){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var r=t,i=e,o=n;this._li=r,this._includeProper=i,this._recordIsolated=o}hp.prototype.isDelete=function(){return this._eventType===hp.DELETE},hp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},hp.prototype.getObject=function(){return this._obj},hp.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},hp.prototype.getInsertEvent=function(){return this._insertEvent},hp.prototype.isInsert=function(){return this._eventType===hp.INSERT},hp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},hp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},hp.prototype.interfaces_=function(){return[fa]},hp.prototype.getClass=function(){return hp},fp.INSERT.get=function(){return 1},fp.DELETE.get=function(){return 2},Object.defineProperties(hp,fp),pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},dp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(dp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},dp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},dp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},dp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},dp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},dp.prototype.hasProperIntersection=function(){return this._hasProper},dp.prototype.hasIntersection=function(){return this._hasIntersection},dp.prototype.isDone=function(){return this._isDone},dp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},dp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},dp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yp,gp=(mp.__proto__=yp=pp,((mp.prototype=Object.create(yp&&yp.prototype)).constructor=mp).prototype.prepareEvents=function(){qc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},mp.prototype.computeIntersections=function(t,e,n){if(1===arguments.length){var r=t;this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=this.events.get(i);if(o.isInsert()&&this.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(3===arguments.length)if(n instanceof dp&&Sa(t,El)&&Sa(e,El)){var s=e,a=n;this.addEdges(t,t),this.addEdges(s,s),this.computeIntersections(a)}else if("boolean"==typeof n&&Sa(t,El)&&e instanceof dp){var l=t,u=e;n?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(u)}},mp.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new cp(n,i),s=new hp(e,n.getMinX(i),o);this.events.add(s),this.events.add(new hp(n.getMaxX(i),s))}},mp.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},mp.prototype.addEdges=function(t,e){if(1===arguments.length)for(var n=t.iterator();n.hasNext();){var r=n.next();this.addEdge(r,r)}else if(2===arguments.length)for(var i=e,o=t.iterator();o.hasNext();){var s=o.next();this.addEdge(s,i)}},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp);function mp(){yp.call(this),this.events=new Tl,this.nOverlaps=null}function vp(){this._min=ca.POSITIVE_INFINITY,this._max=ca.NEGATIVE_INFINITY}var bp={NodeComparator:{configurable:!0}};vp.prototype.getMin=function(){return this._min},vp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},vp.prototype.getMax=function(){return this._max},vp.prototype.toString=function(){return Va.toLineString(new ga(this._min,0),new ga(this._max,0))},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp},bp.NodeComparator.get=function(){return _p},Object.defineProperties(vp,bp);var _p=function(){};_p.prototype.compare=function(t,e){var n=(t._min+t._max)/2,r=(e._min+e._max)/2;return n<r?-1:r<n?1:0},_p.prototype.interfaces_=function(){return[da]},_p.prototype.getClass=function(){return _p};var wp,Sp=(xp.__proto__=wp=vp,((xp.prototype=Object.create(wp&&wp.prototype)).constructor=xp).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp);function xp(){wp.call(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}var Ep,Op=(Cp.__proto__=Ep=vp,((Cp.prototype=Object.create(Ep&&Ep.prototype)).constructor=Cp).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},Cp.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp);function Cp(){Ep.call(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}function Pp(){this._leaves=new Tl,this._root=null,this._level=0}function Tp(){this._items=new Tl}function Mp(t){this._index=null;var e=t;if(!Sa(e,Pu))throw new ua;this._index=new kp(e)}Pp.prototype.buildTree=function(){qc.sort(this._leaves,new vp.NodeComparator);for(var t=this._leaves,e=null,n=new Tl;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Pp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Sp(t,e,n))},Pp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Pp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Pp.prototype.printNode=function(t){Fa.out.println(Va.toLineString(new ga(t._min,this._level),new ga(t._max,this._level)))},Pp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Pp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Op(t.get(n),t.get(n+1));e.add(i)}}},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Tp.prototype.visitItem=function(t){this._items.add(t)},Tp.prototype.getItems=function(){return this._items},Tp.prototype.interfaces_=function(){return[Bc]},Tp.prototype.getClass=function(){return Tp};var Lp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Mp.prototype.locate=function(t){var e=new sl(t),n=new Np(e);return this._index.query(t.y,t.y,n),e.getLocation()},Mp.prototype.interfaces_=function(){return[Ah]},Mp.prototype.getClass=function(){return Mp},Lp.SegmentVisitor.get=function(){return Np},Lp.IntervalIndexedGeometry.get=function(){return kp},Object.defineProperties(Mp,Lp);var Np=function(t){this._counter=null;var e=t;this._counter=e};Np.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Np.prototype.interfaces_=function(){return[Bc]},Np.prototype.getClass=function(){return Np};var kp=function(t){this._index=new Pp;var e=t;this.init(e)};kp.prototype.init=function(t){for(var e=Cf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},kp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new sh(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},kp.prototype.query=function(t,e,n){if(2===arguments.length){var r=t,i=e,o=new Tp;return this._index.query(r,i,o),o.getItems()}if(3===arguments.length){var s=t,a=e,l=n;this._index.query(s,a,l)}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Ap,Ip=(Rp.__proto__=Ap=Ic,((Rp.prototype=Object.create(Ap&&Ap.prototype)).constructor=Rp).prototype.insertBoundaryPoint=function(t,e){var n=this._nodes.addNode(e).getLabel(),r=1;n.getLocation(t,rc.ON)===_a.BOUNDARY&&r++;var i=Rp.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,i)},Rp.prototype.computeSelfNodes=function(t,e,n){if(2===arguments.length){var r=t,i=e;return this.computeSelfNodes(r,i,!1)}if(3===arguments.length){var o=e,s=n,a=new dp(t,!0,!1);a.setIsDoneIfProperInt(s);var l=this.createEdgeSetIntersector(),u=this._parentGeom instanceof ku||this._parentGeom instanceof Lu||this._parentGeom instanceof Au,c=o||!u;return l.computeIntersections(this._edges,a,c),this.addSelfIntersectionNodes(this._argIndex),a}},Rp.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},Rp.prototype.computeEdgeIntersections=function(t,e,n){var r=new dp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},Rp.prototype.getGeometry=function(){return this._parentGeom},Rp.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},Rp.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},Rp.prototype.addPoint=function(t){if(t instanceof Tu){var e=t.getCoordinate();this.insertPoint(this._argIndex,e,_a.INTERIOR)}else if(t instanceof ga){var n=t;this.insertPoint(this._argIndex,n,_a.INTERIOR)}},Rp.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),_a.EXTERIOR,_a.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,_a.INTERIOR,_a.EXTERIOR)}},Rp.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],_a.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],_a.BOUNDARY)},Rp.prototype.addLineString=function(t){var e=Al.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new tf(e,new dc(this._argIndex,_a.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),$a.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},Rp.prototype.getInvalidPoint=function(){return this._invalidPoint},Rp.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},Rp.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},Rp.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===_a.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},Rp.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Al.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;al.isCCW(r)&&(i=n,o=e);var s=new tf(r,new dc(this._argIndex,_a.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],_a.BOUNDARY)},Rp.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new dc(t,n):i.setLocation(t,n)},Rp.prototype.createEdgeSetIntersector=function(){return new gp},Rp.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},Rp.prototype.add=function(t){if(1!==arguments.length)return Ap.prototype.add.apply(this,arguments);var e=t;if(e.isEmpty())return null;if(e instanceof Au&&(this._useBoundaryDeterminationRule=!1),e instanceof Lu)this.addPolygon(e);else if(e instanceof Cu)this.addLineString(e);else if(e instanceof Tu)this.addPoint(e);else if(e instanceof Nu)this.addCollection(e);else if(e instanceof pu)this.addCollection(e);else if(e instanceof Au)this.addCollection(e);else{if(!(e instanceof fu))throw new Error(e.getClass().getName());this.addCollection(e)}},Rp.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Rp.prototype.locate=function(t){return Sa(this._parentGeom,Pu)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new Mp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},Rp.prototype.findEdge=function(t){if(1!==arguments.length)return Ap.prototype.findEdge.apply(this,arguments);var e=t;return this._lineEdgeMap.get(e)},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.determineBoundary=function(t,e){return t.isInBoundary(e)?_a.BOUNDARY:_a.INTERIOR},Rp);function Rp(){if(Ap.call(this),this._parentGeom=null,this._lineEdgeMap=new qu,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pf,2===arguments.length){var t=arguments[0],e=arguments[1],n=dl.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i)}}function jp(t,e,n){if(this._li=new rl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var r=t;this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ip(0,r)}else if(2===arguments.length){var i=t,o=e,s=dl.OGC_SFS_BOUNDARY_RULE;0<=i.getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ip(0,i,s),this._arg[1]=new Ip(1,o,s)}else if(3===arguments.length){var a=t,l=e,u=n;0<=a.getPrecisionModel().compareTo(l.getPrecisionModel())?this.setComputationPrecision(a.getPrecisionModel()):this.setComputationPrecision(l.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ip(0,a,u),this._arg[1]=new Ip(1,l,u)}}function Dp(){}jp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},jp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.map=function(t,e){if(t instanceof cl&&Sa(e,Dp.MapOp)){for(var n=t,r=e,i=new Tl,o=0;o<n.getNumGeometries();o++){var s=r.map(n.getGeometryN(o));null!==s&&i.add(s)}return n.getFactory().buildGeometry(i)}if(Sa(t,_l)&&Sa(e,Dp.MapOp)){for(var a=t,l=e,u=new Tl,c=a.iterator();c.hasNext();){var h=c.next(),f=l.map(h);null!==f&&u.add(f)}return u}},Dp.MapOp=function(){};var Fp,Bp=(Gp.__proto__=Fp=jp,((Gp.prototype=Object.create(Fp&&Fp.prototype)).constructor=Gp).prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new dc(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},Gp.prototype.getGraph=function(){return this._graph},Gp.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},Gp.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},Gp.prototype.computeGeometry=function(t,e,n,r){var i=new Tl;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?Gp.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},Gp.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},Gp.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==_a.EXTERIOR)return!0}return!1},Gp.prototype.replaceCollapsedEdges=function(){for(var t=new Tl,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},Gp.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},Gp.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},Gp.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},Gp.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Tl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Wf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Rc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Yf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},Gp.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},Gp.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},Gp.prototype.findResultAreaEdges=function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&Gp.isResultOfOp(r.getLocation(0,rc.RIGHT),r.getLocation(1,rc.RIGHT),t)&&n.setInResult(!0)}},Gp.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):($a.isTrue(!r.isNull(i,rc.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,rc.LEFT,r.getLocation(i,rc.LEFT)),$a.isTrue(!r.isNull(i,rc.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,rc.RIGHT,r.getLocation(i,rc.RIGHT))))}}},Gp.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},Gp.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},Gp.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Gp);function Gp(){var t=arguments[0],e=arguments[1];Fp.call(this,t,e),this._ptLocator=new Pf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Vh,this._resultPolyList=new Tl,this._resultLineList=new Tl,this._resultPointList=new Tl,this._graph=new Ic(new Uh),this._geomFact=t.getFactory()}function Up(t,e){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pf,this._seg=new sh;var n=t,r=e;this._g=n,this._boundaryDistanceTolerance=r,this._linework=this.extractLinework(n)}Bp.overlayOp=function(t,e,n){return new Bp(t,e).getResultGeometry(n)},Bp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Bp.createEmptyResult(Bp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Jf.map(t,{interfaces_:function(){return[Dp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,Bp.INTERSECTION)},Bp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Bp.createEmptyResult(Bp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,Bp.SYMDIFFERENCE)},Bp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Bp.INTERSECTION:o=Math.min(r,i);break;case Bp.UNION:o=Math.max(r,i);break;case Bp.DIFFERENCE:o=r;break;case Bp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Bp.createEmptyResult=function(t,e,n,r){var i=null;switch(Bp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Bp.difference=function(t,e){return t.isEmpty()?Bp.createEmptyResult(Bp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,Bp.DIFFERENCE))},Bp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Bp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===_a.BOUNDARY&&(i=_a.INTERIOR),o===_a.BOUNDARY&&(o=_a.INTERIOR),arguments[2]){case Bp.INTERSECTION:return i===_a.INTERIOR&&o===_a.INTERIOR;case Bp.UNION:return i===_a.INTERIOR||o===_a.INTERIOR;case Bp.DIFFERENCE:return i===_a.INTERIOR&&o!==_a.INTERIOR;case Bp.SYMDIFFERENCE:return i===_a.INTERIOR&&o!==_a.INTERIOR||i!==_a.INTERIOR&&o===_a.INTERIOR}return!1}},Bp.INTERSECTION=1,Bp.UNION=2,Bp.DIFFERENCE=3,Bp.SYMDIFFERENCE=4,Up.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Up.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?_a.BOUNDARY:this._ptLocator.locate(t,this._g)},Up.prototype.extractLinework=function(t){var e=new zp;t.apply(e);var n=e.getLinework(),r=Xu.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up};var zp=function(){this._linework=null,this._linework=new Tl};function qp(t){this._g=null,this._doLeft=!0,this._doRight=!0;var e=t;this._g=e}function Vp(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=Vp.TOLERANCE,this._testCoords=new Tl;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=Vp.computeBoundaryDistanceTolerance(t,e),this._geom=[t,e,n],this._locFinder=[new Up(this._geom[0],this._boundaryDistanceTolerance),new Up(this._geom[1],this._boundaryDistanceTolerance),new Up(this._geom[2],this._boundaryDistanceTolerance)]}zp.prototype.getLinework=function(){return this._linework},zp.prototype.filter=function(t){if(t instanceof Lu){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},zp.prototype.interfaces_=function(){return[cu]},zp.prototype.getClass=function(){return zp},qp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},qp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},qp.prototype.getPoints=function(t){for(var e=new Tl,n=Cf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},qp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,l=n*o/s,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new ga(u-l,c+a);r.add(h)}if(this._doRight){var f=new ga(u+l,c-a);r.add(f)}},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp};var Hp={TOLERANCE:{configurable:!0}};function Wp(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=Wp.extractFactory(t),this._inputGeoms=t}function Jp(t){this._inputPolys=null,this._geomFactory=null;var e=t;this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new Tl)}Vp.prototype.reportResult=function(t,e,n){Fa.out.println("Overlay result invalid - A:"+_a.toLocationSymbol(e[0])+" B:"+_a.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+_a.toLocationSymbol(e[2]))},Vp.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Vp.prototype.checkValid=function(t,e){if(1===arguments.length){for(var n=t,r=0;r<this._testCoords.size();r++){var i=this._testCoords.get(r);if(!this.checkValid(n,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var o=t,s=e;return this._location[0]=this._locFinder[0].getLocation(s),this._location[1]=this._locFinder[1].getLocation(s),this._location[2]=this._locFinder[2].getLocation(s),!!Vp.hasLocation(this._location,_a.BOUNDARY)||this.isValidResult(o,this._location)}},Vp.prototype.addTestPts=function(t){var e=new qp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Vp.prototype.isValidResult=function(t,e){var n=Bp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===_a.INTERIOR);return r||this.reportResult(t,e,n),r},Vp.prototype.getInvalidLocation=function(){return this._invalidLocation},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp},Vp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Vp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Kf.computeSizeBasedSnapTolerance(t),Kf.computeSizeBasedSnapTolerance(e))},Vp.isValid=function(t,e,n,r){return new Vp(t,e,r).isValid(n)},Hp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Vp,Hp),Wp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Wp.prototype.combine=function(){for(var t=new Tl,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.combine=function(t,e,n){return 1===arguments.length?new Wp(t).combine():2===arguments.length?new Wp(Wp.createList(t,e)).combine():3===arguments.length?new Wp(Wp.createList(t,e,n)).combine():void 0},Wp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Wp.createList=function(t,e,n){if(2===arguments.length){var r=t,i=e,o=new Tl;return o.add(r),o.add(i),o}if(3===arguments.length){var s=t,a=e,l=n,u=new Tl;return u.add(s),u.add(a),u.add(l),u}};var Yp={STRTREE_NODE_CAPACITY:{configurable:!0}};Jp.prototype.reduceToGeometries=function(t){for(var e=new Tl,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Sa(r,El)?i=this.unionTree(r):r instanceof cl&&(i=r),e.add(i)}return e},Jp.prototype.extractByEnvelope=function(t,e,n){for(var r=new Tl,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Jp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Wp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Jp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Zc(Jp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Jp.prototype.binaryUnion=function(t,e,n){if(1===arguments.length)return this.binaryUnion(t,0,t.size());if(3===arguments.length){var r=t,i=e,o=n;if(o-i<=1){var s=Jp.getGeometry(r,i);return this.unionSafe(s,null)}if(o-i==2)return this.unionSafe(Jp.getGeometry(r,i),Jp.getGeometry(r,i+1));var a=Math.trunc((o+i)/2),l=this.binaryUnion(r,i,a),u=this.binaryUnion(r,a,o);return this.unionSafe(l,u)}},Jp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Jp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Jp.prototype.unionActual=function(t,e){return Jp.restrictToPolygons(t.union(e))},Jp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Jp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Tl,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Wp.combine(r)},Jp.prototype.bufferUnion=function(t,e){if(1===arguments.length){var n=t;return n.get(0).getFactory().buildGeometry(n).buffer(0)}if(2===arguments.length){var r=t,i=e;return r.getFactory().createGeometryCollection([r,i]).buffer(0)}},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.restrictToPolygons=function(t){if(Sa(t,Pu))return t;var e=Of.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Xu.toPolygonArray(e))},Jp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Jp.union=function(t){return new Jp(t).union()},Yp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Jp,Yp);var Xp=function(){};function Zp(t){switch(t.type){case"Polygon":return 1<sr(t)?t:null;case"MultiPolygon":var e=[];if(I(t,function(t){1<sr(t)&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Qp(){return new Kp}function Kp(){this.reset()}Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Bp.createEmptyResult(Bp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),up.overlayOp(t,e,Bp.UNION)},Kp.prototype={constructor:Kp,reset:function(){this.s=this.t=0},add:function(t){td($p,t,this.t),td(this,$p.s,this.s),this.s?this.t+=$p.t:this.s=$p.t},valueOf:function(){return this.s}};var $p=new Kp;function td(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var ed=1e-6,nd=Math.PI,rd=nd/2,id=nd/4,od=2*nd,sd=180/nd,ad=nd/180,ld=Math.abs,ud=Math.atan,cd=Math.atan2,hd=Math.cos,fd=Math.exp,pd=Math.log,dd=Math.sin,yd=Math.sqrt,gd=Math.tan;function md(t){return 1<t?rd:t<-1?-rd:Math.asin(t)}function vd(){}function bd(t,e){t&&wd.hasOwnProperty(t.type)&&wd[t.type](t,e)}var _d={Feature:function(t,e){bd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)bd(n[r].geometry,e)}},wd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Sd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Sd(n[r],e,0)},Polygon:function(t,e){xd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xd(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)bd(n[r],e)}};function Sd(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function xd(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Sd(t[n],e,1);e.polygonEnd()}var Ed=function(t,e){t&&_d.hasOwnProperty(t.type)?_d[t.type](t,e):bd(t,e)};function Od(t){return[cd(t[1],t[0]),md(t[2])]}function Cd(t){var e=t[0],n=t[1],r=hd(n);return[r*hd(e),r*dd(e),dd(n)]}function Pd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Td(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Md(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ld(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nd(t){var e=yd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}Qp(),Qp(),Qp();var kd=function(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t};function Ad(t,e){return[nd<t?t-od:t<-nd?t+od:t,e]}function Id(t,e,n){return(t%=od)?e||n?kd(jd(t),Dd(e,n)):jd(t):e||n?Dd(e,n):Ad}function Rd(n){return function(t,e){return[nd<(t+=n)?t-od:t<-nd?t+od:t,e]}}function jd(t){var e=Rd(t);return e.invert=Rd(-t),e}function Dd(t,e){var a=hd(t),l=dd(t),u=hd(e),c=dd(e);function n(t,e){var n=hd(e),r=hd(t)*n,i=dd(t)*n,o=dd(e),s=o*a+r*l;return[cd(i*u-s*c,r*a-o*l),md(s*u+i*c)]}return n.invert=function(t,e){var n=hd(e),r=hd(t)*n,i=dd(t)*n,o=dd(e),s=o*u-i*c;return[cd(i*u+o*c,r*a+s*l),md(s*a-r*l)]},n}function Fd(t,e){(e=Cd(e))[0]-=t,Nd(e);var n,r=1<(n=-e[1])?0:n<-1?nd:Math.acos(n);return((-e[2]<0?-r:r)+od-ed)%od}function Bd(t,e){return ld(t[0]-e[0])<ed&&ld(t[1]-e[1])<ed}Ad.invert=Ad;var Gd=function(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:vd,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}},Ud=function(t,e,n,r,i,o){var s,a=t[0],l=t[1],u=0,c=1,h=e[0]-a,f=e[1]-l;if(s=n-a,h||!(0<s)){if(s/=h,h<0){if(s<u)return;s<c&&(c=s)}else if(0<h){if(c<s)return;u<s&&(u=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(c<s)return;u<s&&(u=s)}else if(0<h){if(s<u)return;s<c&&(c=s)}if(s=r-l,f||!(0<s)){if(s/=f,f<0){if(s<u)return;s<c&&(c=s)}else if(0<f){if(c<s)return;u<s&&(u=s)}if(s=o-l,f||!(s<0)){if(s/=f,f<0){if(c<s)return;u<s&&(u=s)}else if(0<f){if(s<u)return;s<c&&(c=s)}return 0<u&&(t[0]=a+u*h,t[1]=l+u*f),c<1&&(e[0]=a+c*h,e[1]=l+c*f),!0}}}}};function zd(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var qd=function(t,e,n,r,o){var s,i,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(Bd(r,i)){for(o.lineStart(),s=0;s<e;++s)o.point((r=t[s])[0],r[1]);o.lineEnd()}else a.push(n=new zd(r,t,null,!0)),l.push(n.o=new zd(r,null,n,!1)),a.push(n=new zd(i,t,null,!1)),l.push(n.o=new zd(i,null,n,!0))}}),a.length){for(l.sort(e),Vd(a),Vd(l),s=0,i=l.length;s<i;++s)l[s].e=n=!n;for(var u,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(s=0,i=u.length;s<i;++s)o.point((c=u[s])[0],c[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(p)for(u=f.p.z,s=u.length-1;0<=s;--s)o.point((c=u[s])[0],c[1]);else r(f.x,f.p.x,-1,o);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);o.lineEnd()}}};function Vd(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Hd(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var Wd=function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--s]=r[e];return n},Jd=1e9,Yd=-Jd;var Xd=Qp(),Zd=(Qp(),function(t){return t}),Qd=(Qp(),Qp(),1/0),Kd=Qd,$d=-Qd,ty=$d,ey={point:function(t,e){t<Qd&&(Qd=t),$d<t&&($d=t),e<Kd&&(Kd=e),ty<e&&(ty=e)},lineStart:vd,lineEnd:vd,polygonStart:vd,polygonEnd:vd,result:function(){var t=[[Qd,Kd],[$d,ty]];return $d=ty=-(Kd=Qd=1/0),t}};function ny(m,v,b,_){return function(r,a){var l,u,c,i=v(a),M=r.invert(_[0],_[1]),h=Gd(),f=v(h),p=!1,e={point:n,lineStart:o,lineEnd:s,polygonStart:function(){e.point=d,e.lineStart=y,e.lineEnd=g,u=[],l=[]},polygonEnd:function(){e.point=n,e.lineStart=o,e.lineEnd=s,u=Wd(u);var t=function(t){var e=M[0],n=M[1],r=[dd(e),-hd(e),0],i=0,o=0;Xd.reset();for(var s=0,a=t.length;s<a;++s)if(u=(l=t[s]).length)for(var l,u,c=l[u-1],h=c[0],f=c[1]/2+id,p=dd(f),d=hd(f),y=0;y<u;++y,h=m,p=b,d=_,c=g){var g=l[y],m=g[0],v=g[1]/2+id,b=dd(v),_=hd(v),w=m-h,S=0<=w?1:-1,x=S*w,E=nd<x,O=p*b;if(Xd.add(cd(O*S*dd(x),d*_+O*hd(x))),i+=E?w+S*od:w,E^e<=h^e<=m){var C=Td(Cd(c),Cd(g));Nd(C);var P=Td(r,C);Nd(P);var T=(E^0<=w?-1:1)*md(P[2]);(T<n||n===T&&(C[0]||C[1]))&&(o+=E^0<=w?1:-1)}}return(i<-ed||i<ed&&Xd<-ed)^1&o}(l);u.length?(p||(a.polygonStart(),p=!0),qd(u,iy,t,b,a)):t&&(p||(a.polygonStart(),p=!0),a.lineStart(),b(null,null,1,a),a.lineEnd()),p&&(a.polygonEnd(),p=!1),u=l=null},sphere:function(){a.polygonStart(),a.lineStart(),b(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function n(t,e){var n=r(t,e);m(t=n[0],e=n[1])&&a.point(t,e)}function t(t,e){var n=r(t,e);i.point(n[0],n[1])}function o(){e.point=t,i.lineStart()}function s(){e.point=n,i.lineEnd()}function d(t,e){c.push([t,e]);var n=r(t,e);f.point(n[0],n[1])}function y(){f.lineStart(),c=[]}function g(){d(c[0][0],c[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),o=h.result(),s=o.length;if(c.pop(),l.push(c),c=null,s)if(1&i){if(0<(e=(n=o[0]).length-1)){for(p||(a.polygonStart(),p=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else 1<s&&2&i&&o.push(o.pop().concat(o.shift())),u.push(o.filter(ry))}return e}}function ry(t){return 1<t.length}function iy(t,e){return((t=t.x)[0]<0?t[1]-rd-ed:rd-t[1])-((e=e.x)[0]<0?e[1]-rd-ed:rd-e[1])}Qp();var oy=ny(function(){return 1},function(h){var f,p=NaN,d=NaN,y=NaN;return{lineStart:function(){h.lineStart(),f=1},point:function(t,e){var n,r,i,o,s,a,l,u=0<t?nd:-nd,c=ld(t-p);ld(c-nd)<ed?(h.point(p,d=0<(d+e)/2?rd:-rd),h.point(y,d),h.lineEnd(),h.lineStart(),h.point(u,d),h.point(t,d),f=0):y!==u&&nd<=c&&(ld(p-y)<ed&&(p-=y*ed),ld(t-u)<ed&&(t-=u*ed),r=d,o=e,l=dd((n=p)-(i=t)),d=ld(l)>ed?ud((dd(r)*(a=hd(o))*dd(i)-dd(o)*(s=hd(r))*dd(n))/(s*a*l)):(r+o)/2,h.point(y,d),h.lineEnd(),h.lineStart(),h.point(u,d),f=0),h.point(p=t,d=e),y=u},lineEnd:function(){h.lineEnd(),p=d=NaN},clean:function(){return 2-f}}},function(t,e,n,r){var i;if(null==t)i=n*rd,r.point(-nd,i),r.point(0,i),r.point(nd,i),r.point(nd,0),r.point(nd,-i),r.point(0,-i),r.point(-nd,-i),r.point(-nd,0),r.point(-nd,i);else if(ld(t[0]-e[0])>ed){var o=t[0]<e[0]?nd:-nd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-nd,-rd]),sy=function(i,o){var C=hd(i),p=0<C,d=ld(C)>ed;function y(t,e){return hd(t)*hd(e)>C}function g(t,e,n){var r=[1,0,0],i=Td(Cd(t),Cd(e)),o=Pd(i,i),s=i[0],a=o-s*s;if(!a)return!n&&t;var l=C*o/a,u=-C*s/a,c=Td(r,i),h=Ld(r,l);Md(h,Ld(i,u));var f=c,p=Pd(h,f),d=Pd(f,f),y=p*p-d*(Pd(h,h)-1);if(!(y<0)){var g=yd(y),m=Ld(f,(-p-g)/d);if(Md(m,h),m=Od(m),!n)return m;var v,b=t[0],_=e[0],w=t[1],S=e[1];_<b&&(v=b,b=_,_=v);var x=_-b,E=ld(x-nd)<ed;if(!E&&S<w&&(v=w,w=S,S=v),E||x<ed?E?0<w+S^m[1]<(ld(m[0]-b)<ed?w:S):w<=m[1]&&m[1]<=S:nd<x^(b<=m[0]&&m[0]<=_)){var O=Ld(f,(-p+g)/d);return Md(O,h),[m,Od(O)]}}}function m(t,e){var n=p?i:nd-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}return ny(y,function(a){var l,u,c,h,f;return{lineStart:function(){h=c=!1,f=1},point:function(t,e){var n,r=[t,e],i=y(t,e),o=p?i?0:m(t,e):i?m(t+(t<0?nd:-nd),e):0;if(!l&&(h=c=i)&&a.lineStart(),i!==c&&((n=g(l,r))&&!Bd(l,n)&&!Bd(r,n)||(r[0]+=ed,r[1]+=ed,i=y(r[0],r[1]))),i!==c)f=0,i?(a.lineStart(),n=g(r,l),a.point(n[0],n[1])):(n=g(l,r),a.point(n[0],n[1]),a.lineEnd()),l=n;else if(d&&l&&p^i){var s;o&u||!(s=g(r,l,!0))||(f=0,p?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!i||l&&Bd(l,r)||a.point(r[0],r[1]),l=r,c=i,u=o},lineEnd:function(){c&&a.lineEnd(),l=null},clean:function(){return f|(h&&c)<<1}}},function(t,e,n,r){!function(t,e,n,r,i,o){if(n){var s=hd(e),a=dd(e),l=r*n;null==i?(i=e+r*od,o=e-l/2):(i=Fd(s,i),o=Fd(s,o),(0<r?i<o:o<i)&&(i+=r*od));for(var u,c=i;0<r?o<c:c<o;c-=l)u=Od([s,-a*hd(c),-a*dd(c)]),t.point(u[0],u[1])}}(r,i,o,n,t,e)},p?[0,-i]:[-nd,i-nd])};function ay(r){return function(t){var e=new ly;for(var n in r)e[n]=r[n];return e.stream=t,e}}function ly(){}function uy(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Ed(n,t.stream(ey));var s=ey.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),l=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,u])}ly.prototype={constructor:ly,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cy=hd(30*ad),hy=function(t,e){return+e?(M=t,L=e,function(i){var n,r,o,s,a,l,u,c,h,f,p,d,y={point:t,lineStart:e,lineEnd:m,polygonStart:function(){i.polygonStart(),y.lineStart=v},polygonEnd:function(){i.polygonEnd(),y.lineStart=e}};function t(t,e){t=M(t,e),i.point(t[0],t[1])}function e(){c=NaN,y.point=g,i.lineStart()}function g(t,e){var n=Cd([t,e]),r=M(t,e);N(c,h,u,f,p,d,c=r[0],h=r[1],u=t,f=n[0],p=n[1],d=n[2],16,i),i.point(c,h)}function m(){y.point=t,i.lineEnd()}function v(){e(),y.point=b,y.lineEnd=_}function b(t,e){g(n=t,e),r=c,o=h,s=f,a=p,l=d,y.point=g}function _(){N(c,h,u,f,p,d,r,o,n,s,a,l,16,i),(y.lineEnd=m)()}return y}):(n=t,ay({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n,M,L;function N(t,e,n,r,i,o,s,a,l,u,c,h,f,p){var d=s-t,y=a-e,g=d*d+y*y;if(4*L<g&&f--){var m=r+u,v=i+c,b=o+h,_=yd(m*m+v*v+b*b),w=md(b/=_),S=ld(ld(b)-1)<ed||ld(n-l)<ed?(n+l)/2:cd(v,m),x=M(S,w),E=x[0],O=x[1],C=E-t,P=O-e,T=y*C-d*P;(L<T*T/g||.3<ld((d*C+y*P)/g-.5)||r*u+i*c+o*h<cy)&&(N(t,e,n,r,i,o,E,O,S,m/=_,v/=_,b,f,p),p.point(E,O),N(E,O,S,m,v,b,s,a,l,u,c,h,f,p))}}},fy=ay({point:function(t,e){this.stream.point(t*ad,e*ad)}});function py(t){return s=function(){return t},m=150,v=480,b=250,E=x=S=w=_=0,C=oy,P=O=null,T=Zd,L=hy(r,M=.5),n.stream=function(t){return y&&g===t?y:y=fy(C(c,L(T(g=t))))},n.clipAngle=function(t){return arguments.length?(C=+t?sy(O=t*ad,6*ad):(O=null,oy),o()):O*sd},n.clipExtent=function(t){return arguments.length?(T=null==t?(P=f=p=d=null,Zd):(_=P=+t[0][0],w=f=+t[0][1],S=p=+t[1][0],x=d=+t[1][1],function(r){var i,h,o,s,a,l,u,c,f,p,d,y=r,t=Gd(),e={point:n,lineStart:function(){e.point=g,h&&h.push(o=[]),f=!(p=!0),u=c=NaN},lineEnd:function(){i&&(g(s,a),l&&f&&t.rejoin(),i.push(t.result())),e.point=n,f&&y.lineEnd()},polygonStart:function(){y=t,i=[],h=[],d=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=h.length;e<n;++e)for(var r,i,o=h[e],s=1,a=o.length,l=o[0],u=l[0],c=l[1];s<a;++s)r=u,i=c,u=(l=o[s])[0],c=l[1],i<=x?x<c&&(c-i)*(_-r)<(u-r)*(x-i)&&++t:c<=x&&(u-r)*(x-i)<(c-i)*(_-r)&&--t;return t}(),e=d&&t,n=(i=Wd(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),v(null,null,1,r),r.lineEnd()),n&&qd(i,b,t,v,r),r.polygonEnd()),y=r,i=h=o=null}};function n(t,e){m(t,e)&&y.point(t,e)}function g(t,e){var n=m(t,e);if(h&&o.push([t,e]),p)s=t,a=e,p=!1,(l=n)&&(y.lineStart(),y.point(t,e));else if(n&&f)y.point(t,e);else{var r=[u=Math.max(Yd,Math.min(Jd,u)),c=Math.max(Yd,Math.min(Jd,c))],i=[t=Math.max(Yd,Math.min(Jd,t)),e=Math.max(Yd,Math.min(Jd,e))];Ud(r,i,_,w,S,x)?(f||(y.lineStart(),y.point(r[0],r[1])),y.point(i[0],i[1]),n||y.lineEnd(),d=!1):n&&(y.lineStart(),y.point(t,e),d=!1)}u=t,c=e,f=n}return e}),o()):null==P?null:[[P,f],[p,d]];function m(t,e){return _<=t&&t<=S&&w<=e&&e<=x}function v(t,e,n,r){var i=0,o=0;if(null==t||(i=s(t,n))!==(o=s(e,n))||a(t,e)<0^0<n)for(;r.point(0===i||3===i?_:S,1<i?x:w),(i=(i+n+4)%4)!==o;);else r.point(e[0],e[1])}function s(t,e){return ld(t[0]-_)<ed?0<e?0:3:ld(t[0]-S)<ed?0<e?2:1:ld(t[1]-w)<ed?0<e?1:0:0<e?3:2}function b(t,e){return a(t.x,e.x)}function a(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}var _,w,S,x},n.scale=function(t){return arguments.length?(m=+t,i()):m},n.translate=function(t){return arguments.length?(v=+t[0],b=+t[1],i()):[v,b]},n.center=function(t){return arguments.length?(_=t[0]%360*ad,w=t[1]%360*ad,i()):[_*sd,w*sd]},n.rotate=function(t){return arguments.length?(S=t[0]%360*ad,x=t[1]%360*ad,E=2<t.length?t[2]%360*ad:0,i()):[S*sd,x*sd,E*sd]},n.precision=function(t){return arguments.length?(L=hy(r,M=t*t),o()):yd(M)},n.fitExtent=function(t,e){return uy(n,t,e)},n.fitSize=function(t,e){return uy(n,[[0,0],t],e)},function(){return a=s.apply(this,arguments),n.invert=a.invert&&e,i()}();function n(t){return[(t=h(t[0]*ad,t[1]*ad))[0]*m+l,u-t[1]*m]}function e(t){return(t=h.invert((t[0]-l)/m,(u-t[1])/m))&&[t[0]*sd,t[1]*sd]}function r(t,e){return[(t=a(t,e))[0]*m+l,u-t[1]*m]}function i(){h=kd(c=Id(S,x,E),a);var t=a(_,w);return l=v-t[0]*m,u=b+t[1]*m,o()}function o(){return y=g=null,n}var s,a,l,u,c,h,f,p,d,y,g,m,v,b,_,w,S,x,E,O,C,P,T,M,L}function dy(t,e){return[t,pd(gd((rd+e)/2))]}function yy(i){var o,s,a,l=py(i),e=l.center,u=l.scale,n=l.translate,c=l.clipExtent,h=null;function r(){var t,e,n=nd*u(),r=l((t=Id((t=l.rotate())[0]*ad,t[1]*ad,2<t.length?t[2]*ad:0),e=[0,0],(e=t.invert(e[0]*ad,e[1]*ad))[0]*=sd,e[1]*=sd,e));return c(null==h?[[r[0]-n,r[1]-n],[r[0]+n,r[1]+n]]:i===dy?[[Math.max(r[0]-n,h),o],[Math.min(r[0]+n,s),a]]:[[h,Math.max(r[1]-n,o)],[s,Math.min(r[1]+n,a)]])}return l.scale=function(t){return arguments.length?(u(t),r()):u()},l.translate=function(t){return arguments.length?(n(t),r()):n()},l.center=function(t){return arguments.length?(e(t),r()):e()},l.clipExtent=function(t){return arguments.length?(null==t?h=o=s=a=null:(h=+t[0][0],o=+t[0][1],s=+t[1][0],a=+t[1][1]),r()):null==h?null:[[h,o],[s,a]]},r()}function gy(t,e){return[pd(gd((rd+e)/2)),-t]}dy.invert=function(t,e){return[t,2*ud(fd(e))-rd]},gy.invert=function(t,e){return[-e,2*ud(fd(t))-rd]};var my=function(){var t=yy(gy),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};function vy(t,n,r,i){var e,o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return k(t,function(t){var e=vy(t,n,r,i);e&&a.push(e)}),H(a)}var l=Y(t),u=50<l[1]&&50<l[3];e=u?{type:s.type,coordinates:function e(t,n){return"object"!=typeof t[0]?n(t):t.map(function(t){return e(t,n)})}(s.coordinates,by(s))}:Zn(s);var c,h=(new ec).read(e),f=d(y(n,r),"meters"),p=mf.bufferOp(h,f);if(!function t(e){return(Array.isArray(e[0])?t:isNaN)(e[0])}((p=(new nc).write(p)).coordinates))return(c=u?{type:p.type,coordinates:function e(t,n){return"object"!=typeof t[0]?n.invert(t):t.map(function(t){return e(t,n)})}(p.coordinates,by(s))}:Qn(p)).geometry?c:z(c,o)}function by(t){var e=Xe(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return my().center(e).rotate(n).scale(f)}function _y(){for(var t=new ec,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Xp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new nc).write(e),properties:arguments[0].properties}}function wy(t,e){var n=et(t),r=et(e);if(Re(vr(r,{precision:4})).coordinates[0].length<4)return null;if(Re(vr(n,{precision:4})).coordinates[0].length<4)return null;var i=new ec,o=i.read(vr(n)),s=i.read(vr(r)),a=Bp.intersection(o,s);return a.isEmpty()?null:z((new nc).write(a))}function Sy(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,o=n.mask;if(null==e)throw new Error("cellSide is required");if(!W(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(o&&-1===["Polygon","MultiPolygon"].indexOf(rt(o)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],a=t[1],l=t[2],u=t[3],c=(a+u)/2,h=(s+l)/2,f=2*e/he([s,c],[l,c],n)*(l-s),p=2*e/he([h,a],[h,u],n)*(u-a),d=f/2,y=2*d,g=Math.sqrt(3)/2*p,m=l-s,v=u-a,b=.75*y,_=g,w=(m-y)/(y-d/2),S=Math.floor(w),x=(S*b-d/2-m)/2-d/2+b/2,E=Math.floor((v-g)/g),O=(v-E*g)/2,C=g/2<E*g-v;C&&(O-=g/4);for(var P=[],T=[],M=0;M<6;M++){var L=2*Math.PI/6*M;P.push(Math.cos(L)),T.push(Math.sin(L))}for(var N=[],k=0;k<=S;k++)for(var A=0;A<=E;A++){var I=k%2==1;if(!(0===A&&I||0===A&&C)){var R=k*b+s-x,j=A*_+a+O;if(I&&(j-=g/2),!0===i)Ey([R,j],f/2,p/2,r,P,T).forEach(function(t){o&&!wy(o,t)||N.push(t)});else{var D=xy([R,j],f/2,p/2,r,P,T);o&&!wy(o,D)||N.push(D)}}}return H(N)}function xy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var l=t[0]+e*i[a],u=t[1]+n*o[a];s.push([l,u])}return s.push(s[0].slice()),B([s],r)}function Ey(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var l=[];l.push(t),l.push([t[0]+e*i[a],t[1]+n*o[a]]),l.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),l.push(t),s.push(B([l],r))}return s}function Oy(t){if(t.features.length<=1)return t;var e,n,r,o=(e=t,n=yt(),r=[],I(e,function(t,e){var n=Y(t);r.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],geojson:t,index:e})}),n.load(r),n),s=[],a={};return I(t,function(t,e){if(a[e])return 1;for(o.remove({index:e},Cy),a[e]=!0;;){var n=Y(t),r=o.search({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]});if(0<r.length){var i=r.map(function(t){return a[t.index]=!0,o.remove({index:t.index},Cy),t.geojson});i.push(t),t=_y.apply(this,i)}if(0===r.length)break}s.push(t)}),H(s)}function Cy(t,e){return t.index===e.index}function Py(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==e)throw new Error("cellSide is required");if(!W(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(rt(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],a=t[1],l=t[2],u=t[3],c=e/he([s,a],[l,a],n)*(l-s),h=e/he([s,a],[s,u],n)*(u-a),f=l-s,p=u-a,d=Math.floor(f/c),y=Math.floor(p/h),g=(p-y*h)/2,m=s+(f-d*c)/2,v=0;v<d;v++){for(var b=a+g,_=0;_<y;_++){var w=B([[[m,b],[m,b+h],[m+c,b+h],[m+c,b],[m,b]]],r);i&&!wy(i,w)||o.push(w),b+=h}m+=c}return H(o)}function Ty(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,o=[];if(null==e)throw new Error("cellSide is required");if(!W(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(rt(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/he([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),a=e/he([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,u=t[0];u<=t[2];){for(var c=0,h=t[1];h<=t[3];){var f=null,p=null;l%2==0&&c%2==0?(f=B([[[u,h],[u,h+a],[u+s,h],[u,h]]],r),p=B([[[u,h+a],[u+s,h+a],[u+s,h],[u,h+a]]],r)):l%2==0&&c%2==1?(f=B([[[u,h],[u+s,h+a],[u+s,h],[u,h]]],r),p=B([[[u,h],[u,h+a],[u+s,h+a],[u,h]]],r)):c%2==0&&l%2==1?(f=B([[[u,h],[u,h+a],[u+s,h+a],[u,h]]],r),p=B([[[u,h],[u+s,h+a],[u+s,h],[u,h]]],r)):c%2==1&&l%2==1&&(f=B([[[u,h],[u,h+a],[u+s,h],[u,h]]],r),p=B([[[u,h+a],[u+s,h+a],[u+s,h],[u,h+a]]],r)),i?(wy(i,f)&&o.push(f),wy(i,p)&&o.push(p)):(o.push(f),o.push(p)),h+=a,c++}l++,u+=s}return H(o)}t.projection=er,t.random=$s,t.clusters=aa,t.helpers=E,t.invariant=it,t.meta=U,t.isolines=function(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(tt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!J(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s,a,l,u,c,h,f,p,d,y,g,m=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;tt(t,"Point","input must contain Points");for(var o,s,a=(o=r,s={},M(t,function(t){var e=Z(t)[1];s[e]||(s[e]=[]),s[e].push(t)}),Object.keys(s).map(function(t){return s[t].sort(function(t,e){return Z(t)[0]-Z(e)[0]})}).sort(function(t,e){return o?Z(t[0])[1]-Z(e[0])[1]:Z(e[0])[1]-Z(t[0])[1]})),l=[],u=0;u<a.length;u++){for(var c=a[u],h=[],f=0;f<c.length;f++){var p=c[f];p.properties[n]?h.push(p.properties[n]):h.push(0),!0===i&&(p.properties.matrixPosition=[u,f])}l.push(h)}return l}(t,{zProperty:r,flip:!0});function v(t){t[0]=t[0]*y+h,t[1]=t[1]*g+f}return H((s=function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],l=Object.assign({},r,i[s]),u=b(at(t,l[n]=a),l);o.push(u)}return o}(m,e,r,i,o),a=m,u=(l=Y(t))[2]-l[0],c=l[3]-l[1],h=l[0],f=l[1],p=a[0].length-1,d=a.length-1,y=u/p,g=c/d,s.forEach(function(t){O(t,v)}),s))},t.convex=re,t.pointsWithinPolygon=se,t.concave=function(t,a){if(!J(a=a||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var l=a.maxEdge||1/0;if(!W(l))throw new Error("maxEdge is invalid");var n,r,e=ae((n=[],r={},M(t,function(t){if(t.geometry){var e=t.geometry.coordinates.join("-");r.hasOwnProperty(e)||(n.push(t),r[e]=!0)}}),H(n)));if(e.features=e.features.filter(function(t){var e=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],r=t.geometry.coordinates[0][2],i=he(e,n,a),o=he(n,r,a),s=he(e,r,a);return i<=l&&o<=l&&s<=l}),e.features.length<1)return null;var i=Ie(e,a);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),z(i)},t.collect=function(t,e,n,i){var o=yt(6),r=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return o.load(r),t.features.forEach(function(e){e.properties||(e.properties={});var t=Y(e),n=o.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}),r=[];n.forEach(function(t){ie([t.minX,t.minY],e)&&r.push(t.property)}),e.properties[i]=r}),t},t.flip=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=fe(t)),O(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=fe(t)),k(t,function(t){!function(t,e,n){var r=t.type;if("Point"!==r&&"MultiPoint"!==r){Re(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Be(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return Be(t,e,n)});break;case"Polygon":t.coordinates=Ge(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return Ge(t,e,n)})}}}(t,n,r)}),t},t.bezierSpline=ze,t.tag=function(t,n,r,i){return t=fe(t),n=fe(n),M(t,function(e){e.properties||(e.properties={}),M(n,function(t){void 0===e.properties[i]&&ie(e,t)&&(e.properties[i]=t.properties[r])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return H(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.envelope=Ve,t.square=He,t.circle=Je,t.midpoint=function(t,e){return We(t,he(t,e)/2,Ye(t,e))},t.center=Xe,t.centerOfMass=function t(e,n){switch(rt(e)){case"Point":return e;case"Polygon":var r=[];O(e,function(t){r.push(t)});var i,o,s,a,l,u,c,h,f=Ze(e,n),p=f.geometry.coordinates,d=0,y=0,g=0,m=r.map(function(t){return[t[0]-p[0],t[1]-p[1]]});for(i=0;i<r.length-1;i++)a=(o=m[i])[0],u=o[1],l=(s=m[i+1])[0],g+=h=a*(c=s[1])-l*u,d+=(a+l)*h,y+=(u+c)*h;if(0===g)return f;var v=1/(.5*g*6);return q([p[0]+v*d,p[1]+v*y],n);default:var b=re(e);return b?t(b,n):Ze(e,n)}},t.centroid=Ze,t.combine=function(t){var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},e=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}return M(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):e[t.geometry.type]&&n(t,e[t.geometry.type],!1))}),H(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return z({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=he,t.explode=Qe,t.bbox=Y,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=xn(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(xn(t))}),e},t.bboxPolygon=qe,t.booleanPointInPolygon=ie,t.nearestPoint=En,t.nearestPointOnLine=Wn,t.nearestPointToLine=function(t,n,e){if(!J(e=e||{}))throw new Error("options is invalid");var r=e.units,i=e.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return k(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==rt(n))throw new Error("line must be a LineString");var o=1/0,s=null;return M(t,function(t){var e=nr(t,n,{units:r});e<o&&(o=e,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var n=X(t),r=et(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,l=n[0],u=n[1],c=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],y=void 0!==s?s:r[1][2],g=r[2][0],m=r[2][1],v=void 0!==a?a:r[2][2];return(v*(l-c)*(u-d)+f*(l-p)*(u-m)+y*(l-g)*(u-h)-y*(l-c)*(u-m)-v*(l-p)*(u-h)-f*(l-g)*(u-d))/((l-c)*(u-d)+(l-p)*(u-m)+(l-g)*(u-h)-(l-c)*(u-m)-(l-p)*(u-h)-(l-g)*(u-d))},t.tin=ae,t.bearing=Ye,t.destination=We,t.kinks=function(t){var e,n,v={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(m){e.forEach(function(t){for(var e=0;e<m.length-1;e++)for(var n=e;n<t.length-1;n++){if(m===t){if(1===Math.abs(e-n))continue;if(0===e&&n===m.length-2&&m[e][0]===m[m.length-1][0]&&m[e][1]===m[m.length-1][1])continue}var r=(i=m[e][0],o=m[e][1],s=m[e+1][0],a=m[e+1][1],l=t[n][0],u=t[n][1],c=t[n+1][0],h=t[n+1][1],g=y=d=p=f=void 0,g={x:null,y:null,onLine1:!1,onLine2:!1},0==(f=(h-u)*(s-i)-(c-l)*(a-o))?null!==g.x&&null!==g.y&&g:(y=(s-i)*(p=o-u)-(a-o)*(d=i-l),p=((c-l)*p-(h-u)*d)/f,d=y/f,g.x=i+p*(s-i),g.y=o+p*(a-o),0<=p&&p<=1&&(g.onLine1=!0),0<=d&&d<=1&&(g.onLine2=!0),!(!g.onLine1||!g.onLine2)&&[g.x,g.y]));r&&v.features.push(q([r[0],r[1]]))}var i,o,s,a,l,u,c,h,f,p,d,y,g})}),v},t.pointOnFeature=ir,t.area=sr,t.along=function(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!W(e))throw new Error("distance must be a number");for(var i=0,o=0;o<r.length&&!(i<=e&&o===r.length-1);o++){if(e<=i){var s=e-i;if(s){var a=Ye(r[o],r[o-1])-180;return We(r[o],s,a,n)}return q(r[o])}i+=he(r[o],r[o+1],n)}return q(r[r.length-1])},t.length=hr,t.lineSlice=function(t,e,n){var r=Z(n);if("LineString"!==rt(n))throw new Error("line must be a LineString");for(var i,o=Wn(n,t),s=Wn(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)a.push(r[l]);return a.push(i[1].geometry.coordinates),V(a,n.properties)},t.lineSliceAlong=fr,t.pointGrid=mr,t.truncate=vr,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return I(t,function(t){e.push(t)}),H(e)},t.lineIntersect=Vn,t.lineChunk=function(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return I(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=hr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){r(fr(t,e*s,e*(s+1),{units:n}))}}(t,e,r,function(t){o.push(t)})}),H(o)},t.unkinkPolygon=function(t){var n=[];return I(t,function(e){"Polygon"===e.geometry.type&&M(_r(e),function(t){n.push(B(t.geometry.coordinates,e.properties))})}),H(n)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=X(t),e=X(e),r=r||{},i=i||100,o=o||10,new Nr({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=qn,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=rt(t),r=rt(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=vr(e,{precision:7});switch(r){case"Point":return Ar(t,i);case"MultiPoint":return kr(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return kr(t,Vn(t,i))}},t.lineArc=jr,t.polygonToLine=Fr,t.lineToPolygon=Gr,t.bboxClip=function(t,e){var n=t.geometry?t.geometry.type:t.type,r=Z(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var o=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){qr(t,e,o)}),1===o.length?V(o[0],i):b(o,i);case"Polygon":return B(Jr(r,e),i);case"MultiPolygon":return _(r.map(function(t){return Jr(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=$r,t.sector=function(t,e,n,r,i){if(!J(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(ei(n)===ei(r))return Je(t,e,i);var o=Z(t),s=jr(t,e,n,r,i),a=[[o]];return O(s,function(t){a[0].push(t)}),a[0].push(o),B(a)},t.rhumbBearing=Jn,t.rhumbDistance=Xn,t.rhumbDestination=ni,t.polygonTangents=function(t,e){var n,r,i,o=Z(t),s=Z(e);switch(rt(e)){case"Polygon":n=s[0][0],r=s[0][0],i=ii(s[0][0],s[0][s[0].length-1],o);var a=ri(s[0],o,i,void 0,n,r);n=a[0],r=a[1];break;case"MultiPolygon":n=s[0][0][0],r=s[0][0][0],i=ii(s[0][0][0],s[0][0][s[0][0].length-1],o),s.forEach(function(t){var e=ri(t[0],o,i,void 0,n,r);n=e[0],r=e[1]})}return H([q(n),q(r)])},t.rewind=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=fe(t));var i=[];switch(t.type){case"GeometryCollection":return k(t,function(t){si(t,n)}),t;case"FeatureCollection":return M(t,function(t){M(si(t,n),function(t){i.push(t)})}),H(i)}return si(t,n)},t.isobands=function(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(tt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!J(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s,a,l,u,c,h,f,p,d,y,g,m=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;tt(t,"Point","input must contain Points");for(var o,s,a=(o=r,s={},M(t,function(t){var e=Z(t)[1];s[e]||(s[e]=[]),s[e].push(t)}),Object.keys(s).map(function(t){return s[t].sort(function(t,e){return Z(t)[0]-Z(e)[0]})}).sort(function(t,e){return o?Z(t[0])[1]-Z(e[0])[1]:Z(e[0])[1]-Z(t[0])[1]})),l=[],u=0;u<a.length;u++){for(var c=a[u],h=[],f=0;f<c.length;f++){var p=c[f];p.properties[n]?h.push(p.properties[n]):h.push(0),!0===i&&(p.properties.matrixPosition=[u,f])}l.push(h)}return l}(t,{zProperty:r,flip:!0}),v=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=uo(lo(hi(t,o,s-o))),l={};l.groupedRings=a,l[n]=o+"-"+s,r.push(l)}return r}(m,e,r);function b(t){t[0]=t[0]*y+h,t[1]=t[1]*g+f}return s=v,a=m,u=(l=Y(t))[2]-l[0],c=l[3]-l[1],h=l[0],f=l[1],p=a[0].length-1,d=a.length-1,y=u/p,g=c/d,s.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(b)})})}),H((v=s).map(function(t,e){if(o[e]&&!J(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,o[e]);return n[r]=t[r],_(t.groupedRings,n)}))},t.transformRotate=fo,t.transformScale=po,t.transformTranslate=function(t,n,r,e){if(!J(e=e||{}))throw new Error("options is invalid");var i=e.units,o=e.zTranslation,s=e.mutate;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===n&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return n<0&&(n=-n,r=-r),!1!==s&&void 0!==s||(t=fe(t)),O(t,function(t){var e=Z(ni(t,n,r,{units:i}));t[0]=e[0],t[1]=e[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=rt(t),o=t.properties;switch(i){case"LineString":return vo(t,e,r);case"MultiLineString":var s=[];return I(t,function(t){s.push(vo(t,e,r).geometry.coordinates)}),b(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=Oo.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){xo.findEdgeRingContaining(t,r)&&r.push(t)}),H(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,n){var r;return I(t,function(e){I(n,function(t){!1!==r&&(r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!Co(e,t);case"Polygon":return!ie(t,e)}break;case"LineString":switch(e.type){case"Point":return!Co(t,e);case"LineString":return!(0<Vn(t,e).features.length);case"Polygon":return!Po(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ie(e,t);case"LineString":return!Po(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(ie(t.coordinates[0][n],e))return 1;for(var r=0;r<e.coordinates[0].length;r++)if(ie(e.coordinates[0][r],t))return 1}(e,t)}}var n,r}(e.geometry,t.geometry))})}),r},t.booleanContains=function(t,e){var n=rt(t),r=rt(e),i=et(t),o=et(e),s=Z(t),a=Z(e);switch(n){case"Point":switch(r){case"Point":return Mo(s,a);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Mo(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Mo(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return pr(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(pr({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!pr({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(pr(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!pr(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return ie(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n,r,i=!1,o=0;if(!To(Y(t),Y(e)))return!1;for(;o<e.coordinates.length-1;o++)if(ie({type:"Point",coordinates:(n=e.coordinates[o],r=e.coordinates[o+1],[(n[0]+r[0])/2,(n[1]+r[1])/2])},t,{ignoreBoundary:!0})){i=!0;break}return i}(i,o);case"Polygon":return function(t,e){if(!To(Y(t),Y(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!ie(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!ie(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=rt(t),r=rt(e),i=et(t),o=et(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Lo(i,o);case"Polygon":return ko(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Lo(o,i);case"LineString":return function(t,e){if(0<Vn(t,e).features.length)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Ao(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return No(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return ko(o,i);case"LineString":return No(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=oi,t.booleanOverlap=zo,t.booleanPointOnLine=pr,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return rt(t)===rt(e)&&new Uo({precision:6}).compare(Re(t),Re(e))},t.booleanWithin=dr,t.clone=fe,t.cleanCoords=Re,t.clustersDbscan=function(n,t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var r=e.minPoints,i=e.units;if(tt(n,"Point","Input must contain Points"),null==t)throw new Error("maxDistance is required");if(!(0<Math.sign(t)))throw new Error("Invalid maxDistance");if(!(null==r||0<Math.sign(r)))throw new Error("Invalid minPoints");n=fe(n),r=r||3;var o=new Jo.DBSCAN,s=o.run(N(n),m(t,i),r,he),a=-1;return s.forEach(function(t){a++,t.forEach(function(t){var e=n.features[t];e.properties||(e.properties={}),e.properties.cluster=a,e.properties.dbscan="core"})}),o.noise.forEach(function(t){var e=n.features[t];e.properties||(e.properties={}),e.properties.cluster?e.properties.dbscan="edge":e.properties.dbscan="noise"}),n},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;tt(t,"Point","Input must contain Points");var i=t.features.length;i<(n=n||Math.round(Math.sqrt(i/2)))&&(n=i),!1!==r&&void 0!==r||(t=fe(t));var o=N(t),s=o.slice(0,n),a=$o(o,n,s),l={};return a.centroids.forEach(function(t,e){l[e]=t}),M(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=l[n]}),t},t.pointToLineDistance=nr,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==ts(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==ts(e,"line2"))throw new Error("line2 must be a LineString");for(var n,r=qn(Re(t)).features,i=qn(Re(e)).features,o=0;o<r.length;o++){var s=r[o].geometry.coordinates;if(!i[o])break;if(n=i[o].geometry.coordinates,p(Jn(s[0],s[1]))!==p(Jn(n[0],n[1])))return!1}return!0},t.shortestPath=function(t,e,n){if(!J(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||H([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!W(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=X(t),a=X(e);switch(t=q(s),e=q(a),rt(o)){case"FeatureCollection":if(0===o.features.length)return V([s,a]);break;case"Polygon":o=H([z(et(o))]);break;default:throw new Error("invalid obstacles")}var l=o;l.features.push(t),l.features.push(e);var u=Y(po(qe(Y(l)),1.15));r=r||he([u[0],u[1]],[u[2],u[1]],n)/100,l.features.pop(),l.features.pop();for(var c=u[0],h=u[1],f=u[2],p=u[3],d=r/he([c,h],[f,h],n)*(f-c),y=r/he([c,h],[c,p],n)*(p-h),g=f-c,m=p-h,v=Math.floor(g/d),b=Math.floor(m/y),_=(g-v*d)/2,w=[],S=[],x=[],E=[],O=1/0,C=1/0,P=p-(m-b*y)/2,T=0;h<=P;){for(var M=[],L=[],N=c+_,k=0;N<=f;){var A=q([N,P]),I=ss(A,o);M.push(I?0:1),L.push(N+"|"+P);var R=he(A,t);!I&&R<O&&(O=R,x={x:k,y:T});var j=he(A,e);!I&&j<C&&(C=j,E={x:k,y:T}),N+=d,k++}S.push(M),w.push(L),P-=y,T++}var D=new rs(S,{diagonal:!0}),F=D.grid[x.y][x.x],B=D.grid[E.y][E.x],G=ns.search(D,F,B),U=[s];return G.forEach(function(t){var e=w[t.x][t.y].split("|");U.push([+e[0],+e[1]])}),U.push(a),Re(V(U))},t.voronoi=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var i,o,n,r=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return tt(t,"Point","points"),H((i=ls,o=us,n=null,s.polygons=function(t){return s(t).polygons()},s.links=function(t){return s(t).links()},s.triangles=function(t){return s(t).triangles()},s.x=function(t){return arguments.length?(i="function"==typeof t?t:as(+t),s):i},s.y=function(t){return arguments.length?(o="function"==typeof t?t:as(+t),s):o},s.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],s):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},s.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],s):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},s.x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(t.features).map(zs)));function s(r){return new Us(r.map(function(t,e){var n=[Math.round(i(t,e,r)/Fs)*Fs,Math.round(o(t,e,r)/Fs)*Fs];return n.index=e,n.data=t,n}),n)}},t.ellipse=qs,t.centerMean=Hs,t.centerMedian=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!W(n))throw new Error("counter must be a number");var r=e.weight,i=Hs(t,{weight:e.weight}),o=H([]);return M(t,function(t){o.features.push(Ze(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},function t(o,e,n,r){var i=n.properties.tolerance||.001,s=0,a=0,l=0,u=0;if(M(n,function(t){var e=t.properties.weight,n=null==e?1:e;if(!W(n=Number(n)))throw new Error("weight value must be a number");if(0<n){u+=1;var r=n*he(t,o);0===r&&(r=1);var i=n/r;s+=t.geometry.coordinates[0]*i,a+=t.geometry.coordinates[1]*i,l+=i}}),u<1)throw new Error("no features to measure");var c=s/l,h=a/l;return 1===u||0===r||Math.abs(c-e[0])<i&&Math.abs(h-e[1])<i?q([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),t([c,h],o,n,r-1))}(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!W(n))throw new Error("steps must be a number");if(!J(i))throw new Error("properties must be a number");var o=N(t).length,s=Hs(t,{weight:r}),a=0,l=0,u=0;M(t,function(t){var e=t.properties[r]||1,n=Ws(Z(t),Z(s));a+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,u+=n.x*n.y*e});var c=a-l,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),f=2*u,p=Math.atan((c+h)/f),d=180*p/Math.PI,y=0,g=0,m=0;M(t,function(t){var e=t.properties[r]||1,n=Ws(Z(t),Z(s));y+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,g+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,m+=e});var v=Math.sqrt(2*y/m),b=Math.sqrt(2*g/m),_=qs(s,v,b,{units:"degrees",angle:d,steps:n,properties:i}),w=se(t,H([_])),S={meanCenterCoordinates:Z(s),semiMajorAxis:v,semiMinorAxis:b,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*N(w).length/o};return _.properties.standardDeviationalEllipse=S,_},t.difference=function(t,e){var n=et(t),r=et(e),i=t.properties||{};if(n=Zp(n),r=Zp(r),!n)return null;if(!r)return z(n,i);var o=new ec,s=o.read(n),a=o.read(r),l=Bp.difference(s,a);return l.isEmpty()?null:z((new nc).write(l),i)},t.buffer=function(t,n,e){var r=(e=e||{}).units,i=e.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof e)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return k(t,function(t){var e=vy(t,n,r,i);e&&o.push(e)}),H(o);case"FeatureCollection":return M(t,function(t){var e=vy(t,n,r,i);e&&M(e,function(t){t&&o.push(t)})}),H(o)}return vy(t,n,r,i)},t.union=_y,t.intersect=wy,t.dissolve=function(t,e){if(!J(e=e||{}))throw new Error("options is invalid");var o=e.propertyName;tt(t,"Polygon","dissolve");var n=fe(t),s=n.features,a=[];s.forEach(function(t,e){t.properties.origIndexPosition=e});var l=Gn();for(var u in l.load(n),s){var c=s[u],h=!1;if(l.search(c).features.forEach(function(t){c=s[u];var e=t.properties.origIndexPosition;if(0<a.length&&0!==e)if(e>a[a.length-1])e-=a.length;else{var n=function(r,t){var i,o;if(!Array.isArray(t))throw new Error("Get closest expects an array as second argument");return t.forEach(function(t,e){var n=t-r;0<=n&&(void 0===o||n<o)&&(o=n,i=e)}),i}(e,a);0!==n&&(e-=n)}if(e!==+u){var r,i=s[e];i&&c&&(void 0!==o&&i.properties[o]!==c.properties[o]||zo(c,i)&&(r=i,0<Vn(V(N(c)),V(N(r))).features.length)&&(s[u]=_y(c,i),a.push(t.properties.origIndexPosition),a.sort(function(t,e){return t-e}),l.remove(t),s.splice(e,1),c.properties.origIndexPosition=u,l.remove(c,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),h=!0))}}),h){if(!c)continue;c.properties.origIndexPosition=u,l.insert(c),u--}}return s.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),n},t.hexGrid=Sy,t.mask=function(t,e){var i,o,n,r,s,a=B(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),l=(i=[],o=[],I(t,function(t){var e=t.geometry.coordinates,n=e[0],r=e.slice(1);i.push(B([n])),r.forEach(function(t){o.push(B([t]))})}),[H(i),H(o)]),u=l[0],c=l[1];return n=u=Oy(u),r=c=Oy(c),(s=[]).push(a.geometry.coordinates[0]),I(n,function(t){s.push(t.geometry.coordinates[0])}),I(r,function(t){s.push(t.geometry.coordinates[0])}),B(s)},t.squareGrid=Py,t.triangleGrid=Ty,t.interpolate=function(e,t,a){if("object"!=typeof(a=a||{}))throw new Error("options is invalid");var l=a.gridType,u=a.property,c=a.weight;if(!e)throw new Error("points is required");if(tt(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(void 0!==c&&"number"!=typeof c)throw new Error("weight must be a number");u=u||"elevation",l=l||"square",c=c||1;var n,r=Y(e);switch(l){case"point":case"points":n=mr(r,t,a);break;case"square":case"squares":n=Py(r,t,a);break;case"hex":case"hexes":n=Sy(r,t,a);break;case"triangle":case"triangles":n=Ty(r,t,a);break;default:throw new Error("invalid gridType")}var h=[];return M(n,function(i){var o=0,s=0;M(e,function(t){var e,n=he("point"===l?i:Ze(i),t,a);if(void 0!==u&&(e=t.properties[u]),void 0===e&&(e=t.geometry.coordinates[2]),void 0===e)throw new Error("zValue is missing");0===n&&(o=e);var r=1/Math.pow(n,c);s+=r,o+=r*e});var t=fe(i);t.properties[u]=o/s,h.push(t)}),H(h)},t.pointOnSurface=ir,t.polygonToLineString=Fr,t.lineStringToPolygon=Gr,t.inside=ie,t.within=se,t.bezier=ze,t.nearest=En,t.pointOnLine=Wn,t.lineDistance=hr,t.radians2degrees=g,t.degrees2radians=v,t.distanceToDegrees=h,t.distanceToRadians=y,t.radiansToDistance=d,t.bearingToAngle=p,t.convertDistance=m,t.toMercator=Zn,t.toWgs84=Qn,t.randomPosition=Js,t.randomPoint=Ys,t.randomPolygon=Xs,t.randomLineString=Zs,t.getCluster=ta,t.clusterEach=ea,t.clusterReduce=na,t.createBins=ra,t.applyFilter=ia,t.propertiesContainsFilter=oa,t.filterProperties=sa,t.earthRadius=f,t.factors=r,t.unitsFactors=e,t.areaFactors=o,t.feature=z,t.geometry=n,t.point=q,t.points=i,t.polygon=B,t.polygons=s,t.lineString=V,t.lineStrings=a,t.featureCollection=H,t.multiLineString=b,t.multiPoint=l,t.multiPolygon=_,t.geometryCollection=u,t.round=c,t.radiansToLength=d,t.lengthToRadians=y,t.lengthToDegrees=h,t.bearingToAzimuth=p,t.radiansToDegrees=g,t.degreesToRadians=v,t.convertLength=m,t.convertArea=w,t.isNumber=W,t.isObject=J,t.validateBBox=S,t.validateId=x,t.getCoord=X,t.getCoords=Z,t.containsNumber=Q,t.geojsonType=K,t.featureOf=$,t.collectionOf=tt,t.getGeom=et,t.getGeomType=nt,t.getType=rt,t.coordEach=O,t.coordReduce=C,t.propEach=P,t.propReduce=T,t.featureEach=M,t.featureReduce=L,t.coordAll=N,t.geomEach=k,t.geomReduce=A,t.flattenEach=I,t.flattenReduce=R,t.segmentEach=j,t.segmentReduce=D,t.lineEach=F,t.lineReduce=G,Object.defineProperty(t,"__esModule",{value:!0})});var create=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function extend(e){var t,n,r;for(t=1,n=arguments.length;t<n;t++)r=arguments[t],Object.keys(r).forEach(function(t){e[t]=r[t]});return e}var isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function checkDeprecatedMixinEvents(t){if("undefined"!=typeof L&&L&&L.Mixin){t=isArray(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function hasExist(t,e){for(var n in e)if(t===n)return!0;return!1}function isIE(){return!!window.ActiveXObject||"ActiveXObject"in window}function IEVersion(){return parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))}function removeNode(t){isIE()?t.removeNode(!0):t.remove()}function Map(){this.keys=[],this.data={},this.get=function(t){return this.data[t]},this.set=function(t,e){null==this.data[t]&&-1===this.keys.indexOf(t)&&this.keys.push(t),this.data[t]=e}}function isDeep(t){if(isArray(t))return t.some(function(t){return t instanceof Array})}function Class(){}Class.extend=function(t){function e(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var n=e.__super__=this.prototype,r=create(n);for(var i in(r.constructor=e).prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&"__super__"!==i&&(e[i]=this[i]);return t.statics&&(extend(e,t.statics),delete t.statics),t.includes&&(checkDeprecatedMixinEvents(t.includes),extend.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=extend(create(r.options),t.options)),extend(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},Class.include=function(t){return extend(this.prototype,t),this};var BaseClass=Class.extend({options:{name:"BaseClass",baseMap:null,currMaps:[],key:"default",hasAuth:!0,authFlag:"default"},initialize:function(e){e=e||{};var n=this;return n.hasOwnProperty("options")||(n.options=n.options?create(n.options):{}),Object.keys(e).forEach(function(t){hasExist(t,n.options)&&e[t]&&(n.options[t]=e[t])}),n.options},verificationCertificate:function(){$.ajax({type:"POST",async:!1,url:"http://192.168.66.6:28082/gisTopic/check",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({authFlag:this.options.authFlag,name:this.options.name}),success:function(t){if(!t)throw"未登入鉴权, 请联系管理员"},error:function(){throw"调用接口失败"}})},getIcon:function(t){t=t||{iconSize:[12,12],color:"#2f8"};try{return L.icon.pulse(t)}catch(t){return L.icon({iconUrl:"images/marker-icon.png",iconSize:[25,41],iconAnchor:[13,40],popupAnchor:[0,-24],tooltipAnchor:[20,-24],shadowSize:[41,41]})}},addEcharts:function(t,e,n){var r=document.getElementById(t),i=echarts.init(r);i.resize({height:n||"auto"}),i.setOption(e)},createGraph:function(t,e){var n,r={fillColor:"#f0534f",fillOpacity:.8,color:"#bababa",opacity:1,weight:1};null!=e&&Object.keys(e).forEach(function(t){r[t]=e[t]});var i=t.coordinates;if(t.hasnPolygon)n=L.polygon(i,r);else if(isDeep(i)||"object"==typeof i[0]){var o=void 0===t.hasFilling||t.hasFilling;n=1===i.length?L.marker(i[0],r):2<i.length&&o?L.polygon(i,r):L.polyline(i,r)}else n=L.marker(i,r);return n},hasExist:function(t,e,n){n=n||!1;for(var r=0;r<e.length;r++){var i=e[r];if(t===i[0])return n&&e.splice(r,1),i}return null},cacheMap:function(t,e){this.options.data=null;var n=this.options.currMaps;null===this.hasExist(t,n)&&n.push([t,e])},add:function(t){var e=this,n=e.options.currMaps,r=e.hasExist(t,n);null!==r&&(isArray(r[1])?r[1].forEach(function(t){e.options.baseMap.addLayer(t)}):e.options.baseMap.addLayer(r[1]))},del:function(t){var e=this.options.currMaps,n=this.hasExist(t,e,!0);null!==n&&(isArray(n[1])?n[1].forEach(function(t){t.remove()}):n[1].remove())}}),UtilsClass=BaseClass.extend({options:{name:"UtilsClass",hasAuth:!1}});L.getData=function(t){$.ajaxSettings.async=!1;var n=null;return $.get(t,function(t){var e=Papa.parse(t,{skipEmptyLines:!0,header:!0});n=e.data}),n};